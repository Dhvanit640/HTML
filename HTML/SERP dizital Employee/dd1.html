<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>

</head>
<body>
    <div><input type="text" id="daterange" class="form-control"></div>
    <script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <script>

$(function () {

    // Default current month
    var start = moment().startOf('month');
    var end = moment().endOf('month');

    function setLabel(start, end) {
        $('#daterange').val(
            start.format('MMM D, YYYY') + ' - ' + end.format('MMM D, YYYY')
        );
    }

    $('#daterange').daterangepicker({
        startDate: start,
        endDate: end,
        opens: 'left',
        autoApply: true,
        ranges: {
            'Today': [moment(), moment()],
            'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
            'Last 7 Days': [moment().subtract(6, 'days'), moment()],
            'Last 30 Days': [moment().subtract(29, 'days'), moment()],
            'This Month': [moment().startOf('month'), moment().endOf('month')],
            'Last Month': [
                moment().subtract(1, 'month').startOf('month'),
                moment().subtract(1, 'month').endOf('month')
            ]
        }
    }, function (start, end) {

    rangeStartDate = start.format('YYYY-MM-DD');
    rangeEndDate   = end.format('YYYY-MM-DD');

    // ðŸ”¥ AUTO RUN LAST SELECTED REPORT
    if (activeReport === 'meeting') {
        createmeeting_report();
    } 
    else if (activeReport === 'visit') {
        createvisit_report();
    }
    });

    // ðŸ”¥ set default month dates
    rangeStartDate = start.format('YYYY-MM-DD');
    rangeEndDate  = end.format('YYYY-MM-DD');

    setLabel(start, end);
});


window.addEventListener("pageshow", function (event) {

    // detect browser back / forward
    if (event.persisted || performance.getEntriesByType("navigation")[0].type === "back_forward") {

        var start = moment().startOf('month');
        var end   = moment().endOf('month');

        // reset picker
        $('#daterange').data('daterangepicker').setStartDate(start);
        $('#daterange').data('daterangepicker').setEndDate(end);

        $('#daterange').val(
            start.format('MMM D, YYYY') + ' - ' + end.format('MMM D, YYYY')
        );

        // reset global dates
        rangeStartDate = start.format('YYYY-MM-DD');
        rangeEndDate   = end.format('YYYY-MM-DD');

        // ðŸ”¥ reload default report
        if (activeReport === 'meeting') {
            createmeeting_report();
        } 
        else if (activeReport === 'visit') {
            createvisit_report();
        }
    }
});


    </script>
</body>
</html>