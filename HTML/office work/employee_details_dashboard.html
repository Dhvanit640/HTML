<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.1.1/css/all.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />

    <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2022.2.510/styles/kendo.common.min.css" />
    <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2022.2.510/styles/kendo.default.min.css" />
    <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2022.2.510/styles/kendo.default.mobile.min.css" />

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <!-- <script src="https://jsuites.net/v4/jsuites.js"></script>
    <link rel="stylesheet" href="https://jsuites.net/v4/jsuites.css" type="text/css" />   -->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.16.9/xlsx.full.min.js"></script>
    <!-- PDF Downlord link -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script> 

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    <script src="https://kendo.cdn.telerik.com/2022.2.510/js/kendo.all.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.24/jspdf.plugin.autotable.min.js"></script>


    <style>
         ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #DEE1E9;
            border-radius: 5px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
            border-radius: 5px;
        }

        * {
            scrollbar-width: thin;
            scrollbar-color: #DEE1E9 transparent;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            overflow-x: hidden;
            padding: 10px 10px 0px 10px;
            background: #F8FAFE;
        }
        .k-input:focus-within{
            color:black !important;
            border: 1px solid #cecece !important;
            border-radius: .25rem !important;
        }
        .main-nav{
            gap: 16px;
        }
        #main_tab .navdata.active{
            background: #FF8918 !important;
            color: #ffffff !important;
        }
        #main_tab .navdata{
            background: #ffffff !important;
            border: 1.5px solid #DEE1E9 !important;
            border-radius: 8px !important;
            padding: 5px 10px;
            color: #686E7A !important;
            gap: 10px;
            display: flex;
        }

        #profile-cards .card{
            /* border: none; */
            border: 1.5px solid #CED4E1;
            margin-bottom: 10px;
            transition: all .3s ease-in-out;
            box-shadow: 0 0 3px rgb(155 155 155 / 25%);
            /* border-radius: .5rem; */
            height: 557px;
            border-radius: 10px;
        }

        .leavecard.card{
            height: 213px !important;
        }

        #profile_tab .navdata{
            color: #7D8491;
            border: none;
            background: none;
            padding: 10px;
            font-size: 15px;
        }

        @media (max-width: 1490px) {
          #profile_tab .navdata{
              font-size: 13px;
          }
        }

        #profile_tab .navdata.active{
            background: #FFF3E8;
            color: #FF8918;
            border-bottom: 3px solid #FF8918;
        }

        #profile_tab .navbar{
            justify-content: center !important;
            padding-bottom: 0px !important;
        }

        #Attendancetablecard.card{
            border: 1.5px solid #CED4E1;
            border-radius: 10px;
            height: auto;
        }
        #project_timeline_card.card{
            border: 1.5px solid #CED4E1;
            border-radius: 10px;
            height: 100%;
        }
        #upcoming_meeting_card.card{
            border: 1.5px solid #CED4E1;
            border-radius: 10px;
            height: 100%;
        }
        #salary_overview_card.card{
            border: 1.5px solid #CED4E1;
            border-radius: 10px;
            height: auto;
        }

        .card{
            border: 1.5px solid #CED4E1;
            border-radius: 10px;
            height: 225px;
            padding: 0px;
        }

        .progressbar_myattendance .card{
            height: 100%;
        }
        .signin-out{
            flex: 1;
            display: flex;
            justify-content: flex-end;
            gap: 10px; 
            align-items: center;
        }

        #blue_btn{
            padding: 5px 14px;
            background: #5D51E2;
            color: #ffffff;
            border-radius: 6px;
            /* height: 30px; */
            font-size: 14px;
            border: 1px;
        }

        #signout_btn {
            border: 1px solid #5D51E2 !important;
            padding: 5px 14px;
            font-size: 14px;
            color: #5D51E2;
            border-radius: 6px;
            background: transparent;
        }

        #applyleave_btn{
            border: 1px solid #FF6F32 !important;
            padding: 5px 14px;
            font-size: 14px;
            color: #FF6F32;
            border-radius: 6px;
            background: transparent;
        }

        .card-heading {
            font-size: 1em;
            font-weight: 500;
            color: #000000;
            margin: 0px !important;
        }

        .form_btn{
            height: 55px;
            border-radius: 6px;
            /* width: 270px; */
            align-items: center;
            display: flex;
            justify-content: space-between;
            padding: 0px 12px;
            /* width: 352px; */
        }

        /* @media only screen and (max-width: 1700px) {
            .form_btn{
                width: 300px;
            }
        }

        @media only screen and (max-width: 1630px) {
            .form_btn{
                width: 280px;
            }
        }

        @media only screen and (max-width: 1530px) {
            .form_btn{
                width: 270px;
            }
        } */

        .form_btn.reimbursement{
            border: 1px solid rgba(236, 203, 195, 1) !important;
            background: rgba(255, 247, 245, 1) !important;
        }
        
        .form_btn.advance{
            border: 1px solid rgba(185, 229, 255, 1) !important;
            background: rgba(233, 247, 255, 1) !important;
        }
        .form_btn.activity{
            border: 1px solid rgba(227, 213, 250, 1) !important;
            background: rgba(247, 242, 255, 1) !important;
        }
        .form_btn.dsr{
            border: 1px solid rgba(190, 225, 215, 1) !important;
            background: rgba(245, 255, 252, 1) !important;
        }
        .form_btn.suggestions{
            border: 1px solid rgba(249, 208, 231, 1) !important;
            background: rgba(255, 245, 251, 1) !important;
        }
        .form_btn.sug{
            border: 1px solid rgba(255, 228, 184, 1) !important;
            background: rgba(255, 248, 233, 1) !important;

        }

        .upcomingbirthdays .item {
            background: rgb(249 248 255);
            border: 1px solid rgb(222 219 245);
            padding : 12px;
            /* margin-bottom: 15px; */
            margin-left: 0px;

            transition: all 0.1s ease-in-out;
            display: flex;
            -webkit-box-orient: horizontal;
            -webkit-box-direction: normal;
            flex-direction: row;
            flex-wrap: wrap;
            -webkit-box-align: center;
            align-items: center;
            color: inherit;
            border-radius: 5px;
            justify-content: space-between;
        }

        @media (max-width: 1490px) {
            .upcomingbirthdays .item{
                gap : 6px;
            }
        }
        
        .upcomingbirthdays ul{
            list-style: none;
            padding: 0px !important;
        }
        .UpcomingBirthdaydiv .item {
            background: rgb(249 248 255);
            border: 1px solid rgb(222 219 245);
            padding : 12px;
            /* margin-bottom: 15px; */
            margin-left: 0px;

            transition: all 0.1s ease-in-out;
            display: flex;
            -webkit-box-orient: horizontal;
            -webkit-box-direction: normal;
            flex-direction: row;
            flex-wrap: wrap;
            -webkit-box-align: center;
            align-items: center;
            color: inherit;
            border-radius: 5px;
            justify-content: space-between;
        }

        @media (max-width: 1490px) {
            .UpcomingBirthdaydiv .item{
                gap : 6px;
            }
        }
        
        .UpcomingBirthdaydiv ul{
            list-style: none;
            padding: 0px !important;
        }

        .employee-name, 
        .employee-designation {
            font-size: 15px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%;
            flex-grow: 1;
        }
        .employee-designation{
            font-size: 12px;
            color:grey; 
        }

        /* For larger screens (laptops/desktops) */
        @media (min-width: 1024px) and (max-width: 2000px) {
            .employee-name, 
            .employee-designation {
                width: 115px;
            }
        }
        @media (max-width: 1300px) {
            #profile_tab .navdata{
                padding: 10px 5px;
                font-size: 12px;
            }
            .profile-column{
                padding-left: 8px;
                padding-right: 0;
            }
            #blue_btn{
                padding: 5px 10px;
                font-size: 10px;
                width: max-content;
            }
            #signout_btn {
                padding: 5px 10px;
                font-size: 10px;
                width: max-content;
            }
            #applyleave_btn {
                padding: 5px 10px;
                font-size: 10px;
                width: max-content;
            }
            .signin-out{
                gap: 5px;
            }
        }
        @media (max-width: 1200px) {
            #profile_tab .navdata{
                padding: 10px 2px;
                font-size: 11px;
            }
            #main_tab .navdata{
                font-size: 14px;
            }
            .main-nav{
                gap: 10px;
            }
        }

        /* For tablets */
        @media (min-width: 768px) and (max-width: 1023px) {
            .employee-name, 
            .employee-designation {
                width: 60px;
            }
        }

        /* For mobile devices */
        @media (max-width: 767px) {
            .employee-name, 
            .employee-designation {
                width: 40px;
            }
        }

        #PendingleaveApproval .item {
            background: rgb(249 248 255);
            border: 1px solid rgb(222 219 245);
            padding : 8px 10px;
            /* margin-bottom: 15px; */
            margin-left: 0px;
            font-size: 15px;
            transition: all 0.1s ease-in-out;
            /* display: flex; */
            -webkit-box-orient: horizontal;
            -webkit-box-direction: normal;
            flex-direction: row;
            flex-wrap: nowrap;
            -webkit-box-align: center;
            align-items: center;
            color: inherit;
            border-radius: 5px;
            justify-content: space-between;
        }
        
        #PendingleaveApproval ul{
            list-style: none;
            padding: 0px !important;
        }

        .workanniversaries .item {
            background: rgba(255, 246, 245, 1);
            border: 1px solid rgba(255, 218, 218, 1);
            padding : 12px;
            /* margin-bottom: 15px; */
            margin-left: 0px;

            transition: all 0.1s ease-in-out;
            display: flex;
            -webkit-box-orient: horizontal;
            -webkit-box-direction: normal;
            flex-direction: row;
            flex-wrap: wrap;
            -webkit-box-align: center;
            align-items: center;
            color: inherit;
            border-radius: 5px;
            justify-content: space-between;
        }

        @media (max-width: 1490px) {
            .workanniversaries .item{
                gap : 6px;
            }
        }

        .workanniversaries ul{
            list-style: none;
            padding: 0px !important;
        }

        .Pending_Task .item {
            border: 1.5px solid rgba(222, 225, 233, 1);
            padding: 10px;
            margin-left: 0px;
            transition: all 0.1s ease-in-out;
            display: flex;
            -webkit-box-orient: horizontal;
            -webkit-box-direction: normal;
            flex-direction: row;
            flex-wrap: nowrap;
            -webkit-box-align: center;
            align-items: center;
            color: inherit;
            border-radius: 5px;
            justify-content: space-between;
        }

        .Pending_Task ul {
            list-style: none;
            padding: 0px !important;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .Pending_Task .view_btn{
            color: #5D51E2;
            border: 1px solid #5D51E2;
            padding: 5px 15px;
            background: #EFF3FF;
            border-radius: 6px;
        }
        .Pending_Task .done_btn{
            color:#10B981;
            border: 1px solid #10B981;
            padding: 5px;
            background: #DEFFF6;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 400;
        }

        .Upcoming_Meetings .item {
            border: 1.5px solid rgba(222, 225, 233, 1);
            padding: 12px 10px;
            /* margin-bottom: 15px; */
            margin-left: 0px;
            transition: all 0.1s ease-in-out;
            display: flex;
            -webkit-box-orient: horizontal;
            -webkit-box-direction: normal;
            flex-direction: row;
            flex-wrap: nowrap;
            -webkit-box-align: center;
            align-items: center;
            color: inherit;
            border-radius: 5px;
            justify-content: space-between;
        }
        #meeting_list_tbl .item {
            border: 1.5px solid rgba(222, 225, 233, 1);
            padding: 12px 10px;
            /* margin-bottom: 15px; */
            margin-left: 0px;
            transition: all 0.1s ease-in-out;
            display: flex;
            -webkit-box-orient: horizontal;
            -webkit-box-direction: normal;
            flex-direction: row;
            flex-wrap: nowrap;
            -webkit-box-align: center;
            align-items: center;
            color: inherit;
            border-radius: 5px;
            justify-content: space-between;
        }

        .Upcoming_Meetings ul {
            list-style: none;
            padding: 0px !important;
        }
        #meeting_list_tbl ul {
            list-style: none;
            padding: 0px !important;
        }

        .Upcoming_Meetings .now_btn{
            color: #4F44BF;
            border: unset;
            padding: 1px 4px;
            background: #E0DDFF;
            border-radius: 3px;
            font-size: 10px;
            font-weight: 600;
        }

        .Achievements .item {
            background: rgba(233, 247, 255, 1);
            border: 1px solid rgba(202, 228, 244, 1);
            padding : 12px;
            /* margin-bottom: 15px; */
            margin-left: 0px;

            transition: all 0.1s ease-in-out;
            display: flex;
            -webkit-box-orient: horizontal;
            -webkit-box-direction: normal;
            flex-direction: row;
            flex-wrap: wrap;
            -webkit-box-align: center;
            align-items: center;
            color: inherit;
            border-radius: 5px;
            justify-content: space-between;
        }
        .Achievements ul{
            list-style: none;
            padding: 0px !important;
        }

        .personalinfo_tit{
            font-size: 12px;
            color: #7D8491;
        }
        .com_det{
            border-radius: 6px;
            padding: 4px;
            display: flex;
            width: 30%;
            gap: 10%;
            font-size: 12px;
            align-items: center;
            font-weight: 500;
        }

        #main_tab .navbar{
            align-items: unset !important;
        }

        #upcoming_meetings_list .item.show-now {
            background-color: #F4F3FF;
        }
        #upcoming_meetings_list1 .item.show-now {
            background-color: #F4F3FF;
        }
        
        .notification{
            border-bottom: 1.27px solid #DCDEE4;
            flex-direction: row;
            display: flex;
            gap: 12px;
            padding: 10px 15px;
        }

        .modal-header .close {
            opacity: 1;
            position: absolute;
            top: 10px;
            right: 10px;
            background: unset;
            color: white;
            border: none;
            font-size: 25px;
        }
        .modal-header{
            padding: 0.4rem 1rem !important;
            text-align: center !important;
            align-items: center !important;
        }

        #myModal1 .modal-header{
            padding: 1rem !important; 
        }

        .profile-img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin: -50px auto 10px;
            display: block;
            border: 5px solid white;
        }

        .modal-body {
            text-align: center;
        }

        .modal-body h5 {
            margin-top: 10px;
            font-size: 1.5rem;
        }

        .modal-body p {
            margin: 0;
            color: gray;
        }

        #send_wish_popup.modal-footer {
            border-top: none;
            justify-content: center;
        }
        #wlcm_teamModal.modal-footer {
            border-top: none;
            justify-content: center;
        }
        #achivement_teamModal.modal-footer {
            border-top: none;
            justify-content: center;
        }
        #wlcm_teamModal .modal-content{
            border-radius: 22px !important;
        }
        #wlcm_teamModal .modal-header{
            padding: unset !important;
        }
        #send_wish_popup .modal-content{
            border-radius: 22px !important;
        }
        #send_wish_popup .modal-header{
            padding: unset !important;
        }

        /* ------- My Attendance page  */

        .info-box {
            padding: 10px;
        }
        .info-header {
            font-size: 14px;
            font-weight: 600;
            color: #343a40;
            margin-bottom: 5px;
        }
        .info-text {
            font-size: 14px;
            color: #6c757d;
            font-weight: 500;
        }
        
       #break_journey_table th, td {
            padding: 10px;
            text-align: center;
            border: 1px solid #dee2e6;
        }
       #break_journey_table td {
            border: 1px solid lightgray;
        }

        .btn-primary{
            border: 1px solid #5D51E2 !important;
        }

        #attendance_report_table thead{
            background-color: #E8ECF9;
        }
        #attendance_report_table thead th{
            color: #101010;
            text-align: center;
        }
        #attendance_report_table tbody td{
           border-left: 1px solid #CED4E1;
           text-align: center;
        }
        #attendance_report_table tr td:first-child {
            border-left: none;
        }

        #attendance_report_table tr td:last-child {
            border-right: none;
        }

        #attendance_report_table tbody tr:nth-child(odd){
            background-color: #F9F9FC;
        }

        .presentbar path{
            stroke-width: 10px !important;
        }
        #gauge0 path:nth-child(2){
            stroke: #27CCAE;
        } 
        #gauge04 path:nth-child(2){
            stroke: #FF5F98;
        } 
        #gauge06 path:nth-child(2){
            stroke: #577FFB;
        }
        #gauge03 path:nth-child(2){
            stroke: #FF8918;
        }
        #circularprogressbar1 path:nth-child(2){
            stroke: #27CCAE;
        } 
        #circularprogressbar2 path:nth-child(2){
            stroke: #FF5F98;
        } 
        #circularprogressbar3 path:nth-child(2){
            stroke: #577FFB;
        }
        #circularprogressbar4 path:nth-child(2){
            stroke: #FF8918;
        }
        #circularprogressbar5 path:nth-child(2){
            stroke: #FF5F98;
        } 
        #circularprogressbar6 path:nth-child(2){
            stroke: #27CCAE;
        } 
        #circularprogressbar7 path:nth-child(2){
            stroke: #577FFB;
        }
        #circularprogressbar8 path:nth-child(2){
            stroke: #FF8918;
        }
        .progress-items path {
            stroke-width: 10px;
        }
        .progress-round path {
            stroke-width: 10px;
        }
        .progress-items{
            font-size: 20px;
        }

         /* ------- My Team Page  */

        #table_one tr td {
            border: 1px solid #CED4E1 !important;
        }
        #table_two tr td {
            border: 1px solid #CED4E1 !important;
        }

        /* Profile Card Start >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> */

        .content .stats {
            display: flex;
            justify-content: space-between;
            text-align: center;
            padding: 30px 0 15px 0px;
            font-size: small;
            font-weight: 500;
        }

        .content .stats .info {
            background-color: #fff;
            line-height: 1.5;
            text-align: center;
            display: flex;
            border-radius: 100px;
            padding: 0px 10px;
            justify-content: center;
            align-items: center;
            border: none;
            font-size: 12px;
        }

        .content .stats .info.active {
            background-color: #5D51E2;
            color: white;
        }

        .content .stats :hover {
            background-color: #5D51E2;
            color: white;
            cursor: pointer;
        }

        .companyinfo {
            border: 1.5px solid #8397BB;
            border-radius: 10px;
            width: 95%;
            padding: 5px;
            margin: 10px 0px 0px 0px !important;
        }

        .companylogo {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .companyinfo .companyname {
            font-weight: 600 !important;
            font-size: 14px;
        }

        .companyinfo .companyview {
            color: #5D51E2;
            font-weight: 500;
            font-size: 12px;
        }

        .companyicon {
            color: #5D51E2;
            padding-left: 68px;
            padding-bottom: 5px;
            font-size: 12px;
        }

        @media (max-width: 1248px) {
            .company_page{
                margin-top: 3px !important;
            }
        }

        /* Profile Card End  */


        /* meeting module start */

        #meeting {
            border: 1.5px solid #8397BB;
            border-radius: 5px;
            height: 130px;
            opacity: 10px;
        }

        .fa-light.fa-calendar {
            color: #5D51E2;
            font-size: 20px;
            font-weight: 500;
            border-radius: 10px;
        }

        .upcomingmeeting {
            color: #5D51E2;
            font-weight: 600;
            width: max-content;
            font-size: 14px;
        }

        .button {
            width: auto;
            background: none;
            /* border: 1.5px solid #5D51E2; */
            border: 1.5px solid #8397BB;
            color: #5D51E2;
            padding: 6px 10px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            font-weight: 400;
            cursor: pointer;
            border-radius: 6px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* date button start */

        .applybutton {
            padding-right: 10px !important;
            font-size: 14px;
        }

        .dropbtn {
            background-color: none;
            color: black;
            padding: 3px 12px;
            font-size: 16px;
            border: 1px solid rgba(128, 128, 128, 0.8);
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #f1f1f1;
            min-width: 160px;
            overflow: auto;
            box-shadow: rgba(0, 0, 0, 0.16) 0px 3px 6px, rgba(0, 0, 0, 0.23) 0px 3px 6px;
            z-index: 1;
        }

        .dropdown-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }

        /* .dropdown a:hover {background-color: #ddd;} */

        .show {
            display: block;
        }

        /* date button end */

        /* #gauge-container .k-arcgauge-label,
        #gauge-container1 .k-arcgauge-label,
        #gauge-container2 .k-arcgauge-label,
        #gauge-container3 .k-arcgauge-label,
        #gauge-container4 .k-arcgauge-label,
        #gauge-container5 .k-arcgauge-label,
        #gauge-container6 .k-arcgauge-label,
        #gauge-container7 .k-arcgauge-label
        {
            left: 30px;
            top: 30px;
            font-size: 20px;
            font-weight: 500;
        } */
        .progress-items .k-arcgauge-label{
            position: absolute;
            text-align: center;
            padding: 0;
            margin: 0;
            align-items: center;
            display: flex;
            justify-content: center;
            width: 100%;
            height: 100%;
            left: 0px !important;
            top: 5px !important;
        }
        .progressbar {
            justify-content: space-evenly;

        }

        .progressbartext {
            display: flex;
            justify-content: center;
            font-weight: 500;
            font-size: 14px;
            margin-top: 13px;
        }

        /* meeting module end */


        /* image & Content start */

        .welcomebar {
            padding: 15px 0px;
        }

        .welcomeimg img {
            border-radius: 7px !important;
        }

        .title {
            font-size: 14px;
            font-weight: 600;
            line-height: 0.7;
            justify-content: start;
        }

        .detail {
            font-size: 12px;
            font-weight: 500;
            line-height: 1.2;
            opacity: 0.6;
            display: flex;
            justify-content: end;
        }

        /* The side navigation of birthday menu start */

        #selectbtn:hover{
            text-decoration: underline;
        }
        #joinbtn:hover{
            text-decoration: underline;
        }

        .sidenav {
            /* height: 100vh; */
            width: 0;
            position: fixed;
            z-index: 1000;
            top: 0;
            right: 0px;
            background-color: #ffffff;
            overflow-y: auto; /* Allow vertical scrolling */
            padding-top: 15px;
            transition: 0.5s;
            box-shadow: 0px 0px 50px #232931;
        }
        .backgroundmysidenav {
            display: none;
            background-color: #00000036;
            width: 100vw;
            height: 100vh; /* Set the height to cover the entire viewport */
            position: fixed; /* Change to fixed positioning */
            top: 0;
            left: 0;
            z-index: 996;
            backdrop-filter: blur(2px);
        }
        .sildercontainer{
        padding: 0px 40px;
        font-size: smaller;
        }

        .birthdaywish {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 10px;
            font-size: 20px;
            font-weight: 600px;
        }

        .wish {
            font-size: 20px;
            font-weight: 600px;
        }

        .wishbutton {
            width: max-content;
            background: none;
            border: 1.5px solid #5D51E2;
            color: #5D51E2;
            padding: 6px 10px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            font-weight: 500;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 6px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        table {
            font-family: arial, sans-serif;
            width: 100%;
        }

        td,
        th {
            /* border: 1px solid #dddddd; */
            text-align: left;
            padding: 8px;
        }

        .birthdayimg {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            object-fit: cover;
            position: absolute;
            bottom: 90%;
            left: 6%;
        }

        .container {
            display: block;
            position: relative;
            padding-left: 35px;
            margin-bottom: 12px;
            cursor: pointer;
            font-size: 22px;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* Hide the browser's default checkbox */
        .container input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }

        /* Create a custom checkbox */
        .checkmark {
            position: absolute;
            top: -1px;
            left: 0;
            height: 17px;
            width: 17px;
            border: 1px solid rgba(128, 128, 128, 0.7);;
            border-radius: 4px;
            animation-play-state: running;
        }

        /* On mouse-over, add a grey background color */
        .container:hover input~.checkmark {
            background-color: #ccc;
        }

        /* When the checkbox is checked, add a blue background */
        .container input:checked~.checkmark {
            background-color: #2196F3;
        }

        /* Create the checkmark/indicator (hidden when not checked) */
        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
        }

        /* Show the checkmark when checked */
        .container input:checked~.checkmark:after {
            display: block;
        }

        /* Style the checkmark/indicator */
        .container .checkmark:after {
            left: 5.5px;
            top: 3px;
            width: 4px;
            height: 9px;
            border: solid white;
            border-width: 0 3px 3px 0;
            -webkit-transform: rotate(45deg);
            -ms-transform: rotate(45deg);
            transform: rotate(45deg);
        }

        /* The side navigation of birthday menu start */

        /* image & Content end */

        /* daywisegraph start */

        .daywisegraph {
            width: 64%;
            height: 315px;
            /* border: 1px solid; */
            border-radius: 15px;
            box-shadow: rgba(0, 0, 0, 0.16) 0px 3px 6px, rgba(0, 0, 0, 0.23) 0px 3px 6px;
        }

        /* daywisegraph end */

        .hourswisegraph {
            width: 33%;
            height: 315px;
            /* height: 405px; */
            border-radius: 15px;
            box-shadow: rgba(0, 0, 0, 0.16) 0px 3px 6px, rgba(0, 0, 0, 0.23) 0px 3px 6px;
        }

        .projecttitle {
            position: relative;
            top: 13px;
            font-weight: 600;
            z-index: 1;
            font-size: 14px;
            justify-content: center;
            display: flex;
        }

        #noticemenu {
            background-color: white;
            display: none;
            position: absolute;
            top: 44px !important;
            right: 5px !important;
            width: 330px;
            max-height: 410px;
            overflow: auto;
            padding: 12px;
            border-radius: 5px;
            box-shadow: rgba(0, 0, 0, 0.16) 0px 3px 6px, rgba(0, 0, 0, 0.23) 0px 3px 6px;
            z-index: 999;
        }

        #noticeboard_profile {
            padding: 0px !important;
        }

        .notification.unread {
            background-color: #f2f2f2;  /* Light gray */
            border-radius: 6px;
            padding: 5px;
        }

        #newNotificationPopup {
        display: none;
        position: fixed;
        top: 55px;
        right: 30px;
        background-color: #fff;
        border: 1px solid #ccc;
        border-radius: 10px;
        padding: 15px;
        z-index: 9999;
        width: 280px;
        }
        
        #schedulermenu {
            background-color: white;
            display: none;
            position: absolute;
            top: 41px !important;
            right: 25px !important;
            width: 97%;
            height: 92vh;
            padding: 20px;
            border-radius: 10px;
            box-shadow: rgba(0, 0, 0, 0.16) 0px 3px 6px, rgba(0, 0, 0, 0.23) 0px 3px 6px;
            z-index: 999;
        }

        .ticket1:hover {
            background-color: #eef3f7;
        }
        
        #dsrentry hr{
            height: 5px;
            margin-bottom: 0px;
            border-radius: 10px;
        }

        #dsrentry table input{
            border: none;
        }

        #dsrentry input:focus {
            outline: none;
            outline-offset: none;
        }

        table#dsrtable 
        {
            border-collapse: separate;
            border-spacing: 0;
        }


        #dsrtable tbody td {
            /* border: solid 1px #000; */
            border: 1px solid rgba(128, 128, 128, 0.8);
            /* border-style: none solid solid none; */
            padding: 10px;
        }

        #dsrtable tbody tr:first-child td:first-child
         {
            border-top-left-radius: 10px !important;
            border-bottom-left-radius: 10px !important;
            border-style: solid none solid solid !important;
        }
        #dsrtable tbody tr:last-child td:first-child {
            border-bottom-left-radius: 10px;
            border-top-left-radius: 10px;
            border-right: none;
            
        }
        #dsrtable tbody > tr > td:last-child {
            border-top-right-radius: 10px;
            border-bottom-right-radius: 10px;
            border-left: none;
        }

        #dsrtable tbody > tr > td:first-child {
            border-top-left-radius: 10px !important;
            border-bottom-left-radius: 10px !important;
            border-style: solid none solid solid !important;
            border-left: 5px solid #FBC93E; 
        }

        #dsrtable tbody tr td:not(:first-child):not(:last-child)
        {
            border-style: solid none solid none;
        }

        .singledigit {
            top: 30px !important;
            left: 35px !important;
        }   

        /* .singleatt{
            left: 44px !important;
            top: 38px !important;
        }
        .doubleatt{
            left: 37px !important;
            top: 37px !important;
        } */

        span.k-combobox{
            /* width: 125px; */
        }
        .k-input-button, .k-input-button.k-button, .k-input-inner{
            height: 25px;
        }
        .k-input:focus-within{
            border: none;
            outline:none;
            outline-offset: none;
            background-color: none !important;
            box-shadow: none !important;
        }
        .k-input-button, .k-input-button.k-button{
            background: none;
        }
        .k-list-item.k-selected{
            color: #fff !important;
            background-color: #5D51E2 !important;
        }

        .k-task-summary-complete::after, .k-task-summary-complete::before, .k-task-summary::after, .k-task-summary::before 
        {
            content: none !important;
        }

        .k-gantt .k-gantt-toolbar,
        .k-gantt .k-gantt-header-wrap,
        .k-gantt .k-gantt-timeline .k-task-title,
        .k-gantt .k-gantt-timeline .k-task-title,
        .k-gantt .k-gantt-timeline .k-task-time,
        .k-gantt .k-gantt-timeline .k-task-time,
        .k-gantt .k-gantt-timeline .k-task-progress,
        .k-header .k-column-title .k-treelist-group .k-selectable{
            font-size: 12px !important; 
        }

        table.k-selectable, .k-grid-header-wrap{
            font-size: 12px;
        }

        .new_join thead{
            font-size: 14px !important;
        }
        
        .new_join tbody{
            font-size: 12px !important;
        }

        .birthday_wish thead{
            font-size: 14px !important;
        }

        .birthday_wish tbody{
            font-size: 12px !important;
        }

        #dsrtable thead{
            font-size: 14px !important;
        }

        #dsrtable tbody{
            font-size: 12px !important;
        }
        .imgbox{
            justify-content: center;
            align-items: center;
            display: flex;
        }
        .imgbox img{
            width: 100%;
        }
        .birthdaytable td,
        .welcometable td,
        .achivetable td{
            padding: 5px !important;
        }

        .birthdaytable tr:nth-child(even),.welcometable tr:nth-child(even),.achivetable tr:nth-child(even) {background-color: #e8f0fd;}
        
        .meetinglist, .pendingtasklist{
            display: flex;
            border: 1px solid gray;
            width: 99%;
            border-radius: 5px;
            align-items: center;
            gap: 30px;
            font-size: 12px;
            padding: 0px 10px;
        }

        .formbutton{
            border: 1.5px solid #8397BB;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            padding: 10px;
            font-size: 13px;
            font-weight: 600;
            box-shadow: -5px 7px 4px 0px #9ebff5;
        }

        .meetinglist:nth-child(odd), 
        .pendingtasklist:nth-child(odd){
            background-color: #e8f0fd;
        }
        .k-gantt .k-treelist .k-state-selected td{
            background-color: rgb(56 108 207);
        }
        .k-gantt .k-grid-content tr, .k-gantt-rows tr, .k-gantt-tasks tr {
        height: 38px !important;
        }
        .btn-close:focus{
            box-shadow: none !important;
        }
    </style>

    <!-- attendance report second tab style ------------------------------------------------------------------------------------------------------------------------------------------------------------->

    <style>
        .k-i-arrow-s:before {
            content: "\f107" !important;
            font-family: 'Font Awesome 5 Pro';
        }
        .custom-select:before{
            content: "\f107" !important;
            font-family: 'Font Awesome 5 Pro';
        }
        .custom-select {
            appearance: none;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5"/></svg>') no-repeat 95% center;
            background-position: 97% center;
            background-size: 25px;
        }
         #toast {
            visibility: hidden;
            min-width: 250px;
            margin-left: -125px;
            background-color: #4CAF50;
            color: white;
            text-align: center;
            border-radius: 5px;
            padding: 16px;
            position: fixed;
            z-index: 99999;
            left: 50%;
            top: 30px;
            font-size: 17px;
        }

        #toast.show {
            visibility: visible;
            animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }

        @keyframes fadein {
            from {top: 0; opacity: 0;}
            to {top: 30px; opacity: 1;}
        }

        @keyframes fadeout {
            from {top: 30px; opacity: 1;}
            to {top: 0; opacity: 0;}
        }


        .video-wrapper {
          position: relative;
          display: inline-block;
          width: 70%;
          height: 150px;
          margin-bottom: 10px;
        }
      
        .video-wrapper video {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }
      
        .video-wrapper::before,
        .video-wrapper::after,
        .video-wrapper div::before,
        .video-wrapper div::after {
          content: "";
          position: absolute;
          width: 30px; /* Adjust size as needed */
          height: 30px; /* Adjust size as needed */
          box-sizing: border-box;
          border-width: 5px;
          border-style: solid;
        }
      
        .video-wrapper::before {
          top: 0;
          left: 0;
          border-top-color: #5D51E2;
          border-left-color: #5D51E2;
          border-right: none;
          border-bottom: none;
        }
      
        .video-wrapper::after {
          top: 0;
          right: 0;
          border-top-color: #5D51E2;
          border-right-color: #5D51E2;
          border-left: none;
          border-bottom: none;
        }
      
        .video-wrapper div::before {
          bottom: 0;
          left: 0;
          border-bottom-color: #5D51E2;
          border-left-color: #5D51E2;
          border-top: none;
          border-right: none;
        }
      
        .video-wrapper div::after {
          bottom: 0;
          right: 0;
          border-bottom-color: #5D51E2;
          border-right-color: #5D51E2;
          border-top: none;
          border-left: none;
        }
      </style>
    <style>      
        body {
          font-family: "Roboto", sans-serif;
        }
        .progress-item {
          width: 100px;
          height: 140px;
          text-align: center;
    
        }
        /* th {
          font-family: "Montserrat", sans-serif;
        } */
        .table-line-bar {
          background: #eee;
          width: 100%;
          height: 4px;
          position: relative;
        }
        .table-line-bar:before {
          content: "";
          background: #eee;
          left: 0;
          width: 10px;
          height: 10px;
          border-radius: 100%;
          position: absolute;
          top: -3px;
          z-index: 1;
        }
        .table-line-bar:after {
          content: "";
          background: #eee;
          right: 0;
          width: 10px;
          height: 10px;
          border-radius: 100%;
          position: absolute;
          top: -3px;
          z-index: 1;
        }
        .line-bar-item {
          position: absolute;
          width: 0;
          background: #13c986;
          content: "";
          height: 4px;
          transition: all 0.5s ease;
        }
        .line-bar-item.half-day {
          width: 50%;
        }
        .line-bar-item.full-day {
          width: 100%;
        }
        .line-bar-item.half-day:before {
          content: "";
          background: #13c986;
          left: 0;
          width: 10px;
          height: 10px;
          border-radius: 100%;
          position: absolute;
          top: -3px;
          z-index: 3;
        }
        .line-bar-item.full-day:before {
          content: "";
          background: #13c986;
          left: 0;
          width: 10px;
          height: 10px;
          border-radius: 100%;
          position: absolute;
          top: -3px;
          z-index: 3;
        }
        .line-bar-item.full-day:after {
          content: "";
          background: #13c986;
          right: 0;
          width: 10px;
          height: 10px;
          border-radius: 100%;
          position: absolute;
          top: -3px;
          z-index: 3;
        }
        /* [data-role="surface"] {
          height: 100px !important;
        } */
        tbody,
        td,
        tfoot,
        th,
        thead,
        tr {
          border-color: inherit;
          border-style: solid;
          border-width: 0;
          vertical-align: middle;
        }
        .table-user-img {
          width: 45px;
          height: 45px;
          border-radius: 6px;
        }
        .user-img-small {
          width: 30px;
          height: 30px;
          border-radius: 50%;
        }
        .welcome-img{
            width: 30px;
            height: 30px;
            border-radius: 50%;
        }
        .icon {
          color: #13c986;
          font-size: 20px;
        }
        th {
          color: grey;
        }
        .color-absent {
          color: #ff0156;
        }
        .color-previlage-leave {
          color: #9c00cf;
        }
        .line {
          display: block;
          margin: 0px;
        }
        .line h2 {
          font-size: 15px;
          text-align: center;
          border-bottom: 2px solid #eee;
          position: relative;
        }
        .line h2 span {
          background-color: white;
          position: relative;
          top: 10px;
          padding: 0 10px;
        }
        .w-75 {
          width: 35% !important;
        }
        .progress-items {
            display: flex;
            justify-content: space-between;
            padding: 15px;
            overflow: auto;
        }

        .icon-pic {
          font-size: 20px;
          color: #646363;
        }
        .user-sign-in-details span {
          color: grey;
        }
        .k-progressbar-horizontal {
          width: 100%;
          height: 5px;
        }
        @media only screen and (min-width: 1200px) {
          .container,
          .container-lg,
          .container-md,
          .container-sm,
          .container-xl,
          .container-xxl {
            max-width: 1540px;
          }
        }
        .table-bordered>:not(caption)>*>* {
          border-width: 0px 0px 0px 0px;
        }
        .table>:not(caption)>*>* {
          padding: 0.5rem 0.5rem;
          background-color: var(--bs-table-bg);
          border-bottom-width: 1px;
          box-shadow: inset 0 0 0 9999px var(--bs-table-accent-bg);
          border-bottom-color: #cecece !important;
      }
      ::-webkit-scrollbar {
          width: 17px;
      }
      ::-webkit-scrollbar-thumb{
          
              width: 12px;
          margin-right: -20px;
          border-radius: 20px;
          border: 6px solid transparent;
          background-clip: content-box;
          /* background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0.44, rgb(122,153,217)), color-stop(0.72, rgb(73,125,189)), color-stop(0.86, rgb(28,58,148))); */
      }
      thead{
        position: sticky;
        top: 0;
        background-color: white;
        z-index: 9;
        outline: 1px solid #ddd !important;
      }
      .leave td:nth-child(even), .leave th:nth-child(even) {
        border-width: 0px 1px;
        padding: 5px 10px 0px;
        text-align: left;
      }
      .media-object {
        height: 30px;
        width: 30px;
      }
      .media {
        display: flex;
        align-items: flex-start;
      }
      .enter-time{
        display: flex;
        flex-direction: column;
        text-align: center;
        font-size: 12px !important;
      }
      .exit-time{
        display: flex;
        flex-direction: column-reverse;
        text-align: center;
        font-size: 12px !important;
      }
      .btn_focus.active.focus, .btn_focus.active:focus,.btn_focus.focus, .btn_focus:active.focus,.btn_focus:active:focus, .btn_focus:focus {
        outline: none;
        box-shadow: none;
        background-color: white;
      }
    .bdy-input:focus{
       outline: none;
    }
    @media (max-width: 1330px) {
        .com_det {
            flex-direction: column;
            gap: 4px;
        }
    }
    
     .dailyattendance-card {
      border: 2px solid #dcdcdc;
      border-radius: 10px;
      padding: 8px;
      background: rgb(249 248 255);
      /* box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); */
    }

    .attendance-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #e0e0e0;
      padding-bottom: 10px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }

    .attendance-info-list {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
    }

    .attendance-info-list li {
      font-size: 14px;
      position: relative;
      padding-left: 12px;
    }

    .attendance-info-list li:not(:first-child)::before {
      content: "";
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      height: 14px;
      width: 1px;
      background-color: #ccc;
    }

    .status-badge {
      /* background-color: #d4f5e9;
      color: #10b981;
      border: 1px solid #10b981; */
      border-radius: 6px;
      padding: 2px 12px;
      font-size: 12px;
      font-weight: 500;
    }

    .main-contentdailyattd {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
    }

    .left-section {
      flex: 1;
      min-width: 0;
    }

    .summary-section {
      width: 250px;
      border-left: 1px solid #e0e0e0;
      padding-left: 20px;
    }

    /* .row-group {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 50px;
      padding-bottom: 15px;
    } */

    .row-group.border-bottom {
      border-bottom: 1px solid #e0e0e0;
      margin-bottom: 10px;
    }

    /* .col-section {
      flex: 1;
      min-width: 200px;
    } */

    .row-group {
    display: flex;
    flex-wrap: nowrap; /*  Prevent wrapping in row */
    justify-content: space-between;
    gap: 50px; /* Reduce gap to allow more content in one line */
    padding-bottom: 15px;
    }

    .col-section {
    flex: 1 1 0; /* flex-grow:1, flex-shrink:1, flex-basis:0 */
    min-width: 0; /* Allow shrinking below 200px */
    }

    .text-truncate-hover {
      font-size: 13px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      display: block;
      cursor: default;
      font-weight: 600;
    }

    .dailyattdphoto {
      width: 40px;
      height: 40px;
      border-radius: 25%;
      object-fit: cover;
      border: 1px solid #ddd;
    }

    .summary-item {
      font-size: 14px;
      margin-bottom: 10px;
    }

    .timeline-bar {
      height: 6px;
      background: #10b981;
      border-radius: 3px;
      margin: 5px 0;
    }

    @media (max-width: 768px) {
      .main-contentdailyattd {
        flex-direction: column;
      }
      
 .summary-section {
        border-left: none;
        border-top: 1px solid #e0e0e0;
        margin-top: 15px;
        padding-left: 0;
        padding-top: 15px;
      }
    }

    @media (max-width: 1300px){
      .attendance-info-list {
        gap: 10px;
      }
      .attendance-info-list li {
        font-size: 12px;
        padding-left: 8px;
      }
      .dailyattd-status, .status-badge{
        font-size: 12px;
      }
    }


  /* @media (min-width: 768px) {
    .row-group {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }
    .col-section {
      flex: 1 1 30%;
      min-width: 200px;
    }
  }

  @media (max-width: 767.98px) {
    .row-group {
      display: block;
    }
    .col-section {
      width: 100%;
      margin-bottom: 10px;
    }
  }

  .dailyattdphoto {
    max-width: 100px;
    height: auto;
    border-radius: 4px;
  }

  .text-truncate-hover {
    display: inline-block;
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  } */


    </style>

    <!-- ---------------------------------------------------third tab my performance tab-->
    <style>
        #dsr_work_analysis_table tr{
            border: 1px solid #ccc;
            
        }
        #dsr_work_analysis_table td{
            text-align: center !important;
            border: 1px solid #CED4E1 !important;
        }
        #dsr_work_analysis_table{
            font-size: 12px !important;
        }
        #location_analysis_table tr{
            border: 1px solid #ccc;
            
        }
        #location_analysis_table td{
            text-align: center !important;
            border: 1px solid #CED4E1;
        }
        #location_analysis_table thead td{
           color: #101010;
           font-weight: 500;
        }
        #location_analysis_table{
            font-size: 12px !important;
        }
        #location_analysis_table thead{
            background-color: #E8ECF9 !important;
        }
        #dsr_work_analysis_table thead{
            background-color: #E8ECF9 !important;
        }
        #workchart {
            width: 100%;
            height: 150px;
        }
        .holiday_div ul{
            list-style: none;
            padding: 0px !important;
        }
        .holiday_div .item{
            border: 1.5px solid rgba(222, 225, 233, 1);
            padding: 12px 10px;
            margin-left: 0px;
            gap:20px;
            transition: all 0.1s ease-in-out;
            display: flex;
            -webkit-box-orient: horizontal;
            -webkit-box-direction: normal;
            flex-direction: row;
            flex-wrap: nowrap;
            -webkit-box-align: center;
            align-items: center;
            color: inherit;
            border-radius: 5px;
        }

        #dsr_work_analysis_table thead th {
            text-align: center !important;
            border: 1px solid #CED4E1 !important;
            color: #101010;
            font-weight: 500;
        }
        #project_wise_hours_popup td, #weekly_dsr_popup td, #dsr_work_analysis_popup td, #location_analysis_popup td{
            text-align: center;
            font-size: 12px;
        }

        .expandbtn .btn-default{
            color: #5D51E2 !important;
            background-color: transparent !important;
            border: none !important;
            font-size: 17px !important;
        }
        .expandbtn .table{
            /* border: 1px solid gray; */
            border : 1px solid #eee;
            border-radius: 10px !important;
        }
        .expandbtn .table>thead>tr.info>th{
            background: #EEEFFF !important;
        }
    </style>



    <!-- My Team Third tab style -->
    <style>
        *[onclick]{
            cursor: pointer;
        }
       
        .box-shadow-box {
            padding: 15px 15px 15px 15px;
            box-shadow: 2px 0px 10px 0px #b1aeae;
            border-radius: 12px;
        }

        .myteam-header-filter{
            padding: 10px 10px 10px 10px;
            border-radius: 10px;
            /* display: flex; */
            display: none;
            align-items: center;
            justify-content: space-between;
            margin-top: 10px; 
            height: 60px;
            gap: 2rem;
        }

        .input-wrapper{
            --place-holder:'';
            position: relative;
            border-radius: 4px;
            overflow: hidden;
            font-size: 14px;
        }
        .input-wrapper  input {
            font-size: inherit;
            height: 25px;
        }
        .input-wrapper::before{
            content: var(--place-holder);
            position: absolute;
            z-index: 9;
            width: 100%;
            height: 100%;
            font-size: 14px;
            background: lightgray;
            color: gray;
            cursor: no-drop;
            padding: 4px 20px;
            text-transform: capitalize;
        }
        .input-wrapper.active::before{
            opacity: 0;
            width: 0;
            height: 0;
            z-index: -1;
        }
        .input-style{
            font-size: 14px;
            color: gray;
            padding: 2px 8px;
            border-radius: 4px;
            border: 1px solid rgb(187, 187, 187);
        }
        .input-focus:focus-within{
            border: 3px solid rgb(45 101 200 / 40%);
        }
        #pills-Team .k-input, #pills-Team .k-widget.k-input{
            border-radius: inherit;
            border: 1px solid rgb(187, 187, 187) !important;
        }

        .loading{
            position: relative !important;
        }
        
        .loading::before{
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 9999;
            background-color: white;
            transition: all 0.3s ease-in-out;
            animation: loadingmostion infinite 3s forwards;
        }
        .loading::after{
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 9998;
            background-color: white;
            transition: all 0.3s ease-in-out;
        }

        @keyframes loadingmostion {
            0%{
                background-color: gray;
            }
            50%{
                background-color: rgba(128, 128, 128, 0.5);
            }
            100%{
                background-color: gray;
            }
        }

        .progressbar {
            justify-content: space-evenly;

        }

        .progressbartext {
            display: flex;
            justify-content: center;
            font-size: 12px;
            font-weight: 500;
            margin-bottom: 0px !important;
        }

        .k-progressbar-horizontal {
            width: 100%;
            height: 5px;
        }

        /* #gauge-container .k-arcgauge-label,
        #gauge-container1 .k-arcgauge-label,
        #gauge-container2 .k-arcgauge-label,
        #gauge-container3 .k-arcgauge-label,
        #gauge-container4 .k-arcgauge-label,
        #gauge-container5 .k-arcgauge-label,
        #gauge-container6 .k-arcgauge-label,
        #gauge-container7 .k-arcgauge-label {
            left: 30px !important;
            top: 30px !important;
        } */

        table {
            width: 100%;
        }

        .datetd {
            border: 1px solid #CED4E1;
            font-size: 14px;
        }

        .proftable {
            border: 1px solid #dddddd;
            text-align: left;
            font-size: 12px;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 150px;
        }

        #table_one table thead .proftable{
            padding: 12px !important;
        }

        #profile_name td{
            font-size: 12px;
        }

        #profile_name tr td{
            padding: 10px !important;
        }

        #profile_name tr:nth-child(odd){
            background-color: #F9F9FC;
        }
        #table_two_tbody tr:nth-child(odd){
            background-color: #F9F9FC;
        }

        .imgspan>img {
            border-radius: 50%;
            width: 25px;
            height: 25px;
        }

        .calendar_tr {
            height: 43.5px;
        }

        .onleave {
            background-color: white;
            font-size: small;
            color: #FD8800;
        }
        .on_mismatch {
            background-color: white !important;
            color: #000b65 !important;
            font-size: medium;
        }
        .company_holiday {
            background-color: white !important;
            color: #FDD835 !important;
            font-size: medium;
        }
        .absent {
            background-color: white;
            color: red;
            font-size: larger;
        }

        .present {
            background-color: white;
            color: #089E47;
            font-size: larger;
        }

        .on_od {
            background-color: white;
            font-size: small;
            color: #A4CA41;
        }

        .half_day {
            background-color: white;
            font-size: small;
            color: #4079CA;
        }

        .late {
            background-color: white;
            font-size: small;
            color: #AC1BFE;
        }

        .weekoff {
            background-color: white;
            font-size: small;
            color: #808080;
        }
        .Early{
            background-color: white;
            font-size: small;
            color: #FFA500;
        }

        .dash {
            background-color: white;
            font-size: larger;
            color: darkred;
        }
        .paidleave {
            background-color: white;
            font-size: larger;
            color: #A4CA41;
        }
        .unpaidleave{
            background-color: white;
            font-size: larger;
            color: #FD8800;
        }
        .sickleave{
            background-color: white;
            font-size: larger;
            color: #AE9487;
        }
        .casualleave{
            background-color: white;
            font-size: larger;
            color: #8FA4FD;
        }
        .od{
            background-color: white;
            font-size: larger;
            color: #f74a59;
        }
        .lwp{
            background-color: white;
            font-size: larger;
            color: #2add5d ;
        }
        .compoff{
            background-color: white;
            font-size: larger;
            color: #4ca1e3  ;
        }
        .previlageleave{
            background-color: white;
            font-size: larger;
            color: #9502CD;
        }

        .vl {
            border-left: 1px solid gray;
            height: 300px;
            margin-top: 50px;
        }
        .vs {
            border-left: 1px solid gray;
            height: 120px;
        }
         .btn:focus{
           outline: 0px;
           box-shadow: none;
        }
        .activemyteam{
            background-color: #5D51E2;
            color: white;
        }
         .bg_imgss {
            background-image: url('https://login.autonomouserp.com/strategicerp/pages/telecalling/charts_files/calendar_icon.svg');
            background-repeat: no-repeat;
            background-position: right;
            width: 23px;
            color: transparent;
            border: none;
            background-size: 23px;
            cursor: pointer;
        }
        /* .daterangepicker{
            z-index: 99999 !important;
        } */
        .bg_imgss:focus {
            border: none;
            box-shadow: none;
            outline: none;
        }
        .myteam_approval_select.active{
            background: linear-gradient(135deg,#5D51E2 4%, transparent 4%);
        }
        /* ul.dropdown-menu li.myteam_approval_select.active{
            background: linear-gradient(135deg,#5D51E2 4%, transparent 4%);
        } */
        .proftableleave{
            border: 1px solid #dddddd;
            text-align: left;
            /* padding: 9.5px; */
            padding: 6.5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 150px;
        }
        .k-scheduler-table .k-today{
            background-color: #ffb891 !important;
        }
        .k-event{
            background: transparent !important;
            border-color: transparent !important;
        }
        .jcalendar-controls{
            display: none !important;
        }

        .calendar-icon {
            display: inline-block;
            vertical-align: middle;
            margin-left: -25px; /* Adjust this value to your preference */
            cursor: pointer;
        }
        .dropdown-menu.show {
            width: 335px !important;
        }
        .k-input-inner {
            font-size: 12px !important;
        }

        .meetingmyteam{
            display: flex;
            gap: 50px;
            align-items: center;
            padding: 5px;
            border: 1px solid #8397BB;
            border-radius: 5px;
            margin-bottom: 10px;
            font-size: 12px;
            color: #2967CD;
        }
        .meetingmyteam:hover{
            background: #2967CD;
            color: white;
        }
        .k-tooltip{
            /* background: transparent !important; */
            padding: 10px !important;
            margin : 0px !important;
            /* border: 1px solid #5D51E2 !important; */
            border-radius: 5px !important;
            font-size: 0.8em;
        }
        .k-event, .k-event .k-link, .k-more-events, .k-task-complete, .k-task-single{
            height: max-content !important;
            font-size: 12px !important;
        }
    </style>

    <!-- fourth Tab Salary & Benefits-->
    <style>
        .k-timeline .k-timeline-flag{
            background-color: #5D51E2 !important;
            color: #fff;
            border-radius: 5px !important;
        }
        .k-timeline-horizontal .k-timeline-flag::after{
            background-color: #5D51E2 !important;
        }
        .k-timeline .k-timeline-circle{
            background-color: #5D51E2 !important;
        }
        .k-timeline-horizontal .k-card{
            /* width: max-content !important; */
        }
        .box-shadow-boxsb{
            padding: 10px;
            border: 1.5px solid #CED4E1;
            border-radius: 10px;
            background-color: #FFFFFF;
        }
        
        .flexrow {
            display: flex;
            flex-flow: row wrap;
        }
        
        .flexrow.row-7-el > .element  {
            flex: 0 1 calc(100%/7  - 16px);
            max-width: calc(100%/7  - 16px);
        }
        .element {
        margin: 8px;
        text-align: center;
        }

        .outline {
        outline: auto green;
        }

        .sfsidenav {
            height: 100vh;
            width: 0;
            position: fixed;
            z-index: 1000;
            top: 0;
            right: 0px;
            background-color: #ffffff;
            overflow-y: auto; /* Allow vertical scrolling */
            padding-top: 15px;
            transition: 0.5s;
            box-shadow: 0px 0px 50px #232931;
        }
        .sfsidenav1 {
            height: 100vh;
            width: 0;
            position: fixed;
            z-index: 1000;
            top: 0;
            right: 0px;
            background-color: #ffffff;
            overflow-y: auto; /* Allow vertical scrolling */
            padding-top: 15px;
            transition: 0.5s;
            box-shadow: 0px 0px 50px #232931;
        }

        /* #sbtable td{
            text-align: center !important;
            border: 1px solid lightgray !important;
        } */

        #sftableloan td,
        #sftableclaim td,
        #sftableiou td,
        #sftableincentive td {
            padding: 3.5px 10px;
            border-width: 1px;
            border-style: solid;
            border-color: #CED4E1;
        }


        .sbtable {
            position: relative;
            width:100%;
            z-index: 1;
            margin: auto;
            overflow: auto;
            height: 350px;
            /* scrollbar-width: none; */
        }
        .sbtable table {
            width: 100%;
            min-width: 1280px;
            margin: auto;
            border-collapse: separate;
            border-spacing: 0;
        }
        .table-wrap {
            position: relative;
        }
        .sbtable th,
        .sbtable td {
            padding: 5px 10px;
            border: 1px solid #CED4E1 !important;
            vertical-align: top;
            text-align: center;
        }
        .sbtable thead th {
            background: #ffffff;
            color: black;
            position: -webkit-sticky;
            position: sticky;
            top: 0;
            border: none !important;
        }
        /* safari and ios need the tfoot itself to be position:sticky also */
        .sbtable tfoot,
        .sbtable tfoot th,
        .sbtable tfoot td {
            position: -webkit-sticky;
            position: sticky;
            bottom: 0;
            background: #ffffff;
            color: black;
            z-index:4;
        }

        #sbtable tbody td tr:nth-child(odd){
            background-color: #F9F9FC;
        }

        th:first-child {
            position: -webkit-sticky;
            position: sticky;
            left: 0;
            z-index: 2;
        }
        thead th:first-child,
        tfoot th:first-child {
            z-index: 5;
        }

        #salarytable tbody td{
            border: 1px solid lightgray !important;
        }

        #salarytable table thead tr td:first-child
        {
            border-top-left-radius: 10px;
        }

        #salarytable table thead tr td:last-child
        {
            border-top-right-radius: 10px;
        }

        #salarytable table tfoot tr td:first-child
        {
            border-bottom-left-radius: 10px;
        }

        #salarytable table tfoot tr td:last-child
        {
            border-bottom-right-radius: 10px;
        }

        #salarytable table tfoot tr{
            border-bottom: none !important;
        }

        #taxcal tr td:nth-last-child(-n + 2) {
            border: 1px solid lightgray !important;
            text-align: right;
        }

        #taxcal tr td:first-child {
            text-align: right;
        }
        
        #taxcal tr{
            border-bottom: none !important;
        }

        #taxdec tr td:nth-last-child(-n + 2) {
            border: 1px solid lightgray !important;
            text-align: right;
        }

        #taxdec tr td:first-child {
            text-align: right;
        }
        
        #taxdec tr{
            border-bottom: none !important;
        }

        .taxbox1{
            width: 33%;
            background-color: #FFAD95;
            height: 500px;
            display: flex;
            justify-content: center;
            border-radius: 10px;
            box-shadow: 0 0 0.25em 0.25em rgba(0, 0, 0, 0.25);
            font-size: 12px;
        }
        .taxbox2{
            width: 33%;
            background-color: #66CBFF;
            height: 500px;
            display: flex;
            justify-content: center;
            border-radius: 10px;
            box-shadow: 0 0 0.25em 0.25em rgba(0, 0, 0, 0.25);
            font-size: 12px;
        }
        .taxbox3{
            width: 33%;
            background-color: #C29AE0;
            height: 500px;
            display: flex;
            justify-content: center;
            border-radius: 10px;
            box-shadow: 0 0 0.25em 0.25em rgba(0, 0, 0, 0.25);
            font-size: 12px;
        }

        #sbtable thead,
        #sbtable tfoot {
            font-size: 14px;
        }

        
        #sbtable thead tr td{
            border: none;
        }

        #sbtable tbody{
            font-size: 12px;
        }
        #attendance_shift_table td{
            border: 1px solid #ccc;
        }
    </style>

    <!-- fifth tab Employee Growth History style-->
    <style>
        #gsbody table tbody tr td{
            border: 1px solid #CED4E1;
            text-align: center;
        }
        #gsbody table thead tr{
            background-color: #E8ECF9;
            border-top-right-radius: 6px;
            border-top-left-radius: 6px;
        }
        #gsbody table thead tr td{
            text-align: center;
        }
        #achievetable td{
            border: 1px solid #CED4E1;
        }
        #achievetable{
            position: relative;
            width: 100%;
            z-index: 1;
            margin: auto;
            overflow: auto;
            height: 245px;
            scrollbar-width: none;
            font-size: 12px;
        }
        #achievetable tbody {
            font-size: 12px;
        }
        #achiev td{
            border: 1px solid #CED4E1;
        }
        #achiev thead tr{
            font-size: 12px;
            font-weight: 600;
        }
        /* #achievetable table{
            width: 100%;
            min-width: 100%;
            margin: auto;
            border-collapse: separate;
            border-spacing: 0;
        } */

        /* .box-shadow-box{
            padding: 15px 15px 15px 15px;
            box-shadow: 2px 0px 10px 0px #b1aeae;
            border-radius: 10px;
            height: 100px;
        }

        .k-timeline-scrollable-wrap{
            height: 120px !important;
        } */

        .curved-border {
            width: auto;
            height: 204px;
            background-color: white;
            padding: 15px;
            /* box-shadow: rgba(0, 0, 0, 0.2) 0px -37px 7px -28px inset; */
            /* border-radius: 0 0 100% 100% / 0 0 20% 20%; */
        }

        .k-timeline-horizontal .k-timeline-events-list .k-timeline-scrollable-wrap{
            height: 120px !important;
        }

        /* #achiev thead tr td:first-child
         {
            border-top-left-radius: 10px !important;
        }

        #achiev thead tr td:last-child
        {
            border-top-right-radius: 10px !important;
        } */

        .Segment{
            width: max-content;
            background: #CAB1FA;
            border-radius: 20px;
            padding: 0px 10px;
        }

        .highsale{
            width: max-content;
            background: #F79BCF;
            border-radius: 20px;
            padding: 0px 10px;
        }

        .bestperfo{
            width: max-content;
            background: #A9C1EA;
            border-radius: 20px;
            padding: 0px 10px;
        }
        .card-main-eg{
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            justify-content: start;
            gap: 10px;
        }
        .card-body-eg{
            flex: 0 0 45%;
        }

        .card-body-eg > span {
            text-transform: capitalize;
            font-size: large !important;
        }
        .w14pct{
            width: 100%;

        }

        .header_egh
        {
            font-size: 15px;
        }

        #yearnumber, #promotionsnumber, #awardsnumber , #increamentsnumber
        {
            font-size: 20px !important;
        } 

        #achiev thead{
            font-size: 14px;
        }

        #achiev tbody{
            font-size: 12px;
        }

        #gsbody thead{
            font-size: 12px;
            font-weight: 600;
        }

        #gsbody tbody{
            font-size: 12px;
        }
        /* signin model css  */
        #exampleModalCenter .modal-lg {
            width: max-content;
        }

        /* calender focus dropdown change css */
        /* Base style for the input */
        .k-input {
        border: 1px solid #ccc; /* Default border color */
        padding: 4px;
        outline: none;
        transition: border-color 0.3s ease;
        border-radius: 6px;
        }

        /* Focus style for the input */
        .k-input:focus {
        border-color: #ccc; /* Border color on focus */
        box-shadow: 0 0 3px #ccc; /* Outline shadow color on focus */
        }
        #dsrtablechart tr td{
            border:1px solid #ccc;
        }
        #dsrtablechart thead{
            background-color:#E8ECF9;
        }
        .approve-reject-btn
        {
            padding: 4px 10px;
            font-size: 13px;
            width: max-content !important;
        }
        .kendo_input_project_login input.k-input-inner {
            border: 0 !important;
            margin-bottom: 0px !important;
        }
        .k-circulargauge .gauge-label {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%; /* Full width to utilize flexbox centering */
            height: 100%; /* Full height to utilize flexbox centering */
            position: absolute;
            font-weight: bold;
            font-size: 18px; /* Default size */
            white-space: nowrap; /* Avoid line wrapping */
        }

        .table-container {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #ddd;
            margin: 20px;
            border-radius: 8px;
        }
        .no-data{
            font-size: 12px;
        }
        .no-data-image{
            width: 50px;
        }
        .custom-table {
            width: 100%;
            border-collapse: collapse;
            text-align: left;
        }

        .custom-table thead tr {
            position: sticky;
            top: 0;
            color: #fff;
            z-index: 1;
            background-color: #E8ECF9;
        }

        .custom-table th, .custom-table td {
            padding: 10px 15px;
            border: 1px solid #ddd;
        }

        .custom-table tbody tr:nth-child(odd) {
            background-color: #f2f2f2;
        }
        .k-button-solid-base:active
        {
            border-color: rgb(93 81 226) !important;
            color: #fff;
            background-color: rgb(93 81 226) !important;
        }
        .tax-btn{
            border: 1px solid #5D51E2;
            padding: 6px;
            border-radius: 9px; 
            background: transparent; 
            color: #5D51E2;
             cursor: pointer; 
             font-size: 14px;
             transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
        }
        .tax-btn:hover{
            background-color: #5D51E2;
            color: #ffffff;
        }
        .employeenamelist{
            font-size:15px; 
            white-space: nowrap; 
            overflow: hidden; 
            text-overflow: ellipsis; 
            width: 120px;
        }

        @media (max-width: 1024px) {
            .employeenamelist {
                font-size: 14px;
                width: 80px;
            }
        }

        /* For screens smaller than 768px (tablets) */
        @media (max-width: 768px) {
            .employeenamelist {
                font-size: 13px;
                width: unset;
            }
        }

        /* For screens smaller than 480px (mobile phones) */
        @media (max-width: 480px) {
            .employeenamelist {
                font-size: 12px;
                width: 30px;
            }
        }
        #loanreceived td,
        #loanadrepaid td,
        #reimclaimsubmit td,
        #reimclaimsettled td,
        #ioupaid td,
        #ioubillsettled td,
        #incenclaim td,
        #incensettled td{
            text-align: center;
        }

        @media (max-width : 1200px)
        {
            .attendancelable{
                gap: 8px !important;
            }
        }
    </style>
<script>
    // Get the query string part of the URL
const queryString = window.location.search;

// Parse the query string
const urlParams = new URLSearchParams(queryString);

// Get individual parameters
window.token = urlParams.get('token');
window.targetcloud = (urlParams.get('targetcloud')!='' && urlParams.get('targetcloud')!=null)?urlParams.get('targetcloud'): top.document.forms[0]["cloudcode"].value;//urlParams.get('targetcloud');   // "30"
window.targetuser = (urlParams.get('targetuser')!='' && urlParams.get('targetuser')!=null)?urlParams.get('targetuser'):top.document.forms[0]["username"].value;
window.originalusername = (urlParams.get('targetuser')!='' && urlParams.get('targetuser')!=null)?urlParams.get('targetuser'):top.document.forms[0]["originalusername"].value;

window.loginname = (urlParams.get('loginname')!='' && urlParams.get('loginname')!=null)?urlParams.get('loginname'):'';
window.googleapikey = (urlParams.get('googleapikey')!='' && urlParams.get('googleapikey')!=null)?urlParams.get('googleapikey'):top.$("[name='GoogleApiKey']").val();
window.infivereuserid = (urlParams.get('useridInfiverse')!='' && urlParams.get('useridInfiverse')!=null)?urlParams.get('useridInfiverse'):top.document.forms[0]['userid'].value;
window.originaluserid = (urlParams.get('useridInfiverse')!='' && urlParams.get('useridInfiverse')!=null)?urlParams.get('useridInfiverse'):top.document.forms[0]['originaluserid'].value;

console.log(window.targetuser, window.targetcloud,window.googleapikey,window.loginname,window.infivereuserid);


    </script>
</head>

<body style="padding: 10px; overflow-x: hidden;background-color:#F8FAFE;">
    <div>
        <div class="modal" id="loader-html" style="/* backdrop-filter: blur(2px); */display: block;background: #ffffff66; display:block; " aria-modal="true" role="dialog">
            <div class="modal-dialog modal-fullscreen" style="position:absolute;right:0;text-align: center;">
                <div style="display: flex;justify-content: center;align-items: center;height: -webkit-fill-available;">
                    <div style="width: fit-content;">
                        <img src="./pages/zanex/HTML/HTML/assets/images/loader.svg" class="loader-img" alt="Loader" onerror="this.src='images/ITAakash.png'">
                    </div>                        
                </div>
            </div>
        </div>
        <div class="d-flex">
            <div id="main_tab" class="col-md-12">
                <nav class="navbar">                  
                    <ul class="nav nav-pills mb-3 main-nav" id="pills-tab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="navdata" id="pills-Profile-tab" data-bs-toggle="pill" data-bs-target="#pills-Profile" type="button" role="tab" aria-controls="pills-Profile" aria-selected="true" onclick="myprofile()"><span><i class="fa-regular fa-user"></i></span>My Profile</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class=" navdata" id="pills-Attendance-tab" data-bs-toggle="pill" data-bs-target="#pills-Attendance" type="button" role="tab" aria-controls="pills-Attendance" aria-selected="false" onclick="attendance()"><span><i class="fa-solid fa-clock-rotate-left"></i></span>My Attendance</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class=" navdata" id="pills-Performance-tab" data-bs-toggle="pill" data-bs-target="#pills-Performance" type="button" role="tab" aria-controls="pills-Performance" aria-selected="false" onclick="my_performance();"><span><i class="fa-solid fa-chart-mixed"></i></span>My Performance</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class=" navdata" id="pills-Team-tab" data-bs-toggle="pill" data-bs-target="#pills-Team" type="button" role="tab" aria-controls="pills-Team" aria-selected="false" onclick="myteam()"><span><i class="fa-light fa-user-group"></i></span>My Team</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class=" navdata" id="pills-Salary-tab" data-bs-toggle="pill" data-bs-target="#pills-Salary" type="button" role="tab" aria-controls="pills-Salary" aria-selected="false" onclick="Salary_Benefits()"><span><i class="fa-regular fa-sack-dollar"></i></span> Salary & Benefits</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class=" navdata" id="pills-Employee-tab" data-bs-toggle="pill" data-bs-target="#pills-Employee" type="button" role="tab" aria-controls="pills-Employee" aria-selected="false" onclick="employeegrowth();"><span><i class="fa-solid fa-arrow-up-right-dots"></i></span>Employee Growth History</button>
                        </li>
                    </ul>
                    <div style="border: 1px solid #E8EAF0;border-radius: 5px;right: 5px;position: relative;gap: 25px;padding: 5px;display: flex;height: 35px; background-color: #FFFFFF; align-items: center;">
                        <!-- <button id="calendarbutton" style="cursor: pointer; background:none; border: none;">
                            <img src="./images/E-Book_Icon.svg" alt="" style="width: 27px;">
                        </button> -->

                        <button class="noticelist" id="calendarbutton" style="cursor: pointer; background:none;border: none;" data-bs-toggle="modal" data-bs-target="#myModalprofile" onclick="openformprofile('calendar_profile', '', '', 'myModalprofile');">
                            <!-- <i class="fa-regular fa-calendar-star" style="font-size: 18px; color: #7C828D; font-weight: 400;"></i> -->
                            <img src="./images/Calander_Icon.svg" alt="" style="width: 27px;">
                        </button>
                        <button class="noticelist" id="noticebutton" style="cursor: pointer; background:none;border: none;" onclick="notice_board();">
                            <!-- <i class="fa-sharp fa-regular fa-bell" style="font-size: 18px; color: #7C828D; font-weight: 400;"></i> -->
                            <img src="./images/Notification_Icon.svg" alt="" style="width: 27px;">
                        </button>
                    </div>
                </nav>
            </div>
        </div>
        <div class="tab-content" id="pills-tabContent" style="overflow-y: auto; height: calc(-150px + 108vh); overflow-x: hidden; padding: 5px;">
        <!-- ALL MODALS WILL COME HERE STARTS-->
            <!-- MODAL FOR CLICK STARTS-->
            <div class="modal" id="myModalprofile" style="backdrop-filter: blur(2px);">
                <div class="modal-dialog modal-fullscreen" style="width:85%; position:absolute; right:0;">
                    <div class="modal-content">
                        <!-- Modal Header -->
                        <div class="modal-header" style="background-color: #5d51e2;">
                            <div style="display: contents;">
                                <div style="display: flex; align-items: center;gap: 15px;">
                                    <i class="fa-solid fa-arrow-left-long bkarrowicon" style="margin-top: 4px; cursor: pointer;font-size: 1.5rem; color: #fff;" data-bs-dismiss="modal"></i>
                                    <div id="popup_headerprof"></div>
                                </div>
                            </div>
                        </div>
                        <!-- Modal body -->
                        <div class="modal-body" style="padding: 0px">
                            <i class="fa-solid fa-arrow-left-long bkarrowicon bodyArrow" class="btn" data-bs-dismiss="modal" style="margin-top: 4px; cursor: pointer;font-size: 1.5rem; color: #ffffff;position: absolute;left: 15px;"></i>
                            <div class="modal_contant">
                                <div id="apply_reimbursement_profile" style="display: none; border-top: 1px solid #ddd;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>
                                
                                <div id="apply_advance_profile" style="display: none; border-top: 1px solid #ddd;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>
                                
                                <div id="apply_od_activity_profile" style="display: none; border-top: 1px solid #ddd;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>
                                
                                <div id="dsr_entry_profile" style="display: none; border-top: 1px solid #ddd;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>

                                <div id="dsr_entry_sign_out" style="display: none; border-top: 1px solid #ddd;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>

                                <div id="report_entry_view" style="display: none; border-top: 1px solid #ddd;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>
                                
                                <div id="create_suggestions_profile" style="display: none; border-top: 1px solid #ddd;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>
                                
                                <div id="create_iou_profile" style="display: none; border-top: 1px solid #ddd;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>       
                                
                                <div id="calendar_profile" style="display: none; border-top: 1px solid #ddd;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>
                                
                                <div id="createmeting_profile" style="display: none; border-top: 1px solid #ddd;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div> 

                                <div id="manpowerrequisition" style="display: none; border-top: 1px solid #ddd;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div> 

                                <div id="minutes_of_meeting" style="display: none; border-top: 1px solid #ddd;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div> 
                                
                                <div id="editbtn_profile" style="display: none; border-top: 1px solid #ddd;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div> 
                                
                                <div id="applyleave_profile" style="display: none; border-top: 1px solid #ddd;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>
                                
                                <div id="upcoming_visit_form" style="display: none; border-top: 1px solid #ddd;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>
                                
                                <div id="family_detail_iframe" style="display: none;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>
                                
                                <div id="bank_detail_iframe" style="display: none;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>

                                <div id="pending_req_iframe" style="display: none;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>

                                <div id="attendance_correction_iframe" style="display: none;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>

                                <div id="approve_team_leave" style="display: none; border-top: 1px solid #ddd;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>
                                
                                <div id="incometax" style="display: none; border-top: 1px solid #ddd;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>

                                <div id="team_attendance_correction" style="display: none;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>

                                <div id="iframewithout_team_leave_pending" style="display: none; border-top: 1px solid #ddd;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>

                                <div id="iframewithout_formid_recordid" style="display: none; border-top: 1px solid #ddd;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>
                                <div id="personal_info_form" style="display: none; padding: 0px 0.6em;">
                                    <iframe  src="" frameborder="0" style="width: 100%; height: calc(100vh - 30px) !important;"></iframe>
                                </div>
                            </div> 
                        </div>                        
                    </div>
                </div>
            </div>
            <!-- MODAL FOR CLICK ENDS-->
            <!-- UPCOMING MEETING MODAL STARTS-->
            <div class="modal fade" id="exampleModalTogglemyprofile" aria-hidden="true" aria-labelledby="exampleModalToggleLabelmyprofile" tabindex="-1">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header" style="background-color: #FFFFFF;">
                            <p style="font-size: 16px; font-weight: 700;" class="modal-title" id="exampleModalToggleLabelmyprofile">Upcoming Meetings</p>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div id="upcommingmeetingdetailpoupmyprofile">
                        </div>
                    </div>
                </div>
            </div>
            <!-- UPCOMING MEETING MODAL ENDS-->
            <!-- SIGNIN/SIGNOUT MODAL STARTS-->
            <div id="toast"></div>
            <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true" onclick="stopcamera_signin();stopcamera_signout();">
            <!-- <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true" onclick="stopAllCameras()"> -->
            <div class="modal-dialog modal-dialog-centered modal-lg" role="document" style="width: max-content;min-height: auto;margin: 5% auto;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <p class="modal-title" id="myModalLabel" style="font-size: 14px;">Employee Code <span id="signin_employee_code" style="font-weight: 800;">ITA-S0912</span> | <span id="signin_top_date" style="font-weight: 800;">28th Dec,2022</span></p>
                            <span>
                                <!-- <button type="button" class="btn" data-dismiss="modal" id="closemodal" onclick="stopcamera_signin();stopcamera_signout();"><i id="closemodal-i" class="fa-regular fa-xmark-large" style="color: #000000;"></i></button> -->
                                <button type="button" class="btn" data-dismiss="modal" id="closemodal" onclick="stopAllCameras()"><i id="closemodal-i" class="fa-regular fa-xmark-large" style="color: #000000;"></i></button>
                            </span>
                        </div>
                        <div class="modal-body" style="display: flex; justify-content: space-between;">
                            <div class="modal-body-in" style="width: 100%; text-align: center; justify-content: center;">
                                <div style="text-align: center;">                                        
                                    <div>
                                        <div style="display: flex;justify-content: center;">
                                            <div style="font-size: 12px;background: #ECEBFF;width: max-content;border-radius: 5px;padding: 4px 8px;font-weight: 800;gap: 4px;display: flex;">
                                                <span><img src="./images/time.svg" class="n-img" style="width: 15px; margin-right: 3px;"></span>In Time
                                            </div>
                                        </div>
                                        <h2 style="font-weight: 700;font-size: 18px;margin: 10px 0px;" id="currenttime_signin_emp">00:00:00</h2>
                                        <p style="font-size: 13px; font-weight: 500; margin: 10px 0px;">Clock in</p>
                                    </div>
                                    <div>
                                        <button class="btn" id="click_photo_signin" data-dismiss="modal" style="font-size: 14px; width: 70%;border: 1px solid #cecece;margin-bottom: 10px;background: #5D51E2;color: white;padding: 6px; cursor: pointer;" onclick="signin_aproved();">Sign In</button>
                                    </div>
                                    <div class="in_project_name kendo_input_project_login">
                                        <input id="project_dropdownlist" style="font-size: 12px !important; color:black;border: 1px solid #cecece;padding: 6px;border-radius: .25rem;width: 70%;margin-bottom: 10px;font-size: 14px;font-weight: 400;background-color: white;"/>
                                    </div>
                                    <div class="kendo_input_project_login">                                        
                                        <input id="inputGroupSelect02" style="font-size: 12px !important; color:black;border: 1px solid #cecece;padding: 6px;border-radius: .25rem;width: 70%;margin-bottom: 10px;font-size: 14px;font-weight: 400;background-color: white;"/>
                                    </div>
                                    <div class="d-none">
                                        <input type="hidden"  id="idhidden" value="277447"/>
                                        <input type="hidden"  id="idselected" value="277447"/>
                                        <input type="hidden"  id="column8563" value="2024-04-03T00:00:00"/>
                                        <input type="hidden"  id="column8557" value="Mansi rane"/>
                                        <input type="hidden"  id="column8558" value="MO19"/>
                                        <input type="hidden"  id="column8559" value="10:19:01.839"/>
                                        <input type="hidden"  id="column8560" value="00:00:00"/>
                                        <input type="hidden"  id="column8668" value="jlgboi"/>
                                        <input type="hidden"  id= "active" value="false"/>
                                        <input type="hidden"  id="created_by" value="Auto Timer"/>
                                        <input type="hidden"  id="created_date" value="2024-04-03T04:32:37.005"/>
                                        <input type="hidden"  id="modified_by" value="Mansi Rane"/>
                                        <input type="hidden"  id="modified_date" value="2024-04-03T10:19:01.717"/>
                                        <input type="hidden"  id="state" value="2124" />
                                        <input type="hidden"  id="parentstatereportid" value="0" />
                                        <input type="hidden"  id="stateownerid" value="0" />
                                        <input type="hidden"  id="column31847" value="rani construction pvt ltd"/>
                                        <input type="hidden"  id="column65439" value="L2"/>
                                        <input type="hidden"  id="column71424" value="pune"/>
                                        <input type="hidden"  id="column71772" value="flexible"/>
                                        <input type="hidden"  id="column65440" value="Admin"/>
                                        <input type="hidden"  id="column36613" value="Mansi Rane"/>
                                        <input type="hidden"  id="column36616" value="Mansi Rane"/>
                                        <input type="hidden"  id="column38969" />
                                        <input type="hidden"  id="column39451" value="null" />
                                        <input type="hidden"  id= "column39414" />
                                        <input type="hidden"  id="column39790" value="$location"/>
                                        <input type="hidden"  id="column39791" value="$location"/>
                                        <input type="hidden"  id="column39792" value="$location"/>
                                        <input type="hidden"  id="column38113" value="Office"/>
                                        <input type="hidden"  id="column38120" value="Rs mall"/>
                                        <input type="hidden"  id="column38414" value="00:00:00"/>
                                        <input type="hidden"  id="column38415" value="00:00:00"/>
                                        <input type="hidden"  id="column38416" />
                                        <input type="hidden"  id="column44832" value="0" />
                                        <input type="hidden"  id="idselected" value="0" />
                                        <input type="hidden"  id="column40408" value="0" />
                                        <input type="hidden"  id="column38111" value="0" />
                                        <input type="hidden"  id="column58076" value="0" />
                                        <input type="hidden"  id="column44467" value="0" />
                                        <!-- sign-in project -->
                                        <input type="hidden"  id="column67066" value="Rs mall" />
                                        <!-- sign-out project -->
                                        <input type="hidden"  id="column67067" value="Rs mall" />
                                        <!-- signin-photo -->
                                        <input type="hidden"  id="column66843" value="0" />
                                        <!-- reporting hod -->
                                        <input type="hidden"  id="column72803" value="0" />
                                    </div>
                                    <div>
                                        <div class="btn" style="width: 70%;border: 1px solid #cecece;text-align: left;font-size: 12px;display: flex;margin: 0 auto;padding: 5px;align-items: center;">
                                            <i class="fa-solid fa-location-dot" style="padding-right: 7px;color: #2d65c8;"></i>
                                            <marquee id="signin_loc_span" width="240" behavior="scroll" direction="left">$location</marquee>
                                        </div>
                                    </div>
                                    <div style="text-align: right;">
                                        <button class="btn btn_focus" style="border: none;margin-bottom: 0px;font-size: 12px;padding: 0;color: #5D51E2;margin-right: 15%;"  data-toggle="modal" data-target="#mapModalCenter">Show Map</button>
                                        <!-- <div id="field39792mapdiv" style="width: 100%; height: 300px; position: relative; overflow: hidden;"></div> -->
                                    </div>
                                    <div>
                                        <!-- <video autoplay id="video_signin" style="width: 70%; object-fit: cover; height: 110px; margin-bottom: 10px;"></video> -->
                                        <div class="video-wrapper" id="img_signin_div">
                                            <video autoplay="" id="video_signin" style="width: 100%;object-fit: cover;height: 150px;padding: 10px;"></video>
                                            <img id="img_signin" style="width: 100%;object-fit: cover;height: 150px;padding: 10px;display:none" src="" alt="">
                                            <div></div>
                                        </div>
                                    </div>
                                    <form id="download-photo-signin-form">
                                        <img id="download-photo-signin" style="display: none;">
                                    </form>
                                    <form id="download-photo-signout-form">
                                        <img id="download-photo-signout" style="display: none;">
                                    </form>
                                    <canvas id="canvas_signin" style="display: none;" width="320" height="240"></canvas>
                                </div>
                                <form id="hiddenForm" action="submit.php" method="post" style="display:none;"></form>
                                <button class="btn" id="breck_in" style="width: 70%;border: 1px solid #cecece;margin-bottom: 10px;background: #5D51E2;color: white;padding: 6px;font-size: 14px;cursor: pointer; display:none;" onclick="check_in();">Break In</button>
                                <button class="btn" id="breck_out" style="width: 70%;border: 1px solid #cecece;margin-bottom: 10px;background: #5D51E2;color: white;padding: 6px;font-size: 14px;cursor: pointer; display:none;" onclick="check_out();">Break Out</button>
                                <div style="display: none;width: 30%;" id="journey_start_end">
                                    <button class="btn" id="start_journey" style="width: 100%;border: 1px solid rgb(206, 206, 206);margin-bottom: 10px;background: rgb(93, 81, 226);color: white;padding: 6px;font-size: 14px;cursor: pointer;" data-dismiss="modal" data-toggle="modal" onclick="startJourney(); ">Start Journey</button>      <!-- function for camera start cameraOpenJourneyStart(); -->
                                    <button class="btn" id="end_journey" style="width: 100%;border: 1px solid rgb(206, 206, 206);margin-bottom: 10px;background: rgb(93, 81, 226);color: white;padding: 6px;font-size: 14px;cursor: pointer;display: none;" data-dismiss="modal" data-toggle="modal" data-target="#journeyModal" onclick="endJourney();">End Journey</button>
                                </div>
                                <div style="display: none;width: 30%;" id="checkin_checkout_btn">
                                    <button class="btn" id="check_in_implement" style="width: 100%;border: 1px solid rgb(206, 206, 206);margin-bottom: 10px;background: rgb(93, 81, 226);color: white;padding: 6px;font-size: 14px;cursor: pointer;" data-dismiss="modal" data-toggle="modal" onclick="openChekinModal();">Check In</button>
                                    <button class="btn" id="check_out_implement" style="width: 100%;border: 1px solid rgb(206, 206, 206);margin-bottom: 10px;background: rgb(93, 81, 226);color: white;padding: 6px;font-size: 14px;cursor: pointer;display: none;" data-toggle="modal" data-dismiss="modal" data-target="#checkInModal" onclick="openChekOutModal();">Check Out</button> <!--checkOutBtn-->
                                </div>
                                
                            </div>
                            <div class="modal-body-out" id="sign_out_btn" style="width: 100%; text-align: center; justify-content: center; display: none;">
                                <div style="text-align: center;">
                                    <div>
                                        <div style="display: flex;justify-content: center;">
                                            <div style="font-size: 12px;background: #ECEBFF;width: max-content;border-radius: 5px;padding: 4px 8px;font-weight: 800;gap: 4px;display: flex;">
                                                <img src="./images/time.svg" class="n-img" style="width: 15px; margin-right: 3px;"></span>Out Time
                                            </div>
                                        </div>
                                    </div>
                                    <div style="display: flex; justify-content: space-between;">
                                        <div style="width: 50%;">
                                            <h2 style="color: #009B67; font-weight: 700; font-size: 18px; margin: 10px 0px;" id="contributing_hours_today">10:50 <span style="font-size: 15px; "><i class="fa-regular fa-clock"></i></span></h2>
                                            <p style="font-size: 13px; font-weight: 500; margin: 10px 0px;">Hours Today</p>
                                        </div>
                                        <div style="width: 50%;">
                                            <h2 style="font-weight: 700; font-size: 18px; margin: 10px 0px;" id="current_date_signout">10:50 <span style="font-size: 15px;"><i class="fa-regular fa-clock"></i></span></h2>
                                            <p style="font-size: 13px; font-weight: 500; margin: 10px 0px;">Current</p>
                                        </div>
                                    </div>
                                    <div>
                                        <button class="btn" id="click_photo_signout" style="width: 70%;border: 1px solid #cecece;margin-bottom: 10px;background: #5D51E2;color: white;padding: 6px; font-size: 14px; cursor: pointer;" data-dismiss="modal" onclick="signout_aproved();">Sign Out</button>
                                    </div>
                                    <div class="out_project_name kendo_input_project_login">
                                        <input id="project_dropdownlist_out" style="font-size: 12px !important; color:black;border: 1px solid #cecece;padding: 3px;border-radius: .25rem;width: 70%;margin-bottom: 10px;font-size: 14px;font-weight: 400;background-color: white;"/>
                                    </div>
                                    <div class="kendo_input_project_login">
                                        <input id="inputGroupSelect02_out" style="font-size: 12px !important; color:black;border: 1px solid #cecece;padding: 3px;border-radius: .25rem;width: 70%;margin-bottom: 10px;font-size: 14px;font-weight: 400;background-color: white;"/>
                                    </div>
                                    <!-- <div id="toast"></div> -->
                                    <div></div>
                                    <div>
                                        <div class="btn" style="width: 70%;border: 1px solid #cecece;text-align: left;font-size: 12px;display: flex;margin: 0 auto;padding: 5px;align-items: center;">
                                            <i class="fa-solid fa-location-dot" style="padding-right: 7px;color: #2d65c8;"></i>
                                            <marquee id="signout_loc_span" width="240" behavior="scroll" direction="left">$location</marquee>
                                        </div>
                                    </div>
                                    <div style="text-align: right;">
                                        <button class="btn btn_focus" style="border: none;margin-bottom: 0px;font-size: 12px;padding: 0;color: #5D51E2;margin-right: 15%;" data-toggle="modal" data-target="#mapModalCenter">Show Map</button>
                                    </div>
                                    <div>
                                        <div class="video-wrapper">
                                            <video autoplay id="video_signout" style="width: 100%;object-fit: cover;height: 150px;padding: 10px;"></video>
                                            <img id="img_signout" style="width: 100%;object-fit: cover;height: 150px;padding: 10px;display:none" src="" alt="">
                                            <div></div>
                                        </div>
                                    </div>
                                    <div style="width: 70%;border: 1px solid #cecece;display: flex;justify-content: space-between;margin: 0 auto;padding: 5px;border-radius: 3px;">
                                        <div style="font-size: 12px;">DSR</div>
                                        <!-- <div style="font-size: 12px; cursor: pointer; text-decoration: underline; color: #5D51E2;" data-bs-toggle="modal" data-bs-target="#myModalprofile" id="opendsrbtn" onclick="closesigninsignout();stopcamera_signin();stopcamera_signout();openformprofile('dsr_entry_sign_out', '', '', 'myModalprofile');">Add</div> -->
                                        <div style="font-size: 12px; cursor: pointer; text-decoration: underline; color: #5D51E2;" data-bs-toggle="modal" data-bs-target="#myModalprofile" id="opendsrbtn" onclick="closesigninsignout();stopAllCameras();openformprofile('dsr_entry_sign_out', '', '', 'myModalprofile');">Add</div>
                                    </div>
                                    <canvas id="canvas_signout" style="display: none;" width="320" height="240"></canvas>
                                </div>
                            </div>
                        </div>                                   
                    </div>
                </div>
            </div>
            <!-- SIGNIN/SIGNOUT MODAL ENDS-->

            <!-- JOURNEY START/ENDS MODAL START -->
            <div class="modal fade" id="journeyModal" tabindex="-1" role="dialog"> 
                <div class="modal-dialog modal-dialog-centered modal-lg" role="document" style="justify-content: center; width: 100%; min-height: auto; margin: 5% auto;">
                        <div class="modal-content journey-content" style="width: 50%;">
                            <div class="modal-header">
                                <p class="modal-title" id="myModalLabel" style="font-size: 14px;">Employee Code <span id="journey_employee_code" style="font-weight: 800;"></span> | <span id="journey_top_date" style="font-weight: 800;"></span></p>
                                <span>
                                    <button type="button" class="btn" data-dismiss="modal" id="closeJourneyModal" onclick="closeJourneyModalFn()"><i id="closeJourneyModal-i" class="fa-regular fa-xmark-large" style="color: #000000;"></i></button>
                                </span>
                            </div>
                            <div class="modal-body" style="display: flex; justify-content: space-between;">
                                <div class="modal-body-in" style="width: 100%; text-align: center; justify-content: center;">
                                    <div style="text-align: center;">                                        
                                        <div>
                                            <div style="display: flex;justify-content: center;">
                                                <div style="font-size: 12px;background: #ECEBFF;width: max-content;border-radius: 5px;padding: 4px 8px;font-weight: 800;gap: 4px;display: flex;">
                                                    <span><img src="./images/time.svg" class="n-img" style="width: 15px; margin-right: 3px;"></span>Start Time
                                                </div>
                                            </div>
                                            <h2 style="font-weight: 700;font-size: 18px;margin: 10px 0px;" id="currenttime_start_journey">00:00:00</h2>
                                            <p style="font-size: 13px; font-weight: 500; margin: 10px 0px;">Journey Started</p>
                                        </div>
                                        <div class="d-none">
                                            <button class="btn" id="click_photo_journey_start" data-bs-dismiss="modal" style="font-size: 14px; width: 70%; border: 1px solid rgb(206, 206, 206); margin-bottom: 10px; background: rgb(93, 81, 226); color: white; padding: 6px; cursor: not-allowed; display: inline-block;" disabled="">Start Journey</button>
                                        </div>
                                        <div class="in_project_name kendo_input_project_login">
                                            <input id="visitcode_dropdownlist" style="font-size: 12px !important; color:black;border: 1px solid #cecece;padding: 6px;border-radius: .25rem;width: 70%;margin-bottom: 10px;font-size: 14px;font-weight: 400;background-color: white;"/>
                                            <!-- <input id="visitcode_dropdownlist" data-role="combobox" data-text-field="" data-value-field="" style="font-size: 12px !important; color:black;border: 1px solid #cecece;padding: 6px;border-radius: .25rem;width: 70%;margin-bottom: 10px;font-size: 14px;font-weight: 400;background-color: white;" /> -->

                                        </div>
                                        <div class="kendo_input_project_login">                              
                                            <input id="distance" type="number" inputmode="numeric" placeholder="Distance (In KM)" style="font-size: 12px !important; color:black;border: 1px solid #cecece;padding: 6px;border-radius: .25rem;width: 70%;margin-bottom: 10px;font-size: 14px;font-weight: 400;background-color: white;">
                                        </div>
                                        <!-- <div class="d-none">
                                            <input type="hidden"  id="idhidden" value="277447"/>
                                            <input type="hidden"  id="idselected" value="277447"/>
                                            <input type="hidden"  id="column8563" value="2024-04-03T00:00:00"/>
                                            <input type="hidden"  id="column8557" value="Mansi rane"/>
                                            <input type="hidden"  id="column8558" value="MO19"/>
                                            <input type="hidden"  id="column8559" value="10:19:01.839"/>
                                            <input type="hidden"  id="column8560" value="00:00:00"/>
                                            <input type="hidden"  id="column8668" value="jlgboi"/>
                                            <input type="hidden"  id= "active" value="false"/>
                                            <input type="hidden"  id="created_by" value="Auto Timer"/>
                                            <input type="hidden"  id="created_date" value="2024-04-03T04:32:37.005"/>
                                            <input type="hidden"  id="modified_by" value="Mansi Rane"/>
                                            <input type="hidden"  id="modified_date" value="2024-04-03T10:19:01.717"/>
                                            <input type="hidden"  id="state" value="2124" />
                                            <input type="hidden"  id="parentstatereportid" value="0" />
                                            <input type="hidden"  id="stateownerid" value="0" />
                                            <input type="hidden"  id="column31847" value="rani construction pvt ltd"/>
                                            <input type="hidden"  id="column65439" value="L2"/>
                                            <input type="hidden"  id="column71424" value="pune"/>
                                            <input type="hidden"  id="column71772" value="flexible"/>
                                            <input type="hidden"  id="column65440" value="Admin"/>
                                            <input type="hidden"  id="column36613" value="Mansi Rane"/>
                                            <input type="hidden"  id="column36616" value="Mansi Rane"/>
                                            <input type="hidden"  id="column38969" />
                                            <input type="hidden"  id="column39451" value="null" />
                                            <input type="hidden"  id= "column39414" />
                                            <input type="hidden"  id="column39790" value="$location"/>
                                            <input type="hidden"  id="column39791" value="$location"/>
                                            <input type="hidden"  id="column39792" value="$location"/>
                                            <input type="hidden"  id="column38113" value="Office"/>
                                            <input type="hidden"  id="column38120" value="Rs mall"/>
                                            <input type="hidden"  id="column38414" value="00:00:00"/>
                                            <input type="hidden"  id="column38415" value="00:00:00"/>
                                            <input type="hidden"  id="column38416" />
                                            <input type="hidden"  id="column44832" value="0" />
                                            <input type="hidden"  id="idselected" value="0" />
                                            <input type="hidden"  id="column40408" value="0" />
                                            <input type="hidden"  id="column38111" value="0" />
                                            <input type="hidden"  id="column58076" value="0" />
                                            <input type="hidden"  id="column44467" value="0" />
                                             
                                            <input type="hidden"  id="column67066" value="Rs mall" />
                                             
                                            <input type="hidden"  id="column67067" value="Rs mall" />
                                           
                                            <input type="hidden"  id="column66843" value="0" />
                                            
                                            <input type="hidden"  id="column72803" value="0" />
                                        </div> -->
                                        <div>
                                            <div class="btn" style="width: 70%;border: 1px solid #cecece;text-align: left;font-size: 12px;display: flex;margin: 0 auto;padding: 5px;align-items: center;">
                                                <i class="fa-solid fa-location-dot" style="padding-right: 7px;color: #2d65c8;"></i>
                                                <marquee id="journey_start_loc_span" width="240" behavior="scroll" direction="left">$location</marquee>
                                            </div>
                                        </div>
                                        <div style="text-align: right;">
                                            <button class="btn btn_focus" style="border: none;margin-bottom: 0px;font-size: 12px;padding: 0;color: #5D51E2;margin-right: 15%;" data-toggle="modal" data-target="#mapModalCenter">Show Map</button>
                                            <!-- <div id="field39792mapdiv" style="width: 100%; height: 300px; position: relative; overflow: hidden;"></div> -->
                                        </div>
                                        <div>
                                            <!-- <video autoplay id="video_signin" style="width: 70%; object-fit: cover; height: 110px; margin-bottom: 10px;"></video> -->
                                            <div class="video-wrapper" id="img_journeystart_div">
                                                <video autoplay="" id="video_journeystart" style="width: 100%; object-fit: cover; height: 150px; padding: 10px; display: none;"></video>
                                                <img id="img_journeystart" style="width: 100%; object-fit: cover; height: 150px; padding: 10px; display: block;" src="" alt="">
                                                <div></div>
                                            </div>
                                        </div>
                                        <form id="download-photo-journeystart-form">
                                            <img id="download-photo-journeystart" style="display: none;">
                                        </form>
                                        <form id="download-photo-journeyend-form">
                                            <img id="download-photo-journeyend" style="display: none;">
                                        </form>
                                        <canvas id="canvas_journeystart" style="display: none;" width="320" height="240"></canvas>
                                    </div>
                                    <form id="hiddenJourneyForm" action="submit.php" method="post" style="display:none;"></form>
                                    <button type="button" class="btn" id="start_journey_inner" style="width: 70%;border: 1px solid rgb(206, 206, 206);margin-bottom: 10px;background: rgb(93, 81, 226);color: white;padding: 6px;font-size: 14px;cursor: pointer;" data-dismiss="modal" onclick="startJourneyWithData();">Start Journey</button>
                                    
                                </div>

                                <div class="modal-body-out" id="end_journey_modal" style="width: 100%; text-align: center; justify-content: center; display: none;">
                                    <div style="text-align: center;">
                                        <div>
                                            <div style="display: flex;justify-content: center;">
                                                <div style="font-size: 12px;background: #ECEBFF;width: max-content;border-radius: 5px;padding: 4px 8px;font-weight: 800;gap: 4px;display: flex;">
                                                    <img src="./images/time.svg" class="n-img" style="width: 15px; margin-right: 3px;"></span>End Time
                                                </div>
                                            </div>
                                        </div>
                                        <div style="display: flex; justify-content: space-between;">
                                            <div style="width: 50%;">
                                                <h2 style="color: #009B67; font-weight: 700; font-size: 18px; margin: 10px 0px;" id="contributing_hours_journey">10:50 <span style="font-size: 15px; "><i class="fa-regular fa-clock"></i></span></h2>
                                                <p style="font-size: 13px; font-weight: 500; margin: 10px 0px;">Hours Of Journey</p>
                                            </div>
                                            <div style="width: 50%;">
                                                <h2 style="font-weight: 700; font-size: 18px; margin: 10px 0px;" id="current_time_endjourney">10:50 <span style="font-size: 15px;"><i class="fa-regular fa-clock"></i></span></h2>
                                                <p style="font-size: 13px; font-weight: 500; margin: 10px 0px;">Current</p>
                                            </div>
                                        </div>
                                        <div class="d-none">
                                            <button class="btn" id="click_photo_signout" style="width: 70%;border: 1px solid #cecece;margin-bottom: 10px;background: #5D51E2;color: white;padding: 6px; font-size: 14px; cursor: pointer;" data-dismiss="modal" onclick="signout_aproved();">Sign Out</button>
                                        </div>
                                        <div class="out_project_name kendo_input_project_login">
                                            <input id="visitcode_dropdownlist_end" style="font-size: 12px !important; color:black;border: 1px solid #cecece;padding: 6px;border-radius: .25rem;width: 70%;margin-bottom: 10px;font-size: 14px;font-weight: 400;background-color: white;"/>
                                        </div>
                                        <div class="kendo_input_project_login">                              
                                            <input id="distance_end" type="number" inputmode="numeric" placeholder="Distance (In KM)" style="font-size: 12px !important; color:black;border: 1px solid #cecece;padding: 6px;border-radius: .25rem;width: 70%;margin-bottom: 10px;font-size: 14px;font-weight: 400;background-color: white;">
                                        </div>
                                        <!-- <div id="toast"></div> -->
                                        <div></div>
                                        <div>
                                            <div class="btn" style="width: 70%;border: 1px solid #cecece;text-align: left;font-size: 12px;display: flex;margin: 0 auto;padding: 5px;align-items: center;">
                                                <i class="fa-solid fa-location-dot" style="padding-right: 7px;color: #2d65c8;"></i>
                                                <marquee id="journey_end_loc_span" width="240" behavior="scroll" direction="left">$location</marquee>
                                            </div>
                                        </div>
                                        <div style="text-align: right;">
                                            <button class="btn btn_focus" style="border: none;margin-bottom: 0px;font-size: 12px;padding: 0;color: #5D51E2;margin-right: 15%;" data-toggle="modal" data-target="#mapModalCenter">Show Map</button>
                                        </div>
                                        <div>
                                            <div class="video-wrapper">
                                                <video autoplay id="video_journeyend" style="width: 100%;object-fit: cover;height: 150px;padding: 10px;"></video>
                                                <img id="img_journeyend" style="width: 100%;object-fit: cover;height: 150px;padding: 10px;display:none" src="" alt="">
                                                <div></div>
                                            </div>
                                        </div>
                                        <div class="d-none" style="width: 70%;border: 1px solid #cecece;display: flex;justify-content: space-between;margin: 0 auto;padding: 5px;border-radius: 3px;">
                                            <div style="font-size: 12px;">DSR</div>
                                            <!-- <div style="font-size: 12px; cursor: pointer; text-decoration: underline; color: #5D51E2;" data-bs-toggle="modal" data-bs-target="#myModalprofile" id="opendsrbtn" onclick="closesigninsignout();stopcamera_signin();stopcamera_signout();openformprofile('dsr_entry_sign_out', '', '', 'myModalprofile');">Add</div> -->
                                            <div style="font-size: 12px; cursor: pointer; text-decoration: underline; color: #5D51E2;" data-bs-toggle="modal" data-bs-target="#myModalprofile" id="opendsrbtn" onclick="closesigninsignout();stopAllCameras();openformprofile('dsr_entry_sign_out', '', '', 'myModalprofile');">Add</div>
                                        </div>
                                        <canvas id="canvas_journeyend" style="display: none;" width="320" height="240"></canvas>
                                    </div>

                                    <button type="button" class="btn" id="end_journey_inner" style="width: 70%;border: 1px solid rgb(206, 206, 206);margin-bottom: 10px;background: rgb(93, 81, 226);color: white;padding: 6px;font-size: 14px;cursor: pointer;" onclick="endJourneyWithData();" data-dismiss="modal">End Journey</button>
                                </div>
                                
                            </div>                                   
                        </div>
                    </div>
                </div>
            <!-- JOURNEY START/ENDS MODAL END -->

            <!-- Chek In/Out modal START -->
            <div class="modal fade" id="checkInModal" tabindex="-1" role="dialog"> 
                <div class="modal-dialog modal-dialog-centered modal-lg" role="document" style="justify-content: center; width: 100%; min-height: auto; margin: 5% auto;">
                        <div class="modal-content checkin-content" style="width: 50%;">
                            <div class="modal-header">
                                <p class="modal-title" id="myModalLabel" style="font-size: 14px;">Employee Code <span id="checkin_employee_code" style="font-weight: 800;"></span> | <span id="checkin_top_date" style="font-weight: 800;"></span></p>
                                <span>
                                    <button type="button" class="btn" data-dismiss="modal" id="closeCheckInModal" onclick="closeCheckInModalFn();"><i id="closeCheckInModal-i" class="fa-regular fa-xmark-large" style="color: #000000;"></i></button>
                                </span>
                            </div>
                            <div class="modal-body" style="display: flex; justify-content: space-between;">
                                <div class="modal-body-in" style="width: 100%; text-align: center; justify-content: center;">
                                    <div style="text-align: center;">                                        
                                        <div>
                                            <div style="display: flex;justify-content: center;">
                                                <div style="font-size: 12px;background: #ECEBFF;width: max-content;border-radius: 5px;padding: 4px 8px;font-weight: 800;gap: 4px;display: flex;">
                                                    <span><img src="./images/time.svg" class="n-img" style="width: 15px; margin-right: 3px;"></span>Start Time
                                                </div>
                                            </div>
                                            <h2 style="font-weight: 700;font-size: 18px;margin: 10px 0px;" id="currenttime_check_in">00:00:00</h2>
                                            <p style="font-size: 13px; font-weight: 500; margin: 10px 0px;">Check In</p>
                                        </div>
                                        <div class="d-none">
                                            <button class="btn" id="click_photo_checkin" data-bs-dismiss="modal" style="font-size: 14px; width: 70%; border: 1px solid rgb(206, 206, 206); margin-bottom: 10px; background: rgb(93, 81, 226); color: white; padding: 6px; cursor: not-allowed; display: inline-block;" disabled="">Check In</button>
                                        </div>
                                        <div class="in_project_name kendo_input_project_login">
                                            <input id="checkin_visit_code_dropdownlist" style="font-size: 12px !important; color:black;border: 1px solid #cecece;padding: 6px;border-radius: .25rem;width: 70%;margin-bottom: 10px;font-size: 14px;font-weight: 400;background-color: white;"/>
                                            <!-- <input id="visitcode_dropdownlist" data-role="combobox" data-text-field="" data-value-field="" style="font-size: 12px !important; color:black;border: 1px solid #cecece;padding: 6px;border-radius: .25rem;width: 70%;margin-bottom: 10px;font-size: 14px;font-weight: 400;background-color: white;" /> -->

                                        </div>
                                        <div class="kendo_input_project_login d-none">                              
                                            <input id="distance" type="number" inputmode="numeric" placeholder="Distance (In KM)" style="font-size: 12px !important; color:black;border: 1px solid #cecece;padding: 6px;border-radius: .25rem;width: 70%;margin-bottom: 10px;font-size: 14px;font-weight: 400;background-color: white;">
                                        </div>
                                         
                                        <div>
                                            <div class="btn" style="width: 70%;border: 1px solid #cecece;text-align: left;font-size: 12px;display: flex;margin: 0 auto;padding: 5px;align-items: center;">
                                                <i class="fa-solid fa-location-dot" style="padding-right: 7px;color: #2d65c8;"></i>
                                                <marquee id="check_in_loc_span" width="240" behavior="scroll" direction="left">$location</marquee>
                                            </div>
                                        </div>
                                        <div style="text-align: right;">
                                            <button class="btn btn_focus" style="border: none;margin-bottom: 0px;font-size: 12px;padding: 0;color: #5D51E2;margin-right: 15%;" data-toggle="modal" data-target="#mapModalCenter">Show Map</button>
                                            <!-- <div id="field39792mapdiv" style="width: 100%; height: 300px; position: relative; overflow: hidden;"></div> -->
                                        </div>
                                        <div class="d-none">
                                            <!-- <video autoplay id="video_signin" style="width: 70%; object-fit: cover; height: 110px; margin-bottom: 10px;"></video> -->
                                            <div class="video-wrapper" id="img_checkin_div">
                                                <video autoplay="" id="video_checkin" style="width: 100%; object-fit: cover; height: 150px; padding: 10px; display: none;"></video>
                                                <img id="img_checkin" style="width: 100%; object-fit: cover; height: 150px; padding: 10px; display: block;" src="" alt="">
                                                <div></div>
                                            </div>
                                        </div>
                                        <div class="in_project_name kendo_input_project_login">
                                            <input id="checkin_projectname_dropdownlist" placeholder="Project Name" style="font-size: 12px !important; color:black;border: 1px solid #cecece;padding: 6px;border-radius: .25rem;width: 70%;margin-bottom: 10px;font-size: 14px;font-weight: 400;background-color: white;" readonly/>
                                        </div>
                                        <div class="in_project_name kendo_input_project_login">
                                            <input id="checkin_customername_dropdownlist" placeholder="Customer Name" style="font-size: 12px !important; color:black;border: 1px solid #cecece;padding: 6px;border-radius: .25rem;width: 70%;margin-bottom: 10px;font-size: 14px;font-weight: 400;background-color: white;" readonly/>
                                        </div>
                                        <form id="download-photo-checkin-form">
                                            <img id="download-photo-checkin" style="display: none;">
                                        </form>
                                        <form id="download-photo-checkout-form">
                                            <img id="download-photo-checkout" style="display: none;">
                                        </form>
                                        <canvas id="canvas_checkin" style="display: none;" width="320" height="240"></canvas>
                                    </div>
                                    <form id="hiddenCheckinForm" action="submit.php" method="post" style="display:none;"></form>
                                    <button type="button" class="btn" id="checkin_inner" style="width: 70%;border: 1px solid rgb(206, 206, 206);margin-bottom: 10px;background: rgb(93, 81, 226);color: white;padding: 6px;font-size: 14px;cursor: pointer;" data-dismiss="modal" onclick="checkInBtn();">Check In</button>
                                    
                                </div>

                                <div class="modal-body-out" id="check_out_modal" style="width: 100%; text-align: center; justify-content: center; display: none;">
                                    <div style="text-align: center;">
                                        <div>
                                            <div style="display: flex;justify-content: center;">
                                                <div style="font-size: 12px;background: #ECEBFF;width: max-content;border-radius: 5px;padding: 4px 8px;font-weight: 800;gap: 4px;display: flex;">
                                                    <img src="./images/time.svg" class="n-img" style="width: 15px; margin-right: 3px;"></span>End Time
                                                </div>
                                            </div>
                                        </div>
                                        <div style="display: flex; justify-content: space-between;">
                                            <div style="width: 50%;">
                                                <h2 style="color: #009B67; font-weight: 700; font-size: 18px; margin: 10px 0px;" id="contributing_hours_checkin">00:00:00 <span style="font-size: 15px; "><i class="fa-regular fa-clock"></i></span></h2>
                                                <p style="font-size: 13px; font-weight: 500; margin: 10px 0px;">Hours Of Check In</p>
                                            </div>
                                            <div style="width: 50%;">
                                                <h2 style="font-weight: 700; font-size: 18px; margin: 10px 0px;" id="current_time_checkout">00:00:00 <span style="font-size: 15px;"><i class="fa-regular fa-clock"></i></span></h2>
                                                <p style="font-size: 13px; font-weight: 500; margin: 10px 0px;">Current</p>
                                            </div>
                                        </div>
                                        <div class="d-none">
                                            <button class="btn" id="click_photo_signout" style="width: 70%;border: 1px solid #cecece;margin-bottom: 10px;background: #5D51E2;color: white;padding: 6px; font-size: 14px; cursor: pointer;" data-dismiss="modal" onclick="signout_aproved();">Sign Out</button>
                                        </div>
                                        <div class="out_project_name kendo_input_project_login">
                                            <input id="checkout_visit_code_dropdownlist" style="font-size: 12px !important; color:black;border: 1px solid #cecece;padding: 6px;border-radius: .25rem;width: 70%;margin-bottom: 10px;font-size: 14px;font-weight: 400;background-color: white;"/>
                                        </div>
                                        <div class="kendo_input_project_login d-none">                              
                                            <input id="distance_end" type="number" inputmode="numeric" placeholder="Distance (In KM)" style="font-size: 12px !important; color:black;border: 1px solid #cecece;padding: 6px;border-radius: .25rem;width: 70%;margin-bottom: 10px;font-size: 14px;font-weight: 400;background-color: white;">
                                        </div>
                                        <!-- <div id="toast"></div> -->
                                        <div></div>
                                        <div>
                                            <div class="btn" style="width: 70%;border: 1px solid #cecece;text-align: left;font-size: 12px;display: flex;margin: 0 auto;padding: 5px;align-items: center;">
                                                <i class="fa-solid fa-location-dot" style="padding-right: 7px;color: #2d65c8;"></i>
                                                <marquee id="check_out_loc_span" width="240" behavior="scroll" direction="left">$location</marquee>
                                            </div>
                                        </div>
                                        <div style="text-align: right;">
                                            <button class="btn btn_focus" style="border: none;margin-bottom: 0px;font-size: 12px;padding: 0;color: #5D51E2;margin-right: 15%;" data-toggle="modal" data-target="#mapModalCenter">Show Map</button>
                                        </div>
                                        <div class="d-none">
                                            <div class="video-wrapper">
                                                <video autoplay id="video_checkout" style="width: 100%;object-fit: cover;height: 150px;padding: 10px;"></video>
                                                <img id="img_checkout" style="width: 100%;object-fit: cover;height: 150px;padding: 10px;display:none" src="" alt="">
                                                <div></div>
                                            </div>
                                        </div>
                                        <div class="in_project_name kendo_input_project_login">
                                            <input id="checkout_projectname_dropdownlist" placeholder="Project Name" style="font-size: 12px !important; color:black;border: 1px solid #cecece;padding: 6px;border-radius: .25rem;width: 70%;margin-bottom: 10px;font-size: 14px;font-weight: 400;background-color: white;" readonly/>
                                        </div>
                                        <div class="in_project_name kendo_input_project_login">
                                            <input id="checkout_customername_dropdownlist" placeholder="Customer Name" style="font-size: 12px !important; color:black;border: 1px solid #cecece;padding: 6px;border-radius: .25rem;width: 70%;margin-bottom: 10px;font-size: 14px;font-weight: 400;background-color: white;" readonly/>
                                        </div>
                                        <div class="d-flex mb-2" style="width: 70%;border: 1px solid #cecece;display: flex;justify-content: space-between;margin: 0 auto;padding: 5px;border-radius: 3px;">
                                            <div style="font-size: 12px;">Report Entry</div>
                                            <div style="font-size: 12px; cursor: pointer; text-decoration: underline; color: #5D51E2;" data-bs-toggle="modal" data-bs-target="#myModalprofile" id="opendsrbtn" onclick="closeChekinChekout();stopAllCameras();openformprofile('report_entry_view', '', '', 'myModalprofile');">Add</div>
                                        </div>
                                        <canvas id="canvas_checkout" style="display: none;" width="320" height="240"></canvas>
                                    </div>

                                    <button type="button" class="btn" id="checkout_inner" style="width: 70%;border: 1px solid rgb(206, 206, 206);margin-bottom: 10px;background: rgb(93, 81, 226);color: white;padding: 6px;font-size: 14px;cursor: pointer;" onclick="checkOutBtn();" data-dismiss="modal">Check Out</button>
                                </div>
                                
                            </div>                                   
                        </div>
                    </div>
                </div>
            <!-- Chek In/Out modal END -->

            <!-- mapModalCenter MODAL STARTS-->            
            <div class="modal fade" id="mapModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-lg" role="document" style="width: 100%;min-height: auto;margin: 5% auto;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <p class="modal-title" id="myModalLabel" style="font-size: 14px;">Map</p>
                            <span>
                                <button type="button" class="btn" data-dismiss="modal" id="close_map_modal"><i id="close_map_modal-i" class="fa-regular fa-xmark-large" style="color: #000000;"></i></button>
                            </span>
                        </div>
                        <div class="modal-body" style="display: flex; justify-content: space-between;">
                            <div id="field39792mapdiv" style="width: 100%;height: 50vh;position: relative;overflow: hidden;"></div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- mapModalCenter MODAL ENDS-->
            <!-- BIRTHDAYWISH MODAL STARTS-->
            <div class="modal fade" style="backdrop-filter: blur(2px);" id="send_wish_popup" tabindex="-1" aria-labelledby="sendWishModalLabel" aria-hidden="true">
                <div class="modal-dialog" style="margin-top: 6%;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <img id="wishingimg" style="width: -webkit-fill-available;z-index: 0;" src="./images/birthday_poster.svg" alt="">
                            <div style="color: white;font-size: 20px;position: absolute;top: 12px; left: 94%;cursor: pointer;" data-bs-dismiss="modal" aria-label="Close"><i class="fa-solid fa-xmark"></i></div>

                        </div>
                        <div id="birthday-model-body">
                        </div>
                    </div>
                </div>
            </div>
            <!-- BIRTHDAYWISH MODAL ENDS-->

            <!--break in out modal start-->

            <div class="modal fade" id="break_in_out_modal" role="dialog">
                <div class="modal-dialog modal-dialog-centered modal-lg" style="">
                    <div class="modal-content">
                        <!-- Modal Header -->
                        <div class="modal-header" style="background: #5D51E2;">
                            <div style="display: contents;">
                                <div style="display: flex;gap:10px;">
                                    <div style="display: flex; align-items: center;">
                                        <div style="color: white;font-weight: 600;">Break Detail</div>
                                    </div>
                                </div>
                                <div>
                                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                            </div>
                        </div>
                        <!-- Modal body -->
                        <div class="modal-body" style="font-size: 14px;">
                            <div class="modal_contant">
                                <div class="row mb-3">
                                    <div class="col-md-4">
                                        <div>Sign In Time: <span id="break_sign_in_time" style="font-weight: 600;">10.11 Am</span></div>
                                    </div>
                                    <div class="col-md-4">
                                        <div>Sign Out Time: <span id="break_sign_out_time" style="font-weight: 600;">07.11 Pm</span></div>
                                    </div>
                                </div>
                                <!-- <div class="row mb-3">
                                    <div class="col-md-4">
                                        <div>Break In Time: <span style="font-weight: 600;">10.11 Am</span></div>
                                    </div>
                                    <div class="col-md-4">
                                        <div>Break Out Time: <span style="font-weight: 600;">07.11 Pm</span></div>
                                    </div>
                                    <div class="col-md-4">
                                        <div>Break Time: <span style="font-weight: 600;">07.11 Pm</span></div>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-4">
                                        <div>Break In Time: <span style="font-weight: 600;">10.11 Am</span></div>
                                    </div>
                                    <div class="col-md-4">
                                        <div>Break Out Time: <span style="font-weight: 600;">07.11 Pm</span></div>
                                    </div>
                                    <div class="col-md-4">
                                        <div>Break Time: <span style="font-weight: 600;">07.11 Pm</span></div>
                                    </div>
                                </div> -->
                                <div id="break_journey_container"></div>
                                <div style="border-top: 1px solid #ddd;margin: 20px 0;"></div>
                                <div class="row mb-3">
                                    <div class="col-md-4">
                                        <div>Hours Till Now: <span id="break_hours_till_now" style="font-weight: 600;font-weight: 600;background-color:#FFE56E;padding: 5px;border-radius: 5px">10.11 Am</span></div>
                                    </div>
                                    <div class="col-md-4">
                                        <div>Break Time: <span id="break_break_time" style="font-weight: 600;font-weight: 600;background-color:#D7D3FF;padding: 5px;border-radius: 5px">07.11 Pm</span></div>
                                    </div>
                                    <div class="col-md-4">
                                        <div>Excluding Break: <span id="break_excluding_break" style="font-weight: 600;font-weight: 600;background-color:#99ECD0;padding: 5px;border-radius: 5px">07.11 Pm</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--break in out modal End-->

            <div class="modal fade" id="break_journey_modal" role="dialog">
                <div class="modal-dialog modal-dialog-centered modal-xl" style="">
                    <div class="modal-content">
                        <!-- Modal Header -->
                        <div class="modal-header" style="background: #5D51E2;">
                            <div style="display: contents;">
                                <div style="display: flex;gap:10px;">
                                    <div style="display: flex; align-items: center;">
                                        <div style="color: white;font-weight: 600;">Break Journey</div>
                                    </div>
                                </div>
                                <div>
                                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                            </div>
                        </div>
                        <!-- Modal Body -->
                        <div class="modal-body">
                            <div class="modal_contant">
                                <div style="max-width: 1100px;margin: 20px auto;">
                                    <!-- Employee Information -->
                                    <div class="employee-info" style="background: #fff;padding: 20px;border-radius: 10px;border: 1px solid lightgray;margin-bottom: 20px;">
                                        <div class="row">
                                            <div class="col-md-4 info-box">
                                                <div class="info-header">Employee Name</div>
                                                <div class="info-text" id="breakjourney_empname">--</div>
                                            </div>
                                            <div class="col-md-4 info-box">
                                                <div class="info-header">Designation</div>
                                                <div class="info-text" id="breakjourney_designation">--</div>
                                            </div>
                                            <div class="col-md-4 info-box">
                                                <div class="info-header">Employee Code</div>
                                                <div class="info-text" id="breakjourney_empcode">--</div>
                                            </div>
                                            <div class="col-md-4 info-box">
                                                <div class="info-header">Branch Name</div>
                                                <div class="info-text" id="breakjourney_branch">--</div>
                                            </div>
                                            <div class="col-md-4 info-box">
                                                <div class="info-header">Project</div>
                                                <div class="info-text" id="breakjourney_project">--</div>
                                            </div>
                                            <div class="col-md-4 info-box">
                                                <div class="info-header">Reporting Manager</div>
                                                <div class="info-text" id="breakjourney_reportingmanager">--</div>
                                            </div>
                                        </div>
                                    </div>
            
                                    <!-- Attendance Table -->
                                    <div style="background: #fff;padding: 20px;border-radius: 10px;border: 1px solid lightgray;/* height: 262px; */overflow: auto;">
                                        <div style="border-radius: 10px;height: 262px;overflow: auto;">
                                            <table id="break_journey_table" style="width: 100%;font-size: 14px;">
                                                <thead style="background: #f1f3f5;font-size: 14px;font-weight: 500;">
                                                    <tr>
                                                        <th>Date</th>
                                                        <th>Sign In Login Type</th>
                                                        <th>Sign In Time</th>
                                                        <th>Sign Out Time</th>
                                                        <th>Worked Hrs</th>
                                                        <th>Break In Time</th>
                                                        <th>Break In Location</th>
                                                        <th>Break Out Time</th>
                                                        <th>Break Out Location</th>
                                                        <th>Break Hrs</th>
                                                        <th>No. of Breaks</th>
                                                    </tr>
                                                </thead>
                                                <tbody style="border: 1px solid lightgray;" id="break_journey_tbody">
                                                    <tr>
                                                        <td>31 Wed</td>
                                                        <td>Undefined</td>
                                                        <td>10:05 AM</td>
                                                        <td>19:30 PM</td>
                                                        <td>9 hrs</td>
                                                        <td>11:32 AM</td>
                                                        <td>Kanjoor Marg</td>
                                                        <td>12:03 PM</td>
                                                        <td>Kanjoor Marg</td>
                                                        <td>0.35 hrs</td>
                                                        <td>2</td>
                                                    </tr>                           
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>  
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal fade" id="attendance_shift_modal" role="dialog">
                <div class="modal-dialog modal-dialog-centered modal-xl" style="">
                    <div class="modal-content">
                        <!-- Modal Header -->
                        <div class="modal-header" style="background: #5D51E2;">
                            <div style="display: contents;">
                                <div style="display: flex;gap:10px;">
                                    <div style="display: flex; align-items: center;">
                                        <div style="color: white;font-weight: 600;">Current Shift</div>
                                    </div>
                                </div>
                                <div>
                                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                            </div>
                        </div>
                        <!-- Modal Body -->
                        <div class="modal-body">
                            <div class="modal_contant" style="font-size: 13px;">
                                <table id="attendance_shift_table">
                                    <tr>
                                        <td>Shift Name</td>
                                        <td id="shiftname">--</td>
                                    </tr>
                                    <tr>
                                        <td>Branch Name</td>
                                        <td id="shiftbranchname">--</td>
                                    </tr>
                                    <tr>
                                        <td>Shift Applicable From Date</td>
                                        <td id="shiftApplicableFromDate">--</td>
                                    </tr>
                                    <tr>
                                        <td>Attendance Calculation Method</td>
                                        <td id="shiftAttendanceCalculation">--</td>
                                    </tr>
                                    <tr>
                                        <td>In Time</td>
                                        <td id="shiftInTime">--</td>
                                    </tr>
                                    <tr>
                                        <td>Out Time</td>
                                        <td id="shiftOutTime">--</td>
                                    </tr>
                                    <tr>
                                        <td>Minimum Work Hours</td>
                                        <td id="shiftMinimumWorkHours">--</td>
                                    </tr>
                                    <tr>
                                        <td>Grace Time</td>
                                        <td id="shiftGraceTimeAllowed">--</td>
                                    </tr>
                                    <tr>
                                        <td>Late Mark</td>
                                        <td id="shiftLateMarkAllowed">--</td>
                                    </tr>
                                    <tr>
                                        <td>Half Day</td>
                                        <td id="shiftHalfDayAllowed">--</td>
                                    </tr>
                                    <tr>
                                        <td>Early Sign Out</td>
                                        <td id="shiftEarlySignOutAllowed">--</td>
                                    </tr>
                                    <tr>
                                        <td>Overtime</td>
                                        <td id="shiftOvertimeAllowed">--</td>
                                    </tr>
                                    <tr>
                                        <td>Weekly Off Days</td>
                                        <td id="shiftWeeklyOffDays">--</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- STATE HOLIDAY MODAL STARTS-->
            <div class="modal fade" id="historymodal" role="dialog">
                <div class="modal-dialog modal-dialog-centered modal-xl" style="max-width: 920px;">
                    <div class="modal-content">
                        <!-- Modal Header -->
                        <div class="modal-header" style="background: #5D51E2;">
                            <div style="display: contents;">
                                <div style="display: flex;gap:10px;">
                                    <div style="display: flex; align-items: center;">
                                        <div style="color: white; font-weight: 600;">Leave History</div>
                                    </div>
                                </div>
                                <div>
                                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                            </div>
                        </div>
                        <!-- Modal body -->
                        <div class="modal-body">
                            <div class="modal_contant">
                                <div class="row" style="padding: 0px 20px;">
                                    <div class="col-lg-6 col-md-6 col-sm-12 col-xl-4">
                                        <div class="box-shadow-box">
                                        <div>
                                            <div class="total_leaves_scorecard">
                                                <div style="display: flex; justify-content: center;align-items: center;">
                                                    <div style="font-weight: 600;font-size: 14px;">Total Leaves</div>
                                                </div>
                                                <div class="mainrow">
                                                    <div style="width: 100%; align-item:center;">
                                                        <div id="total_leaves_count">0</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-12 col-xl-4">
                                        <div class="box-shadow-box">
                                        <div>
                                            <div class="leaves_utilised_scorecard">
                                                <div style="display: flex; justify-content: center;align-items: center;">
                                                    <div style="font-weight: 600;font-size: 14px;">Leaves Utilised</div>
                                                </div>
                                                <div class="mainrow">
                                                    <div style="width: 100%; align-item:center;">
                                                        <div id="leaves_utilised_count">0</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-12 col-xl-4">
                                        <div class="box-shadow-box">
                                        <div>
                                            <div class="leave_balance_scorecard">
                                                <div style="display: flex; justify-content: center;align-items: center;">
                                                    <div style="font-weight: 600;font-size: 14px;">Leave Balance</div>
                                                </div>
                                                <div class="mainrow">
                                                    <div style="width: 100%; align-item:center;">
                                                        <div id="leaves_balance_count">0</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                    
                                    
                                </div>
                                <div class="table-container">
                                    <table class="custom-table">
                                      <thead style="font-size: 14px;color: black !important;">
                                        <tr>
                                          <th>Date of Leave Credit/Apply</th>
                                          <th>Leave Type</th>
                                          <th>No. of Leave</th>
                                          <th>Leave Start Date</th>
                                          <th>Leave End Date</th>
                                          <th>Leave Approved Date</th>
                                          <th>Leave Status</th>
                                        </tr>
                                      </thead>
                                      <tbody id="leave_history_customtable" style="font-size: 12px;">
                                        <!-- <tr>
                                            <td>Jul 31, 2024</td>
                                            <td>Sick Leave</td>
                                            <td>2</td>
                                            <td>Jul 31, 2024</td>
                                            
                                            <td>Jul 31, 2024</td>
                                            <td>Jul 31, 2024</td>
                                            <td><span class="status-rejected">Rejected</span></td>
                                        </tr> -->
                                      </tbody>
                                    </table>
                                  </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- STATE HOLIDAY MODAL ENDS-->
            <!-- LEAVE HISTORY MODAL STARTS-->
            <div class="modal fade" id="myModal1" role="dialog">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content" style="height: 500px;">
                        <!-- Modal Header -->
                        <div class="modal-header">
                            <div style="display: contents;">
                                <div style="display: flex;gap:10px;">
                                    <div style="display: flex; align-items: center;">
                                        <div id="popup_header1">Holiday List</div>
                                    </div>
                                    <div>
                                        <div id="holiday_name" style="border: 1px solid #ccc;padding: 5px 12px;border-radius: 10px;"></div>
                                    </div>
                                </div>
                                <div>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                            </div>
                        </div>
                        <!-- Modal body -->
                        <div class="modal-body" style="overflow: auto;">
                            <div class="modal_contant">
                                <div>
                                    <div class="holiday_div" style="padding: 14px 14px 0px 14px;">
                                        <ul id="holiday_cal" style=" gap: 15px; display: flex; flex-direction: column;"></ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- LEAVE HISTORY MODAL END -->
            <!-- MY PERFORMANCE FILTER MODAL STARTS-->
            <div class="modal" id="myModal_myperfo1" style="backdrop-filter: blur(2px);">
                <div class="modal-dialog modal-fullscreen" style="width:85%; position:absolute; right:0;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <div style="display: contents;">
                                <div style="display: flex; align-items: center;gap: 15px;">
                                    <i class="fa-solid fa-arrow-left-long bkarrowicon" style=" cursor: pointer;font-size: 1.5rem; color: #ffda0a;" data-bs-dismiss="modal"></i>
                                    <div id="modal_header1"></div>
                                </div>
                                <div style="display: flex; gap: 25px;align-items: center;">
                                    <div style="display: flex; gap: 10px;">
                                        <button type="button" class="btn btn-outline-success" style="font-size: 14px; font-weight: 500;" onclick="download_excel_report();">Excel</button>
                                        <button type="button" class="btn btn-outline-primary" style="font-size: 14px; font-weight: 500;" onclick="download_filter_report();">Download</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-body" style="padding: 0px">
                            <div class="modal_contant">
                                <div id="project_wise_hours_popup" style="display: none; border-top: 1px solid #ddd;">
                                    <table style="width: 100%;">
                                        <thead style="position: sticky;top: 0px; background: white;">
                                            <tr style = "border-bottom: 1px solid #ddd;font-size: 12px; font-weight: 600;text-align: center;">
                                                <td>Sr No</td>
                                                <td>Date</td>
                                                <td>Sign In Project</td>
                                                <td>Sign Out Project</td>
                                                <td>Day Hrs</td>
                                            </tr>
                                        </thead>
                                        <tbody id="project_wise_hours_body" style="text-align: center;"></tbody>
                                    </table>
                                </div>
                                <div id="weekly_dsr_popup" style="display: none; border-top: 1px solid #ddd;">
                                    <table class="table table-condensed table-striped" style="width: 100%;">
                                        <thead style="position: sticky;top: 0px; background: white;">
                                            <tr style = "border-bottom: 1px solid #ddd;font-size: 12px; font-weight: 600;text-align: center;">
                                                <td></td>
                                                <td>Sr No</td>
                                                <td>Week</td>
                                                <td>Task</td>
                                                <td>DSR Project</td>
                                                <td>DSR Product</td>
                                                <td>DSR Work Type</td>
                                                <td>Hrs Spend</td>
                                                <td>Attempt QTY</td>
                                                <td>Work Done QTY</td>
                                            </tr>
                                        </thead>
                                        <tbody id="weekly_dsr_body" class="expandbtn" style="text-align: center;"></tbody>
                                    </table>
                                </div>
                                <div id="dsr_work_analysis_popup" style="display: none; border-top: 1px solid #ddd;">
                                    <table style="width: 100%;">
                                        <thead style="position: sticky;top: 0px; background: white;">
                                            <tr style = "border-bottom: 1px solid #ddd;font-size: 12px; font-weight: 600;text-align: center;">
                                                <td>Sr No</td>
                                                <td>DSR Work Type</td>
                                                <td>DSR Task Name</td>
                                                <td>DSR Project</td>
                                                <td>DSR Product</td>
                                                <td>Hrs Spend</td>
                                                <td>Attempt QTY</td>
                                                <td>Work Done QTY</td>
                                                <td>Work Done Amt</td>
                                            </tr>
                                        </thead>
                                        <tbody id="dsr_work_analysis_body" style="text-align: center;"></tbody>
                                    </table>
                                </div>
                                <div id="location_analysis_popup" style="display: none; border-top: 1px solid #ddd;">
                                    <table style="width: 100%;">
                                        <thead style="position: sticky;top: 0px; background: white;">
                                            <tr style = "border-bottom: 1px solid #ddd;font-size: 12px; font-weight: 600;text-align: center;">
                                                <td>Sr No</td>
                                                <td>Date</td>
                                                <td>Sign In Location</td>
                                                <td>Sign In Time</td>
                                                <td>Sign Out Location</td>
                                                <td>Sign Out Time</td>
                                                <td>Attendance Status</td>
                                            </tr>
                                        </thead>
                                        <tbody id="location_analysis_body" style="text-align: center;"></tbody>
                                    </table>
                                </div>   
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- MY PERFORMANCE FILTER MODAL ENDS-->
            <!-- NOTICE BOARD MODAL START-->
            <div id="noticebackground">
                <div id="noticemenu">
                    <div class="row">
                        <div style="font-weight: 600;border-bottom: 1.27px solid #DCDEE4;display: flex;gap: 5px;">
                            <h6>Notice Board</h6>
                            <span id="notification_count" style="background:#5D51E2;color:#ffffff;height: 17px;width: 17px;border-radius: 50%;font-size: 12px;display: flex;justify-content: center;align-items: center;">1</span>
                        </div>
                        <div id="noticeboard_profile">
                            <div class="notification">
                                <div><img src="./images/notification_icon.svg" class="n-img" style="width: 30px;"></div>
                                <div style="gap: 2px;display: flex;flex-direction: column;">
                                    <div style="font-size: 13px;font-weight: 600;">Re: Support Case (#12221)</div>
                                    <div style="color: #585D68;font-size: 12px;">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ex, explicabo.</div>
                                    <div style="font-size: 12px;color: #585D68;">5h ago</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="newNotificationPopup">
                <strong> New Notifications</strong>
                <div id="popupContainer"></div>
            </div>
            <div class="modal fade" style="backdrop-filter: blur(2px);" id="noticeboard_popup" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2" tabindex="-1">
                <div class="modal-dialog modal-dialog-centered" style="min-height: 60%;">
                    <div class="modal-content">
                        <div class="modal-header" style="background-color: #5D51E2; padding: 5px;">
                            <div>
                                <p style="font-size: 14px; font-weight: 700;position: relative;left: 10%; color: white; background-color: #5D51E2;" class="modal-title" id="exampleModalToggleLabel2">Notice Board</p>
                            </div>
                            <div style="color: white;font-size: 20px;position: relative;right: 2%;cursor: pointer;" data-bs-dismiss="modal" aria-label="Close">
                                <i class="fa-solid fa-xmark"></i>
                            </div>
                         </div>
                        <div class="modal-body" id="notice_board_popupbody" style="font-size: 12px;">
                            <div style="display: flex;justify-content: space-between;">
                                <div>
                                    <div style="font-weight: 600;">Announcement Date</div>
                                    <div id="announcement_dt" style="border: 1px solid #CFD5E3;width: 220px;border-radius: 5px;background: #F4F5FD;height: 25px;padding: 2px 8px;"></div>
                                </div>
                                <div>
                                    <div style="font-weight: 600;">Announcement Valid Till Date</div>
                                    <div id="announcement_valid_dt" style="border: 1px solid #CFD5E3;width: 220px;border-radius: 5px;background: #F4F5FD;height: 25px;padding: 2px 8px;"></div>
                                </div>
                            </div>
                            <div style="display: flex;justify-content: space-between;margin-top: 10px;">
                                <div>
                                    <div style="font-weight: 600;">Announcement Category</div>
                                    <div id="announcement_category" style="border: 1px solid #CFD5E3;width: 220px;border-radius: 5px;background: #F4F5FD;height: 25px;padding: 2px 8px;"></div>
                                </div>
                                <div>
                                    <div style="font-weight: 600;">Department</div>
                                    <div id="dep_notic" style="border: 1px solid #CFD5E3;width: 220px;border-radius: 5px;background: #F4F5FD;height: 25px;padding: 2px 8px;overflow:auto;"></div>
                                </div>
                            </div>
                            <div style="margin-top: 10px;font-weight: 600;">Announcement Title</div>
                            <div id="announcement_title" style="border: 1px solid #CFD5E3;border: 1px solid #CFD5E3;border-radius: 5px;height: 25px;background: #F4F5FD;padding: 2px 8px;">
                            </div>
                            <div style="margin-top: 10px;font-weight: 600;">Announcement Content</div>
                            <div id="announcement_cont" style="border: 1px solid #CFD5E3;border-radius: 5px;padding: 3px;height: 150px;background: #F4F5FD;padding: 2px 8px;max-height: 200px;overflow: auto;font-size: 14px;">    
                            </div>
                            <div id="notice_attachment" style="border: 1px solid rgb(207, 213, 227);margin-top: 10px;border-radius: 5px;cursor: pointer;padding: 6px 15px;width: max-content;text-align: center;color: #101010;background: rgb(244, 245, 253);display: flex;gap: 5px;">
                                <img src="./images/File.svg" alt="" style="width: 18px;">View Attechment
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- NOTICE BOARD MODAL START-->
        <!-- ALL MODALS WILL COME HERE ENDS-->
            <!-- MY PROFILE TAB STARTS-->
            <div class="tab-pane fade" id="pills-Profile" role="tabpanel" aria-labelledby="pills-Profile-tab">
                <div class="row">
                    <div class="col-md-3 profile-column">
                        <div id="profile-cards" style="margin-bottom: 1.5rem">
                            <div class="card">
                                <div class="card-content" style="padding:0px;">
                                    <div class="headerimg">
                                        <img  src="./images/Header.png" alt="header" width="auto"; style="width: 100%; border-radius: 10px 10px 0px 0px;">
                                    </div>
                                    <div class="col-md-3 col-lg-3">
                                        <div class="row" style="display: flex;gap: 10px;justify-content: space-between;flex-wrap: nowrap;align-items: center;">
                                            <div> 
                                                <img class="myprofile-user-img" src="" onerror="this.src='../images/profile-icon.png'" style="width:100%;height:110px; width: 150px;border: 6px solid white;position: relative;margin:-64px 0px 0px 30px;padding: 0;border-radius: 6px;">
                                            </div>
                                        </div>
                                    </div>
                                    <div id="profile_tab" style="border-bottom: 1.5px solid #DEE1E9;">
                                        <nav class="navbar">                  
                                            <ul class="nav nav-pills" id="pills-tab" role="tablist" style="gap: 10px; justify-content: center;">
                                                <li class="nav-item" role="presentation">
                                                    <button class="active navdata" id="pills-Personal_Info-tab" data-bs-toggle="pill" data-bs-target="#pills-Personal_Info" type="button" role="tab" aria-controls="pills-Personal_Info" aria-selected="true">Personal Info</button>
                                                </li>
                                                <li class="nav-item" role="presentation">
                                                    <button class="navdata" id="pills-Family-Info-tab" data-bs-toggle="pill" data-bs-target="#pills-Family-Info" type="button" role="tab" aria-controls="pills-Family-Info" aria-selected="false">Family Info</button>
                                                </li>
                                                <li class="nav-item" role="presentation">
                                                    <button class="navdata" id="pills-Bank-Details-tab" data-bs-toggle="pill" data-bs-target="#pills-Bank-Details" type="button" role="tab" aria-controls="pills-Bank-Details" aria-selected="false">Bank Details</button>
                                                </li>
                                            </ul>
                                        </nav>
                                    </div>
                                    <div class="tab-content">
                                        <div class="tab-pane fade show active" id="pills-Personal_Info" role="tabpanel" aria-labelledby="pills-Personal_Info-tab">
                                            <div style="padding: 10px;">
                                                <div id="personal_info_empname" class="personalinfo_tit">Employee Name</div>
                                                <div id="personal_info_name" style="font-size: 12px; font-weight: 500;padding-top: 3px;">--</div>
                                                <div style="display: flex;justify-content: space-between;">
                                                    <div style="display: flex;flex-direction: column; width: 45%;">
                                                        <div>
                                                            <div style="margin-top: 10px;" class="personalinfo_tit">Code</div>
                                                            <div id="personal_info_code" style="font-size: 12px;">--</div>
                                                        </div>
                                                        <div>
                                                            <div style="margin-top: 10px;" class="personalinfo_tit">DOJ</div>
                                                            <div id="personal_info_doj" style="font-size: 12px;">--</div>
                                                        </div>
                                                        <div>
                                                            <div style="margin-top: 10px;" class="personalinfo_tit">Department</div>
                                                            <div id="personal_info_dep" style="font-size: 12px;">--</div>
                                                        </div>
                                                    
                                                        <div>
                                                            <div style="margin-top: 10px;" class="personalinfo_tit">Branch Name</div>
                                                            <div id="personal_info_brnach" style="font-size: 12px;">--</div>
                                                        </div>
                                                    </div>
                                                    <div style="display: flex;flex-direction: column; width: 55%;">
                                                        <div>
                                                            <div style="margin-top: 10px;" class="personalinfo_tit">Organization</div>
                                                            <div id="personal_info_org" style="font-size: 12px;">--</div>
                                                        </div>
                                                        <div>
                                                            <div style="margin-top: 10px;" class="personalinfo_tit">Designation</div>
                                                            <div id="personal_info_deg" style="font-size: 12px;">--</div>
                                                        </div>
                                                        <div>
                                                            <div style="margin-top: 10px;" class="personalinfo_tit">Reporting Manager</div>
                                                            <div id="personal_info_reportig" style="font-size: 12px;">--</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div style="position: absolute;font-size: 12px;right: 10px !important;bottom: 10px !important;color: #5D51E2;" data-bs-toggle="modal" data-bs-target="#myModalprofile" onclick="openformprofile('personal_info_form', '', '', 'myModalprofile');"> <span><i class="fa-regular fa-plus"></i></span> Personal Info</div>

                                        </div>
                                        <div class="tab-pane fade" id="pills-Family-Info" role="tabpanel" aria-labelledby="pills-Family-Info-tab">
                                            <div style="padding: 10px;">
                                                <div style="display: flex;justify-content: space-between;">
                                                    <div>  
                                                        <div style="margin-top: 15px;" class="personalinfo_tit">Father Name</div>
                                                        <div id="Family_Info_fathername" style="font-size: 12px;">--</div>
                                                        <div style="margin-top: 10px;" class="personalinfo_tit">Spouse Name</div>
                                                        <div id="Family_Info_spousename" style="font-size: 12px;">--</div>
                                                        <div style="margin-top: 10px;" class="personalinfo_tit">Daughter Name</div>
                                                        <div id="Family_Info_daughter" style="font-size: 12px;">--</div>
                                                    </div>
                                                    <div>
                                                        <div style="margin-top: 10px;" class="personalinfo_tit">Mother Name</div>
                                                        <div id="Family_Info_mothername" style="font-size: 12px;">--</div>
                                                        <div style="margin-top: 10px;" class="personalinfo_tit">Son Name</div>
                                                        <div id="Family_Info_son" style="font-size: 12px;">--</div>
                                                    </div>
                                                </div>
                                                <div style="margin-top: 10px;" class="personalinfo_tit">Residence Address</div>
                                                <div id="Family_Info_residenceaddress" style="font-size: 12px;">--</div>
                                            </div>
                                                <div style="position: absolute;font-size: 12px;right: 10px !important;bottom: 10px !important;color: #5D51E2;" data-bs-toggle="modal" data-bs-target="#myModalprofile" onclick="openformprofile('family_detail_iframe', '', '', 'myModalprofile');"> <span><i class="fa-regular fa-plus"></i></span> Family Detail</div>
                                        </div>
                                        <div class="tab-pane fade" id="pills-Bank-Details" role="tabpanel" aria-labelledby="pills-Bank-Details-tab">
                                            <div style="padding: 10px;">
                                                <div style="margin-top: 15px;" class="personalinfo_tit">Bank Name</div>
                                                <div id="Bank_Details_bankname" style="font-size: 12px;">--</div>
                                                <div style="margin-top: 10px;" class="personalinfo_tit">Branch</div>
                                                <div id="Bank_Details_branchname" style="font-size: 12px;">--</div>
                                                <div style="margin-top: 10px;" class="personalinfo_tit">IFSC Code</div>
                                                <div id="Bank_Details_ifsccode" style="font-size: 12px;">--</div>
                                                <div style="margin-top: 10px;" class="personalinfo_tit">Saving/Current</div>
                                                <div id="Bank_Details_accounttype" style="font-size: 12px;">--</div>
                                            </div>
                                            <div style="position: absolute;font-size: 12px;right: 10px !important;bottom: 10px !important;color: #5D51E2;" data-bs-toggle="modal" data-bs-target="#myModalprofile" onclick="openformprofile('bank_detail_iframe', '', '', 'myModalprofile');"> <span><i class="fa-regular fa-plus"></i></span> Bank Detail</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="com_info" class="card" style="height: 142px;">
                            <div style="justify-content: space-between; margin-top: 5px; padding: 10px;">
                                <div style="display:flex; gap:3%; align-items: center;">
                                    <div>
                                        <img id="companyLogo" src="" onerror="this.src='./images/company.svg'" style="width: 40px;">
                                    </div>
                                    <div id="companyName" style="font-size: 12px; font-weight: 600; display: flex;"></div>
                                </div>
                            </div>
                            <div class="company_page" style="display: flex; margin-top: 11px; padding: 10px; justify-content: space-between;">
                                <div id="websiteLink" class="com_det" style="background:#E1FBFF; border: 1px solid rgba(178, 230, 238, 1)">
                                    <span><img src="./images/website.svg" class="n-img" style="width: 20px;"></span>
                                    <a href="#" target="_blank" style="text-decoration: none; color: inherit;">Website</a>
                                </div>
                                <div id="ourVisionLink" class="com_det" style="background: #FFFCE5; border: 1px solid rgba(243, 237, 186, 1)">
                                    <span><img src="./images/Our_Vision.svg" class="n-img" style="width: 20px;"></span>
                                    <a href="#" style="cursor:pointer; text-decoration: none; color: inherit;">Our Vision</a>
                                </div>
                                <div id="brochureLink" class="com_det" style="background: #F4E9FF; border: 1px solid rgba(228, 212, 243, 1)">
                                    <span><img src="./images/Brochure.svg" class="n-img" style="width: 20px;"></span>
                                    <a href="#" style="cursor:pointer; text-decoration: none; color: inherit;">Brochure</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-9">
                        <div class="d-flex">
                            <div class="col-md-12">
                                <div class="row" style="margin-bottom: 1.5rem">
                                    <div class="col-lg-5 col-md-5 col-sm-12 col-xl-5">
                                        <div class="meetingcard card">
                                            <div class="d-flex" style="justify-content: space-between;align-items: center;border-bottom: 1px solid #eee;padding: 0 20px 0 0;border-bottom: 1px solid #eee;">
                                                <h4 class="card-heading" style="padding: 12px;margin: 0;">Upcoming Meetings</h4>
                                                <div data-bs-toggle="modal" data-bs-target="#myModalprofile" onclick="openformprofile('createmeting_profile', '', '', 'myModalprofile');"><button id="blue_btn">Create Meeting</button></div>
                                            </div>
                                            <div class="card-content" style="justify-content: center; height: -webkit-fill-available;">
                                                <div style="height: 178px; overflow: auto;">
                                                    <div class="Upcoming_Meetings" style="padding: 14px 14px 0px 14px;">
                                                        <ul id="upcoming_meetings_list" style=" gap: 15px; display: flex; flex-direction: column;">
                                                            
                                                        </ul>    
                                                    </div>   
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-7 col-md-7 col-sm-12 col-xl-7">
                                        <div class="attendancecard card">
                                            <div class="d-flex" style="justify-content: space-between;align-items: center;border-bottom: 1px solid #eee;padding: 0 20px 0 0;border-bottom: 1px solid #eee;">
                                                <h4 class="card-heading" style="padding: 12px;margin: 0;">Attendance</h4>
                                                <div class="signin-out" style="">
                                                    
                                                    <div>
                                                        <div class="user-dropdown">
                                                            <select id="monthlist" class="form-select form-select-sm" style="font-size: 14px;border: 1.5px solid #DEE1E9; padding: 4.9px; border-radius: 6px; color: #7D8491; width: 95px;" aria-label=".form-select-sm example" onchange="Progressbar();">
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div><button id="blue_btn" type="button" class="signin_camera signout_camera" data-toggle="modal" data-target="#exampleModalCenter" onclick="signinbtn(); ">Sign In</button></div>
                                                    <div><button id="signout_btn" type="button" data-toggle="modal" class="signout_camera" data-target="#exampleModalCenter" onclick="signoutbtn();">Sign out</button></div>
                                                    <div data-bs-toggle="modal" data-bs-target="#myModalprofile" onclick="openformprofile('applyleave_profile', '', '', 'myModalprofile');"><button id="applyleave_btn">Apply Leave</button></div>
                                                </div>
                                            </div>
                                            <div class="d-flex" style="padding: 13px 5px; align-items: center; justify-content: center; height: inherit;">     
                                                <div class="col-9 d-flex" style="justify-content: space-around;">                                                                      
                                                    <div class="presentbar">
                                                        <div id="gauge-container">
                                                            <div id="gauge0"  style="color: #27CCAE;">
                                                            </div>
                                                        </div>
                                                        <p class="progressbartext">Present Days</p>
                                                    </div>
                                                    <div class="presentbar">
                                                        <div id="gauge-container4">
                                                            <div id="gauge04" style="color: #FF5F98;"></div>
                                                        </div>
                                                        <p class="progressbartext">Late Marks</p>
                                                    </div>
                                                    <div class="presentbar">
                                                        <div id="gauge-container6">
                                                            <div id="gauge06" style="color: #577FFB;"></div>
                                                        </div>
                                                        <p class="progressbartext">OD Days</p>
                                                    </div>
                                                    <div class="presentbar">
                                                        <div id="gauge-container3">
                                                            <div id="gauge03" style="color: #FF8918;"></div>
                                                        </div>
                                                        <p class="progressbartext">Paid Leave</p>
                                                    </div> 
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex">
                            <div class="col-md-12">
                                <div class="row" style="margin-bottom: 1.5rem">
                                    <div class="col-lg-5 col-md-5 col-sm-12 col-xl-5">
                                        <div class="card">
                                            <div class="d-flex" style="justify-content: space-between;align-items: center;border-bottom: 1px solid #eee;padding: 0 10px 0 0;border-bottom: 1px solid #eee;">  
                                                <!-- <h4 class="card-heading" style="padding: 12px;margin: 0;">My Pending Task <span style="background:#FFEAD7;color: #FF9632;border: 1px;height: 18px;width: 17px;display: inline-block;border-radius: 50%;text-align: center;padding: 2px;font-size: 13px;min-width:max-content;" id="pending_task_count"></span></h4> -->
                                                <h4 class="card-heading" style="padding: 12px;margin: 0;">Upcoming Visit</h4>
                                                <div>
                                                    <button id="blue_btn" data-bs-toggle="modal" data-bs-target="#myModalprofile" onclick="openformprofile('upcoming_visit_form', '', '', 'myModalprofile');">Add Visit</button>
                                                    <!-- <button id="blue_btn" type="button" style="display: none;" class="journey-bike signin_camera signout_camera" data-toggle="modal" data-target="#exampleModalCenter" onclick="signinbtn();"><i class="fa fa-motorcycle" aria-hidden="true"></i></button> -->
                                                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" class="journey-bike signin_camera signout_camera fill-current mr-2 size-4" data-toggle="modal" data-target="#exampleModalCenter" onclick="signinbtn();" style="display: none;width: 25px;margin-left: 10px;">
                                                        <path fill-rule="evenodd" d="M.061 15.706a.6.6 0 0 0-.06.272c0 .1.026.197.077.281a.5.5 0 0 0 .212.197c1.206.63 1.911.98 2.473 1.257l.504.25v.001l.356.175c.412.201.843.412 1.523.762l.015.008.016.005c.32.098.66.112.99.041.326-.07.633-.22.892-.438l15.21-9.694a6 6 0 0 0 1.089-.84c.333-.27.556-.658.622-1.084a1.67 1.67 0 0 0-.27-1.202.53.53 0 0 0-.206-.206l-.009-.005c-.84-.407-1.439-.567-2.106-.447-.648.117-1.343.496-2.382 1.086l-.003.002-4.922 2.92q-.722-.118-1.522-.236l-.072-.01c-.583-.089-1.189-.18-1.806-.284h-.002l-1.113-.176h-.003c-1.45-.228-2.965-.467-4.461-.713a1.5 1.5 0 0 0-.638.027 1.6 1.6 0 0 0-.575.28l-.683.45a.91.91 0 0 0-.497.737v.019a.66.66 0 0 0 .337.574l5.422 3.199-2.565 1.652-1.726-.1-1.982-.11h-.003a.6.6 0 0 0-.322.083l-.006.004L.25 15.49l-.005.003a.6.6 0 0 0-.184.213m4.037-.111 1.831.107a.7.7 0 0 0 .443-.114l3.226-2.041.004-.003a.78.78 0 0 0 .257-1.007.7.7 0 0 0-.255-.268l-.002-.001-5.399-3.21.296-.174.009-.005c.126-.083.193-.12.247-.137a.35.35 0 0 1 .173-.004c.95.147 1.903.3 2.84.451l.056.01c.918.147 1.821.293 2.694.428 1.268.196 2.465.382 3.524.556l.01.001a.6.6 0 0 0 .228-.017l.077-.015a.6.6 0 0 0 .171-.056l.012-.007 5.02-2.987c.987-.537 1.522-.824 1.966-.915.405-.083.743-.005 1.325.267a.5.5 0 0 1 .05.151c.007.062 0 .14-.052.244-.11.223-.414.55-1.144 1.022L6.457 17.578l-.009.006c-.266.19-.463.268-.6.296a.53.53 0 0 1-.248 0c-.803-.42-1.235-.63-1.772-.893l-.18-.087c-.496-.243-1.055-.516-1.997-.996l.627-.423z" clip-rule="evenodd"></path>
                                                    </svg>
                                                </div>
                                            </div>
                                            <div style="height: 253px; overflow: auto;">
                                                <div class="Pending_Task" style="padding: 10px;">
                                                    <!-- <ul id="pending_task_list"></ul> -->
                                                    <ul id="upcoming_visit_body"></ul>
                                                </div>   
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-7 col-md-7 col-sm-12 col-xl-7">
                                        <div class="card" style="padding: 14px;">
                                            <div class="d-flex" style="max-width: 100%;">
                                                <div class="col-md-6" style="gap: 15px;display: flex; flex-direction: column; max-width: 50%;">
                                                    <div class="form_btn reimbursement" style="max-width: 95%;" data-bs-toggle="modal" data-bs-target="#myModalprofile" onclick="openformprofile('apply_reimbursement_profile', '', '', 'myModalprofile');">
                                                        <div style="font-size: 12px; font-weight: 500;">Apply Reimbursement</div>
                                                        <div style="height: 40px; width: 40px; background: rgba(243, 102, 67, 0.2); border-radius: 10px; align-items: center;justify-content: center;display: flex;">
                                                            <img src="./images/Apply_reimbursement.svg" alt="">
                                                        </div>
                                                    </div>
                                                    <div class="form_btn advance" style="max-width: 95%;" data-bs-toggle="modal" data-bs-target="#myModalprofile" onclick="openformprofile('apply_advance_profile', '', '', 'myModalprofile');">
                                                        <div style="font-size: 12px; font-weight: 500;">Apply Advance</div>
                                                        <div style="height: 40px; width: 40px; background: rgba(39, 214, 245, 0.2); border-radius: 10px; align-items: center;justify-content: center;display: flex;">
                                                            <img src="./images/Apply_Advance.svg" alt="">
                                                        </div>  
                                                    </div>
                                                    <div class="form_btn activity" style="max-width: 95%;" data-bs-toggle="modal" data-bs-target="#myModalprofile" onclick="openformprofile('apply_od_activity_profile', '', '', 'myModalprofile');">
                                                        <div style="font-size: 12px; font-weight: 500;">Apply OD Activity</div>
                                                        <div style="height: 40px; width: 40px; background: rgba(89, 58, 255, 0.2); border-radius: 10px; align-items: center;justify-content: center;display: flex;">
                                                            <img src="./images/Apply_OD.svg" alt="">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6" style="gap: 15px;display: flex; flex-direction: column; max-width: 50%;">
                                                    <div class="form_btn dsr" data-bs-toggle="modal" data-bs-target="#myModalprofile" onclick="openformprofile('dsr_entry_profile', '', '', 'myModalprofile');">
                                                        <div style="font-size: 12px; font-weight: 500;">DSR Entry</div>
                                                        <div style="height: 40px; width: 40px; background: rgba(36, 214, 165, 0.2); border-radius: 10px; align-items: center;justify-content: center;display: flex;">
                                                            <img src="./images/DSR_Entry.svg" alt="">
                                                        </div>
                                                    </div>
                                                    <div class="form_btn suggestions" data-bs-toggle="modal" data-bs-target="#myModalprofile" onclick="openformprofile('create_suggestions_profile', '', '', 'myModalprofile');">
                                                        <div style="font-size: 12px; font-weight: 500;">Create Suggestions</div>
                                                        <div style="height: 40px; width: 40px; background: rgba(242, 76, 166, 0.2); border-radius: 10px; align-items: center;justify-content: center;display: flex;">
                                                            <img src="./images/Create_Suggestions.svg" alt="">
                                                        </div>
                                                    </div>
                                                    <div class="form_btn sug" data-bs-toggle="modal" data-bs-target="#myModalprofile" onclick="openformprofile('create_iou_profile', '', '', 'myModalprofile');">
                                                        <div style="font-size: 12px; font-weight: 500;">Create IOU</div>
                                                        <div style="height: 40px; width: 40px; background: rgba(255, 149, 24, 0.2); border-radius: 10px; align-items: center;justify-content: center;display: flex;">
                                                            <img src="./images/Create_Suggestion_1.svg" alt="">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex">
                            <div class="col-md-12">
                                <div class="row" style="margin-bottom: 1.5rem">
                                    <div class="col-lg-4 col-md-4 col-sm-12 col-xl-4">
                                        <div class="card">
                                            <div class="d-flex" style="align-items: center;border-bottom: 1px solid #eee; gap: 10px;">
                                                <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Birthday This Week</h4>
                                                <img src="./images/Cake_Icon.svg" class="n-img">
                                            </div>
                                            <div style="height: 253px; overflow: auto;">
                                                <div class="upcomingbirthdays" style="padding: 10px;">
                                                    <ul id="upcomingbirthdaylist" style=" gap: 15px; display: flex; flex-direction: column;margin-bottom: 0rem;"></ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-12 col-xl-4">
                                        <div class="card">
                                            <div class="d-flex" style="align-items: center;border-bottom: 1px solid #eee; gap: 10px;">
                                                <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Welcome to The Team</h4>
                                                <img src="./images/Anniversary_Icon.svg" class="n-img">
                                            </div>
                                            <div style="height: 253px; overflow: auto;">
                                                <div class="workanniversaries" style="padding:10px;">
                                                    <ul id="newjoininglist" style=" gap: 15px; display: flex; flex-direction: column;margin-bottom: 0rem;"></ul>    
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-12 col-xl-4">
                                        <div class="card">
                                            <div class="d-flex" style="align-items: center;border-bottom: 1px solid #eee; gap: 10px;">
                                                <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Achievements</h4>
                                                <img src="./images/Achievements_Icon.svg" class="n-img">
                                            </div>
                                            <div style="height: 253px; overflow: auto;">
                                                <div class="Achievements" style="padding: 10px;">
                                                    <ul id="achievementslist" style=" gap: 15px; display: flex; flex-direction: column;"></ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- MY PROFILE TAB ENDS-->
            <!-- MY ATTENDANCE TAB STARTS-->
            <div class="tab-pane fade" id="pills-Attendance" role="tabpanel" aria-labelledby="pills-Attendance-tab">
                <div>
                    <div class="user-details pb-3">
                        <div class="container-fluid">
                            <div class="gap-2 d-flex">
                                <div class="col-md-6 d-flex align-items-center" style="gap: 10px;">
                                    <div class="user-img">
                                        <img src="" class="user-img-small" onerror="this.src='./images/profile-icon.png'"/>
                                    </div>
                                    <div class="user-name">
                                        <h6 class="mb-0" style="font-size: 14px;">Milind Shirin, Your Attendance Report</h6>
                                    </div>
                                    <div class="user-dropdown">
                                        <select class="form-select form-select-sm" style="font-size: 14px; color: #7D8491;" aria-label=".form-select-sm example" id="months" onchange="callingall()"></select>
                                    </div>
                                    <div style="display: flex; align-items: center;">
                                        <div style="margin: 0; color:#5d51e2; cursor:pointer;" data-bs-toggle="modal" data-bs-target="#attendance_shift_modal" onclick="attendanceShiftData();">Attendance Shift</div>
                                    </div>
                                </div>
                                <div class="col-md-6" style="text-align: right;">
                                    <span>
                                        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#myModalprofile" onclick="openformprofile('attendance_correction_iframe', '', '', 'myModalprofile');"  style="cursor: pointer; font-size: 14px;background: transparent; color: #5D51E2;">Attendance Correction</button>
                                    </span>
                                    <span>
                                        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#myModal1"  onclick="user_holiday();" style="cursor: pointer; font-size: 14px;background: transparent; color: #5D51E2;">Holiday Calendar</button>
                                    </span>
                                    <span>
                                        <button class="signin_camera signout_camera btn btn-primary" type="button" data-toggle="modal" data-target="#exampleModalCenter" onclick="signinbtn(); " style="font-size: 14px;background: #5D51E2; color: white;">Sign IN</button>
                                    </span>
                                    <span>
                                        <button class="signout_camera btn btn-primary" type="button" data-toggle="modal" data-target="#exampleModalCenter" onclick="signoutbtn();" style="font-size: 14px; color: #5D51E2; background: unset; border: 1px solid #5D51E2;">Sign Out</button>
                                    </span>
                                    <span>
                                        <button type="button" id="applyleave_btn" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#myModalprofile" onclick="openformprofile('applyleave_profile', '', '', 'myModalprofile');"  style="cursor: pointer;font-size: 14px;color: #FF6F32;border-radius: 0.25rem !important;padding: 6px;">Apply Leave</button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="circular-items">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="progressbar_myattendance col-lg-9" style="display: flex; flex-direction: column;">
                                    <div class="card attendance_report_card" style="margin-bottom: 1.5rem;">
                                        <div class="d-flex" style="align-items: center;border-bottom: 1px solid #CED4E1;justify-content: space-between;">
                                            <div><h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Your Attendance Report</h4></div>
                                            <div style="padding: 12px 12px 12px 0px;margin: 0; color:#5d51e2; cursor:pointer;" data-bs-toggle="modal" data-bs-target="#break_journey_modal" onclick="break_journey_tbl_detail();">Break Journey</div>
                                        </div>
                                        <div class="progress-items">
                                            <div class="progress-item-1">
                                                <div id="circularprogressbar1"></div>
                                                <div class="text-center" style="cursor: pointer; font-size: 14px; padding-top: 11px;" onclick="present_click();" >Present</div>
                                            </div>
                                            <div class="progress-item-2">
                                                <div id="circularprogressbar2"></div>
                                                <div class="text-center" style="cursor: pointer; font-size: 14px; padding-top: 11px;" onclick="weekoff_click();">Week Off</div>
                                            </div>
                                            <div class="progress-item-3">
                                                <div id="circularprogressbar3"></div>
                                                <div class="text-center" style="cursor: pointer; font-size: 14px; padding-top: 11px;" onclick="absent_click();">Absent</div>
                                            </div>
                                            <div class="progress-item-4">
                                                <div id="circularprogressbar4"></div>
                                                <div class="text-center" style="cursor: pointer; font-size: 14px; padding-top: 11px;" onclick="paidleave_click();">Paid Leave</div>
                                            </div>
                                            <div class="progress-item-5">
                                                <div id="circularprogressbar5"></div>
                                                <div class="text-center" style="cursor: pointer; font-size: 14px; padding-top: 11px;" onclick="latemarks_click();">Late Mark</div>
                                            </div>
                                            <div class="progress-item-6">
                                                <div id="circularprogressbar6"></div>
                                                <div class="text-center" style="cursor: pointer; font-size: 14px; padding-top: 11px;" onclick="halfday_click();">Half Day</div>
                                            </div>
                                            <div class="progress-item-7">
                                                <div id="circularprogressbar7"></div>
                                                <div class="text-center" style="cursor: pointer; font-size: 14px; padding-top: 11px;" onclick="odday_click();">OD Day</div>
                                            </div>
                                            <div class="progress-item-8">
                                                <div id="circularprogressbar8"></div>
                                                <div class="text-center" style="cursor: pointer; font-size: 14px; padding-top: 11px;" onclick="paidday_click();">Paid Day</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="data_count" style="display: none;">
                                        <!-- <div style="text-align: center;margin: 10px 0px;">Your Present Days <span style="background-color:#11C784; padding:8px; font-size: 14px;font-weight: 600;border-radius: 50%;">16</span></div> -->
                                    </div>
                                    <div class="card" style="padding: 15px;">
                                        <!-- <div id="attendance_report_table_data" style="height: 447px !important; max-height: 447px; overflow: auto;border:1.5px solid #CED4E1;height: 530px; border-radius: 10px;scrollbar-width: none;"></div> -->
                                        <div id="attendance_report_table_data" style="height: 416px !important; overflow: auto;border-radius: 10px;scrollbar-width: none;"></div>

                                    </div>
                                </div>
                                <div class="col-lg-3" style="display: flex; gap: 1.5rem; flex-direction: column;">
                                    <div class="leavecard card">
                                        <div class="d-flex" style="align-items: center;border-bottom: 1px solid #CED4E1; justify-content:space-between;">
                                            <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Leave Status</h4>
                                            <span data-bs-toggle="modal" data-bs-target="#historymodal" style="padding: 12px 12px 12px 0px;margin: 0; color:#5d51e2; cursor:pointer;" onclick="user_name()">History</span>
                                        </div>
                                        <div style="padding: 10px;">
                                            <div class="mb-3" id="table-leave" style="overflow: auto;height: 143px;border: 2px solid #E8ECF9;border-radius: 6px;">
                                                <table style="width: 100%; border-color: #cecece; " class="table-bordered leave text-center" id="attendance_report_right_table">
                                                    <thead>
                                                        <tr style="background: #E8ECF9;border: none;">
                                                        <th scope="col" style="font-size: 12px; color:black; font-weight: 500; border: none;">Used</th>
                                                        <th scope="col" style="font-size: 12px; color:black; font-weight: 500; border: none;">Leave Status</th>
                                                        <th scope="col" style="font-size: 12px; color:black; font-weight: 500; border: none;">Balance</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="table-leave-tbody">
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="d-flex" style="align-items: center;border-bottom: 1px solid #CED4E1;">
                                            <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Pending Leave Approval</h4>
                                        </div>
                                        <div style="height: 180px; overflow: auto;">
                                            <div id="PendingleaveApproval" style="padding: 14px 14px 0px 14px; height: 100%;" >
                                                <ul id="PendingleaveApprovallist" style="gap: 15px; display: flex; flex-direction: column;" >
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="d-flex" style="align-items: center;border-bottom: 1px solid #eee; gap: 10px;">
                                            <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Upcoming Birthday</h4>
                                            <img src="./images/Cake_Icon.svg" class="n-img">
                                        </div>
                                        <div style="height: 253px; overflow: auto;">
                                            <div class="UpcomingBirthdaydiv" style="padding: 12px;">
                                                <ul id="UpcomingBirthdayslist" style=" gap: 15px; display: flex; flex-direction: column; margin-bottom: 0rem;">
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- MY ATTENDANCE TAB ENDS-->
            <!-- MY PERFORMANCE TAB STARTS-->
            <div class="tab-pane fade" id="pills-Performance" role="tabpanel" aria-labelledby="pills-Performance-tab">
                <div style="padding: 0px 10px;">
                    <div class="d-flex" style="justify-content: space-between;">
                        <div class="d-flex" style="gap: 10px;">
                            <div style="display: flex;flex-direction: column;">
                                <span style="font-size: 13px;font-weight: 500;">Name of Employee</span>
                                <div id="empname_performance" style="font-size: 14px;background: white; color: #686E7A; border: 1.5px solid #CED4E1 !important;border-radius: 6px;padding:6px;">Name of Employee</div>
                            </div> 
                            <div style="display: flex;flex-direction: column;">
                                <span style="font-size: 13px;font-weight: 500;">Employee Code</span>
                                <div id="employeecode" style="font-size: 14px;background: white; color: #686E7A; border: 1.5px solid #CED4E1 !important;border-radius: 6px;padding:6px;">Employee Code</div>
                            </div>
                            <div style="display: flex;flex-direction: column;">
                                <span style="font-size: 13px;font-weight: 500;">Month</span>
                                <div class="user-dropdown">
                                    <select id="month_performance" class="form-select form-select-sm" style="cursor: pointer; font-size: 14px;border: 1.5px solid #CED4E1 !important;padding: 5.9px;border-radius: 6px;color: #7D8491;width: 100px;" aria-label=".form-select-sm example" onchange="myperformancemonthchange();" ></select>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex" style="gap: 10px;align-items: end;">
                            <div>
                                <span style="font-size: 13px;font-weight: 500;">DSR Project</span>
                                <select id="dsr_task_category"></select>
                            </div> 
                            <div>
                                <span style="font-size: 13px;font-weight: 500;">DSR Product Name</span>
                                <select id="dsr_project"></select>
                            </div> 
                        </div>
                    </div>
                    <div class="pt-3">
                        <div class="card" style="height:100%; margin-bottom: 1.5rem;"> 
                            <div class="d-flex" style="align-items: center;border-bottom: 1px solid #CED4E1;justify-content: space-between;padding: 0px 20px 0px 0px;">
                                <div>
                                    <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Work Hrs</h4>
                                </div>
                            </div>
                            <div>
                                <div id="example">
                                    <div class="demo-section wide">
                                        <div id="workchart"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" style= "margin-bottom: 1.5rem;">
                        <div class="col-md-6">
                            <div class="card" style="height:100%;">
                                <div class="d-flex" style="align-items: center;border-bottom: 1px solid #CED4E1;justify-content: space-between;padding: 0px 20px 0px 0px;">
                                    <div>
                                        <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Location Analysis</h4>
                                    </div>
                                    <div>
                                        <i class="fa-solid fa-ellipsis-vertical filter" data-bs-toggle="modal" data-bs-target="#myModal_myperfo1" onclick="modalfilter('location_analysis_popup','Location Analysis'); location_analysis_tbody();" style="cursor: pointer; padding-right: 10px;"></i>
                                    </div>
                                </div>
                                <div style="padding: 10px;">
                                    <div id="location_analysis_data" style="height: 395px;overflow: auto;">
                                        <table id="location_analysis_table">
                                            <thead>
                                                <tr>
                                                    <td>Sr. No.</td>
                                                    <td>Date</td>
                                                    <td>Sign In Location</td>
                                                    <td>Sign Out Location</td>
                                                    <td>Attendance Status</td>
                                                </tr>
                                            </thead>
                                            <tbody id="location_analysis_table_tbody">
                                                <tr>
                                                    <td>1</td>
                                                    <td>Jul 31, 2024</td>
                                                    <td>Vikroli</td>
                                                    <td>Vikroli</td>
                                                    <td><div style="border: 1px solid #A251E2;background-color: #F6EBFF;padding: 2px 4px;border-radius: 6px;color: #A251E2;">Late Mark</div></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>                                   
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card" style="height:100%;">
                                <div class="d-flex" style="align-items: center;border-bottom: 1px solid #CED4E1;justify-content: space-between;padding: 0px 20px 0px 0px;">
                                    <div>
                                        <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Weekly DSR Output Analysis</h4>
                                    </div>
                                    <div>
                                        <i class="fa-solid fa-ellipsis-vertical filter" data-bs-toggle="modal" data-bs-target="#myModal_myperfo1" onclick="modalfilter('weekly_dsr_popup','Weekly DSR Output Report'); weekly_dsr_output_analysis_tbody();" style="cursor: pointer; padding-right: 10px;"></i>
                                    </div>
                                </div>
                                <div style="height:415px;">
                                    <div id="example">
                                        <div class="demo-section wide">
                                            <div id="dsrchart" style="height: 415px;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row pb-2">
                        <div class="col-md-7">
                            <div class="card" style="height:100%;">
                                <div class="d-flex" style="align-items: center;border-bottom: 1px solid #CED4E1;justify-content: space-between;padding: 0px 20px 0px 0px;">
                                    <div>
                                        <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">DSR Work Analysis</h4>
                                    </div>
                                    <div>
                                        <i class="fa-solid fa-ellipsis-vertical filter" data-bs-toggle="modal" data-bs-target="#myModal_myperfo1" onclick="modalfilter('dsr_work_analysis_popup','DSR Work Analysis'); dsr_work_analysis_tbody();" style="cursor: pointer; padding-right: 10px;"></i>
                                    </div>
                                </div>
                                <div style="padding: 10px;height: 90%;">
                                    <div id="dsr_work_analysis_table" style="height: 100%;overflow: auto;"></div>
                                </div>                                   
                            </div>
                        </div>
                        <div class="col-md-5">
                            <div class="card" style="height:100%;">
                                <div class="d-flex" style="align-items: center;border-bottom: 1px solid #CED4E1;justify-content: space-between;padding: 0px 20px 0px 0px;">
                                    <div>
                                        <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Project Wise Hours Spend Analysis</h4>
                                    </div>
                                    <div>
                                        <i class="fa-solid fa-ellipsis-vertical filter" data-bs-toggle="modal" data-bs-target="#myModal_myperfo1" onclick="modalfilter('project_wise_hours_popup','Project Wise Hrs Spend Report'); project_wise_hours_spend_tbody();" style="cursor: pointer; padding-right: 10px;"></i>
                                    </div>
                                </div>
                                <div style="display: flex;justify-content: space-between;margin-top: 1px;padding: 10px;font-size: 13px;">
                                    <div style="border: 1px solid lightgray;border-radius: 4px;padding: 2px;align-items: center;display: flex;">Sum of Total Hrs : <span id="totalHrsSpan" style="color: #5D51E2;font-weight: 600;"> </span></div>
                                <div style="display: flex;gap: 10px;">
                                    <div style="width: 150px;"><select id="product_wise" onchange="manpowerfunnel();"></select></div>
                                    <div style="width: 150px;"><select id="dsr_worktype" onchange="manpowerfunnel();"></select></div>
                                </div>
                                </div>
                                <div style="height:415px;">
                                    <div id="example" style=" height: 100%;">
                                        <div class="demo-section wide" style=" height: 100%;">
                                            <div id="projectwisedsrchart" style=" height: 100%;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- MY PERFORMANCE TAB ENDS-->
            <!-- MY TEAM TAB STARTS-->
            <div class="tab-pane fade" id="pills-Team" role="tabpanel" aria-labelledby="pills-Team-tab">
                <div style="padding: 0px 10px 20px 10px" class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xl-12">
                        <div style="display: flex; margin-bottom: 10px;">
                            <div class="col-md-4 d-flex" style="gap: 10px;align-items: center;">
                                <div>
                                    <img style=" border-radius: 50%;width: 25px;height: 25px;" src="" class="myteamuserimg" onerror="this.src='./images/profile-icon.png'" alt="">
                                </div>
                                <div id="myteam_username" style="font-size: 14px;">
                                    <span style="font-weight: 500;">Prabhas Raju's</span> Team Attendance Report
                                </div>
                            </div>
                            <div class="col-md-8 d-flex" style="justify-content: end; gap: 10px; align-items: center;">
                                <div style="border: 1px solid #5D51E2;font-size: 13px;padding: 7px 7px;text-align: center;border-radius: 6px;cursor: pointer;display: flex;gap: 10px;color: #5D51E2;font-weight: 500;justify-content: space-between;align-items: center;" data-bs-toggle="modal" data-bs-target="#myModalprofile" onclick="openformprofile('manpowerrequisition', '', '', 'myModalprofile');">
                                    Man Power Requisition <i class="fa-light fa-user-plus"></i>
                                </div>
                                <div style="border: 1px solid #5D51E2;font-size: 13px;padding: 4px 7px;text-align: center;border-radius: 6px;cursor: pointer;display: flex;gap: 10px;color: #5D51E2;font-weight: 500;justify-content: space-between;align-items: center;" onclick="showDsrApproval(this,'dsr_approval')">DSR Approval
                                    <span style="border-radius: 6px;border: 1px solid #D6DDF8;padding: 3px 8px;color: #5D51E2;background-color: #D6DDF8;position: relative;font-size: 12px;" id="dsr_total">0</span>
                                </div>
                                <div class="dropdown" id="rightsidelist">
                                    <!-- <button class="btn dropdown-toggle" type="button" style="background-color: #E6C721; font-weight: 600;width: 335px; font-size: 13px;display: flex;justify-content: space-between;align-items: center;" id="myteam_main_dropdown" data-bs-toggle="dropdown" aria-expanded="false">Team Approval Pending
                                        <span style="border: 1px solid blue; border-radius: 3px; background-color: #5D51E2;color: white;width: 25px;"> 0</span>
                                    </button> -->
                                    <button class="btn dropdown-toggle" type="button" style="font-weight: 500;gap: 17px;font-size: 13px;display: flex;justify-content: space-between;align-items: center;color: #5D51E2;border: 1px solid #5D51E2;border-radius: 6px;padding: 4px 7px;" id="myteam_main_dropdown" data-bs-toggle="dropdown" aria-expanded="false">Team Approval Pending <span style="border-radius: 6px;border: 1px solid #D6DDF8;padding: 3px 8px;color: #5D51E2;background-color: #D6DDF8;position: relative;font-size: 12px;">35</span></button>
                                    <ul class="dropdown-menu" aria-labelledby="myteam_main_dropdown">
                                        <li class="myteam_approval_select"><a class="dropdown-item" href="#" style="display: flex;justify-content:space-between;" onclick="showScreen(this,'team_leave_approval')">Team Leave Pending for Approval <span style="border: 1px solid; border-radius: 3px; background-color: #FE8802;color: white; width: 25px;text-align: center;">0</span></a></li>
                                        <li class="myteam_approval_select"><a class="dropdown-item" href="#" style="display: flex;justify-content:space-between;" onclick="showScreen(this,'attendanceapproval')">Team Attendance Pending for Approval <span style="border: 1px solid; border-radius: 3px; background-color: #059D46;color: white; width: 25px;text-align: center;">0</span></a></li>
                                        <li class="myteam_approval_select"><a class="dropdown-item" href="#" style="display: flex;justify-content:space-between;" onclick="showScreen(this,'calendarformyteam', 'myteam_header_filter')">Team Leave Calendar - Feture leaves <span style="border: 1px solid; border-radius: 3px; background-color: #18469E;color: white; width: 25px;text-align: center;"> 0</span></a></li>
                                        <li class="myteam_approval_select"><a class="dropdown-item" href="#" style="display: flex;justify-content:space-between;" onclick="showScreen(this,'iouapproval')">Team IOU Approval <span style="border: 1px solid; border-radius: 3px; background-color: #23BC8D;color: white; width: 25px;text-align: center;">0</span></a></li>
                                        <li class="myteam_approval_select"><a class="dropdown-item" href="#" style="display: flex;justify-content:space-between;" onclick="showScreen(this,'myteamreimbursement')">Team Reimbursement Approval <span style="border: 1px solid; border-radius: 3px; background-color: #CF2E95;color: white; width: 25px;text-align: center;">0</span></a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                       <!--Below code for form open modal  for dsr form correction start-->
                       <div class="modal" id="dsr_forms" style="backdrop-filter: blur(2px);">
                            <div class="modal-dialog modal-fullscreen" style="width:85%; position:absolute; right:0;">
                                <div class="modal-content">
                                        <!-- Modal Header -->
                                    <div class="modal-header">
                                        <i class="fa-solid fa-arrow-left-long bkarrowicon" class="btn" data-bs-dismiss="modal" style="margin-top: 4px; cursor: pointer;font-size: 1.5rem; color: #ffda0a;position: absolute;left: 15px;"></i>              
                                    </div>                
                                        <!-- Modal body -->
                                    <div class="modal-body" style="padding: 0px;overflow-y: hidden;">  
                                        <i class="fa-solid fa-arrow-left-long bkarrowicon bodyArrow" class="btn" data-bs-dismiss="modal" style="margin-top: 4px; cursor: pointer;font-size: 1.5rem; color: #ffffff;position: absolute;left: 15px;"></i>                     
                                        <div class="modal_contant">                   
                                            <div>
                                                <iframe  src="" id="dsr_form_iframe" frameborder="0" style="width: 100%; height: 99vh"></iframe>
                                            </div>
                                        </div>
                                    </div>                        
                                </div>
                            </div>
                        </div>
                        <!--code for dsr form open modal End--> 

                        <div id="teammaincontent">      
                            <div>
                                <div class="modal fade" id="exampleModalToggle3" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2" tabindex="-1">
                                    <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content">
                                            <div class="modal-header" style="background-color: #FFFFFF;">
                                                <p style="font-size: 16px; font-weight: 700;" class="modal-title" id="exampleModalToggleLabel2">Upcoming Meetings</p>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div id="upcommingmeetingdetailpoup" style="padding: 10px;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12 d-flex" style= "margin-bottom: 1.5rem;">
                                <div class="card" style="width: 100%;">
                                    <div class="d-flex" style="align-items: center;border-bottom: 1px solid #CED4E1;">
                                        <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Team Attendance</h4>
                                    </div>
                                    <div style="display: flex; align-items: center; height: -webkit-fill-available;">
                                        <div class="col-md-3" style="padding: 8px; height: -webkit-fill-available;">
                                            <div id="currentdays" style="display: flex; align-items: center; text-align: center;">
                                                <input id='calendar' style="border: 1.5px solid #CED4E1;border-radius: 4px;height: 30px;cursor: pointer;font-size:14px;padding: 8px;width: 140px;color: #7D8491;"/>
                                                <i class="calendar-icon fa-regular fa-calendar-days" style="color: #7D8491;"></i>
                                            </div>
                                            <div style="align-items: center;display: flex;flex-direction: column;padding-top: 10px;">
                                                <div id="team_size" style="flex-direction: row;">
                                                    <div style="font-size: 40px;color: rgb(22, 22, 170);width: 50%;text-align: center;display: flex;">0</div>
                                                </div>
                                                <div style="font-weight: 600;font-size: 18px;/* width: 50%; */text-align: center;">Team Size</div>
                                            </div>
                                        </div>
                                        <div class="col-md-9 progress-round vs" style="display: flex; justify-content: space-around; align-items: center;">
                                            <div class="presentbar0">
                                                <div id="gauge-container0">
                                                    <div id="myteamgauge0" style="color:#089E47;"></div>
                                                </div>
                                                <p class="progressbartext">Present</p>
                                            </div>
                                            <div class="presentbar1">
                                                <div id="gauge-container1">
                                                    <div id="myteamgauge1" style="color:#FF2334;"></div>
                                                </div>
                                                <p class="progressbartext">Absent</p>
                                            </div>
                                            <div class="presentbar2">
                                                <div id="gauge-container2">
                                                    <div id="myteamgauge2" style="color:#FD8800;"></div>
                                                </div>
                                                <p class="progressbartext">On Leave</p>
                                            </div>
                                            <div class="presentbar3">
                                                <div id="gauge-container3">
                                                    <div id="myteamgauge3" style="color:#CA4153;"></div>
                                                </div>
                                                <p class="progressbartext">On Week Off</p>
                                            </div>
                                            <div class="presentbar4">
                                                <div id="gauge-container4">
                                                    <div id="myteamgauge4" style="color:#AC1BFE;"></div>
                                                </div>
                                                <p class="progressbartext">Late Comers</p>
                                            </div>
                                            <div class="presentbar5">
                                                <div id="gauge-container5">
                                                    <div id="myteamgauge5" style="color:#A4CA41;"></div>
                                                </div>
                                                <p class="progressbartext">On OD</p>
                                            </div>
                                            <div class="presentbar6">
                                                <div id="gauge-container6">
                                                    <div id="myteamgauge6" style="color:#4079CA;"></div>
                                                </div>
                                                <p class="progressbartext">Half Day</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="Attendancetablecard" class="card" style="width: 100%; margin-bottom: 1.5rem;">
                                <div class="d-flex" style="align-items: center;border-bottom: 1px solid #CED4E1;justify-content: space-between;padding: 0px 20px 0px 0px;">
                                    <div class="d-flex attendancelable" style="gap: 25px; align-items: center;">
                                        <div>
                                            <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Team Monthly Attendance</h4>
                                        </div>
                                        <div>
                                            <select id="monthDropdown" onchange="callingyear()" style="border: 1.5px solid #CED4E1; height: 30px; border-radius: 8px; padding: 0px 10px;"></select>
                                        </div>
                                    </div>
                                    <div>
                                        <div  class="d-flex attendancelable" style="float: right; gap: 15px; font-size:12px;">
                                            <div><i style="color: #089E47; font-size: 10px;" class="fa-solid fa-circle"></i> Present</div>
                                            <div><i style="color:#FF2334; font-size: 10px;" class="fa-solid fa-circle"></i> Absent</div>
                                            <div><i style="color:#FD8800; font-size: 10px;" class="fa-solid fa-circle"></i> On Leave</div>
                                            <div><i style="color:#808080; font-size: 10px;" class="fa-solid fa-circle"></i> Week Off</div>
                                            <div><i style="color: #AC1BFE; font-size: 10px;" class="fa-solid fa-circle"></i> Late</div>
                                            <div><i style="color: #FFA500; font-size: 10px;" class="fa-solid fa-right-from-bracket"></i> Early</div>
                                            <div><i style="color: #A4CA41; font-size: 10px;" class="fa-solid fa-circle"></i> OD</div>
                                            <div><i style="color:#4079CA; font-size: 10px;" class="fa-regular fa-circle-half-stroke"></i> Half Day</div>
                                            <div><i style="color:#000b65; font-size: 10px;" class="fa-regular fa-circle-x"></i> Mismatch</div>
                                            <div><i style="color:#FDD835; font-size: 10px;" class="fa-solid fa-circle-h"></i> Company Holiday</div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <div class="col-md-12 d-flex" style="padding: 10px; height: auto;">
                                        <div id="table_one" class="col-md-2" style="scrollbar-width: none;overflow-y: scroll; height: auto; max-height: 272px;">
                                            <table style="height: 100%;">
                                                <thead>
                                                    <tr style="top: 0px;position: sticky;background: white">
                                                        <td class="proftable" style="font-weight: 600;">Employee Name</td>
                                                    </tr>
                                                </thead>
                                                <tbody id="profile_name"></tbody>
                                            </table>
                                        </div>
                                        <div id="table_two" class="col-md-10" style="scrollbar-width: none;overflow-y: scroll; height: auto; max-height: 272px;">
                                            <table style="width:100%">
                                                <thead id="table_two_thead">
                                                    <tr class="calendar_tr" style="font-weight: 600;top: 0px;position: sticky;background: #E8ECF9; font-size: 15px;">
                                                        
                                                    </tr>
                                                </thead>
                                                <tbody id="table_two_tbody" style="background-color: aliceblue; text-align-last: center;">
                                                    <tr id="attd_data" class="calendar_tr" style="text-align: center;">
                                                        <td colspan="30" style="text-align:center;font-weight: 600;background-color: white; font-size: 14px;">
                                                            <div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 300px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" style="height: auto;">
                                <div class="col-lg-6 col-md-6 col-sm-12 col-xl-6" style="width: 70%;">
                                    <div class="card" id="project_timeline_card">
                                        <div class="d-flex" style="align-items: center;border-bottom: 1px solid #CED4E1; justify-content: space-between; padding: 0px 20px 0px 0px;">
                                            <div>
                                                <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Employee Vs Project Timelines (Days)</h4>
                                            </div>
                                            <div>
                                                <select class="form-select form-select-sm" style="font-size: 14px;width: 140px;cursor: pointer;" aria-label=".form-select-sm example" id="myteam_months" onchange="createChart();"></select>
                                            </div>
                                        </div>
                                        <div style="height: 90%;">
                                            <div class="d-flex" style="justify-content: space-around;height: 100%;" >
                                                <div class="col-md-6">
                                                    <div id="charthorizontalbar" style=" height: 400px; overflow-x: auto;  position: relative; width: 100%;">
                                                        <div id="chart-kendo-bar"></div>
                                                    </div>
                                                </div>
                                                
                                                <div class="col-md-1 vl"><i class="fa-solid fa-arrow-right" style="font-size: xx-large; color: #b1aeae; margin-top: 135px;"></i></div>
                                                <div class="col-md-5">
                                                    <div style="height: 100%;">
                                                        <div id="chartbarcolumn" style="height: 100%;"></div>
                                                    </div>
                                                </div>
                                            </div> 
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-12 col-xl-2" style="width: 30%;">
                                    <div class="card" id="upcoming_meeting_card">
                                        <div class="d-flex" style="align-items: center;border-bottom: 1px solid #CED4E1; justify-content:space-between; padding: 0px 20px 0px 0px;">
                                            <div>
                                                <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Upcoming Meetings</h4>
                                            </div>
                                            <div class="dropstart" style="cursor:pointer" data-bs-toggle="modal" data-bs-target="#myModalprofile" onclick="openformprofile('createmeting_profile', '', '', 'myModalprofile');">
                                                <i class="fa-regular fa-plus"></i>
                                            </div>
                                        </div>
                                        <div>
                                            <div id="meeting_list_tbl" style="overflow-y: scroll; height: 360px; font-size:14px; padding: 14px 0px 0px 14px;">
                                                <ul id="upcoming_meetings_list1" style=" gap: 15px; display: flex; flex-direction: column;height: 100%; margin: 0;"></ul>
                                            </div>
                                        </div>
                                        <div class="d-flex" style="align-items: center;border-top: 1px solid #CED4E1; justify-content:space-between; padding: 0px 20px 0px 0px;">
                                            <div>
                                                <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Minutes of Meeting</h4>
                                            </div>
                                            <div class="dropstart" style="cursor:pointer" data-bs-toggle="modal" data-bs-target="#myModalprofile" onclick="openformprofile('minutes_of_meeting', '', '', 'myModalprofile');">
                                                <i class="fa-regular fa-plus"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="dsr_approval" style="display: none;">
                            <div class="col-md-12 d-flex" style="height: auto;margin-top: 30px;">
                               <div style="height: 700px; overflow-y: auto; width: 100%;">
                                    <table style="width: 100%;">
                                        <tr style="border-top: 1px solid #ddd !important; opacity: 0.6;">
                                        <thead style="color: #737373; font-size: 14px;">
                                            <td>Name</td>
                                            <td>DSR Date</td>
                                            <td>Status</td>
                                            <td>Approval</td>
                                        </thead>
                                        </tr>
                                        <tbody id="dsr_approval_tblbody" style="font-size: 12px;">
                                            <tr style="border-bottom: 1px solid lightslategray;">
                                            </tr>
                                        </tbody>
                                    </table>
                                </div> 
                            </div>
                        </div>
                        <div id="toast_dsrapp"></div>
                        <div id="right_dropdown_screen" style="display: none;">
                            <div id="myteam_header_filter" class="box-shadow-box" style="padding: 0 !important;">
                                <div class="myteam-header-filter">
                                    <div>Find Leave / Pending Approval Status</div>
                                    <div class="input-wrapper" style="--place-holder: 'loading...'" >
                                        <input type="text" id="myteam_company_name">
                                    </div>
                                    <div class="input-wrapper" style="--place-holder: 'select company name'" >
                                        <input type="text" id="myteam_project_name">
                                    </div>
                                    <div class="input-wrapper" style="--place-holder: 'select project name'">
                                        <input type="text" id="myteam_employee_name">
                                    </div>
                                    <div>
                                        <input type="date" class="input-style" id="">
                                    </div>
                                    <div>
                                        <button type="button" class="btn btn-primary">Search</button>
                                    </div>
                                </div>
                            </div>
                            <div id="myteamreimbursement" style="display: none;">
                                <div class="col-md-12 d-flex" style="height: auto;margin-top: 30px;">
                                    <table style="width: 100%;">
                                        <thead style="color: black; font-size: 14px;">
                                            <tr style="border-top: 1px solid #ddd !important;">
                                                <td style="text-align: center;">Name</td>
                                                <td class="namefield" style="text-align: center;">Date Range</td>
                                                <td class="datefield" style="text-align: center;">Assigned By</td>
                                                <td class="departmentfield" style="text-align: center;">Reimbursement Reason</td>
                                                <td style="text-align: center;">Status</td>
                                                <td style="text-align: center;">Approve</td>
                                                <td style="text-align: center;">Reject</td>
                                            </tr>
                                        </thead>
                                        <tbody id="teamreimbursementapprov" style="font-size: 12px;">
                                            <tr style="border: 1px solid lightgray;">
                                                <td colspan="8" style="text-align:center;font-weight: 600;">
                                                    <div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 300px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        
                            <div id="iouapproval" style="display: none;">
                                <div class="col-md-12 d-flex" style="height: auto; margin-top: 30px;">
                                    <table style="width: 100%;">
                                        <thead style="color: black; font-size: 14px;">
                                            <tr style="border-top: 1px solid #ddd !important;">
                                                <td class="checkboxfield" style="text-align: center;">Select All</td>
                                                <td style="text-align: center;">Name</td>
                                                <td class="namefield" style="text-align: center;">IOU Date</td>
                                                <td class="datefield" style="text-align: center;">IOU Amount</td>
                                                <td class="departmentfield" style="text-align: center;">IOU Particular</td>
                                                <td style="text-align: center;">Status</td>
                                                <td style="text-align: center;">Approve</td>
                                                <td style="text-align: center;">Reject</td>
                                            </tr>
                                        </thead>
                                        <tbody id="teamiouapproval" style="font-size: 12px;">
                                            <tr style="border: 1px solid lightgray;">
                                                <td colspan="8" style="text-align:center;font-weight: 600;">
                                                    <div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 300px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        
                            <!--below model for iouapproval-->
                            <div class="modal fade" id="exampleModalToggle7" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2" tabindex="-1">
                                <div class="modal-dialog modal-xl modal-dialog-centered" style="max-width: 90%;">
                                    <div class="modal-content">
                                        <div class="modal-header" style="padding: 5px; font-weight: 600;border-bottom: none;">
                                            <p style="font-size: 14px; font-weight: 700;" class="modal-title d-none" id="exampleModalToggleLabel2">IOU Approval</p>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body" id="upcommingmeetingdetail">
                                            <iframe src="" id="exampleModalToggle7_iframe" style="width: 100%;height:70vh;"></iframe>
                                        </div> 
                                    </div>
                                </div>
                            </div>
                        <!--below model for iouapproval end-->
                        
                            <div class="col-md-12" id="attendanceapproval" style="height: auto; display: none;">   
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xl-12">
                                    <table style="width: 100%; margin-top: 30px;">
                                        <thead style="color: black;text-align: center; border: 1px solid lightgrey;font-size:14px;">
                                            <tr style="border-top: 1px solid lightgrey !important;">
                                                <td style="text-align: center;">Name</td>
                                                <td class="namefield" style="text-align: center;">Date Range</td>
                                                <td class="datefield" style="text-align: center;">Sign In</td>
                                                <td class="departmentfield" style="text-align: center;">Sign Out</td>
                                                <td style="text-align: center;">Attendance Remark</td>
                                                <td style="text-align: center;">Attendance Pending Reason</td>
                                                <td style="text-align: center;">Correction request</td>
                                                <td style="text-align: center;">Status</td>
                                                <td style="text-align: center;">Approve</td>
                                                <td style="text-align: center;">Reject</td>
                                            </tr>
                                        </thead>
                                        <tbody id="table_attendance_approval" style="font-size:12px;">
                                            <tr style="border: 1px solid lightgray;">
                                                <td colspan="10" style="text-align:center;font-weight: 600;">
                                                    <div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 300px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <div class="modal fade" id="exampleModalToggle4" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2" tabindex="-1">
                                        <div class="modal-dialog modal-lg modal-dialog-centered">
                                            <div class="modal-content">
                                                <div class="modal-header" style="padding: 5px; font-weight: 600;border-bottom: none;">
                                                    <p style="font-size: 14px; font-weight: 700;" class="modal-title" id="exampleModalToggleLabel2">Time Correction</p>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body" id="attendance_apptoval_team">
                                                    <table style="width: 100%; margin-top: 30px;">
                                                        <thead style="color: #737373;text-align: center; border: 1px solid lightgrey;">
                                                            <tr style="border-top: 1px solid lightgrey !important; opacity: 0.6;">
                                                                <td>Name</td>
                                                                <td class="namefield">New Sign In Time</td>
                                                                <td class="datefield">New Sign Out Time</td>
                                                                <td class="departmentfield">Remark</td>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="birthdayslider">
                                                            <tr style="border: 1px solid lightgray;">
                                                                <td style="border: 1px solid lightgray;text-align: center;">Ravi Parmar</td>
                                                                <td style="border: 1px solid lightgray;text-align: center;">13:21</td>
                                                                <td style="border: 1px solid lightgray;text-align: center;">N/A</td>
                                                                <td style="border: 1px solid lightgray;text-align: center;">xyz-project sales call</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                    <label for="" style="margin-top: 20px;">Your Notes</label>
                                                    <div style="border: 1px solid lightgray; border-radius: 3px;">
                                                        <input type="text" name="" id="" style="border: none;height: 50px; width: 763px;  ">
                                                    </div>
                                                    <div style="display: flex; padding-top: 10px; justify-content: center;">
                                                        <a style="width: 100px;" class="btn btn-outline-success" href="#" role="button">Approve</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        
                        <!-- below code for team leave approval -->
                            <div class="col-md-12" id="team_leave_approval" style="padding: 20px 5px; height: auto; display: none;">
                                <div class="d-flex" style="gap: 25px;margin-top: 15px; font-size: smaller;padding-bottom: 10px;flex-flow: row-reverse;">
                                    <div><i style="color: #4ca1e3; font-size: 10px;" class="fa-solid fa-circle"></i> COMP OFF</div>
                                    <div><i style="color: #2add5d; font-size: 10px;" class="fa-solid fa-circle"></i> LWP</div>
                                    <div><i style="color: #f74a59; font-size: 10px;" class="fa-solid fa-circle"></i> OD</div>
                                    <div><i style="color: #9502CD; font-size: 10px;" class="fa-solid fa-circle"></i> Previlage Leave</div>
                                    <div><i style="color: #FD8800; font-size: 10px;" class="fa-solid fa-circle"></i> Unpaid Leave</div>
                                    <div><i style="color:#A4CA41; font-size: 10px;" class="fa-solid fa-circle"></i> Paid Leave</div>
                                    <div><i style="color:#AE9487; font-size: 10px;" class="fa-solid fa-circle"></i> Sick Leave</div>
                                    <div><i style="color:#8FA4FD; font-size: 10px;" class="fa-solid fa-circle"></i> Casual Leave</div>
                                </div>
                            
                                <div style="display: flex;">
                                    <div id="table_one_teamapproval" class="col-md-2" style=" overflow-y: scroll;">
                                        <table style="border-bottom: 1px solid lightgray;height: 100%;">
                                            <thead>
                                                <tr style="top: 0px;position: sticky;background: white">
                                                    <td class="proftableleave">
                                                        <select id="monthDropdownteam" style="border: 1.5px solid #CED4E1; height: 30px; border-radius: 8px; padding: 0px 10px;" onchange="team_leaveapprove_pend('onchange')"></select>
                                                    </td>
                                                </tr>
                                            </thead>
                                            <tbody id="profile_name_teamleaveapproval">
                                                <tr>
                                                    <!-- <td class="proftableleave"><span class="imgspan"><img src="https://www.gravatar.com/avatar/2c7d99fe281ecd3bcd65ab915bac6dd5?s=250"alt=""></span> Lois</td> -->
                                                    <td colspan="10" style="text-align:center;font-weight: 600;background-color: white; font-size: 12px; padding: 12px;">
                                                        <div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div id="table_two_myteamapproval" class="col-md-10" style=" overflow-y: scroll;"> 
                                        <table style="width:100%;border-bottom: 1px solid lightgray;">
                                            <thead id="table_two_thead_myteam">
                                                <tr class="calendar_tr" style="font-weight: 600;top: 0px;position: sticky;background: #E8ECF9; font-size: 15px;">
                                                    
                                                </tr>
                                            </thead>
                                            <tbody id="table_two_tbody_myteam" style="background-color: aliceblue; text-align-last: center;">
                                                <tr id="attd_data" class="calendar_tr" style="text-align: center;">
                                                    <td colspan="30" style="text-align:center;font-weight: 600;background-color: white; font-size: 12px;">Data Not Found</td>  
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <!--below modal for team leave approval popup-->
                            <div class="modal fade" id="exampleModalToggle6" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2" tabindex="-1">
                                <div class="modal-dialog modal-md modal-dialog-centered">
                                    <div class="modal-content">
                                        <div class="modal-body" id="teamleave_approv_popup">
                                          
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--End code of team leave approval popup-->
                        
                            <!--calendar leave tag starting from bottom-->
                            <div id="calendarformyteam" style="display: none; margin-top: 30px;">
                                <div style="display: flex; gap: 10px;">
                                    <div class="col-md-3" style="padding: 15px 15px 15px 15px;box-shadow: 2px 0px 10px 0px #b1aeae;border-radius: 10px;height: auto;">
                                        <div class="myteam-side-filter">
                                            <h5 style="font-size:18px;">Use Leave Filters</h5>
                                            <label style="margin-top: 10px; font-size:14px;">Company</label><br>
                                            <div class="company-side-filter inputwrap">
                                                <select id="combobox1"></select>
                                            </div> 
                                        
                                            <label style="margin-top: 10px; font-size:14px;" for="dropdownMenuButton1">Project</label><br>
                                            <div class="project-side-filter inputwrap">
                                                <select id="combobox2"></select>
                                            </div>
                                            
                                            <label style="margin-top: 10px; font-size:14px;" for="dropdownMenuButton1">Department</label><br>
                                            <div class="employee-side-filter inputwrap">
                                                <select id="combobox3"></select>
                                            </div>
                                            
                                            <label style="margin-top: 10px; font-size:14px;" for="dropdownMenuButton1">Employee Name</label><br>
                                            <div class="inputwrap">
                                                <select id="combobox4"></select>
                                            </div>
                                        
                                            <div style="margin-top: 10px; font-size:14px;">
                                                <label for="dropdownMenuButton1">Reporting Manager</label>
                                                <select id="combobox8"></select>
                                            </div>
                                        
                                            <div style="margin-top: 10px; font-size:14px;">
                                                <label for="dropdownMenuButton1">Leave Status</label>
                                                <select id="combobox5"></select>
                                            </div>
                                        
                                            <div style="margin-top: 10px; font-size:14px;">
                                                <label for="dropdownMenuButton1">Leave Type</label>
                                                <select id="combobox6"></select>
                                            </div>
                                        
                                            <div style="margin-top: 10px; font-size:14px;">
                                                <label for="dropdownMenuButton1">Shift</label>
                                                <select id="combobox7"></select>
                                            </div>
                                            <button type="button" class="btn btn-primary" style="margin-top: 20px;font-size: 14px;" onclick="showCalender()">Analyse</button>
                                        </div>
                                    </div>
                                    <div class="col-md-9" style="padding: 15px 15px 15px 15px;box-shadow: 2px 0px 10px 0px #b1aeae;border-radius: 10px;height: auto;">
                                        <div id="scheduler"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- MY TEAM TAB ENDS-->
            <!-- MY SALARY & BENEFIT TAB STARTS-->
            <div class="tab-pane fade" id="pills-Salary" role="tabpanel" aria-labelledby="pills-Salary-tab">
                <div style="display: flex; flex-direction: column; gap: 1.5rem; overflow: scroll;">
                    <div class="row" style="--bs-gutter-x: 0rem;">
                        <div class="d-flex">
                            <div class="col-md-8 d-flex align-items-center" style="gap: 10px;">
                                <div class="user-img">
                                    <img src="" class="user-img-small" onerror="this.src='./images/profile-icon.png'"/>
                                </div>
                                <div class="salary_benefits_user-name">
                                    <h6 class="mb-0" style="font-size: 14px;">bilind Shirin, Your Salary Benefits Report</h6>
                                </div>
                                <div class="user-dropdown">
                                    <select class="form-select form-select-sm" aria-label=".form-select-sm example" id="fy_year" onchange="changeyear()"></select>
                                </div>
                            </div> 
                            <div class="col-md-4" style="text-align: right;">
                                <span>
                                    <button type="button" class="tax-btn" data-bs-toggle="modal" data-bs-target="#myModalprofile" onclick="openformprofile('incometax', '', '', 'myModalprofile');">Income Tax Declaration</button>
                                </span>
                                <span>
                                    <button type="button" class="tax-btn" onclick="openSlider1('textdeduct'); taxdeduction();">Tax Deduction</button>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row" style="--bs-gutter-x: 0rem; margin: 0px !important;">
                        <div style="display: flex; justify-content: space-between; align-items: center; gap: 10px;">
                            <div class="w14pct">
                                <div class="box-shadow-boxsb">
                                    <div class="d-flex" style="flex-direction:column;">
                                        <div style="display:flex; justify-content:space-between; gap:5px;">
                                            <span style="padding: 0px; font-size: 12px;">Loan Repaid</span>
                                        </div>
                                        <div style="display:flex; margin:10px 0px 0px 0px; justify-content:space-between;">
                                            <span style="font-size: 18px;">
                                                <i class="fa-sharp fa-regular fa-indian-rupee-sign"></i>&nbsp;<span id="loanrepaid">10</span></span>
                                            <span>
                                                <img src="./images/loan_repaid.svg" alt="">
                                            </span>
                                        </div> 
                                    </div>
                                </div>
                            </div>
                            <div class="w14pct">
                                <div class="box-shadow-boxsb">
                                    <div class="d-flex" style="flex-direction:column;">
                                        <div style="display:flex; justify-content:space-between; gap:5px;">
                                            <span style="padding: 0px; font-size: 12px;">Loan Balance</span>
                                        </div>
                                        <div style="display:flex; margin:10px 0px 0px 0px; justify-content:space-between;">
                                            <span style="font-size: 18px;">
                                                <i class="fa-sharp fa-regular fa-indian-rupee-sign"></i>&nbsp;<span id="loanbalance">10</span></span>
                                            <span>
                                                <img src="./images/loan_balance.svg" alt="">
                                            </span>
                                        </div> 
                                    </div>
                                </div>
                            </div>
                            <div class="w14pct">
                                <div class="box-shadow-boxsb">
                                    <div class="d-flex" style="flex-direction:column;">
                                        <div style="display:flex; justify-content:space-between; gap:5px;">
                                            <span style="padding: 0px; font-size: 12px;">IOU Balance</span>
                                        </div>
                                        <div style="display:flex; margin:10px 0px 0px 0px; justify-content:space-between;">
                                            <span style="font-size: 18px;">
                                            <i class="fa-sharp fa-regular fa-indian-rupee-sign"></i>&nbsp;<span id="ioubalance">10</span></span>
                                            <span>
                                                <img src="./images/IOU_balance.svg" alt="">
                                            </span>
                                        </div> 
                                    </div>
                                </div>
                            </div>
                            <div class="w14pct">
                                <div class="box-shadow-boxsb">
                                    <div class="d-flex" style="flex-direction:column;">
                                        <div style="display:flex; justify-content:space-between; gap:5px;">
                                            <span style="padding: 0px; font-size: 12px;">Claim Balance</span>
                                        </div>
                                        <div style="display:flex; margin:10px 0px 0px 0px; justify-content:space-between;">
                                            <span style="font-size: 18px;">
                                                <i class="fa-sharp fa-regular fa-indian-rupee-sign"></i>&nbsp;<span id="claimbalance">10</span></span>
                                            <span>
                                                <img src="./images/claim_balance.svg" alt="">
                                            </span>
                                        </div> 
                                    </div>
                                </div>
                            </div>
                            <div class="w14pct">
                                <div class="box-shadow-boxsb">
                                    <div class="d-flex" style="flex-direction:column;">
                                        <div style="display:flex; justify-content:space-between; gap:5px;">
                                            <span style="padding: 0px; font-size: 12px;">Incentive Balance</span>
                                        </div>
                                        <div style="display:flex; margin:10px 0px 0px 0px; justify-content:space-between;">
                                            <span style="font-size: 18px;">
                                                <i class="fa-sharp fa-regular fa-indian-rupee-sign"></i>&nbsp;<span id="incentivebalance">10</span></span>
                                            <span>
                                                <img src="./images/incentive_balance.svg" alt="">
                                            </span>
                                        </div> 
                                    </div>
                                </div>
                            </div>
                            <div class="w14pct">
                                <div class="box-shadow-boxsb">
                                    <div class="d-flex" style="flex-direction:column;">
                                        <div style="display:flex; justify-content:space-between; gap:5px;">
                                            <span style="padding: 0px; font-size: 12px;">TDS Paid</span>
                                        </div>
                                        <div style="display:flex; margin:10px 0px 0px 0px; justify-content:space-between;">
                                            <span style="font-size: 18px;">
                                                <i class="fa-sharp fa-regular fa-indian-rupee-sign"></i>&nbsp;<span id="tdspaid">10</span></span>
                                            <span>
                                                <img src="./images/tds_paid.svg" alt="">
                                            </span>
                                        </div> 
                                    </div>
                                </div>
                            </div>
                            <div class="w14pct">
                                <div class="box-shadow-boxsb">
                                    <div class="d-flex" style="flex-direction:column;">
                                        <div style="display:flex; justify-content:space-between; gap:5px;">
                                            <span style="padding: 0px; font-size: 12px;">PF Deduction</span>
                                        </div>
                                        <div style="display:flex; margin:10px 0px 0px 0px; justify-content:space-between;">
                                            <span style="font-size: 18px;" >
                                                <i class="fa-sharp fa-regular fa-indian-rupee-sign"></i>&nbsp;<span id="pfdeduction">01</span></span>
                                            <span>
                                                <img src="./images/pf_deduction.svg" alt="">
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" style="margin: 0px !important;">
                        <div id="salary_overview_card" class="card" style="width: 100%; padding: 0px !important;">
                            <div class="d-flex" style="align-items: center;border-bottom: 1px solid #CED4E1;">
                                <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Salary Overview</h4>
                            </div>
                            <div style="padding: 10px;" >
                                <div id="sbtable" class="sbtable">
                                    <table>
                                        <thead style="background: #E8ECF9;">
                                            <tr>
                                                <td style="border-top-left-radius: 6px !important;"></td>
                                                <td>Paid Days</td>
                                                <td>Earned Basic</td>
                                                <td>Earned HRA</td>
                                                <td>Earned Gross</td>
                                                <td>PF Deduction</td>
                                                <td>ESIC Deduction</td>
                                                <td>PT Deduction</td>
                                                <td>TDS Deduction</td>
                                                <td>Other Deduction</td>
                                                <td>Net Salary</td>
                                                <td>Salary Transfer Date</td>
                                                <td style="border-top-right-radius: 6px !important;">Pay Slip</td>
                                            </tr>
                                        </thead>
                                        <tbody id=salarybody>
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td style="border-bottom-left-radius: 6px !important;">Total</td>
                                                <td id="paid_days_total">0</td>
                                                <td id="earned_basic_total">0</td>
                                                <td id="earned_hra_total">0</td>
                                                <td id="earned_gross_total">0</td>
                                                <td id="pf_deduction_total">0</td>
                                                <td id="esic_deduction_total">0</td>
                                                <td id="pt_deduction_total">0</td>
                                                <td id="tds_deduction_total">0</td>
                                                <td id="other_deduction_total">0</td>
                                                <td id="net_salary_total">0</td>
                                                <td></td>
                                                <td style="border-bottom-right-radius: 6px !important;"></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" style="--bs-gutter-x: 0;">
                        <div class="d-flex" style="justify-content: space-between;">
                            <div style="width: 24%;">
                                <div class="card" style="width: 100%; height: auto !important;">
                                    <div class="d-flex" style="align-items: center;border-bottom: 1px solid #CED4E1;justify-content: space-between;padding: 0px 20px 0px 0px;">
                                        <div>
                                            <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Loans & Advances Summary</h4>
                                        </div>
                                    </div>
                                    <div style="padding: 10px;">
                                        <div style="border: 1px solid #CED4E1;border-radius: 6px;">
                                            <div style="padding: 10px;border-top-left-radius: 6px;border-top-right-radius: 6px;background: #30DFF4;display: flex;justify-content: space-between;align-items: center;font-size: 14px;">
                                                <span>Particulars</span>
                                                <div>Rs</div>
                                            </div>
                                            <div style="height: auto; overflow: auto; font-size: 12px;">
                                                <table id="sftableloan">
                                                    <tbody>
                                                        <tr>
                                                            <td>Opening Balance as On 1st April</td> 
                                                            <td>2000</td>
                                                        </tr>
                                                        <tr style="font-weight: 600; color: #5D51E2; cursor: pointer;" onclick="openSlider1('loanreceived');Loan_Advance_Received();">
                                                            <td>Loan / Advance Received</td>
                                                            <td>20000</td>
                                                        </tr>
                                                        <tr style="font-weight: 600; color: #5D51E2; cursor: pointer;" onclick="openSlider1('loanadrepaid');Loan_Advance_Repaid();">
                                                            <td>Loan / Advance Repaid</td>
                                                            <td>6000</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Loan / Advance Balance</td>
                                                            <td>2000</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div style="width: 24%;">
                                <div class="card" style="width: 100%; height: auto !important;">
                                    <div class="d-flex" style="align-items: center; justify-content: space-between;padding: 0px 20px 0px 0px;border-bottom: 1px solid #CED4E1;">
                                        <div>
                                            <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Claims & Reimbursement Summary</h4>
                                        </div>
                                    </div>
                                    <div style="padding: 10px;">
                                        <div style="border: 1px solid #CED4E1;border-radius: 6px;">
                                            <div style="padding: 10px;border-top-left-radius: 6px;border-top-right-radius: 6px;background: #D28CFF;display: flex;justify-content: space-between;align-items: center;font-size: 14px;">
                                                <span>Particulars</span>
                                                <div>Rs</div>
                                            </div>
                                            <div style="height: auto; overflow: auto; font-size: 12px;">
                                                <table id="sftableclaim">
                                                    <tbody>
                                                        <tr>
                                                            <td>Opening Claims as on 1st April</td>
                                                            <td>0</td>
                                                        </tr>
                                                        <tr style="font-weight: 600; color: #5D51E2;" onclick="openSlider1('reimclaimsubmit'); Reimbursement_Claim_Submitted();">
                                                            <td>Reimbursement Claim Submitted</td>
                                                            <td>0</td>
                                                        </tr>
                                                        <tr style="font-weight: 600; color: #5D51E2;" onclick="openSlider1('reimclaimsettled');Reimbursement_Claim_Settled();">
                                                            <td>Reimbursement Claim Settled</td>
                                                            <td>0</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Reimbursement Claim Settled</td>
                                                            <td>0</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div style="width: 24%;">
                                <div class="card" style="width: 100%; height: auto !important;">
                                    <div class="d-flex" style="align-items: center; justify-content: space-between;padding: 0px 20px 0px 0px;border-bottom: 1px solid #CED4E1;">
                                        <div>
                                            <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">IOU Summary</h4>
                                        </div>
                                    </div>
                                    <div style="padding: 10px;">
                                        <div style="border: 1px solid #CED4E1;border-radius: 6px;">
                                            <div style="padding: 10px;border-top-left-radius: 6px;border-top-right-radius: 6px;background: #FF9F44;display: flex;justify-content: space-between;align-items: center;font-size: 14px;">
                                                <span>Particulars</span>
                                                <div>Rs</div>
                                            </div>
                                            <div style="height: auto; overflow: auto; font-size: 12px;">
                                                <table id="sftableiou">
                                                    <tbody>
                                                        <tr>
                                                            <td>Opening IOU pending as on 1st April</td>
                                                            <td>2000</td>
                                                        </tr>
                                                        <tr style="font-weight: 600; color: #5D51E2;" onclick="openSlider1('ioupaid'); IOU_Paid();">
                                                            <td>IOU paid</td>
                                                            <td>20000</td>
                                                        </tr>
                                                        <tr style="font-weight: 600; color: #5D51E2;" onclick="openSlider1('ioubillsettled'); IOU_Bill_Settled();">
                                                            <td>IOU Bill Settled</td>
                                                            <td>6000</td>
                                                        </tr>
                                                        <tr>
                                                            <td>IOU Bill Settled</td>
                                                            <td>2000</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div style="width: 24%;">
                                <div class="card" style="width: 100%; height: auto !important;">
                                    <div class="d-flex" style="align-items: center; justify-content: space-between;padding: 0px 20px 0px 0px;border-bottom: 1px solid #CED4E1;">
                                        <div>
                                            <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Incentive Status</h4>
                                        </div>
                                    </div>
                                    <div style="padding: 10px;">
                                        <div style="border: 1px solid #CED4E1;border-radius: 6px;">
                                            <div style="padding: 10px;border-top-left-radius: 6px;border-top-right-radius: 6px;background: #42DEC2;display: flex;justify-content: space-between;align-items: center;font-size: 14px;">
                                                <span>Particulars</span>
                                                <div>Rs</div>
                                            </div>
                                            <div style="height: auto; overflow: auto; font-size: 12px;">
                                                <table id="sftableincentive">
                                                    <tbody>
                                                        <tr>
                                                            <td>Opening Incentive Due as on 1st April</td>
                                                            <td>0</td>
                                                        </tr>
                                                        <tr style="font-weight: 600; color: #5D51E2;" onclick="openSlider1('incenclaim')">
                                                            <td>Incentive Claimed</td>
                                                            <td>0</td>
                                                        </tr>
                                                        <tr style="font-weight: 600; color: #5D51E2;" onclick="openSlider1('incensettled')">
                                                            <td>Incentive Settled</td>
                                                            <td>0</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Incentive Pending</td>
                                                            <td>0</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="backgroundmysidenav" id="slidercontent1">
                        <div class="sfsidenav1">
                            <span style="display: block;">
                                <i class="fa-solid fa-arrow-left-long bkarrowicon" style="display:block; margin-top: 4px;cursor: pointer;font-size: 1.5rem; color: #ffda0a;position: fixed;left: 16%;" onclick="closeSlider1();"></i>
                            </span>
                            <div id="textdeduct" style="display: none; padding: 30px;">
                                <div id="tax_calculator" style="display: block;">
                                    <div class="d-flex" style="justify-content: space-between; font-size: 14px;">
                                        <div>Tax Calculator</div>
                                        <div>
                                            <button id="show_tax" onclick="show_tax();incometax_namedetails();Tax_calculator_Table();" class="button">Show My Tax Calculation</button>
                                        </div>
                                    </div>
                                    <div class="d-flex gap-3" style="padding-top: 80px;">
                                        <div class="taxbox1">
                                            <div style="position: absolute; margin-top: -50px; background: white; border-radius: 50%; box-shadow: 0 0 0.25em 0.25em rgba(0, 0, 0, 0.25);">
                                                <div style="width: 100px;height: 100px;display: flex;justify-content: center;">
                                                    <i class="fa-sharp fa-light fa-calculator" style="font-size: 50px; top: 20px; position: absolute;"></i>
                                                </div>
                                            </div>
                                            <div style="padding-top: 65px; width: 90%;">
                                                <div style="text-align: center; font-size: 14px;">
                                                    <div>Income Tax Calculator</div>
                                                </div>
                                                <div style="display: flex; flex-direction: column; gap: 10px;">
                                                    <div>
                                                        <div>Name</div>
                                                        <div id="tax_name" style=" background: white;border-radius: 3px;height: 30px; padding: 2px 10px;align-items: center;display: flex;"></div>
                                                    </div>
                                                    
                                                    <div>
                                                        <div>Pan</div>
                                                        <div id="tax_pan" style=" background: white;border-radius: 3px;height: 30px; padding: 2px 10px;align-items: center;display: flex;">0</div>
                                                    </div>
                    
                                                    <div>
                                                        <div>Financial year</div>
                                                        <div id="tax_year" style=" background: white;border-radius: 3px;height: 30px; padding: 2px 10px;align-items: center;display: flex;"></div>
                                                    </div>
                                                    
                                                    <div>
                                                        <div>Your Age</div>
                                                        <div id="tax_age" style=" background: white;border-radius: 3px;height: 30px; padding: 2px 10px;align-items: center;display: flex;"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="taxbox2">
                                            <div style="position: absolute; margin-top: -50px; background: white; border-radius: 50%; box-shadow: 0 0 0.25em 0.25em rgba(0, 0, 0, 0.25);">
                                                <div style="width: 100px;height: 100px;display: flex;justify-content: center;">
                                                    <i class="fa-sharp fa-regular fa-indian-rupee-sign" style="font-size: 50px; top: 20px; position: absolute;"></i>
                                                </div>
                                            </div>
                                            <div style="padding-top: 65px; width: 90%;">
                                                <div style="text-align: center; font-size: 14px;">
                                                    <div>Income Details</div>
                                                </div>
                                                <div style="display: flex; flex-direction: column; gap: 10px;">
                                                    <div>
                                                        <div>Income from Salary</div>
                                                        <div id="tax_salary" style=" background: white;border-radius: 3px;height: 30px; padding: 2px 10px;align-items: center;display: flex;"></div>
                                                    </div>
                                                    
                                                    <div>
                                                        <div>Income from Interest</div>
                                                        <div id="tax_income" style=" background: white;border-radius: 3px;height: 30px; padding: 2px 10px;align-items: center;display: flex;"></div>
                                                    </div>
                    
                                                    <div>
                                                        <div>Incentive Income</div>
                                                        <div id="tax_incentive" style=" background: white;border-radius: 3px;height: 30px; padding: 2px 10px;align-items: center;display: flex;"></div>
                                                    </div>
                                                    
                                                    <div>
                                                        <div>Other Income</div>
                                                        <div id="tax_otherincome" style=" background: white;border-radius: 3px;height: 30px; padding: 2px 10px;align-items: center;display: flex;"></div>
                                                    </div>

                                                    <div>
                                                        <div>Total Income</div>
                                                        <div id="tax_totalincome" style=" background: white;border-radius: 3px;height: 30px; padding: 2px 10px;align-items: center;display: flex;"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="taxbox3">
                                            <div style="position: absolute; margin-top: -50px; background: white; border-radius: 50%; box-shadow: 0 0 0.25em 0.25em rgba(0, 0, 0, 0.25);">
                                                <div style="width: 100px;height: 100px;display: flex;justify-content: center;">
                                                    <i class="fa-regular fa-scissors" style="font-size: 50px; top: 20px; position: absolute;"></i>
                                                </div>
                                            </div>
                                            <div style="padding-top: 65px; width: 90%;">
                                                <div style="text-align: center; font-size: 14px;">
                                                    <div>Tax Exemption</div>
                                                </div>
                                                <div style="display: flex; flex-direction: column; gap: 10px;">
                                                    <div>
                                                        <div>Deduction 80C Total</div>
                                                        <div id="tax_deduction" style=" background: white;border-radius: 3px;height: 30px; padding: 2px 10px;align-items: center;display: flex;"></div>
                                                    </div>
                                                    
                                                    <div>
                                                        <div>Medical Insurance 80D (Including Self and Parents)</div>
                                                        <div id="tax_medical" style=" background: white;border-radius: 3px;height: 30px; padding: 2px 10px;align-items: center;display: flex;"></div>
                                                    </div>
                    
                                                    <div>
                                                        <div>Interest on Education Loan 80E</div>
                                                        <div id="tax_intrest" style=" background: white;border-radius: 3px;height: 30px; padding: 2px 10px;align-items: center;display: flex;"></div>
                                                    </div>
                                                    
                                                    <div>
                                                        <div>Donation to charity u/s 80G</div>
                                                        <div id="tax_donation" style=" background: white;border-radius: 3px;height: 30px; padding: 2px 10px;align-items: center;display: flex;"></div>
                                                    </div>
                    
                                                    <div>
                                                        <div>Interest on Housing Loan BOEEA</div>
                                                        <div id="tax_housing" style=" background: white;border-radius: 3px;height: 30px; padding: 2px 10px;align-items: center;display: flex;"></div>
                                                    </div>
                    
                                                    <div>
                                                        <div>Other Exemption</div>
                                                        <div id="tax_exumptions" style=" background: white;border-radius: 3px;height: 30px; padding: 2px 10px;align-items: center;display: flex;"></div>
                                                    </div>
                                                    
                                                    <div>
                                                        <div>Total Exemption</div>
                                                        <div id="total_exumptions" style=" background: white;border-radius: 3px;height: 30px; padding: 2px 10px;align-items: center;display: flex;"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div id="income_tax" style="display: none;">
                                    <div class="d-flex" style="justify-content: space-between; font-size: 14px;">
                                        <div>Your Income Tax 2024-25</div>
                                        <div style="gap: 15px; display: flex;">
                                            <i id="goback" class="fa-regular fa-arrow-left-long-to-line" style="cursor: pointer; color:#5D51E2; font-weight:600;" onclick="goback();"></i>
                                            <i class="fa-regular fa-arrow-down-to-bracket" style="cursor: pointer; color:#5D51E2; font-weight:600;" onclick="generatepdf()"></i>
                                            <i class="fa-light fa-print" style="cursor: pointer; color:#5D51E2; font-weight:600;" onclick="printDiv('income_tax_report')"></i>
                                        </div>
                                    </div>
                                    <hr>
                                    <div id="income_tax_report">
                                        <div style="display: flex;gap: 10%;padding-bottom: 1%;">
                                            <div style="margin-bottom: 5px;font-size: 13px;font-weight: 600;">Name : <span id="incometax_emp_name"> </span></div>
                                            <div style="margin-bottom: 5px;font-size: 13px;font-weight: 600;">Pan No : <span id="incometax_pan"> </span></div>
                                        </div>
                                        <div class="d-flex" >
                                            <div class="col-md-6" style="padding: 0px 10px;">
                                                <div style="text-align: center; font-size: 14px;">
                                                    <b>Tax Calculation AY 2024-25</b>
                                                    <hr style="color: #66CBFF; height: 5px; opacity: 1 !important;">
                                                </div>
                                                <div style="font-size: 12px;">
                                                    <table id="taxcal">
                                                        <thead>
                                                            <tr>
                                                                <td></td>
                                                                <td style="text-align: center;">Old Tax Regime <br>(AY 2024-25)</td>
                                                                <td style="text-align: center;">New Tax Regime <br>(AY 2024-25)</td>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr style="background: #66cbff; line-height:30px; font-size:18px; font-weight: 500;">
                                                                <td>Total Income</td>
                                                                <td id="old_totalincome"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                                <td id="new_totalincome"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                            </tr>
                        
                                                            <tr style="line-height:30px">
                                                                <td style="font-size:14px; font-weight: 600;">Deduction/Exemption</td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                            <tr>
                                                                <td>Standard Deduction</td>
                                                                <td id="standardded_old"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                                <td id="standardded_new"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                            </tr>
                                                            <tr>
                                                                <td>Rental Deduction</td>
                                                                <td id="rental_old"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                                <td id="rental_new"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                            </tr>
                                                            <tr>
                                                                <td>Chapter VI A Deduction</td>
                                                                <td id="chapter_old"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                                <td id="chapter_new"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                            </tr>
                                                            <tr style="background: #66cbff; line-height:30px; font-size:18px; font-weight: 500;">
                                                                <td>Taxable Income</td>
                                                                <td id="total_taxableold"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                                <td id="total_taxablnew"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                            </tr>
                                                            <tr style="line-height:30px">
                                                                <td style="font-size:14px; font-weight: 600;">Tax Payable</td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                            <tr>
                                                                <td>Income Tax</td>
                                                                <td id="income_old"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                                <td id="income_new"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                            </tr>
                                                            <tr>
                                                                <td>Rebate u/s 87A</td>
                                                                <td id="rebate_old"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                                <td id="rebate_new"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                            </tr>
                                                            <tr>
                                                                <td>Surcharge</td>
                                                                <td id="surcharge_old"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                                <td id="surcharge_new"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                            </tr>
                                                            <tr>
                                                                <td>Health & Education Cess</td>
                                                                <td id="health_old"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                                <td id="health_new"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                            </tr>
                                                            <tr style="background: #66cbff; line-height:30px; font-size:18px; font-weight: 500;">
                                                                <td>Total Tax</td>
                                                                <td id="totaltax_old"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                                <td id="totaltax_new"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                            <div class="col-md-6" style="padding: 0px 10px;">
                                                <div style="text-align: center; font-size: 14px;">
                                                    <b>Tax Deduction AY 2024-25</b>
                                                    <hr style="color: #C29AE0; height: 5px; opacity: 1 !important;">
                                                </div>
                                                <div style="font-size: 12px;">
                                                    <table id="taxdec">
                                                        <thead>
                                                            <tr>
                                                                <td></td>
                                                                <td style="text-align: center;">Old Tax Regime <br>(AY 2024-25)</td>
                                                                <td style="text-align: center;">New Tax Regime <br>(AY 2024-25)</td>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr style="background: #C29AE0; line-height:30px; font-size:18px; font-weight: 500;">
                                                                <td>Total Deduction</td>
                                                                <td id="deduction_old"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                                <td id="deduction_new"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                            </tr>
                        
                                                            <tr style="line-height:30px">
                                                                <td style="font-size:14px; font-weight: 600;">TDS Deduction Details</td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
                                                            <tr>
                                                                <td>TDS from salary</td>
                                                                <td id="tds_salaryold"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                                <td id="tds_salarynew"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                            </tr>
                                                            <tr>
                                                                <td>TDS from Incentive</td>
                                                                <td id="tds_incentiveold"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                                <td id="tds_incentivenew"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                            </tr>
                                                            <tr>
                                                                <td>Other TDS</td>
                                                                <td id="tds_otherold"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                                <td id="tds_othernew"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                            </tr>
                                                            <tr style="font-size:14px; font-weight: 500;">
                                                                <td>TDS Paid</td>
                                                                <td id="tds_paidold" style="background: #C29AE0;"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                                <td id="tds_paidnew" style="background: #C29AE0;"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                            </tr>
                                                            <tr style="font-size:14px; font-weight: 500;">
                                                                <td>TDS Payable<br><span style="font-size:xx-small;">(Till Date)</span></td>
                                                                <td id="tds_payableold" style="background: #C29AE0;"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                                <td id="tds_payablenew" style="background: #C29AE0;"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                            </tr>
                                                            <tr style="font-size:14px; font-weight: 500;">
                                                                <td>Aprox Monthly TDS</td>
                                                                <td id="approx_old" style="background: #C29AE0;"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                                <td id="approx_new" style="background: #C29AE0;"><i class="fa-regular fa-indian-rupee-sign"></i> 0</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="loanreceived" style="display: none; padding: 30px;" >
                                <div><b>Loan / Advance Received</b></div>
                                <div id="salarytable">
                                    <table>
                                        <thead style="background-color: #DFEAFE;border-top-right-radius: 10px;border-top-left-radius: 10px;">
                                            <tr>
                                                <td style="border-top-left-radius: 10px;">Loan / Advance Application Date</td>
                                                <td>Loan / Advance (Rs)</td>
                                                <td>Loan / Advance Sanctioned By</td>
                                                <td>Loan / Advance Sanctioned Date</td>
                                                <td style="border-top-right-radius: 10px;">Loan / Advance Sanction Remark</td>
                                            </tr>
                                        </thead>
                                        <tbody id= loanreceivedtbody>
                                        </tbody>
                                        <tfoot style="background-color: #5D51E2; color: #ffffff;">
                                            <tr>
                                                <td style="border-bottom-left-radius: 10px;">TOTAL LOAN</td>
                                                <td id="total_load_adv">132430</td>
                                                <td></td>
                                                <td></td>
                                                <td style="border-bottom-right-radius: 10px;"></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                            <div id="loanadrepaid" style="display: none; padding: 30px;">
                                <div><b>Loan / Advance Repaid</b></div>
                                <div id="salarytable">
                                    <table>
                                        <thead style="background-color: #DFEAFE; border-top-left-radius: 10px; border-top-right-radius: 10px;">
                                            <tr>
                                                <td>Loan / Advance Repaid Date</td>
                                                <td>Loan / Advance Repaid (Rs)</td>
                                                <td>Salary Month</td>
                                            </tr>
                                        </thead>
                                        <tbody id="loanrepaidtbody">
                                            <tr>
                                                <td>12 Jan 2024</td>
                                                <td>132430</td>
                                                <td>Jan 2024</td>
                                            </tr>
                                            <tr>
                                                <td>13 Jan 2024</td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>14 Jan 2024</td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>15 Jan 2024</td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>16 Jan 2024</td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>17 Jan 2024</td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                        </tbody>
                                        <tfoot style="background-color: #5D51E2; color: #ffffff;">
                                            <tr>
                                                <td>TOTAL LOAN</td>
                                                <td id="total_load_repaid">132430</td>
                                                <td></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                            <div id="reimclaimsubmit" style="display: none; padding: 30px;">
                                <div><b>Reimbursement Claim Submitted</b></div>
                                <div id="salarytable">
                                    <table>
                                        <thead style="background-color: #DFEAFE; border-top-right-radius: 10px; border-top-left-radius: 10px;">
                                            <tr>
                                                <td>Reimbursement Claim Date</td>
                                                <td>Reimbursement Claim Amt</td>
                                                <td>Expenses Category</td>
                                                <td>Claim Particular</td>
                                                <td>Status</td>
                                            </tr>
                                        </thead>
                                        <tbody id="Reimbursementclaimtbody">
                                            <tr>
                                                <td>12 Jan 2024</td>
                                                <td>9873</td>
                                                <td>Travelling Expenses</td>
                                                <td>Travelling details</td>
                                                <td>Verification</td>
                                            </tr>
                                            <tr>
                                                <td>13 Jan 2024</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>14 Jan 2024</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>15 Jan 2024</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>16 Jan 2024</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>17 Jan 2024</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                        </tbody>
                                        <tfoot style="background-color: #5D51E2; color: #ffffff;">
                                            <tr>
                                                <td>TOTAL CLAIM</td>
                                                <td id="totalreimbursementcalimamt">132430</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                            <div id="reimclaimsettled" style="display: none; padding: 30px;">
                                <div><b>Reimbursement Claim Settled</b></div>
                                    <div id="salarytable">
                                        <table>
                                            <thead style="background-color: #DFEAFE; border-top-right-radius: 10px; border-top-left-radius: 10px;">
                                                <tr>
                                                    <td>Reimbursement Claim Date</td>
                                                    <td>Reimbursement Claim (Rs)</td>
                                                    <td>Expenses Category</td>
                                                    <td>Sanctioned (Rs)</td>
                                                    <td>Approval Authority Remark</td>
                                                    <td>Approval Date</td>
                                                    <td>Settled (Rs)</td>
                                                    <td>Paid Date</td>
                                                </tr>
                                            </thead>
                                            <tbody id="reimbursementsettledtbody">
                                                <tr>
                                                    <td>12 Jan 2024</td>
                                                    <td>9873</td>
                                                    <td>Travelling Expenses</td>
                                                    <td>9873</td>
                                                    <td>Western zone side travel</td>
                                                    <td>22 Jan 2024</td>
                                                    <td>9873</td>
                                                    <td>20 Feb 2024</td>
                                                </tr>
                                                <tr>
                                                    <td>13 Jan 2024</td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                </tr>
                                                <tr>
                                                    <td>14 Jan 2024</td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                </tr>
                                                <tr>
                                                    <td>15 Jan 2024</td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                </tr>
                                                <tr>
                                                    <td>16 Jan 2024</td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                </tr>
                                                <tr>
                                                    <td>17 Jan 2024</td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                </tr>
                                            </tbody>
                                            <tfoot style="background-color: #5D51E2; color: #ffffff;">
                                                <tr>
                                                    <td>TOTAL CLAIM</td>
                                                    <td id="claimamt">9873</td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td id="settledamt">9873</td>
                                                    <td></td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                            </div>
                            <div id="ioupaid" style="display: none; padding: 30px;">
                                <div><b>IOU Paid</b></div>
                                <div id="salarytable">
                                    <table>
                                        <thead style="background-color: #DFEAFE;border-top-right-radius: 10px; border-top-left-radius: 10px;">
                                            <tr>
                                                <td>IOU Date</td>
                                                <td>IOU Paid (Rs)</td>
                                                <td>Expenses Category</td>
                                                <td>IOU Particular</td>
                                                <td>Status</td>
                                            </tr>
                                        </thead>
                                        <tbody id="ioupaidtbody">
                                            <tr>
                                                <td>12 Jan 2024</td>
                                                <td>132430</td>
                                                <td>Marketing Expenses</td>
                                                <td>Road side construction...</td>
                                                <td>Verification</td>
                                            </tr>
                                            <tr>
                                                <td>13 Jan 2024</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>14 Jan 2024</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>15 Jan 2024</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>16 Jan 2024</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>17 Jan 2024</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                        </tbody>
                                        <tfoot style="background-color: #5D51E2; color: #ffffff;">
                                            <tr>
                                                <td>TOTAL IOU PAID</td>
                                                <td id="ioupaidamt">132430</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                            <div id="ioubillsettled" style="display: none; padding: 30px;">
                                <div><b>IOU Bill Settled</b></div>
                                <div id="salarytable">
                                    <table>
                                        <thead style="background-color: #DFEAFE;border-top-right-radius: 10px; border-top-left-radius: 10px;">
                                            <tr>
                                                <td>IOU Paid Date</td>
                                                <td>IOU (Rs)</td>
                                                <td>Expenses Category</td>
                                                <td>Bills (Rs)</td>
                                                <td>Settled Date</td>
                                                <td>Bill Particular</td>
                                                <td>Balance Paid/Received</td>
                                                <td>Approval Date</td>
                                                <td>Approval Authority Remark</td>
                                            </tr>
                                        </thead>
                                        <tbody id="iousettledtbody">
                                            <tr>
                                                <td>12 Jan 2024</td>
                                                <td>9873</td>
                                                <td>Marketing Expenses</td>
                                                <td>9873</td>
                                                <td>22 Jan 2023</td>
                                                <td>Reaching out to new client</td>
                                                <td>9873</td>
                                                <td>22 jan 2024</td>
                                                <td>Approved by spectrum group</td>
                                            </tr>
                                            <tr>
                                                <td>13 Jan 2024</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>14 Jan 2024</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>15 Jan 2024</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>16 Jan 2024</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>17 Jan 2024</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                        </tbody>
                                        <tfoot style="background-color: #5D51E2; color: #ffffff;">
                                            <tr>
                                                <td>TOTAL IOU PAID</td>
                                                <td id="iousettledamt">9873</td>
                                                <td></td>
                                                <td id="iousettledbillamt">9873</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                            <div id="incenclaim" style="display: none; padding: 30px;">
                                <div><b>Incentive Claimed</b></div>
                                <div id="salarytable">
                                    <table>
                                        <thead style="background-color: #DFEAFE;">
                                            <tr>
                                                <td>Incentive Claimed Date</td>
                                                <td>Incentive Claimed (Rs)</td>
                                                <td>Incentive Month</td>
                                                <td>Incentive Particular</td>
                                                <td>Status</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td colspan="5" style="text-align:center">
                                                    <div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 200px;gap: 10px;"> 
                                                        <img src="./images/data_not_found.svg" alt="" class="no-data-image"> <div class="no-data">Data Not Found</div></div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                        <tfoot style="background-color: #5D51E2; color: #ffffff;">
                                            <tr>
                                                <td>TOTAL INCENTIVE</td>
                                                <td>0</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                            <div id="incensettled" style="display: none; padding: 30px;">
                                <div><b>Incentive Settled</b></div>
                                <div id="salarytable">
                                    <table>
                                        <thead style="background-color: #DFEAFE;">
                                            <tr>
                                                <td>Incentive Claimed Date</td>
                                                <td>Incentive Claimed (Rs)</td>
                                                <td>Incentive Month</td>
                                                <td>Sanctioned Amount</td>
                                                <td>Approval Authority Remark</td>
                                                <td>Approval Date</td>
                                                <td>Settled (Rs)</td>
                                                <td>Paid Date</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td colspan="8" style="text-align:center">
                                                    <div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 200px;gap: 10px;"> 
                                                        <img src="./images/data_not_found.svg" alt="" class="no-data-image"> <div class="no-data">Data Not Found</div></div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                        <tfoot style="background-color: #5D51E2; color: #ffffff;">
                                            <tr>
                                                <td>TOTAL CLAIM</td>
                                                <td>0</td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td>0</td>
                                                <td></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- MY SALARY & BENEFIT TAB ENDS-->
            <!-- EMPLOYEE GROWTH HISTORY TAB STARTS-->
            <div class="tab-pane fade" id="pills-Employee" role="tabpanel" aria-labelledby="pills-Employee-tab">
                <div class="row" style="margin-bottom: 20px;">
                    <div id="egheader" style="font-size: 14px;">Mr Prabhas Shah is completed&nbsp;<b>14 years (2005-2018),</b>&nbsp;presently working with&nbsp;<b>XYZ Company</b></div>
                </div>
                <div class="row" style= "margin-bottom: 1.5rem;">
                    <div class="col-lg-2 col-md-2 col-sm-12 col-xl-2" style="width: 22%;">
                        <div class="card" style="height:100%;padding: 0;overflow: hidden;">
                            <div class="row">
                                <div style="width: 100%; background: #ffffff;" id="employeecount_data">
                                    <div class="curved-border">
                                        <div style="flex-direction: column;">
                                            <div style="flex-direction: column; display: flex; gap: 10px;"> 
                                                <div class="row" style="justify-content: space-between;">
                                                    <div class="col-md-6">
                                                        <div style="background: #F7F2FF;border: 1px solid #E3D5FA;border-radius: 6px;padding: 10px;">
                                                            <span class="header_egh">Years</span>
                                                            <div style="align-items: center;display: flex;gap:10px">
                                                                <span>
                                                                    <img src="./images/year_calendar.svg" alt=""> 
                                                                </span>
                                                                <span id="yearnumber" style="font-size: 30px; color: #2863CB;">0</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div style="background: #E1FBFF;border: 1px solid #B2E6EE;border-radius: 6px;padding: 10px;">
                                                            <span class="header_egh">Promotions</span>
                                                            <div style="align-items: center;display: flex;gap:10px">
                                                                <span>
                                                                    <img src="./images/promotions_icon.svg" alt="">
                                                                </span>
                                                                <span id="promotionsnumber" style="font-size: 30px; color: #0CC9FF;">0</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" style="justify-content: space-between;">
                                                    <div class="col-md-6">
                                                        <div style="background: #FFFCE5; border: 1px solid #F3EDBA;border-radius: 6px;padding: 10px;">
                                                            <span class="header_egh">Awards</span>
                                                                <div style="align-items: center;display: flex;gap:10px">
                                                                    <span>
                                                                        <img src="./images/award_icon.svg" alt="">
                                                                    </span>
                                                                    <span id="awardsnumber" style="font-size: 30px; color: #FF3163;">0</span>
                                                                </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div style="background: #EFFFF5;border: 1px solid #C4F6D7;border-radius: 6px;padding: 10px;">
                                                            <span class="header_egh">Increments</span>
                                                            <div style="align-items: center;display: flex;gap:10px">
                                                                <span>
                                                                    <img src="./images/Increments_icon.svg" alt="">
                                                                </span>
                                                                <span id="increamentsnumber" style="font-size: 30px; color: #6CD963;">0</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div> 
                                    <div style="position: relative;height: 250px;width: 100%;">
                                        <img style="width: 100%; height: 100%;" class="employeeprofile" src="" onerror="this.src='./images/profile-icon.png'" alt="dummy">
                                    </div>
                                </div> 
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-5 col-md-5 col-sm-12 col-xl-5" style="width: 39%;">
                        <div class="card" style="height:100%;">
                            <div class="d-flex" style="align-items: center;border-bottom: 1px solid #CED4E1;justify-content: space-between;padding: 0px 20px 0px 0px;">
                                <div>
                                    <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Designation Tenure Graph</h4>
                                </div>
                            </div>
                            <div id="column-chart"></div>
                        </div>
                    </div>
                    <div class="col-lg-5 col-md-5 col-sm-12 col-xl-5" style="width: 39%;">
                        <div class="card" style="height:100%;">
                            <div class="d-flex" style="align-items: center;border-bottom: 1px solid #CED4E1;justify-content: space-between;padding: 0px 20px 0px 0px;">
                                <div>
                                    <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Salary & Increment Growth</h4>
                                </div>
                            </div>
                            <div id="chartDesignation" style="height: 88%;"></div>
                        </div>
                    </div>
                </div>
                <div class="row" style= "margin-bottom: 1.5rem;" >
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xl-12">
                        <div class="card" style="height: 100%; display: flex;">
                            <div style="align-items: center;border-bottom: 1px solid #CED4E1;">
                                <div>
                                    <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Growth Statement</h4>
                                </div>
                            </div>
                            <div class="d-flex">
                                <div style="width: 40%;justify-content: center;display: flex;padding: 20px 20px;height: 320px;">
                                    <div id="gsbody" style="height: 100%; overflow: scroll; width: 100%;scrollbar-width: none;">
                                    <!-- <div id="gsbody" style="width: 100%;height: 300px !important;overflow-y: scroll;padding: 0px 0px 0px 30px;"> -->
                                        <table style="border: 1px solid #CED4E1; border-radius: 6px;">
                                            <thead>
                                                <tr>
                                                    <td>Date</td>
                                                    <td>Steps</td>
                                                    <td>Location</td>
                                                    <td>Designation</td>
                                                    <td>Grade</td>
                                                    <!-- <td> </td> -->
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>  
                                <div style="width: 60%;" >
                                    <h4 class="card-heading" style="top: 15px; position: relative;">Employee Life Cycle</h4>
                                    <div id="timelinelifecycle"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-4 col-md-4 col-sm-12 col-xl-4">
                        <div class="card" style="height: 100%; display: flex;">
                            <div style="align-items: center;border-bottom: 1px solid #CED4E1;">
                                <div>
                                    <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Achievements & Awards</h4>
                                </div>
                            </div>
                            <div style="width: 100%;z-index: 1;margin: auto;">
                                <div style="padding: 10px;">
                                    <div id="achievetable">
                                        <table style="border-radius: 10px;">
                                            <thead style="background-color: #E8ECF9; color: #101010;">
                                                <tr style="font-weight: 600;">
                                                    <td>Sr. No.</td>
                                                    <td>Achievements</td>
                                                    <td>Awards Date</td>
                                                </tr>
                                            </thead>
                                            <tbody id="achievetabletbody"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-8 col-md-8 col-sm-12 col-xl-8">
                        <div class="card" style="height: 100%; display: flex;">
                            <div style="align-items: center;border-bottom: 1px solid #CED4E1;">
                                <div>
                                    <h4 class="card-heading" style="padding: 12px 0px 12px 20px;margin: 0;">Achievements</h4>
                                </div>
                            </div>
                            <div>
                                <div style="padding: 10px;">
                                    <div id="achiev" style="height: 245px !important;overflow: auto;padding: 0px;margin: 0px;scrollbar-width: none;">
                                        <table style="border-radius: 10px;">
                                            <thead style="background-color: #E8ECF9; color: black;">
                                                <tr>
                                                    <td>Achievements</td>
                                                    <td>2018</td>
                                                    <td>2017</td>
                                                    <td>2016</td>
                                                    <td>2016</td>
                                                    <td>2010</td>
                                                    <td>2010</td>
                                                    <td>2007</td>
                                                    <td>2007</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>Segment Leader</td>
                                                    <td>-</td>
                                                    <td>
                                                        <div class="Segment">2,018</div>
                                                    </td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                </tr>
                                                <tr>
                                                    <td>Highest Sale Category D</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>
                                                        <div class="highsale">2,011</div>
                                                    </td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                </tr>
                                                <tr>
                                                    <td>Best Performer</td>
                                                    <td>
                                                        <div class="bestperfo">
                                                            2,018
                                                        </div>
                                                    </td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                </tr>
                                                <tr>
                                                    <td>Highest Salary Increament</td>
                                                    <td>
                                                        <div class="bestperfo">
                                                            2,108
                                                        </div>
                                                    </td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                </tr>
                                                <tr>
                                                    <td>Highest Grade</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                </tr>
                                                <tr>
                                                    <td>1st Promotion</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                </tr>
                                                <tr>
                                                    <td>Employee of the month</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                </tr>
                                                <tr>
                                                    <td>1st Increament</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                </tr>
                                                <tr>
                                                    <td>Joining</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                    <td>-</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- EMPLOYEE GROWTH HISTORY TAB ENDS-->
        </div>
    </div>
    <script id="eventTemplatetimeline" type="text/x-kendo-template">
        <div class="k-card-inner">
            <div class="k-card-header">
                <h5 class="k-card-title">#= data.title #</h5>
            </div>
            <div class="k-card-body">
                <div class="k-card-description">
                    <p>#= data.description #</p>
                    
                </div>
            </div>
        </div>
    </script>
<script>
//$(".salary_benefits_user-name").children("h6").html(function(_, html) {return html.replaceAll("bilind Shirin", "<b>" +  window.targetuser + "</b>");});
// SIGNIN-SIGNOUT CAMERA CODE
let signin_camera_btn = document.querySelector(".signin_camera");
let video_signin = document.querySelector("#video_signin");
let click_photo_signin = document.querySelector("#click_photo_signin");
let canvas_signin = document.querySelector("#canvas_signin");
let stream_signin;
if (signin_camera_btn)
{
    $(".signin_camera").on('click', async function() {
        stream_signin = await navigator.mediaDevices.getUserMedia({ video: true, audio: false });
        video_signin.srcObject = stream_signin;
    });
}
else
{
    console.error('signin_camera_btn element not found');
}
click_photo_signin.addEventListener('click', function() {
        canvas_signin.getContext('2d').drawImage(video_signin, 0, 0, canvas_signin.width, canvas_signin.height);
        let image_data_url_signin = canvas_signin.toDataURL('image/png');
        // data url of the image
        document.querySelector('#download-photo-signin').src = image_data_url_signin;
});
let signout_camera_btn = document.querySelector(".signout_camera");
let video_signout = document.querySelector("#video_signout");
let click_photo_signout = document.querySelector("#click_photo_signout");
let canvas_signout = document.querySelector("#canvas_signout");
let stream_signout;
var chekInFlag = false;
var visitCodes = [];

$(".signout_camera").on('click', async function() {
    stream_signout = await navigator.mediaDevices.getUserMedia({ video: true, audio: false });
    video_signout.srcObject = stream_signout;
});
click_photo_signout.addEventListener('click', function() {
    canvas_signout.getContext('2d').drawImage(video_signout, 0, 0, canvas_signout.width, canvas_signout.height);
    let image_data_url = canvas_signout.toDataURL('image/png');
    // data url of the image
    document.querySelector('#download-photo-signout').src = image_data_url;
});
// SIGNIN-SIGNOUT CAMERA CODE
const part1 = document.getElementById('table_one');
const part2 = document.getElementById('table_two');

part1.addEventListener('scroll', function (event) {
    part2.scrollTop = part1.scrollTop;
});

part2.addEventListener('scroll', function (event) {
    part1.scrollTop = part2.scrollTop;
});
$('#noticebutton').on('click', function (event) {
    event.stopPropagation(); // Prevent click event from propagating to the document body
    if ($('#noticemenu').css('display') != 'none')
    {
        $('#noticemenu').hide();
    }
    else
    {
        $('#noticemenu').show();
    }
});

$(document).on('click', function (event) {
    if (!$(event.target).closest('#noticemenu').length && !$(event.target).is('#noticebutton'))
    {
        // If the click occurred outside noticemenu and not on noticebutton
        $('#noticemenu').hide();
    }
});
function showToast(msg,state="true")
{
    var toast = document.getElementById("toast");
    toast.className = "show";
    toast.innerText = msg;
    if(state=="true")
    {
        toast.style.backgroundColor = "#4CAF50";
    }
    else if(state=="false")
    {
        toast.style.backgroundColor = "red";
    }
    setTimeout(function(){ toast.className = toast.className.replace("show", ""); }, 3000);
}
function getuserimg()
{
    var random = parseInt(Math.random() * (9999999 - 999) + 999);
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode = window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=hrms&ids=valuestring/&valuestring=employee_id@d@Mukund%20Narayan%20Raje@d@
    var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${cloudcode}&ids=valuestring/&valuestring=employee_id@d@${username}@d@${tokenParam}`;
    data = callajax(url);
    data = JSON.parse(data);
    if(data[0].txt == "txt is null")
    {
        return;
    }
    data = JSON.parse(data[0].txt);
    // https://hrms.autonomouserp.com/uploadshrms/Folder2726/421column2965.gif?random=805826
    var src='../uploads'+cloudcode+'/Folder307/'+data[0].id+'column2965.gif?random='+random;
    $(".user-img-small").attr("src",src);
    $(".myprofile-user-img").attr("src",src);
    $(".employeeprofile").attr("src",src);
    $(".myteamuserimg").attr("src",src);
}
// function dateselector()
// {
//     var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
//     // Get the current date
//     var currentDate = new Date();
//     // Get the month (0-indexed, so January is 0, February is 1, and so on)
//     var currentMonth = currentDate.getMonth();
//     // Add 1 to the month to make it 1-indexed (January is now 1, February is 2, etc.)
//     currentMonth += 1;

//     var arr1 = month.slice(0, currentMonth);
//     var monthsArr = arr1.map((elem, index) => {
//         return `<option>${elem} ${currentDate.getFullYear()}</option>`;
//     });
//     document.getElementById("months").innerHTML = monthsArr;
//     document.getElementById("months").selectedIndex = currentMonth - 1;
//     document.getElementById("month_performance").innerHTML = monthsArr;
//     document.getElementById("month_performance").selectedIndex = currentMonth - 1;
//     document.getElementById("monthlist").innerHTML = monthsArr;
//     document.getElementById("monthlist").selectedIndex = currentMonth - 1;
//     document.getElementById("monthDropdown").innerHTML = monthsArr;
//     document.getElementById("monthDropdown").selectedIndex = currentMonth - 1;
//     document.getElementById("myteam_months").innerHTML = monthsArr;
//     document.getElementById("myteam_months").selectedIndex = currentMonth - 1;
//     document.getElementById("monthDropdownteam").innerHTML = monthsArr;
//     document.getElementById("monthDropdownteam").selectedIndex = currentMonth - 1;
//     currentMonth;
//     getuserimg();
// }

function dateselector() {
    var month = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
    var currentDate = new Date();
    var currentMonth = currentDate.getMonth(); // 0-indexed (Jan = 0)
    var currentYear = currentDate.getFullYear();

    // Create an array for the last 12 months
    var monthsArr = [];
    for (var i = 0; i < 12; i++) {
        var monthIndex = (currentMonth - i + 12) % 12; // Handle wrap-around
        var year = currentYear - (currentMonth - i < 0 ? 1 : 0); // Adjust year if month is in the previous year
        monthsArr.push(`<option>${month[monthIndex]} ${year}</option>`);
    }

    // Reverse the array to display from oldest to newest
    monthsArr.reverse();

    // Join the array into a single string for setting the dropdown HTML
    var monthsHTML = monthsArr.join("");

    // Populate all dropdowns
    document.getElementById("months").innerHTML = monthsHTML;
    document.getElementById("months").selectedIndex = 11; // Default to the most recent month

    document.getElementById("month_performance").innerHTML = monthsHTML;
    document.getElementById("month_performance").selectedIndex = 11;

    document.getElementById("monthlist").innerHTML = monthsHTML;
    document.getElementById("monthlist").selectedIndex = 11;

    document.getElementById("monthDropdown").innerHTML = monthsHTML;
    document.getElementById("monthDropdown").selectedIndex = 11;

    document.getElementById("myteam_months").innerHTML = monthsHTML;
    document.getElementById("myteam_months").selectedIndex = 11;

    document.getElementById("monthDropdownteam").innerHTML = monthsHTML;
    document.getElementById("monthDropdownteam").selectedIndex = 11;

    // Call additional functions as needed
    getuserimg();
}

function callajax(finalurl)
{
    var returndata = "";
    $.ajax({
        url : finalurl,
        async : false,
        contentType: false,
        processData: false,
        type: 'POST',
        success : function(data) 
        {
            returndata = data
        },
        error:function(e)
        {
            
        }
    });
    $("#loader-html").css("display","none");
    return returndata;
}
function Personal_Info()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =window.targetcloud;
    var username =  window.targetuser;

    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    console.log('tokenParam',tokenParam);
    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Personal_Detail@d@Mansi%20Rane@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Personal_Detail@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    if (data[0].txt === "txt is null")
    {
        document.getElementById("personal_info_name").innerText = '--';
        document.getElementById("personal_info_code").innerText = '--';
        document.getElementById("personal_info_doj").innerText = '--';
        document.getElementById("personal_info_dep").innerText = '--';
        document.getElementById("personal_info_brnach").innerText = '--';
        document.getElementById("personal_info_org").innerText = '--';
        document.getElementById("personal_info_deg").innerText = '--';
        document.getElementById("personal_info_reportig").innerText = '--';
    }
    else
    {
        data = JSON.parse(data[0].txt);     
        document.getElementById("personal_info_name").innerText = data[0].employee_name || "--";
        document.getElementById("personal_info_code").innerText = data[0].code || "--"; 
        document.getElementById("personal_info_doj").innerText = data[0].doj || "--";
        document.getElementById("personal_info_dep").innerText = data[0].department || "--";
        document.getElementById("personal_info_brnach").innerText = data[0].branch_name || "--";
        document.getElementById("personal_info_org").innerText = data[0].organization || "--";
        document.getElementById("personal_info_deg").innerText = data[0].designation || "--";
        document.getElementById("personal_info_reportig").innerText = data[0].reporting_manager || "--";
    
    }
}
function Family_Info()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode = window.targetcloud;
    var username =  window.targetuser;

    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    // var cloudcode = encodeURIComponent( window.targetcloud);
    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Family_Detail@d@Mansi%20Rane@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Family_Detail@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    if (data[0].txt === "txt is null")
    {
        
        document.getElementById("Family_Info_fathername").innerHTML = '--';
        document.getElementById("Family_Info_mothername").innerHTML = '--';
        document.getElementById("Family_Info_spousename").innerHTML = '--';
        document.getElementById("Family_Info_son").innerHTML = '--';
        document.getElementById("Family_Info_daughter").innerHTML = '--';
        document.getElementById("Family_Info_residenceaddress").innerHTML = '--';
    }
    else
    {
        data = JSON.parse(data[0].txt);
        document.getElementById("Family_Info_fathername").innerHTML = data[0].fathername || "--";
        document.getElementById("Family_Info_mothername").innerHTML = data[0].mothername || "--";
        document.getElementById("Family_Info_spousename").innerHTML = data[0].spouse_name || "--";
        document.getElementById("Family_Info_son").innerHTML = data[0].son || "--";
        document.getElementById("Family_Info_daughter").innerHTML = data[0].daughter || "--";
        document.getElementById("Family_Info_residenceaddress").innerHTML = data[0].residence_address || "--";

    }
}
function Bank_Details()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Bank_Detail@d@Mansi%20Rane@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Bank_Detail@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    if (data[0].txt === "txt is null")
    {
        document.getElementById("Bank_Details_bankname").innerHTML = '--';
        document.getElementById("Bank_Details_branchname").innerHTML = '--';
        document.getElementById("Bank_Details_ifsccode").innerHTML = '--';
        document.getElementById("Bank_Details_accounttype").innerHTML = '--';
    } 
    else
    {
        data = JSON.parse(data[0].txt);
        document.getElementById("Bank_Details_bankname").innerHTML = data[0].bankname || "--";
        document.getElementById("Bank_Details_branchname").innerHTML = data[0].branch || "--";
        document.getElementById("Bank_Details_ifsccode").innerHTML = data[0].ifsc_code || "--";
        document.getElementById("Bank_Details_accounttype").innerHTML = data[0].saving_current || "--";
    }
}
function Company_Detail()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Company_Profile@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    if(data[0].txt == "txt is null")
    {
        return;
    }
    data = JSON.parse(data[0].txt);
    var random = parseInt(Math.random() * (9999999 - 999) + 999);

    // Update the company name
    document.getElementById("companyName").innerHTML = data[0].name_of_company;

    // Update the company logo
    document.getElementById("companyLogo").src = `../uploads${cloudcode}/Folder3302/${data[0].company_logo}?random=${random}`;

    // Update the Website link
    var websiteLink = document.getElementById("websiteLink").querySelector('a');
    if (data[0].web_site_link) {
        websiteLink.href = data[0].web_site_link;
        websiteLink.target = "_blank";
    } else {
        websiteLink.onclick = function(event) {
            event.preventDefault(); // Prevent default action
            showToast("No Website Link Found"); // Show the toast message
        };
    }

    // Update Our Vision link
    var visionLink = document.getElementById("ourVisionLink").querySelector('a');
    if (data[0].ourcvision) {
        visionLink.href = data[0].ourcvision;
        visionLink.target = "_blank";
    } else {
        visionLink.onclick = function(event) {
            event.preventDefault(); // Prevent default action
            showToast("No Vision Found"); // Show the toast message
        };
    }

    var brochureLink = document.getElementById("brochureLink").querySelector('a');
    if (data[0].broucher) {
        brochureLink.href = `../uploads${cloudcode}/Folder3302/${data[0].broucher}?random=${random}`;
        brochureLink.target = "_blank";
    }
    else {
        brochureLink.onclick = function(event) {
            event.preventDefault(); // Prevent default action
            showToast("No Brochure Found"); // Show the toast message
        };
    }
}

function Upcoming_Meetings()
{
    var field ="";
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Upcoming_Meeting_list@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    var random = parseInt(Math.random() * (9999999 - 999) + 999);
            
    if (!data || data.length === 0 || data[0].txt === "txt is null")
    {
        field = '<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 147px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
    }
    else
    {
        data = JSON.parse(data[0].txt);
        var currentDate = new Date();

        for (var i = 0; i < data.length; i++)
        {
            var meetingSchedule = data[i].schedule;
            var [startPart, endPart] = meetingSchedule.split(' - ');
            
            // Parse start time
            var startDateTime = new Date(startPart);
            
            // Parse end time
            var [endTime, endPeriod] = endPart.split(' ');
            var [endHour, endMinute] = endTime.split(':');
            
            if (endPeriod === "PM" && endHour !== "12") {
                endHour = parseInt(endHour) + 12;
            } else if (endPeriod === "AM" && endHour === "12") {
                endHour = 0;
            }
            
            var endDateTime = new Date(startPart);
            endDateTime.setHours(endHour, endMinute);
            
            // Check if current time is within the meeting's time range
            var showNowButton = (currentDate >= startDateTime && currentDate <= endDateTime);

            // Add 'show-now' class if the "Now" button is visible
            var itemClass = showNowButton ? 'item show-now' : 'item';

            field += 
            `<li class="${itemClass}" data-bs-target="#exampleModalTogglemyprofile" data-bs-toggle="modal" data-bs-dismiss="modal" onclick="upcomming_meeting_popup_myprofile('${data[i].id}')">
                <div class="d-flex">
                    <img src="./images/meeting_icon.svg" alt="">
                    <div>    
                        <div class="mr-2" style="display: flex; flex-direction: column; padding-left: 10px;">                
                            <div style="font-size:15px;">${data[i].agenda}</div>        
                            <div style="font-size: 12px;color:#585D68;">${data[i].schedule}</div>       
                        </div>
                    </div>
                </div>
                <div class="mr-2">
                    <button class="now_btn" style="display: ${showNowButton ? 'block' : 'none'};">Now</button>
                </div>     
            </li>`;
        }
    }
    document.getElementById("upcoming_meetings_list").innerHTML = field;
}
function Progressbar(firstdate="", lastdate="")
{
    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
    var monthnumber = month.indexOf($("#monthlist").val().split(" ")[0]);
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#monthlist").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    firstdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    lastdate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    firstdate = encodeURIComponent(firstdate); // window.targetuser
    lastdate = encodeURIComponent(lastdate); // window.targetuser
    var fild ="";
    var getUrl = window.location;   
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Employee_Scoreboard@d@Mukund%20Narayan%20Raje@d@2024-05-01@d@2024-05-31@d@
    //var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Employee_Scoreboard@d@${encodeURIComponent(username)}@d@${firstdate}@d@${lastdate}@d@`;
    // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=hrms&ids=valuestring/&valuestring=Attedance_Summary_1@d@Tushar%20Sahebrao%20More@d@2025-03-01@d@2025-03-31@d@myattandance@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Attedance_Summary_1@d@${encodeURIComponent(username)}@d@${firstdate}@d@${lastdate}@d@myattandance@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    data = JSON.parse(data[0].txt);//JSON.parse(data[0]);
    
    function createGauge() {
        var present_count = data[0].present_count;

        $("#gauge0").kendoCircularGauge({
            value: present_count,
            centerTemplate: '<div class="gauge-label k-arcgauge-label">#: value #</div>',
            color: '#14c885',
            gaugeArea: {
                width: 80,
                height: 80
            },
            scale: {
                majorTicks: {
                    width: 100
                }
            }
        });

        var gaugeLabel = $("#gauge0 .k-arcgauge-label");

        if (present_count < 10) {
            gaugeLabel.css({
                "position": "absolute",
                "transform": "translate(-50%, -40%)",
                "font-size": "20px",
                "white-space": "nowrap",
                "text-align": "center",
            });
        } else {
            gaugeLabel.css({
                "position": "absolute",
                "top": "50%",
                "left": "50%",
                "transform": "translate(-50%, -40%)",
                "font-size": "20px",
                "white-space": "nowrap",
                "text-align": "center",
            });
        }
    }

    createGauge();

    function createGauge3()
    {
        var paid_leave = data[0].paid_leave;

        $("#gauge03").kendoCircularGauge({
            value: paid_leave,
            centerTemplate: '<div class="gauge-label k-arcgauge-label">#: value #</div>',
            color: "#e08193",
            gaugeArea: {
                width: 80,
                height: 80
            },
            scale: {
                majorTicks: {
                    width: 100
                }
            }
        });

        var gaugeLabel = $("#gauge03 .k-arcgauge-label");

        if (paid_leave < 10) {
            gaugeLabel.css({
                "position": "absolute",
                "transform": "translate(-50%, -40%)",
                "font-size": "20px",
                "white-space": "nowrap",
                "text-align": "center",
            });
        } else {
            gaugeLabel.css({
                "position": "absolute",
                "top": "50%",
                "left": "50%",
                "transform": "translate(-50%, -40%)",
                "font-size": "20px",
                "white-space": "nowrap",
                "text-align": "center",
            });
        }
    }
    createGauge3();

    function createGauge4()
    {
        var late_count = data[0].late_count;
        $("#gauge04").kendoCircularGauge({
            value: data[0].late_count,
            centerTemplate: '<div class="gauge-label k-arcgauge-label">#: value #</div>',
            color: "#fdb355",
            gaugeArea:{
                width: 80,
                height: 80
            },
            scale: {
                majorTicks: {
                    width: 100
                }
            }
        });
        var gaugeLabel = $("#gauge04 .gauge-label");

        if (late_count < 10) {
            gaugeLabel.css({
                "position": "absolute",
                "transform": "translate(-50%, -40%)",
                "font-size": "20px",
                "white-space": "nowrap",
                "text-align": "center",
            });
        } else {
            gaugeLabel.css({
                "position": "absolute",
                "top": "50%",
                "left": "50%",
                "transform": "translate(-50%, -40%)",
                "font-size": "20px",
                "white-space": "nowrap",
                "text-align": "center",
            });
        }
    }
    createGauge4();

    function createGauge6()
    {
        var od_count = data[0].od_count;
        $("#gauge06").kendoCircularGauge({
            value: data[0].od_count,
            centerTemplate: '<div class="gauge-label k-arcgauge-label">#: value #</div>',
            color: "#e08093",
            gaugeArea:{
                width: 80,
                height: 80
            },
            scale: {
                majorTicks: {
                    width: 100
                }
            }
        });
        var gaugeLabel = $("#gauge06 .gauge-label");

        if (od_count < 10) {
            gaugeLabel.css({
                "position": "absolute",
                "transform": "translate(-50%, -40%)",
                "font-size": "20px",
                "white-space": "nowrap",
                "text-align": "center",
            });
        } else {
            gaugeLabel.css({
                "position": "absolute",
                "top": "50%",
                "left": "50%",
                "transform": "translate(-50%, -40%)",
                "font-size": "20px",
                "white-space": "nowrap",
                "text-align": "center",
            });
        }
    }
    createGauge6();
}
// function pending_task()
// {
//     var field = "";
//     var getUrl = window.location;
//     var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
//     baseurl = baseurl.split("pages")[0];
//     var cloudcode =  window.targetcloud;
//     var userid;
//     //new added
//     const urlParams = new URLSearchParams(window.location.search);

    
//     if (urlParams.has('token')) {
//         console.log('inside pending_task urlParams');
//         const targetToken = urlParams.get('token');
//         var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
//         if (targetToken) {
//             console.log("Target user is:", targetToken);

//             var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65748&cloudcode=${cloudcode}&ids=valuestring/&valuestring=infiverseuserid@d@${window.loginname}@d@${tokenParam}`;
//             var resData = callajax(urltotal);
//             if(resData == `<span id="retrievejavascript">document.getElementById("progress").style.display="none";alert('Session expired! Click Ok to Refresh...');newTab();</span>`)
//             {
//                 return;
//             }
//             resData = JSON.parse(resData);
            
//             if (!resData || resData.length === 0 || resData[0] === "txt is null")
//             {
//                 return;
//             }
//             else {
//                 resData = JSON.parse(resData[0].txt); 
//                 userid = resData[0].id;
//             }
//             console.log('resData',resData);
//             console.log('resData',resData[0].txt);
//         } else {
//             console.warn("targetuser parameter is empty");
//         }
//     } 
//     //end 


//     if(!urlParams.has('token'))
//     {
//         userid = top.document.forms[0]["userid"].value;
//     }
//     //var userid = top.document.forms[0]["userid"].value;
//     var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
//     var cloudcodeParam = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : "";

//     var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=36352&ids=userid/&valuestring=${encodeURIComponent(userid)}@j@${tokenParam}${cloudcodeParam}`;
//     data = callajax(urltotal);
//     if(data == 'Invalid Token!')
//     {
//         field = '<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 147px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
//         document.getElementsByClassName("Pending_Task")[0].innerHTML = field;
//         // document.getElementById("pending_task_count").innerText = '0';
//         return;
//     }
//     data = JSON.parse(data);
//     if (!data || data.length === 0 || data[0] === "txt is null")
//     {
//         field = '<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 147px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
//         document.getElementsByClassName("Pending_Task")[0].innerHTML = field;
//         // document.getElementById("pending_task_count").innerText = '0';
//     }
//     else
//     {
//         // data = JSON.parse(data[0]);
//         for (var i = 0; i < data.length; i++) {
//             if(userid == data[i].User_ID)
//             {
//                 field += 
//                     `<li class="item">
//                         <div class="d-flex">
//                             <div class="mr-2" style="display: flex; flex-direction: column;">
//                                 <div style="font-size:15px;"><span style="color: #101010; font-weight: 500;">${data[i].Form_Name}</span></div>
//                                 <div style="font-size: 12px;color:#585D68;">${data[i].Show_Date}</div>
//                             </div>
//                         </div>
//                         <div class="mr-2" style="display: flex;justify-content: flex-end;align-items: center;gap: 10px;">
//                             <button class="done_btn" data-bs-toggle="modal" data-bs-target="#myModalprofile" onclick="openformprofile('pending_req_iframe',${data[i].Form_ID}, ${data[i].Record_ID}, 'myModalprofile')">${data[i].State_Name}</button>
//                         </div>
//                     </li>`;
//             }
//         }
//         if(field.length == 0)
//         {
//             field = '<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 147px; gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
//             document.getElementsByClassName("Pending_Task")[0].innerHTML = field;
//             // document.getElementById("pending_task_count").innerText = '0';
//         }
//         else
//         {
//             document.getElementById("pending_task_list").innerHTML = field;
//             // document.getElementById("pending_task_count").innerText = data.length;
//         }
//     }
// }

function upcoming_visit()
{
    var field = "";
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Visit_List@d@Mukund%20Narayan%20Raje@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Visit_List@d@${username}@d@${tokenParam}`;
    data = callajax(urltotal);
    if(data == 'Invalid Token!')
    {
        field = '<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 147px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
        document.getElementsByClassName("Pending_Task")[0].innerHTML = field;
        return;
    }
    data = JSON.parse(data);
    if (data.length == 0 || data[0].txt == "txt is null" || data[0].txt == null || data[0].txt == undefined || data == '')
    {
        field = '<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 147px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
        document.getElementsByClassName("Pending_Task")[0].innerHTML = field;
    }
    else
    {
        data = JSON.parse(data[0].txt);
        for (var i = 0; i < data.length; i++) {      
                field += 
                    `<li class="item">
                        <div class="d-flex">
                            <div class="mr-2" style="display: flex; flex-direction: column;">
                                <div style="font-size:15px;"><span style="color: #101010; font-weight: 500;">${data[i].project_name}</span><i class="fa-regular fa-pipe mx-2"></i><span style="color: #101010; font-weight: 500;">${data[i].customername}</span></div>
                                <div style="font-size: 12px;color:#585D68;">${data[i].visit_date}<span style="color: #101010; font-weight: 500;"> ${data[i].visit_time}</span></div>
                            </div>
                        </div>
                    </li>`;
        }
        if(field.length == 0)
        {
            field = '<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 147px; gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
            document.getElementsByClassName("Pending_Task")[0].innerHTML = field;
        }
        else
        {
            document.getElementById("upcoming_visit_body").innerHTML = field;
        }
    }
}

function upcomingBirthday()
{
    var field = "";
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Upcoming_Birthday_weekly@d@Mansi%20Rane@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Upcoming_Birthday_weekly@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);

    if (!data || data.length === 0 || data[0].txt === "txt is null")
    {
        field = '<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 147px; gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
        document.getElementsByClassName("upcomingbirthdays")[0].innerHTML = field;
        return;
    }
    else
    {
        data = JSON.parse(data[0].txt);
        var random = parseInt(Math.random() * (9999999 - 999) + 999);
        for (var i = 0; i < data.length; i++)
        {
            field +=`<li class="item" data-bs-toggle="modal" data-bs-target="#send_wish_popup" style="cursor: pointer;" onclick="open_wishing_modal('Upcoming_Birthday_List_Open','${data[i].id}','${data[i].to_employee_code}','${data[i].from_employee_code}')">
                <div class="d-flex">
                    <div class="itemPicnew">
                        <img src="../uploadshrms/Folder307/${data[i].id}column2965.gif?random=${random}" alt="Profile Image" onerror="this.src='./images/profile-icon.png'" style="width: 40px; border-radius: 50%; height: 40px;"> 
                    </div>      
                    <div class="mr-2" style="display: flex; flex-direction: column; padding-left: 10px;">                
                        <div class="employee-name"  title="${data[i].emply_name}">${data[i].emply_name}</div>        
                         <div class="employee-designation" >${data[i].designation}</div>       
                    </div> 
                </div>
                <div class="mr-2" style="display: flex;justify-content: flex-end;align-items: center;gap: 10px;">
                    <img src="./images/Cake_Icon.svg" class="n-img" style="width: 20px;">       
                    <div style="font-size: 15px;color: #020188;background: rgb(240 238 255);padding: 7px;border-radius: 10px;width: 75px;justify-content: center;display: flex;">${data[i].dof_birth}</div>      
                </div> 
            </li>`;
        }
        document.getElementById("upcomingbirthdaylist").innerHTML = field;
    }
}
function newJoining()
{
    var field = "";
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=New_Joinee_Detail@d@Mansi%20Rane@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=New_Joinee_Detail@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);

    var random = parseInt(Math.random() * (9999999 - 999) + 999);
            
    if (!data || data.length === 0 || data[0].txt === "txt is null")
    {
        field = '<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 147px; gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
        document.getElementsByClassName("workanniversaries")[0].innerHTML = field;
    }
    else
    {
        data = JSON.parse(data[0].txt);
        for (var i = 0; i < data.length; i++)
        {
            field +=
                `<li class="item" data-bs-toggle="modal" data-bs-target="#send_wish_popup" style="cursor: pointer;" onclick="open_wishing_modal('New_Joinee_Detail_Open','${data[i].id}','${data[i].to_employee_code}','${data[i].from_employee_code}')">
                    <div class="d-flex">
                        <div class="itemPicnew" >
                            <img src="../uploadshrms/Folder307/${data[i].id}column2965.gif?random=${random}" alt="Profile Image" onerror="this.src='./images/profile-icon.png'" style="width: 40px; border-radius: 50%; height: 40px;">       
                        </div>      
                        <div class="mr-2" style="display: flex; flex-direction: column; padding-left: 10px;">                
                            <div class="employee-name" title="${data[i].emply_name}">${data[i].emply_name}</div>        
                            <div class="employee-designation" >${data[i].designation}</div>       
                        </div>
                    </div> 
                    <div class="mr-2" style="display: flex;justify-content: flex-end;align-items: center;gap: 10px;">
                        <img src="./images/Anniversary_Icon.svg" class="n-img" style="width: 20px;">        
                        <div style="font-size: 15px;color: #020188;background: rgba(255, 231, 231, 1);padding: 7px;border-radius: 10px;width: 75px; justify-content: center;display: flex;">${data[i].dof_join}</div>      
                    </div>     
                </li>`;
        }
        document.getElementById("newjoininglist").innerHTML = field;
    }
}
function myprofile_Achievements()
{
    var fild ="";
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Award_Detail@d@Mukund%20Narayan%20Raje@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Award_Detail@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);

    var random = parseInt(Math.random() * (9999999 - 999) + 999);

    if (!data || data.length === 0 || data[0].txt === "txt is null")
    {
        fild = '<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 147px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
        document.getElementsByClassName("Achievements")[0].innerHTML = fild;
        return;
    }
    else
    {
        data = JSON.parse(data[0].txt);
        for (var i = 0; i < data.length; i++)
        {
            fild +=
                `<li class="item" data-bs-toggle="modal" data-bs-target="#send_wish_popup" style="cursor: pointer;" onclick="open_wishing_modal('Award_Detail_Open','${data[i].id}','${data[i].to_employee_code}','${data[i].from_employee_code}')">
                    <div class="d-flex">
                        <div class="itemPicnew">
                            <img src="../uploadshrms/Folder307/${data[i].ids}column2965.gif?random=${random}" alt="Profile Image" onerror="this.src='./images/profile-icon.png'" style="width: 40px; border-radius: 50%; height: 40px;">        
                        </div>      
                        <div class="mr-2" style="display: flex; flex-direction: column; padding-left: 10px;">                
                            <div class="employee-name" title="${data[i].employee_name}">${data[i].employee_name}</div>        
                            <div class="employee-designation" >${data[i].department}</div>       
                        </div>
                    </div>
                    <div class="mr-2" style="display: flex;justify-content: flex-end;align-items: center;gap: 10px;">      
                        <div style="font-size: 15px;color: #020188;background: rgba(249, 253, 255, 1);padding: 7px;border-radius: 10px;width: 100px;display: flex;align-items: center;gap: 10px;line-height: 1;">
                            <div>
                                <img src="./images/Achievements_Icon.svg" class="n-img" style="width: 20px;"> 
                            </div>
                            <div>
                                <span style="font-size: 11px;">${data[i].award_title}</span>
                            </div>
                        </div>      
                    </div>     
                </li>`;
        }
        document.getElementById("achievementslist").innerHTML = fild;
    }
}

function notice_board() 
{
    let field = "";
    var getUrl = window.location;
    let baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode = window.targetcloud;
    var username = window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=notice_board@d@Ramesh@d@2024-01-01@d@2024-09-01@d@@d@
    // let urltotal = ${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=notification@d@;
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=notice_board@d@${encodeURIComponent(username)}@d@@d@@d@@d@${tokenParam}`;
    let data = callajax(urltotal);
    try {
        data = JSON.parse(data);
    } catch (e) {
        console.error("Invalid JSON response from API");
        return;
    }
    if (!data || data.length === 0 || data[0].txt === "txt is null") {
        field = `
            <div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 300px;gap: 10px;">
                <img src="./images/data_not_found.svg" alt="" class="no-data-image">
                <div class="no-data">Data Not Found</div>
            </div>`;
        document.getElementById("noticeboard_profile").innerHTML = field;
        document.getElementById("notification_count").innerText = 0;
    } else {
        try {
            data = JSON.parse(data[0].txt);
        } catch (e) {
            console.error("Invalid JSON inside txt field");
            return;
        }
        var noticecount = data.length;
        for (let i = 0; i < noticecount; i++) {
            const seenId = JSON.parse(localStorage.getItem("seen_notification_ids") || "[]");
            const isSeen = seenId.includes(String(data[i].id));
            field += `
                <div class="notification ${!isSeen ? 'unread' : ''}" style="cursor: pointer;" data-bs-target="#noticeboard_popup" data-bs-toggle="modal" data-bs-dismiss="modal" onclick="noticeboard_popup_fun('${data[i].id}'); markAsRead('${data[i].id}', this);">
                    <div><img src="./images/notification_icon.svg" class="n-img" style="width: 30px;"></div>
                    <div style="gap: 2px;display: flex;flex-direction: column;">
                        <div style="font-size: 13px;font-weight: 600;">${data[i].title}</div>
                        <div style="color: #585D68;font-size: 12px;">${data[i].particular}</div>
                        <div style="font-size: 12px;color: #585D68;">${data[i].notice_issue_date}</div>
                    </div>
                </div>`;
        }
        document.getElementById("noticeboard_profile").innerHTML = field;
        document.getElementById("notification_count").innerText = noticecount;
    }
}


function markAsRead(id, element) {
  // Remove highlight
  element.classList.remove("unread");

  let seenId = JSON.parse(localStorage.getItem("seen_notification_ids") || "[]");
  if (!seenId.includes(id)) {
    seenId.push(id);
    localStorage.setItem("seen_notification_ids", JSON.stringify(seenId));
  }
}

function getTodayDMY() 
{
    return new Date().toLocaleDateString("en-GB").split('/').join('-');
}

function setSeenNotificationIds(ids) {
  document.cookie = "seen_notification_ids=" + encodeURIComponent(JSON.stringify(ids)) + "; path=/; max-age=86400"; // 1 day
}

function getSeenNotificationIds() {
  const match = document.cookie.match(new RegExp('(^| )seen_notification_ids=([^;]+)'));
  return match ? JSON.parse(decodeURIComponent(match[2])) : [];
}

function loadPopup() 
{
    const today = getTodayDMY();
    // const lastSeenPopupDate = localStorage.getItem("last_seen_popup_date");
    let lastSeenPopupDate = null;
    try {
        lastSeenPopupDate = localStorage.getItem("last_seen_popup_date");
    } catch (e) {
        console.error("Error accessing localStorage:", e);
    }

    const popupContainer = document.getElementById("popupContainer");
    // let seenIds = JSON.parse(localStorage.getItem("seen_notification_ids") || "[]");
    let seenIds = getSeenNotificationIds();

    // Simulate API again for popup
    var getUrl = window.location;
    let baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode = window.targetcloud;
    var username = window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    // let urltotal = ${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=notification@d@;
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=notice_board@d@${encodeURIComponent(username)}@d@@d@@d@@d@${tokenParam}`;
    let data = callajax(urltotal);
    data = JSON.parse(data);
    if(data == `<span id="retrievejavascript">document.getElementById("progress").style.display="none";alert('Session expired! Click Ok to Refresh...');newTab();</span>`){
        return;
    }
    if (!data || data.length === 0 || data[0].txt === "txt is null") {
        return; 
    }
    const nestedData = JSON.parse(data[0].txt);
    let todayNotices = 0;
    popupContainer.innerHTML = "";

    nestedData.forEach(notice => {
      if (notice.notice_issue_date === today && !seenIds.includes(Number(notice.id))) {
        todayNotices++;
        popupContainer.innerHTML += `
          <div class="popup-item" data-id="${notice.id}" style="border-bottom: 1px solid lightgray;margin-top: 4px;font-size: 14px;">
            <div class="popup-title" style="font-weight: 600;">${notice.title}</div>
            <div class="popup-date">${notice.notice_issue_date}</div>
          </div>`;
      }
    });

    if (todayNotices > 0) {
      document.getElementById("newNotificationPopup").style.display = "block";
    }
  }
  
  function markPopupItemsAsSeen() {
    const allIds = Array.from(document.querySelectorAll(".popup-item")).map(el => Number(el.dataset.id));
    const prevIds = JSON.parse(localStorage.getItem("seen_notification_ids") || "[]");
    const merged = [...new Set([...prevIds, ...allIds])];
    // localStorage.setItem("seen_notification_ids", JSON.stringify(merged));
    setSeenNotificationIds(merged);
  }

  // Popup click  Show dropdown & mark seen
  document.getElementById("newNotificationPopup").addEventListener("click", function () {

    notice_board();
    event.stopPropagation(); // Prevent click event from propagating to the document body
    if ($('#noticemenu').css('display') != 'none')
    {
        $('#noticemenu').hide();
    }
    else
    {
        $('#noticemenu').show();
    }
    
    document.getElementById("newNotificationPopup").style.display = "none";
    markPopupItemsAsSeen();
    localStorage.setItem("last_seen_popup_date", getTodayDMY());
    // notice_board();
  });

  // On page load
loadPopup();

// function checkNewNotificationPopup() 
// {
//     var getUrl = window.location;
//     let baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
//     baseurl = baseurl.split("pages")[0];
//     var cloudcode = window.targetcloud;
//     var username = window.targetuser;
//     var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

//     const today = new Date().toLocaleDateString("en-GB").split('/').join('-'); // "DD-MM-YYYY"
//     const lastSeenPopupDate = localStorage.getItem("last_seen_popup_date");
//     const popupContainer = document.getElementById("popupContainer");
    
//     if (!popupContainer) return;
//     popupContainer.innerHTML = "";

//     var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=notice_board@d@${encodeURIComponent(username)}@d@@d@@d@@d@${tokenParam}`;
//     let data = callajax(urltotal);
//     try {
//         data = JSON.parse(data);
//     } catch (e) {
//         console.error("Invalid JSON from API:", e);
//         return;
//     }
//     if (!data || data.length === 0 || data[0].txt === "txt is null") return;
//     let noticeList;
//     try {
//         noticeList = JSON.parse(data[0].txt);
//     } catch (e) {
//         console.error("Invalid JSON inside txt:", e);
//         return;
//     }
//     let todayNotices = 0;
//     for (let i = 0; i < noticeList.length; i++) {
//         if (noticeList[i].notice_issue_date === today) {
//             todayNotices++;
//             popupContainer.innerHTML += `
//                 <div class="popup-item">
//                     <div class="popup-title">${noticeList[i].title}</div>
//                     <div class="popup-date">${noticeList[i].notice_issue_date}</div>
//                 </div>
//             `;
//         }
//     }
//     if (todayNotices > 0 && lastSeenPopupDate !== today) {
//         document.getElementById("newNotificationPopup").style.display = "block";
//     }
// }
// checkNewNotificationPopup();

function OpenFieldFile(fieldfilename)
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    if(fieldfilename=='' || fieldfilename.indexOf('_')<0) flashmessage('No File!');
    
    var formid = fieldfilename.split("_")[0];//document.forms[0]['formid'].value;
    
    window.open(baseurl +'uploads'+window.targetcloud+'/Folder'+formid+'/'+fieldfilename+'','Download');
    
}

function noticeboard_popup_fun(id)
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65749&cloudcode=hrms&ids=valuestring/&valuestring=notice_board_list@d@2@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65749&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=notice_board_list@d@${id}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    data = JSON.parse(data[0].txt);

    document.getElementById('announcement_dt').innerText = data[0].announcementdate;
    document.getElementById('announcement_valid_dt').innerText = data[0].announcement_till_date;
    document.getElementById('announcement_category').innerText = data[0].announcement_category;
    document.getElementById('dep_notic').innerText = data[0].department;;
    document.getElementById('announcement_title').innerText = data[0].announcement_title;
    document.getElementById('announcement_cont').innerText = data[0].announcement_content;
    // document.getElementById('notice_attachment').onclick = function() {
    //     top.OpenFieldFile(data[0].view_attachment);
    // };
    if (data[0].view_attachment)
    {
        document.getElementById('notice_attachment').style.display = 'block';
        document.getElementById('notice_attachment').onclick = function() {
            //  top.OpenFieldFile(data[0].view_attachment);
             OpenFieldFile(data[0].view_attachment);
        }
    }
    else
    {
        document.getElementById('notice_attachment').style.display = 'none';
    }
}
function myprofile()
{
    dateselector();
    Personal_Info();
    Family_Info();
    Bank_Details();
    Company_Detail();
    Upcoming_Meetings();
    // // monthchange();
    Progressbar();
    // pending_task();
    upcoming_visit()
    upcomingBirthday();
    newJoining();
    myprofile_Achievements();
    notice_board();
    chekin_chek();
}
myprofile();
function openformprofile(modalId,formid="",recordid="",modalDivId="")
{
    // Change modal header text
    // document.getElementById('popup_header1').innerText = headerText;

    // Hide all slides
    document.querySelectorAll('#myModalprofile .modal_contant > div').forEach(slide => {
        slide.style.display = 'none';
    });

    url = "";
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    var cloudcode = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : "";
    var username = window.targetuser ? `&username=${encodeURIComponent(window.targetuser)}` : "";
    var infiverseid = window.infivereuserid ? `&useridInfiverse=${encodeURIComponent(window.infivereuserid)}` : "";

    var params = [];
    if (window.token) {
        params.push(`token=${encodeURIComponent(window.token)}`);
    }
    if (window.targetcloud) {
        params.push(`cloudcode=${encodeURIComponent(window.targetcloud)}`);
    }
    if (window.targetuser) {
        params.push(`targetuser=${encodeURIComponent(window.targetuser)}`);
    }
    if (window.infivereuserid) {
        params.push(`useridInfiverse=${encodeURIComponent(window.infivereuserid)}`);
    }
    var queryString = params.length > 0 ? "?" + params.join("&") : "";

    if("apply_reimbursement_profile" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid=4046&reportid=-1&id=4046&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#apply_reimbursement_profile").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("apply_advance_profile" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid=1908&reportid=-1&id=1908&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#apply_advance_profile").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("apply_od_activity_profile" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid=4176&reportid=-1&id=4176&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#apply_od_activity_profile").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("dsr_entry_profile" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid=4265&reportid=-1&id=4265&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#dsr_entry_profile").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("dsr_entry_sign_out" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid=4265&reportid=-1&id=4265&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#dsr_entry_sign_out").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("report_entry_view" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid=4554&reportid=-1&id=4554&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_12201"+tokenParam+cloudcode+username+infiverseid;
        $("#report_entry_view").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("create_suggestions_profile" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid=4030&reportid=-1&id=4030&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#create_suggestions_profile").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("create_iou_profile" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid=3361&reportid=-1&id=3361&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#create_iou_profile").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("calendar_profile" == modalId)
    {
        url = "/../pages/calendarmain.html" + queryString;
        $("#calendar_profile").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("createmeting_profile" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid=4041&reportid=-1&id=4041&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#createmeting_profile").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("manpowerrequisition" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid=3368&reportid=-1&id=3368&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#manpowerrequisition").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("minutes_of_meeting" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid=3260&reportid=-1&id=3260&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#minutes_of_meeting").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("editbtn_profile" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid=307&reportid=-1&id=307&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#editbtn_profile").children("iframe").attr("src",url);
    }
    else if("applyleave_profile" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid=1911&reportid=-1&id=1911&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#applyleave_profile").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("upcoming_visit_form" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid=4552&reportid=-1&id=4552&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#upcoming_visit_form").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("family_detail_iframe" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid=3263&reportid=-1&id=3263&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#family_detail_iframe").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("bank_detail_iframe" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid=3702&reportid=-1&id=3702&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#bank_detail_iframe").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("personal_info_form" == modalId)
    {
        url = "/../pages/personal_info.jsp" + queryString;
        $("#personal_info_form").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("pending_req_iframe" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid="+formid+"&reportid="+recordid+"&id="+formid+"&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#pending_req_iframe").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("attendance_correction_iframe" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid=4090&reportid=-1&id=4090&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#attendance_correction_iframe").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("approve_team_leave" == modalId)
    {
        $("#exampleModalToggle6").modal("hide");
        $("#exampleModalToggle4").modal("hide");
        url = "/../getFormLink.do?actn=EditEnter&formid=38&reportid="+recordid+"&id=38&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#approve_team_leave").children("iframe").attr("src",url);
    }
    else if("team_attendance_correction" == modalId)
    {
        $("#exampleModalToggle6").modal("hide");
        $("#exampleModalToggle4").modal("hide");
        url = "/../getFormLink.do?actn=EditEnter&formid="+formid+"&reportid="+recordid+"&id="+formid+"&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#team_attendance_correction").children("iframe").attr("src",url);
    }
    else if("incometax" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid=2112&reportid=-1&id=2112&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#incometax").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("iframewithout_team_leave_pending" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid="+formid+"&reportid="+recordid+"&id="+formid+"&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#iframewithout_team_leave_pending").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    else if("iframewithout_formid_recordid" == modalId)
    {
        url = "/../getFormLink.do?actn=EditEnter&formid="+formid+"&reportid="+recordid+"&id="+formid+"&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
        $("#iframewithout_formid_recordid").children("iframe").attr("src",url);
        checkJsp(url,modalDivId);
    }
    // Show the selected slide
    const selectedSlide = document.getElementById(modalId);
    if (selectedSlide)
    {
        selectedSlide.style.display = 'block';
    }

    if("iframewithout_team_leave_pending" == modalId){
        let iframeid = document.getElementById("iframewithout_team_leave_pending").parentElement.parentElement;
        let iframeicon = iframeid.querySelector('i.fa-arrow-left-long.bkarrowicon.bodyArrow');
        if (iframeicon) {
            iframeicon.id = "leaveupdate";
        }
    }
}
// document.getElementById("leaveupdate").addEventListener("click", () => {
//     alert("just testing");
// });


function checkJsp(url,modalDivId){

    if(url.indexOf('jsp') > -1 || url.indexOf('html') > -1 ){
        //document.querySelector('#config_formModal .modal-header').style.display = 'flex';
        document.querySelector('#'+modalDivId +' .modal-header').style.display = 'flex';
        document.querySelector('#'+modalDivId +' .bodyArrow').style.display = 'none';
    }
    else{
        document.querySelector('#'+modalDivId +' .modal-header').style.display = 'none';
    // document.querySelector('#config_formModal .modal-header').style.display = 'none';
    // document.querySelector('#config_formModal .bodyArrow').style.display = 'block';
        document.querySelector('#'+modalDivId +' .bodyArrow').style.display = 'block';

    }
}


function upcomming_meeting_popup_myprofile(id)
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Upcoming_Meetings@d@Header@d@ERP%20Admin@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Upcoming_Meetings@d@Header@d@${encodeURIComponent(username)}@d@${id}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);
    try
    {
        if(data == '' || data.length == 0 || data[0].txt == 'txt is null')
        {
            // var field = '<div>No meetings found</div>';
            // $("#meeting_list_tbl").html(field);
            return;
        }
        data = JSON.parse(data[0].txt);//JSON.parse(data[0]);
            
        var field =  "";
        var random = parseInt(Math.random() * (9999999 - 999) + 999);
        for(var i=0;i<data.length;i++) 
        {
            field +=
                '<div class="modal-body" >'+
                '<div style="display: flex; gap: 10px;align-items: center;justify-content: space-between;"><div style="align-items: center;display: flex;gap: 12px;"><img style=" border-radius: 50%;width: 30px;height: 30px;" src="../uploadshrms/Folder307/' + data[i].id + 'column2965.gif?random=' + random + '" alt="" onerror="this.src=\'./images/profile-icon.png\'"><span style="font-weight: 500;font-size: 14px;"> '+ data[i].coordinator+'</span></div><div style="border: 1px solid; gap: 10px; display: flex;padding: 2px 10px;color: #686E7A !important;border: 1.5px solid #CED4E1;border-radius: 6px;"><span><i class="fa-light fa-share-nodes"></i></span><span><i class="fa-light fa-envelope"></i></span></div></div>'+
                '<div id="meetingdetails" style="padding-top: 20px;font-size: 13px;gap: 7px;display: flex;flex-direction: column;">'+
                '<div style="display: flex;"><span style="color:#585D68">Meeting Topic </span><span style="padding-left: 12px;padding-right: 5px;"> :</span><span>'+data[i].meeting_topic+'</span></div>'+
                '<div style="display: flex;"><span style="color:#585D68">Coordinator </span><span style="padding-left: 25px;padding-right: 5px;"> : </span><span>'+data[i].coordinator+'</span></div>'+
                '<div style="display: flex;"><span style="color:#585D68">Project Name </span><span style="padding-left: 15px;padding-right: 5px;"> : </span><span style="border-radius: 4px;background: #FFC368;padding: 1px 5px;">'+data[i].pro+'</span></div>'+
                '<div style="display: flex;"><span style="color:#585D68">Initiated By </span><span style="padding-left: 28px;padding-right: 5px;"> : </span><span>'+data[i].initated_by+'</span></div>'+
                '<div style="padding-top:5px;border: 1.5px solid #C0BCF0;background-color: #DBD8FF;margin-top: 10px;border-radius: 6px;padding: 10px 10px 10px 12px;display: flex;align-items: center;gap: 15px;">'+
                '<div><img src="./images/meeting_icon.svg" alt=""></div>'+ 
                '<div style="display: flex; flex-direction: column;align-items: baseline;"><div style="display: flex;text-align: left;">'+data[i].agenda+'</div><div style="color:#585D68">Date: '+data[i].dates+' <span>Time: '+data[i].starttime+'</span> - <span>'+data[i].endtime+'</span></div></div>'+
                '</div>'+
                '<div style="display: flex; flex-direction: column; text-align: start;border: 1.5px solid #CED4E1;padding: 4px 10px;border-radius: 6px;"><span style="font-weight:500;font-size: 12px;">Meeting Participants:</span><span style="color:#585D68;font-size: 12px;">'+data[i].participant+'</span></div>'+
                '</div>'+
                '</div>'+
                '<div class="modal-footer" style="display: flex;padding-top: 10px;gap: 10px;">'+
                '<a class="btn btn-outline-primary" href="#" role="button" style="border: 1.5px solid #5D51E2;border-radius: 6px;color: #5D51E2;">Notify Me</a>'+
                '<a class="btn btn-outline-primary" href="#" role="button" style="background-color: #CDCBEA;border: none;color: #FFFFFF;border-radius: 6px;">Join</a>'+
                '</div>';
        }
        $("#upcommingmeetingdetailpoupmyprofile").html(field);
    }
    catch(e)
    {
        
    }
}
function open_wishing_modal(api_actn,id,to_employee_code,from_employee_code)
{
    //<img id="wishingimg" style="width: -webkit-fill-available;z-index: 0;" src="./images/birthday_poster.svg" alt="">
    if(api_actn == "Upcoming_Birthday_List_Open")
    {
        $("#wishingimg").attr("src","./images/birthday_poster.svg");
    }
    else if(api_actn == "New_Joinee_Detail_Open")
    {
        $("#wishingimg").attr("src","./images/welcome_poster.svg");
    }
    else if(api_actn == "Award_Detail_Open")
    {
        $("#wishingimg").attr("src","./images/achievement_poster.svg");
    }
    // top.document.body.scrollTo({
    //     top: 0,
    //     behavior: "smooth"
    // });
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Upcoming_Birthday_List_Open@d@460@d@
    let urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=${api_actn}@d@${id}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);
    try
    {
        if(data == '' || data.length == 0 || data[0].txt == 'txt is null')
        {
            // var field = '<div>No meetings found</div>';
            // $("#meeting_list_tbl").html(field);
            return;
        }
        data = JSON.parse(data[0].txt);//JSON.parse(data[0]); 
            
        var field =  "";
        var random = parseInt(Math.random() * (9999999 - 999) + 999);
        for(var i=0;i<data.length;i++) 
        {
            field +=
                '<div class="modal-body">'+
                '<img src="../uploadshrms/Folder307/' + data[i].id + 'column2965.gif?random=' + random + '" alt="Profile Image" class="profile-img"  onerror="this.src=\'./images/profile-icon.png\'">'+ 
                '<h5>'+data[i].emply_name+'</h5>'+
                '<p style="padding-bottom: 30px;">'+data[i].designation+'</p>'+
                '<textarea id="wish_msg_text_area" class="form-control" rows="4" placeholder="Enter your wish here..." style="resize: none;"></textarea>'+
                '</div>'+
                '<div class="modal-footer">'+
                '<div style="font-weight: 600;margin-top: 15px;border-radius: 6px;background: #5D51E2;padding: 6px;color: white;width: max-content;font-size: 12px;" onclick="sendwish(\''+api_actn+'\',\''+to_employee_code+'\',\''+from_employee_code+'\')">Send your wish</div>'+
                '</div>';
        }
        $("#birthday-model-body").html(field);
    }
    catch(e)
    {
    }
}
function urltoFile(url, filename, mimeType)
{
    mimeType = mimeType || (url.match(/^data:([^;]+);/)||'')[1];
    return (fetch(url)
        .then(function(res){return res.arrayBuffer();})
        .then(function(buf){return new File([buf], filename, {type:mimeType});})
    );
}   
function stopcamera_signin()
{
    event.target.id=="exampleModalCenter"
    if (stream_signin && ( event.target.id=="exampleModalCenter" || event.target.id=="closemodal" || event.target.id=="closemodal-i" || event.target.id=="click_photo_signin"))
        {
            let tracks = stream_signin.getTracks();
            tracks.forEach(track => track.stop());
            video_signin.srcObject = null;
            const context = canvas_signin.getContext('2d');
            context.clearRect(0, 0, canvas_signin.width, canvas_signin.height);
        }
}                                 
function stopcamera_signout()
{
    event.target.id=="exampleModalCenter"
    if (stream_signout && ( event.target.id=="exampleModalCenter" || event.target.id=="closemodal" || event.target.id=="closemodal-i" || event.target.id=="click_photo_signout"))
        {
            let tracks = stream_signout.getTracks();
            tracks.forEach(track => track.stop());
            video_signout.srcObject = null;
            const context = canvas_signout.getContext('2d');
            context.clearRect(0, 0, canvas_signout.width, canvas_signout.height);
        }
}
function stopAllCameras() {
    const allVideos = document.querySelectorAll("video");

    allVideos.forEach(video => {
        if (video.srcObject) {
            video.srcObject.getTracks().forEach(track => {
                console.log("Force stopping track:", track);
                track.stop();
            });
            video.srcObject = null;
        }
    });
}


function closesigninsignout()
{
    $("#closemodal").trigger("click");
}
function closeChekinChekout()
{
    $("#closeCheckInModal-i").trigger("click");
}
var retrievedId = '';
var employeeidradius = '';
function signinbtn()
{
    $("#sign_out_btn").css("display","none");
    var state = "2123"
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // var cloudcode = encodeURIComponent( window.targetcloud);
    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Employee_Sign_Details@d@ERP%20Admin@d@
    var urlsignin = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Employee_Sign_Details@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    data = callajax(urlsignin);
    data = JSON.parse(data);
    if(data[0].txt == 'txt is null')
    {
        return;
    }
    else
    {
        data = JSON.parse(data[0].txt);//JSON.parse(data[0]);
    }
    retrievedId = data[0].id;
    employeeidradius = data[0].column8558;

    var employee_code_box = data[0].column8558;
    console.log(employee_code_box);
    $("#signin_employee_code").text(employee_code_box);

    $("#signin_top_date").text((data[0].column8563));
    var date = document.getElementById('signin_top_date').innerText;
    date_top = date.split('T')[0];
    $("#signin_top_date").text(date_top);

    if(data[0].column8559 != "00:00:00")
    {
        document.getElementById("click_photo_signin").disabled = true;
        $("#click_photo_signin").css("cursor","not-allowed");
        $("#video_signin").css("display","none");
        $("#img_signin").attr("src",'../uploads'+cloudcode+'/Folder547/547_'+data[0].id+'_66843_signin_img.png');
        $("#img_signin").css("display","block");
        $("#signin_loc_span").text(data[0].column39790);
        check_status_breck(retrievedId);
        // check_status_checkin(retrievedId);
        chekInFlag && check_status_checkin(retrievedId);
        chekInFlag && check_status_journey(retrievedId);
    }
    else
    {
        document.getElementById("click_photo_signin").disabled = false;
        $("#click_photo_signin").css("cursor","pointer");
        $("#video_signin").css("display","block");
        $("#img_signin").css("display","none");
        getLocation($("#signin_loc_span"));
    }

    $('#column39451').val("ESS");//ESS--by default value
    $('#column40408').val(data[0].column8668+" at Location: "+data[0].column39792);//remarks $ location
    $('#column44832').val(data[0].column44832);//Within Radius
    $('#column38120').val(data[0].column38120);//SUb Project
    $('#column31847').val(data[0].column31847);//name of compny
    $('#column65439').val(data[0].column65439);// grade name
    $('#column71424').val(data[0].column71424);// Branch name
    $('#column71772').val(data[0].column71772);// shift name
    $('#column65440').val(data[0].column65440);// Department name
    $('#column8557').val(data[0].column8557);//Employee Name
    $('#column38113').val(data[0].column38113);//Attendance Type
    $('#column8558').val(data[0].column8558);//emp code
    $('#column8559').val(data[0].column8559);//In Time
    $('#column8560').val(data[0].column8560);//Out Time
    $('#column8668').val(data[0].column8668); //"${Remarks}
    $('#active').val(data[0].active);
    $('#created_by').val(data[0].created_by);
    $('#created_date').val(data[0].created_date);
    $('#modified_by').val(data[0].modified_by);
    $('#modified_date').val(data[0].modified_date);
    $('#state').val(data[0].state);
    $('#parentstatereportid').val(data[0].parentstatereportid);
    $('#stateownerid').val(data[0].stateownerid)
    $('#column36613').val(data[0].column36613);//ERP User Login
    $('#column36616').val(data[0].column36616);//Responsible Manager
    $('#column72803').val(data[0].column72803);//reportigng HOD
    $('#column38969').val(data[0].column38969);//shift time
    $('#column39414').val(data[0].column39414);//Project Name
    $('#column39790').val(data[0].column39790);// Sign In Location
    $('#column39791').val(data[0].column39791);//Sign Out Location
    $('#column39792').val(data[0].column39792);//Current Location
    $('#column38414').val(data[0].column38414);//Actual Sign In
    $('#column38415').val(data[0].column38415);//Actual Sign Out
    $('#column38416').val(data[0].column38416);//Modify Attendanc
    $('#idselected').val(data[0].id);//id             
    $('#column38111').val(data[0].column38111);//
    $('#column58076').val(data[0].column58076);//
    $('#column67066').val(data[0].column67066);//in project
    $('#column67067').val(data[0].column67067);//out project
    $('#column66843').val(data[0].column66843);//in photo

    
    // $("#signin_top_date").text((data[0].column8563));
    // var date = document.getElementById('signin_top_date').innerText;
    // date_top = date.split('T')[0];
    // $("#signin_top_date").text(date_top);
    $("#currenttime_signin_emp").text((data[0].column8559));
    var time = document.getElementById('currenttime_signin_emp').innerText;
    time_in = time.split('.')[0];
    $("#currenttime_signin_emp").text(time_in);  
    
    $("#exampleModalCenter .modal-lg").css("width","max-content")

    $("#click_photo_signin").css("display","inline-block");
    if(data[0].column8560 != "00:00:00" && data[0].column8559 != "00:00:00")
    {
        signoutbtn();
        return;
    }
    else if(data[0].column8559 != "00:00:00")
    {
        $("#project_dropdownlist").val(data[0].column67066)
        $("#inputGroupSelect02").val(data[0].column38113)
        $("#project_dropdownlist").prop("readonly", true);
        $("#inputGroupSelect02").prop("readonly", true);
        return;
    }

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65751&cloudcode=hrms&ids=valuestring/&valuestring=Project_List@d@MO19@d@
    var projectname_api = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65751&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Project_List@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    data = callajax(projectname_api);
    data = JSON.parse(data);
    data = JSON.parse(data[0].txt);//JSON.parse(data[0]);

    $("#project_dropdownlist").parent().find(".k-clear-value").remove();
    var timeline = $("#project_dropdownlist").data("kendoComboBox");
    if (timeline)
    {
        timeline.destroy();
    }
    $("#project_dropdownlist").kendoComboBox({
        dataTextField: "project_name",
        dataValueField: "project_name",
        dataSource: data,
        filter: "contains",
        suggest: true,
        placeholder: "Project Name",
        change: function(e) {
            let combo = this;
            let value = combo.value();      // current typed/selected value
            let item = combo.dataItem();    // dropdown item if valid

            //  Clear if user typed something not in dropdown
            if (!item || item.project_name !== value) {
                combo.value("");
            }
        }
    });
    var dropdownlist = $("#dropdownlist").data("kendoComboBox");


    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=combo&fieldid=38113&ids=/&valuestring=@j@&cloudcode=hrms
    var type_api = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=combo&fieldid=38113&ids=/&valuestring=@j@&cloudcode=${encodeURIComponent(cloudcode)}${tokenParam}`;
    data = callajax(type_api);
    data = JSON.parse(data);

    $("#inputGroupSelect02").parent().find(".k-clear-value").remove();
    var timeline1 = $("#inputGroupSelect02").data("kendoComboBox");
    if (timeline1)
    {
        timeline1.destroy();
    }
    $("#inputGroupSelect02").kendoComboBox({
        dataTextField: "display",
        dataValueField: "value",
        dataSource: data,
        filter: "contains",
        suggest: true,
        placeholder: "Login Type",
        change: function(e) {
            let combo = this;
            let value = combo.value();      // current typed/selected value
            let item = combo.dataItem();    // dropdown item if valid

            //  Clear if user typed something not in dropdown
            if (!item || item.value !== value) {
                combo.value("");
            }
        }
    });
}
function signoutbtn()
{
    
    var state = "2123"
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Employee_Sign_Details@d@ERP%20Admin@d@
    var urlsignout = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Employee_Sign_Details@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    data = callajax(urlsignout);
    data = JSON.parse(data);
    if(data[0].txt == "txt is null")
    {
        $("#video_signin").css("display","block");
        $("#img_signin").css("display","none");
        return;
    }
    data = JSON.parse(data[0].txt);//JSON.parse(data[0]);
    
    retrievedId = data[0].id;
    employeeidradius = data[0].column8558;
    
    
    var employee_code_box = data[0].column8558;
    console.log(employee_code_box);
    $("#signin_employee_code").text(employee_code_box);

    $("#signin_top_date").text((data[0].column8563));
    var date = document.getElementById('signin_top_date').innerText;
    date_top = date.split('T')[0];
    $("#signin_top_date").text(date_top);

    if(data[0].column8559 == "00:00:00") 
    {
        stopcamera_signout();
        // signinbtn();
        $(".signin_camera").trigger("click")
        return;
    }
    
    $("#sign_out_btn").css("display","block")
    $('#column39451').val("ESS");//ESS--by default value
    $('#column40408').val(data[0].column8668+" at Location: "+data[0].column39792);//remarks $ location
    $('#column44832').val(data[0].column44832);//Within Radius
    $('#column38120').val(data[0].column38120);//SUb Project
    $('#column31847').val(data[0].column31847);//name of compny
    $('#column65439').val(data[0].column65439);//grade name
    $('#column71424').val(data[0].column71424);//branch name
    $('#column71772').val(data[0].column71772);//shift name
    $('#column65440').val(data[0].column65440);//Department name
    $('#column8557').val(data[0].column8557);//Employee Name
    $('#column38113').val(data[0].column38113);//Attendance Type
    $('#column8558').val(data[0].column8558);//emp code
    $('#column8559').val(data[0].column8559);//In Time
    $('#column8560').val(data[0].column8560);//Out Time
    $('#column8668').val(data[0].column8668); //"${Remarks}
    $('#active').val(data[0].active);
    $('#created_by').val(data[0].created_by);
    $('#created_date').val(data[0].created_date);
    $('#modified_by').val(data[0].modified_by);
    $('#modified_date').val(data[0].modified_date);
    $('#state').val(data[0].state);
    $('#parentstatereportid').val(data[0].parentstatereportid);
    $('#stateownerid').val(data[0].stateownerid)
    $('#column36613').val(data[0].column36613);//ERP User Login
    $('#column36616').val(data[0].column36616);//Responsible Manager
    $('#column72803').val(data[0].column72803);//reporting hod
    $('#column38969').val(data[0].column38969);//shift time
    $('#column39414').val(data[0].column39414);//Project Name
    $('#column39790').val(data[0].column39790);//Sign In Location
    $('#column39791').val(data[0].column39791);//Sign Out Location
    $('#column39792').val(data[0].column39792);//Current Location
    $('#column38414').val(data[0].column38414);//Actual Sign In
    $('#column38415').val(data[0].column38415);//Actual Sign Out
    $('#column38416').val(data[0].column38416);//Modify Attendanc
    $('#idselected').val(data[0].id);//id recordid            
    $('#column38111').val(data[0].column38111);//
    $('#column58076').val(data[0].column58076);//
    $('#column67066').val(data[0].column67066);//in project
    $('#column67067').val(data[0].column67067);//out project

    $("#contributing_hours_today").text(data[0].column8559);
    var time = document.getElementById('contributing_hours_today').innerText;
    time_in = time.split('.')[0];
    $("#contributing_hours_today").text(time_in);

    var ttt = new Date().toLocaleTimeString();
    
    var date1 = new Date("06/05/2000 "+time_in);
    var date2 = new Date("06/05/2000 "+ttt);

    var diff = date2.getTime() - date1.getTime();

    var msec = diff;
    var hh = Math.floor(msec / 1000 / 60 / 60);
    msec -= hh * 1000 * 60 * 60;
    var mm = Math.floor(msec / 1000 / 60);
    msec -= mm * 1000 * 60;
    var ss = Math.floor(msec / 1000);
    msec -= ss * 1000;
    hh = ( hh <10 ? "0"+hh : hh);
    mm = ( mm <10 ? "0"+mm : mm);
    
    $("#contributing_hours_today").text(hh + ":" + mm + ":" + ss);
    $("#current_date_signout").text(ttt);

    if(data[0].column8559 != "00:00:00")
    {
        var random = parseInt(Math.random() * (9999999 - 999) + 999);
        $("#project_dropdownlist").val(data[0].column67066)
        $("#project_dropdownlist_out").val(data[0].column67066)
        $("#inputGroupSelect02").val(data[0].column38113)
        $("#inputGroupSelect02_out").val(data[0].column38113);
        $("#project_dropdownlist").prop("readonly", true);
        // $("#project_dropdownlist_out").prop("readonly", true);
        $("#inputGroupSelect02").prop("readonly", true);
        // $("#inputGroupSelect02_out").prop("readonly", true);
        document.getElementById("click_photo_signin").disabled = true;
        $("#click_photo_signin").css("cursor","not-allowed")
        $("#video_signin").css("display","none");
        $("#img_signin").attr("src", '../uploads' + cloudcode + '/Folder547/547_' + data[0].id + '_66843_signin_img.png?random=' + random);
        $("#img_signin").css("display","block");
        $("#signin_loc_span").text(data[0].column39790);
    }
    else
    {
        document.getElementById("click_photo_signin").disabled = false;
        $("#click_photo_signin").css("cursor","pointer")
        $("#video_signin").css("display","block");
        $("#img_signin").css("display","none");
    }
    
    if(data[0].column8560 != "00:00:00") //sign out time
    {
        var random = parseInt(Math.random() * (9999999 - 999) + 999);
        document.getElementById("click_photo_signout").disabled = true;
        $("#img_signout").attr("src", '../uploads' + cloudcode + '/Folder547/547_' + data[0].id + '_66844_signout_img.png?random=' + random);

        $("#click_photo_signout").css("cursor","not-allowed")
        $("#video_signout").css("display","none");
        $("#img_signout").css("display","block");
        var temp_signout_time = data[0].column8560;
        $("#current_date_signout").text(temp_signout_time.split(".")[0]);
        $("#current_date_signout").siblings("p").text("Clock Out");

        var date1 = new Date("06/05/2000 "+time_in);
        var date2 = new Date("06/05/2000 "+temp_signout_time.split(".")[0]);

        var diff = date2.getTime() - date1.getTime();

        var msec = diff;
        var hh = Math.floor(msec / 1000 / 60 / 60);
        msec -= hh * 1000 * 60 * 60;
        var mm = Math.floor(msec / 1000 / 60);
        msec -= mm * 1000 * 60;
        var ss = Math.floor(msec / 1000);
        msec -= ss * 1000;
        hh = ( hh <10 ? "0"+hh : hh);
        mm = ( mm <10 ? "0"+mm : mm);
        
        $("#contributing_hours_today").text(hh + ":" + mm + ":" + ss);
        $("#signout_loc_span").text(data[0].column39791)

    }
    else
    {
        document.getElementById("click_photo_signout").disabled = false;
        $("#click_photo_signout").css("cursor","pointer")
        $("#video_signout").css("display","block");
        $("#img_signout").css("display","none"); 
        $("#current_date_signout").siblings("p").text("Current");
        getLocation($("#signout_loc_span"));
    }
    
    $("#currenttime_signin_emp").text((data[0].column8559));
    var time = document.getElementById('currenttime_signin_emp').innerText;
    time_in = time.split('.')[0];
    $("#currenttime_signin_emp").text(time_in);

    $("#exampleModalCenter .modal-lg").css("width","100%");

    if(data[0].column8560 != "00:00:00")
    {
        $("#project_dropdownlist").val(data[0].column67066)
        $("#inputGroupSelect02").val(data[0].column38113)
        $("#project_dropdownlist").prop("readonly", true);
        $("#inputGroupSelect02").prop("readonly", true);
        $("#project_dropdownlist_out").val(data[0].column67067)
        $("#inputGroupSelect02_out").val(data[0].column38113)
        $("#project_dropdownlist_out").prop("readonly", true);
        $("#inputGroupSelect02_out").prop("readonly", true);
        check_status_breck(retrievedId);
        // check_status_checkin(retrievedId);
        chekInFlag && check_status_checkin(retrievedId);
        chekInFlag && check_status_journey(retrievedId);
        return;
    }
    
    var projectname_api = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65751&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Project_List@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    projectData = callajax(projectname_api);
    projectData = JSON.parse(projectData);
    projectData = JSON.parse(projectData[0].txt);
    var timeline = $("#project_dropdownlist_out").data("kendoComboBox");

    if (timeline)
    {
        timeline.destroy();
    }
    $("#project_dropdownlist_out").parent().find(".k-clear-value").remove();
    var state_autoComp = $("#project_dropdownlist_out").data("kendoComboBox");
    if (state_autoComp) {
        state_autoComp.destroy(); // Destroy the existing widget
        }
    $("#project_dropdownlist_out").kendoComboBox({
        dataTextField: "project_name",
        dataValueField: "project_name",
        placeholder: "Project Name",
        dataSource: projectData,
        filter: "contains",
        suggest: true,
        change: function(e) {
            let combo = this;
            let value = combo.value();      // current typed/selected value
            let item = combo.dataItem();    // dropdown item if valid

            //  Clear if user typed something not in dropdown
            if (!item || item.project_name !== value) {
                combo.value("");
            }
        }
    });
    var dropdownlist = $("#dropdownlist").data("kendoComboBox");

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=combo&fieldid=38113&ids=/&valuestring=@j@&cloudcode=hrms
    var type_api = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=combo&fieldid=38113&ids=/&valuestring=@j@&cloudcode=${encodeURIComponent(cloudcode)}${tokenParam}`;
    locationData = callajax(type_api);
    locationData = JSON.parse(locationData);
    var timeline1 = $("#inputGroupSelect02_out").data("kendoComboBox");

    if (timeline1)
    {
        timeline1.destroy();
    }
    $("#inputGroupSelect02_out").parent().find(".k-clear-value").remove();
    var inputstate_autoComp = $("#inputGroupSelect02_out").data("kendoComboBox");
    if (inputstate_autoComp) {
        inputstate_autoComp.destroy(); // Destroy the existing widget
        }
    // $("#inputGroupSelect02_out").kendoComboBox({
    //     dataTextField: "display",
    //     dataValueField: "value",
    //     dataSource: data,
    //     placeholder: "Login Type",
    //     filter: "contains",
    //     suggest: true,
    // });
    $("#inputGroupSelect02_out").kendoComboBox({
        dataTextField: "display",
        dataValueField: "value",
        dataSource: locationData,
        placeholder: "Login Type",
        filter: "contains",
        suggest: true,
        change: function(e) {
            let combo = this;
            let value = combo.value();   // selected value
            let item = combo.dataItem(); // corresponding data item if valid

            //  If user typed something not in dropdown, clear input
            if (!item || item.value !== value) {
                combo.value("");
            }
        }
    });
    check_status_breck(retrievedId);
    // check_status_checkin(retrievedId);
    chekInFlag && check_status_checkin(retrievedId);
    chekInFlag && check_status_journey(retrievedId);
}
function check_status_breck(retrievedId)
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    //https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Signin_Status@d@442489
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Signin_Status@d@${retrievedId}${tokenParam}`;
    data = callajax(urltotal);
    data1 = JSON.parse(data);
    if("txt is null" == data1[0].txt)
    {
        return;
    }
    else{
        data1 = JSON.parse(data1[0].txt);
        if (data1[0].statesname == 'Draft' || data1[0].statesname == 'Checkout' || data1[0].statesname == 'Sign In')
        {
            $("#breck_in").css("display", "inline");
            return;
        }
        else if (data1[0].statesname === 'Sign Out' || $("#breck_in").prop("disabled"))
        {
            $("#breck_in").css("display", "none");
            $("#breck_out").css("display", "none");
            $("#checkin_checkout_btn").css("display", "none");
            $("#journey_start_end").css("display", "none");
            return;
        }
        else{
            $("#breck_out").css("display", "inline");
            return;
        }
    }
}
function initProjectNameSignIn(){
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    var username =  window.targetuser;
    var projectname_api = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65751&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Project_List@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    data = callajax(projectname_api);
    try{
        data = JSON.parse(data);
        data = JSON.parse(data[0].txt);//JSON.parse(data[0]);

        $("#project_dropdownlist").parent().find(".k-clear-value").remove();
        var timeline = $("#project_dropdownlist").data("kendoComboBox");
        if (timeline)
        {
            timeline.destroy();
        }
        $("#project_dropdownlist").kendoComboBox({
            dataTextField: "project_name",
            dataValueField: "project_name",
            dataSource: data,
            filter: "contains",
            suggest: true,
            placeholder: "Project Name",
            // change: function(e) {
            //     let combo = this;
            //     let value = combo.value();      // current typed/selected value
            //     let item = combo.dataItem();    // dropdown item if valid

            //     //  Clear if user typed something not in dropdown
            //     if (!item || item.project_name !== value) {
            //         combo.value("");
            //     }
            // }

            change: function(e) {
                let combo = this;

                //  Skip validation if ComboBox is readonly
                if (combo.input.prop("readonly")) return;

                let value = combo.value();
                let item = combo.dataItem();

                if (!item || item.project_name !== value) {
                    combo.value("");
                }
            }
        });
        $( $("#project_dropdownlist").data("kendoComboBox").wrapper ).find(".k-input-button").show();
        $("#project_dropdownlist").data("kendoComboBox")?.readonly(false);
        var dropdownlist = $("#dropdownlist").data("kendoComboBox");
    } catch (e) {
        console.log("init Project Name SignIn error : ", e);
        return str;
    }
}
var checkInId;
var visitCodeSelectedCheckIn;
function check_status_checkin(retrievedId)
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    let randomNo = Math.floor(100000 + Math.random() * 900000);
    // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Checkin_Status@d@751966&random=746464747
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Checkin_Status@d@${retrievedId}&random=${randomNo}${tokenParam}`;
    data = callajax(urltotal);
    data1 = JSON.parse(data);
    if("txt is null" == data1[0].txt)
    {
        // for button chekin - implement team
        if(chekInFlag){
            // $("#checkin_checkout_btn").css("display", "inline-block");
            $("#check_in_implement").css("display", "inline-block");
            $("#check_out_implement").css("display", "none");
            $("#breck_in").css("width", "30%");
            if ($("#breck_out").css("display") === "none") {
                $("#checkin_checkout_btn").css("display", "inline-block");
                $("#journey_start_end").css("display", "inline-block");
                // initProjectNameSignIn();
            }
        }
        return;
    }
    else{
        data1 = JSON.parse(data1[0].txt);
        checkInId = data1[0].id;
        $('#checkout_visit_code_dropdownlist').val(data1[0]?.visit_code ?? '');

        if($("#click_photo_signout").is(":disabled")){
            return;
        }
        if (data1[0].statesname == 'Check Out')
        {
            // for button chekin - implement team
            if(chekInFlag){
                // $("#checkin_checkout_btn").css("display", "inline-block");
                $("#check_in_implement").css("display", "inline-block");
                $("#check_out_implement").css("display", "none");
                $("#breck_in").css("width", "30%");
                if ($("#breck_out").css("display") === "none") {
                    $("#checkin_checkout_btn").css("display", "inline-block");
                    $("#journey_start_end").css("display", "inline-block");
                    // initProjectNameSignIn();
                }
            }
            return;
        }
        else if (data1[0].statesname === 'Check In')
        {
            if(chekInFlag){
                $("#check_in_implement").css("display", "none");
                $("#check_out_implement").css("display", "inline-block");
                $("#breck_in").css("width", "35%");
                visitCodeSelectedCheckIn = data1[0]?.visit_code ?? '';
                $('#check_in_loc_span').text(data1[0]?.check_in_location ?? 'Location');
                checkInOutTimer(data1[0]?.check_in_time ?? '');
                $('#currenttime_check_in').text(data1[0]?.check_in_time ?? '00:00:00');
                if ($("#breck_out").css("display") === "none") {
                    $("#checkin_checkout_btn").css("display", "inline-block");
                    $("#checkin_checkout_btn").css("width", "35%");
                    $("#journey_start_end").css("display", "none");
                    // $("#project_dropdownlist").data("kendoComboBox")?.readonly(true);
                    // $( $("#project_dropdownlist").data("kendoComboBox")?.wrapper ).find(".k-input-button").hide();
                }
            }
            return;
        }
        else{
            // if(chekInFlag){
            //     if ($("#breck_out").css("display") === "none") {
            //         $("#checkin_checkout_btn").css("display", "inline-block");
            //     }
            // }
            return;
        }
    }
}

// get journey status 
var journeyId;
var visitCodeSelectedJourney;
function check_status_journey(retrievedId)
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    let randomNo = Math.floor(100000 + Math.random() * 900000);
    // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Travelling_Status@d@760638@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Travelling_Status@d@${retrievedId}@d@&random=${randomNo}${tokenParam}`;
    data = callajax(urltotal);
    data1 = JSON.parse(data);
    if("txt is null" == data1[0].txt)
    {
        // for button chekin - implement team
        if(chekInFlag){
            // $("#checkin_checkout_btn").css("display", "inline-block");
            $("#start_journey").css("display", "inline-block");
            $("#end_journey").css("display", "none");
            $("#breck_in").css("width", "30%");
            if ($("#breck_out").css("display") === "none" && $("#check_out_implement").css("display") === "none") {
                // $("#checkin_checkout_btn").css("display", "inline-block");
                $("#journey_start_end").css("display", "inline-block");
            }
        }
        return;
    }
    else{
        data1 = JSON.parse(data1[0].txt);
        // checkInId = data1[0].id;
        journeyId = data1[0].id;
        $('#visitcode_dropdownlist_end').val(data1[0]?.vist_code ?? '');
       
        // $("#visitcode_dropdownlist").data("kendoComboBox").readonly(true);

        if($("#click_photo_signout").is(":disabled")){
            return;
        }
        if (data1[0].statesname == 'End Travelling')
        {
            // for button chekin - implement team
            if(chekInFlag){
                $("#start_journey").css("display", "inline-block");
                $("#end_journey").css("display", "none");
                $("#breck_in").css("width", "30%");
                if ($("#breck_out").css("display") === "none" && $("#check_out_implement").css("display") === "none") {
                    $("#journey_start_end").css("display", "inline-block");
                    $("#journey_start_end").css("width", "30%");
                }
            }
            return;
        }
        else if (data1[0].statesname === 'Start Travelling')
        {
            if(chekInFlag){
                // $('#visitcode_dropdownlist').val(data1[0]?.vist_code ?? '');
                visitCodeSelectedJourney = data1[0]?.vist_code ?? '';
                $('#distance').val(data1[0]?.start_km ?? '');
                $('#journey_start_loc_span').text(data1[0]?.check_in_location ?? 'Location');

                $("#start_journey").css("display", "none");
                $("#end_journey").css("display", "inline-block");
                // $("#breck_in").css("width", "30%");
                if ($("#breck_out").css("display") === "none" && $("#check_out_implement").css("display") === "none") {
                    // $("#checkin_checkout_btn").css("width", "30%");
                    $("#journey_start_end").css("width", "70%");
                    $("#journey_start_end").css("display", "inline-block");
                    $("#breck_in").css("display", "none");
                    $("#checkin_checkout_btn").css("display", "none");
                    $("#visitcode_dropdownlist").data("kendoComboBox")?.readonly(true);
                    $("#visitcode_dropdownlist_end").data("kendoComboBox")?.readonly(true);
                    $( $("#visitcode_dropdownlist").data("kendoComboBox")?.wrapper ).find(".k-input-button").hide();
                }
                $('#currenttime_start_journey').text(data1[0]?.check_in_time ?? '00:00:00');
                startJourneyTimer(data1[0]?.check_in_time ?? '');
            }
            return;
        }
        else{
            // if(chekInFlag){
            //     if ($("#breck_out").css("display") === "none") {
            //         $("#checkin_checkout_btn").css("display", "inline-block");
            //     }
            // }
            return;
        }
    }
}

function breck_out()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    //https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Signin_Status@d@442489
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Signin_Status@d@${retrievedId}${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    data = JSON.parse(data[0].txt);
    if (data[0].statesname == 'Checkin')
    {
        check_out();
        $("#breck_in").css("display", "none");
        $("#breck_out").css("display", "none");
    }
    else{
        $("#breck_in").css("display", "none");
        $("#breck_out").css("display", "none");
    }
}
function check_in()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var location = $("#signin_loc_span").text();
    var cloudcode = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : "";
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    //https://hrms.infiverse.ai/SaveFormField.do?actn=SaveDynamicStatePending&formid=547&editids=state/39792/&selectedids=442458&jvals=2713@j@205, Satellite, Ahmedabad, Gujarat 380015, India@j@;
    var urltotal = `${baseurl}SaveFormField.do?actn=SaveDynamicStatePending&formid=547&editids=state/39792/&selectedids=${retrievedId}&jvals=2713@j@${location}@j@${cloudcode}${tokenParam}`
    fetch(urltotal)
    .then((res) => {
        showToast('Successfully Break In');
        if ($("#breck_out").css("display") == "none") {
            $("#breck_in").css("display", "none");
            $("#breck_out").css("display", "inline");
            if(chekInFlag){
                $("#checkin_checkout_btn").css("display", "none");
                $("#journey_start_end").css("display", "none");
            }
        }
        return res;
    })
}
function check_out()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var location = $("#signin_loc_span").text();
    var cloudcode = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : "";
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    //https://hrms.infiverse.ai/SaveFormField.do?actn=SaveDynamicStatePending&formid=547&editids=state/39792/&selectedids=442458&jvals=2714@j@205, Satellite, Ahmedabad, Gujarat 380015, India@j@';
    var urltotal = `${baseurl}SaveFormField.do?actn=SaveDynamicStatePending&formid=547&editids=state/39792/&selectedids=${retrievedId}&jvals=2714@j@${location}@j@${cloudcode}${tokenParam}`
    fetch(urltotal)
    .then((res) => {
        showToast('Successfully Break out');
        if ($("#breck_in").css("display") == "none") {
            $("#breck_in").css("display", "inline");
            $("#breck_out").css("display", "none");
            if(chekInFlag){
                $("#checkin_checkout_btn").css("display", "inline-block");
                $("#check_out_implement").css("display") == "none" ? $("#journey_start_end").css("display", "inline-block") : $("#journey_start_end").css("display", "none");
                $("#breck_in").css("width", "30%");
            }
        }
        return res;
    })
}

function checkInBtn()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    var cloudcodenew = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : "";
    let employeeCode = document.getElementById("signin_employee_code").innerText;
    let visitCode = $('#checkin_visit_code_dropdownlist').val();
    let location = $('#check_in_loc_span').text();

    var date = new Date(); //yyyy-mm-dd
    var month = date.getMonth() + 1; // Adding 1 because getMonth() returns zero-based index
    var year = date.getFullYear();
    var day = date.getDate();
    var currentdate = year + "-" + ("0" + month).slice(-2) + "-" + ("0" + day).slice(-2);
    var currenttime = date.toLocaleTimeString('en-GB', { hour12: false });

    // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Employee_CheckIn_CheckOut@d@20405@d@Electronic%20City@d@Ahmedabad@d@2025-11-18@d@10:30:12@d@Checkin@d@
     var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Employee_CheckIn_CheckOut@d@${encodeURIComponent(employeeCode)}@d@${encodeURIComponent(visitCode)}@d@${encodeURIComponent(location)}@d@${encodeURIComponent(currentdate)}@d@${encodeURIComponent(currenttime)}@d@Checkin@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    if(data.length == 0 || data[0].txt == "txt is null")
    {
        showToast('Check in UnSuccessfull', 'false');
        return;
    }
    data = JSON.parse(data[0].txt);
    if(data[0].status == "SUCCESSFULL")
    {
        // checkInId = data[0].id;
        showToast('Check in Successfull');
        $("#check_in_implement").css("display", "none");
        $("#check_out_implement").css("display", "inline-block");

        $('#checkInModal').modal('hide');

        // $.ajax({
        //     url :baseurl+"SaveFormField.do?actn=SaveDynamicStatePending&formid=4179&editids=state/&selectedids="+data[0].id+"&jvals=4089@j@" + cloudcodenew + tokenParam,
        //     type: 'POST',
        //     success : function(data) 
        //     {
        //         showToast('Check in Successfully!!!');
        //     },
        //     error:function(e)
        //     {
        //     }
        // });
    }
    else
    {
        showToast('Check in UnSuccessfull', 'false');
    }
}

function checkOutBtn()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    var cloudcodenew = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : ""; 
    let visitCode = $('#checkout_visit_code_dropdownlist').val() || '';
    let location = $('#check_out_loc_span').text();

    var date = new Date(); //yyyy-mm-dd
    // var month = date.getMonth() + 1; // Adding 1 because getMonth() returns zero-based index
    // var year = date.getFullYear();
    // var day = date.getDate();
    // var currentdate = year + "-" + ("0" + month).slice(-2) + "-" + ("0" + day).slice(-2);
    var currenttime = date.toLocaleTimeString('en-GB', { hour12: false });

    // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=CheckOut_When@d@12@d@11:30:15@d@Electronic%20City1@d@Ahmedabad1@d@@d@Checkout@d@
     var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=CheckOut_When@d@${encodeURIComponent(checkInId)}@d@${encodeURIComponent(currenttime)}@d@${encodeURIComponent(visitCode)}@d@${encodeURIComponent(location)}@d@@d@Checkout@d@${tokenParam}`;
    data = callajax(urltotal);
    
    try {
        data = JSON.parse(data);

        if (!data || data.length === 0 || data[0].txt === "txt is null") {
            showToast('Check Out UnSuccessfull');
            return;
        }

        let status = data[0].txt;  // <-- txt itself contains SUCCESSFULL (not JSON)

        if (status === "SUCCESSFULL") {

            showToast('Check Out Successfull');

            $("#check_in_implement").css("display", "inline-block");
            $("#check_out_implement").css("display", "none");
        }
        else {
            showToast('Check Out UnSuccessfull');
        }

    } catch (e) {
        console.error("Error:", e);
        showToast('Check Out UnSuccessfull');
    }

}

// journey start click func

function closeJourneyModalFn() {
    $('#journeyModal').modal('hide');
    stopAllCameras();
}


function startJourney()
{
    $('.modal.show').modal('hide');
        // showToast('Journey Started');
        // $('#journeyModal').modal('show');
        $('#journey_top_date').text(new Date().toISOString().split('T')[0]);
        $('#journey_employee_code').text($('#signin_employee_code').text());
        $("#end_journey_modal").css("display", "none");
        $(".journey-content").css("width", "50%");
        $("#distance").prop("readonly", false);
        $("#distance").val('');
        $("#start_journey_inner").prop("disabled", false);
        $("#start_journey").css("display", "none");
        $("#end_journey").css("display", "inline-block");
        //  Manually open modal
        $('#journeyModal').modal('show');
        initVisitCodes('#visitcode_dropdownlist', "#journey_start_loc_span");
}


// journey modal camera opening start

let journeyStream = null;
let videoJourney = document.getElementById("video_journeystart");
let imgJourney = document.getElementById("img_journeystart");

// open camera
async function cameraOpenJourneyStart() {
    try {
        // if already streaming, do nothing
        if (journeyStream) return;

        journeyStream = await navigator.mediaDevices.getUserMedia({
            video: true,
            audio: false
        });

        videoJourney.srcObject = journeyStream;

        // show video
        videoJourney.style.display = "block";
        imgJourney.style.display = "none";

    } catch (err) {
        console.error("Camera open error:", err);
    }
}

// close camera
function cameraCloseJourneyStart() {
    if (journeyStream) {
        journeyStream.getTracks().forEach(t => t.stop());
        journeyStream = null;
    }

    // also trigger global stop (your function)
    stopAllCameras();

    // restore image
    videoJourney.style.display = "none";
    imgJourney.style.display = "block";
}
// $("#journeyModal").on("hidden.bs.modal", function () {
//     cameraCloseJourneyStart();
// });


// journey modal camera opening end


function initVisitCodes(Id, locId) {
    const $el = $(Id);
    $el.parent().find(".k-clear-value, .k-icon.k-i-close").remove();

    // Remove readonly before re-init
    $el.removeAttr("readonly");
    $el.val("");

    // Destroy old ComboBox if exists
    let combo = $el.data("kendoComboBox");
    if (combo) combo.destroy();

    // Reinitialize
    $el.kendoComboBox({
        dataSource: visitCodes,
        dataTextField: "visit_code",
        dataValueField: "visit_code",
        filter: "contains",
        suggest: true,
        placeholder: "Visit Code",
        change: function () {
            let value = this.value();
            let item = this.dataItem();

            // FIXED: Compare visit_code (string) instead of object!
            if (!item || item.visit_code !== value) {
                this.value("");
                return;
            }
            // ONLY when valid item exists
            if (Id === '#checkin_visit_code_dropdownlist') {
                    $("#checkin_projectname_dropdownlist").val(item.project_name || "");
                    $("#checkin_customername_dropdownlist").val(item.customer_name || "");
                }
        }
    });

    // Also remove readonly from ComboBox input
    $el.data("kendoComboBox").input.removeAttr("readonly");
    $el.parent().find(".k-input-button").css("display", "block");

    getLocation($(locId), true);
}

// function initVisitCodes(Id, locId) {
//     const $el = $(Id);

//     //  1. Destroy old widget if exists
//     let old = $el.data("kendoComboBox");
//     if (old) {
//         old.destroy();
//         $el.next(".k-combobox").remove(); // ONLY remove Kendo UI wrapper
//     }

//     //  2. Clear value (important)
//     $el.val("");

//     //  3. Create fresh new ComboBox
//     $el.kendoComboBox({
//         dataSource: visitCodes,
//         filter: "contains",
//         suggest: true,
//         placeholder: "Visit Code",
//         autoWidth: true,  // helps icon rendering
//         clearButton: true
//     });

//     //  4. Remove readonly (if set previously)
//     $el.data("kendoComboBox").input.prop("readonly", false);

//     //  5. Update location span
//     getLocation($(locId));
// }




// function initVisitCodesEnd(){
//     $("#visitcode_dropdownlist_end").parent().find(".k-clear-value").remove();
//     var timeline = $("#visitcode_dropdownlist_end").data("kendoComboBox");
//     if (timeline)
//     {
//         timeline.destroy();
//     }
//     $("#visitcode_dropdownlist_end").kendoComboBox({
//         dataSource: visitCodes,
//         filter: "contains",
//         suggest: true,
//         placeholder: "Visit Code",
//         change: function(e) {
//             let combo = this;
//             let value = combo.value();      // current typed/selected value
//             let item = combo.dataItem();    // dropdown item if valid

//             //  Clear if user typed something not in dropdown
//             if (!item || item !== value) {
//                 combo.value("");
//             }
//         }
//     });
//     getLocation($("#journey_end_loc_span"));
// }

// journey end click func
function endJourney()
{
    // showToast('Journey Ends');
    
    $("#distance").prop("readonly", true);
    $("#visitcode_dropdownlist").val(visitCodeSelectedJourney);
    $("#visitcode_dropdownlist").prop("readonly", true);
    $("#visitcode_dropdownlist_end").prop("readonly", true);
    $('#journey_top_date').text(new Date().toISOString().split('T')[0]);
    $('#journey_employee_code').text($('#signin_employee_code').text());
    $("#end_journey_modal").css("display", "block");
    $(".journey-content").css("width", "100%");
    getLocation($("#journey_end_loc_span"), true);
    // initVisitCodesEnd();
    $("#start_journey_inner").attr("disabled", true);
    $("#start_journey").css("display", "inline-block");
    $("#end_journey").css("display", "none");

    $("#distance_end").on("change", function () {
        let endVal = $(this).val().trim();

        // If user typed nothing  skip
        if (endVal === "") {
            
            return;
        }

        let start = parseFloat($("#distance").val()) || 0;
        let end = parseFloat(endVal);

        if (end <= start) {
            $(this).val("");
            showToast("Please Enter Valid Kilometers", "false");
        } else {
            return;
        }
    });

}

// function startJourneyTimer(startTimeStr) {
//      // Trim and validate
//      if (!startTimeStr || !startTimeStr.trim()) {
//         // Show 00:00:00 if API time is empty
//         document.getElementById("contributing_hours_journey").innerText = "00:00:00";

//         // But still run live current time updater
//         setInterval(() => {
//             const now = new Date();
//             const ch = String(now.getHours()).padStart(2, "0");
//             const cm = String(now.getMinutes()).padStart(2, "0");
//             const cs = String(now.getSeconds()).padStart(2, "0");
//             document.getElementById("current_time_endjourney").innerText = `${ch}:${cm}:${cs}`;
//         }, 1000);

//         return; // stop further processing
//     }

//     // Normal valid-time execution -------------------------------
//     const [h, m, s] = startTimeStr.split(":").map(Number);

//     const journeyStart = new Date();
//     journeyStart.setHours(h, m, s, 0);

//     function updateJourneyData() {
//         const now = new Date();

//         // live current time
//         const ch = String(now.getHours()).padStart(2, "0");
//         const cm = String(now.getMinutes()).padStart(2, "0");
//         const cs = String(now.getSeconds()).padStart(2, "0");
//         document.getElementById("current_time_endjourney").innerText = `${ch}:${cm}:${cs}`;

//         // journey elapsed time
//         let diff = Math.floor((now - journeyStart) / 1000);
//         if (diff < 0) diff = 0;

//         const hh = String(Math.floor(diff / 3600)).padStart(2, "0");
//         const mm = String(Math.floor((diff % 3600) / 60)).padStart(2, "0");
//         const ss = String(diff % 60).padStart(2, "0");

//         document.getElementById("contributing_hours_journey").innerText =
//             `${hh}:${mm}:${ss}`;
//     }

//     updateJourneyData();
//     setInterval(updateJourneyData, 1000);
// }

// separate timer storage for journey timer
let _journeyTimerId = null;

function startJourneyTimer(startTimeStr) {
    // Clear previous timer if running
    if (_journeyTimerId !== null) {
        clearTimeout(_journeyTimerId);
        _journeyTimerId = null;
    }

    // Helper for writing current real clock
    function writeCurrentClock(now) {
        const ch = String(now.getHours()).padStart(2, "0");
        const cm = String(now.getMinutes()).padStart(2, "0");
        const cs = String(now.getSeconds()).padStart(2, "0");
        document.getElementById("current_time_endjourney").innerText = `${ch}:${cm}:${cs}`;
    }

    // If start time is empty  only show live clock + 00:00:00 elapsed
    if (!startTimeStr || !startTimeStr.trim()) {
        document.getElementById("contributing_hours_journey").innerText = "00:00:00";

        (function tick() {
            const now = new Date();
            writeCurrentClock(now);

            const delay = 1000 - now.getMilliseconds();
            _journeyTimerId = setTimeout(tick, delay);
        })();

        return;
    }

    // Parse start time
    const parts = startTimeStr.split(":").map(Number);
    const h = parts[0] || 0;
    const m = parts[1] || 0;
    const s = parts[2] || 0;

    // Define journey start time
    const journeyStart = new Date();
    journeyStart.setHours(h, m, s, 0);

    // Updater (uses journeyStart safely)
    function updateJourneyData(now) {
        writeCurrentClock(now);

        let diff = Math.floor((now - journeyStart) / 1000);
        if (diff < 0) diff = 0;

        const hh = String(Math.floor(diff / 3600)).padStart(2, "0");
        const mm = String(Math.floor((diff % 3600) / 60)).padStart(2, "0");
        const ss = String(diff % 60).padStart(2, "0");

        document.getElementById("contributing_hours_journey").innerText =
            `${hh}:${mm}:${ss}`;
    }

    // Initial + loop
    (function loop() {
        const now = new Date();
        updateJourneyData(now);

        const delay = 1000 - now.getMilliseconds();
        _journeyTimerId = setTimeout(loop, delay);
    })();
}


// check in checkout modal code------ start
function closeCheckInModalFn() {
    $('#checkInModal').modal('hide');
    stopAllCameras();
}

function openChekinModal()
{
    $('.modal.show').modal('hide');
        $('#checkin_top_date').text(new Date().toISOString().split('T')[0]);
        $('#checkin_employee_code').text($('#signin_employee_code').text());
        $("#check_out_modal").css("display", "none");
        $(".checkin-content").css("width", "50%");
        $("#checkin_inner").prop("disabled", false);
        // $("#start_journey").css("display", "none");
        // $("#end_journey").css("display", "inline-block");
        //  Manually open modal
        $('#checkInModal').modal('show');
        initVisitCodes('#checkin_visit_code_dropdownlist', "#check_in_loc_span");
}

function openChekOutModal()
{           
    $("#checkin_visit_code_dropdownlist").val(visitCodeSelectedCheckIn);

    // Find matching visit code object
    let matched = visitCodes.find(item => item.visit_code === visitCodeSelectedCheckIn);

    // If found, set project and customer names
    if (matched) {
        $("#checkin_projectname_dropdownlist").val(matched.project_name || "");
        $("#checkout_projectname_dropdownlist").val(matched.project_name || "");
        $("#checkin_customername_dropdownlist").val(matched.customer_name || "");
        $("#checkout_customername_dropdownlist").val(matched.customer_name || "");
    } else {
        // Clear if not found
        $("#checkin_projectname_dropdownlist").val("");
        $("#checkin_customername_dropdownlist").val("");
        $("#checkout_projectname_dropdownlist").val("");
        $("#checkout_customername_dropdownlist").val("");
    }

    $("#checkin_visit_code_dropdownlist").prop("readonly", true);
    $("#checkout_visit_code_dropdownlist").prop("readonly", true);
    $('#checkin_top_date').text(new Date().toISOString().split('T')[0]);
    $('#checkin_employee_code').text($('#signin_employee_code').text());
    $("#check_out_modal").css("display", "block");
    $(".checkin-content").css("width", "100%");
    getLocation($("#check_out_loc_span"), true);
    // initVisitCodesEnd();
    $("#checkin_inner").attr("disabled", true);
    // $("#start_journey").css("display", "inline-block");
    // $("#end_journey").css("display", "none");

}


// function checkInOutTimer(startTimeStr) {
//      // Trim and validate
//      if (!startTimeStr || !startTimeStr.trim()) {
//         // Show 00:00:00 if API time is empty
//         document.getElementById("contributing_hours_checkin").innerText = "00:00:00";

//         // But still run live current time updater
//         setInterval(() => {
//             const now = new Date();
//             const ch = String(now.getHours()).padStart(2, "0");
//             const cm = String(now.getMinutes()).padStart(2, "0");
//             const cs = String(now.getSeconds()).padStart(2, "0");
//             document.getElementById("current_time_checkout").innerText = `${ch}:${cm}:${cs}`;
//         }, 1000);

//         return; // stop further processing
//     }

//     // Normal valid-time execution -------------------------------
//     const [h, m, s] = startTimeStr.split(":").map(Number);

//     const journeyStart = new Date();
//     journeyStart.setHours(h, m, s, 0);

//     function updateCheckInTimeData() {
//         const now = new Date();

//         // live current time
//         const ch = String(now.getHours()).padStart(2, "0");
//         const cm = String(now.getMinutes()).padStart(2, "0");
//         const cs = String(now.getSeconds()).padStart(2, "0");
//         document.getElementById("current_time_checkout").innerText = `${ch}:${cm}:${cs}`;

//         // journey elapsed time
//         let diff = Math.floor((now - journeyStart) / 1000);
//         if (diff < 0) diff = 0;

//         const hh = String(Math.floor(diff / 3600)).padStart(2, "0");
//         const mm = String(Math.floor((diff % 3600) / 60)).padStart(2, "0");
//         const ss = String(diff % 60).padStart(2, "0");

//         document.getElementById("contributing_hours_checkin").innerText =
//             `${hh}:${mm}:${ss}`;
//     }

//     updateCheckInTimeData();
//     setInterval(updateCheckInTimeData, 1000);
// }

// single storage for the running timer
let _checkInOutTimerId = null;

function checkInOutTimer(startTimeStr) {
  // clear any previous scheduled loop
  if (_checkInOutTimerId !== null) {
    clearTimeout(_checkInOutTimerId);
    _checkInOutTimerId = null;
  }

  // helper to write current clock hh:mm:ss
  function writeCurrentClock(now) {
    const ch = String(now.getHours()).padStart(2, "0");
    const cm = String(now.getMinutes()).padStart(2, "0");
    const cs = String(now.getSeconds()).padStart(2, "0");
    document.getElementById("current_time_checkout").innerText = `${ch}:${cm}:${cs}`;
  }

  // If startTimeStr is empty -> show 00:00:00 and run live clock only
  if (!startTimeStr || !startTimeStr.trim()) {
    document.getElementById("contributing_hours_checkin").innerText = "00:00:00";

    // recursive precise loop for live clock
    (function tick() {
      const now = new Date();
      writeCurrentClock(now);

      // schedule next tick exactly at next full second
      const delay = 1000 - now.getMilliseconds();
      _checkInOutTimerId = setTimeout(tick, delay);
    })();

    return;
  }

  // Parse start time (expects "HH:MM:SS" or "HH:MM")
  const parts = startTimeStr.split(":").map(Number);
  const h = parts[0] || 0;
  const m = parts[1] || 0;
  const s = parts[2] || 0;

  // create journeyStart (Date) BEFORE any updater uses it
  const journeyStart = new Date();
  journeyStart.setHours(h, m, s, 0);

  // updater uses journeyStart in closure (safe)
  function updateCheckInTimeData(now) {
    // write live clock
    writeCurrentClock(now);

    // compute elapsed seconds since journeyStart
    let diff = Math.floor((now - journeyStart) / 1000);
    if (diff < 0) diff = 0;

    const hh = String(Math.floor(diff / 3600)).padStart(2, "0");
    const mm = String(Math.floor((diff % 3600) / 60)).padStart(2, "0");
    const ss = String(diff % 60).padStart(2, "0");

    document.getElementById("contributing_hours_checkin").innerText =
      `${hh}:${mm}:${ss}`;
  }

  // initial immediate run and then loop precisely
  (function loop() {
    const now = new Date();
    updateCheckInTimeData(now);

    // schedule next tick at the next integer second boundary
    const delay = 1000 - now.getMilliseconds();
    _checkInOutTimerId = setTimeout(loop, delay);
  })();
}



// check in checkout modal code------ end


function signin_aproved() {

    // // Check if Geolocation is supported
    // if (!navigator.geolocation) {
    //     alert("Geolocation is not supported by your browser.", "false");
    //     return; // Stop execution immediately
    // }

    // // Try to get the user's location before proceeding
    // navigator.geolocation.getCurrentPosition(
    //     function (position) {
    //         console.log("Location access granted.");

    //         // Now proceed with the rest of the function
    //         executeSignin();
    //     },
    //     function (error) {
    //         alert("Location is required for this site. Please enable it in your browser settings.", "false");
    //         return; // Stop execution immediately
    //     },
    //     { timeout: 5000 } // Optional: Set timeout to prevent waiting too long
    // );

    // Check if Geolocation is supported
    if (!navigator.geolocation) {
        alert("Geolocation is not supported by your browser.", "false");
        return; // Stop execution immediately
    }

    // Try to get the user's location before proceeding
    navigator.geolocation.getCurrentPosition(
        function (position) {
            console.log("Location access granted.");

            // Now check for camera access
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(stream => {
                    // Camera is available, close the stream to release the camera
                    stream.getTracks().forEach(track => track.stop());
                    console.log("Camera access granted.");
                    
                    // Proceed with the rest of the function
            executeSignin();
                })
                .catch(error => {
                    // Camera is not available or permission denied
                    alert("Camera is required for this site. Please enable it in your browser settings.", "false");
                    return; // Stop execution immediately
                });
        },
        function (error) {
            alert("Location is required for this site. Please enable it in your browser settings.", "false");
            return; // Stop execution immediately
        },
        { timeout: 5000 } // Optional: Set timeout to prevent waiting too long
    );

}
function executeSignin()
{

    var getUrl = window.location;   
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Default_Project_Login_type_DSR@d@Mukund%20Narayan%20Raje@d@
    var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Default_Project_Login_type_DSR@d@${username}@d@${tokenParam}`;
    data = callajax(url);
    data = JSON.parse(data);
    data = JSON.parse(data[0].txt);
    console.log(data);
    for (var i = 0; i < data.length; i++) {
        var project = data[i].project;
        var loginType = data[i].login_type;
        var projectName = data[i].project_name;
        var loginTypeNo = data[i].login_type_no;

        var projectDropdown = $("#project_dropdownlist");
        var loginTypeDropdown = $("#inputGroupSelect02");
        if($("#signin_loc_span").text() == '$location') {
            alert("Location is required for this site. Please enable it in your browser settings.");
            return;
        }
        // Case 1: Both project and login type are "Yes"
        if (project === "Yes" && loginType === "Yes") {
            if (!projectDropdown.val() && !loginTypeDropdown.val()) {
                showToast("Please Enter Project Name & Login Type", "false");
                return;
            }
            if (projectDropdown.val() && !loginTypeDropdown.val()) {
                showToast("Please Enter Login Type", "false");
                return;
            }
            if (!projectDropdown.val() && loginTypeDropdown.val()) {
                showToast("Please Enter Project Name", "false");
                return;
            }
        }

        // Case 2: Project is "No" but login type is "Yes"
        else if (project === "No" && loginType === "Yes") {
            projectDropdown.val(projectName);
            if (!loginTypeDropdown.val()) {
                showToast("Please Enter Login Type", "false");
                return;
            }
        }

        // Case 3: Project is "Yes" but login type is "No"
        else if (project === "Yes" && loginType === "No") {
            loginTypeDropdown.val(loginTypeNo);
            if (!projectDropdown.val()) {
                showToast("Please Enter Project Name", "false");
                return;
            }
        }

        // Case 4: Both project and login type are "No"
        else if (project === "No" && loginType === "No") {
            projectDropdown.val(projectName);
            loginTypeDropdown.val(loginTypeNo);
        }
    }
    
    getLocation($("#signin_loc_span"));
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : "";
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var date = new Date(); //yyyy-mm-dd
    var month = date.getMonth() + 1; // Adding 1 because getMonth() returns zero-based index
    var year = date.getFullYear();
    var day = date.getDate();
    var currentdate = year + "-" + ("0" + month).slice(-2) + "-" + ("0" + day).slice(-2);
    var currenttime = date.getHours() + ":" + date.getMinutes() + ":" + date.getSeconds()
    const formdata = new FormData();
    formdata.append("originaluserid", window.originaluserid);
    formdata.append("originalusername", window.originalusername);
    formdata.append("formid", "1907");
    formdata.append("relationform", "547");
    formdata.append("cloudcode", window.targetcloud);
    formdata.append("username", window.targetuser);
    formdata.append("userid", window.infivereuserid);
    formdata.append("idselected", $("#idselected").val());//recordid
    formdata.append("idhidden", $("#idselected").val());//recordid
    formdata.append("fieldid", $("#idselected").val());//recordid
    formdata.append("field39451", "ESS");
    // formdata.append("field40408", $('#column40408').val()); //"${Remarks} at Location: ${Current Location}"
    // formdata.append("field39452", $("#column8558").val());//emp code
    // formdata.append("field44467", $("#column44467").val());//Location set in user management
    formdata.append("field44832", $('#column44832').val());//Within Radius
    // formdata.append("field38120", $('#project_dropdownlist').siblings('span').children('span').text());//SUb Project
    formdata.append("field31847", $("#column31847").val());//Name of Company1
    formdata.append("field65439", $("#column65439").val());//grade Name
    formdata.append("field71424", $("#column71424").val());//Branch Name
    formdata.append("field71772", $("#column71772").val());//shift Name
    formdata.append("field65440", $("#column65440").val());//Department Name
    formdata.append("field8563", currentdate);//Date
    // formdata.append("field8563", "00:00:00");//Date
    //formdata.append("field38113", $("#column38113").val());//Attendance Type
    formdata.append("field38113", $('#inputGroupSelect02').val());//Attendance Type
    formdata.append("field8558", $("#column8558").val());//Employee Code
    formdata.append("field8557", $("#column8557").val());//Employee Name
    formdata.append("field39792", $("#signin_loc_span").text());//Current Location
    formdata.append("field8559", currenttime);//In Time 
    // formdata.append("field8559", "00:00:00");//In Time
    // formdata.append("field39790", $("#signin_loc_span").text());// Sign In Location
    // formdata.append("field8560", $("#column8560").val());//Out Time 
    // formdata.append("field39791", $("#column39791").val());//Sign Out Location
    // formdata.append("field8668", $("#column8668").val());//Remarks
    formdata.append("field36613", $("#column36613").val());//ERP User Login
    formdata.append("field36616", $("#column36616").val());//Responsible Manager
    formdata.append("field72803", $("#column72803").val());//reporting HOD
    formdata.append("field38111", $("#column38111").val());//DSR
    formdata.append("statefield", $("#state").val());//State
    // formdata.append("field38416", $("#column38416").val());//Modify Attendanc
    // formdata.append("field38414", $("#column38414").val());//Actual Sign In
    // formdata.append("field38415", $("#column38415").val());//Actual Sign Out 
    formdata.append("field58076", $("#column58076").val());//System message
    // formdata.append("field67066", $('#project_dropdownlist').siblings('span').children('span').text());//signin project name
    formdata.append("field67066", $('#project_dropdownlist').val());//signin project name
    // formdata.append("field67067", $('#project_dropdownlist_out').siblings('span').children('span').text());//signout project name
    formdata.append("field66843", $("#canvas_signin").text());//sign in img
    // submit form

    $.ajax({
        url :baseurl+"SaveFormField.do?actn=SaveData&id=1907&globalvar=0&moduleconditions=" + cloudcode + tokenParam, //"pages/includes/comparision/comparative-statement.jsp?action=approved&changedvalues=",
        //url :window.baseurl+"pages/includes/comparision/comparative-statement.jsp?action=approved&changedvalues=",
        data : formdata,
        contentType: false,
        processData: false,
        type: 'POST',
        // headers: {
        //     'Accept-Charset': 'UTF-8'
        // },
        success : function(data) 
        {
            stopAllCameras();
            // stopcamera_signin();
            // stopcamera_signout();
            signin_aproved2();
        },
        error:function(e)
        {
            
        }
    });

}

// function check_input(){

//     var getUrl = window.location;   
//     var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
//     baseurl = baseurl.split("pages")[0];
//     var cloudcode =  window.targetcloud;
//     var username =  window.targetuser;
//     // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Default_Project_Login_type_DSR@d@Mukund%20Narayan%20Raje@d@
//     var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Default_Project_Login_type_DSR@d@${username}@d@`;
//     data = callajax(url);
//     data = JSON.parse(data);
//     data = JSON.parse(data[0].txt);
//     console.log(data);
//     for(var i=0;i<data.length;i++)
//     {
//         if(data[i].project == "Yes")
//         {
//             if($("#project_dropdownlist").val() == ''){
//                 showToast('Please Enter Project Name',"false");
//                 return;
//             }              
//         } else if(data[i].login_type == "Yes")
//         {
//             if($("#project_dropdownlist").val() == ''){
//                 showToast('Please Enter Project Name',"false");
//                 return;
//             }
//         }
//     }



// }

function signin_aproved2()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : "";
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    var random = parseInt(Math.random() * (999 - 99) + 99);
    const formdata = new FormData();
    // submit form

    $.ajax({
        // https://hrms.autonomouserp.com/SaveFormField.do?actn=SaveDynamicStatePending&formid=547&editids=state/&selectedids=33497&jvals=2124@j@ 
        // "SaveFormField.do?actn=SaveDynamicStatePending&formid=547&editids=state/&selectedids="+$("#idselected").val()+"&jvals=2124@j@"
        url :baseurl+"SaveFormField.do?actn=SaveDynamicStatePending&formid=547&editids=state/&selectedids="+$("#idselected").val()+"&jvals=2124@j@" + cloudcode + tokenParam,
        //url :window.baseurl+"pages/includes/comparision/comparative-statement.jsp?action=approved&changedvalues=",
        // data : formdata,
        type: 'POST',
        // headers: {
        //     'Accept-Charset': 'UTF-8'  // Optional but safe
        // },
        success : function(data) 
        {
            showToast('Sign In Successfull');
            
            uploadsigninimg();
            if($("#pills-tab").children("li").find('button.active').attr("id") == "pills-Attendance-tab")
            {
                attendance();
            }
        },
        error:function(e)
        {
        }
    });
}
function uploadsigninimg()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : "";
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var image = $('#download-photo-signin').attr('src');
    var base64ImageContent = image.replace(/^data:image\/(png|jpg);base64,/, "");
    var blob = base64ToBlob(base64ImageContent, 'image/png');                
    var formData = new FormData();
    formData.append('picture', blob);
    var recordid = $("#idselected").val();
    var file_name = 'signin_img';
    // var link = baseurl+"pages/hrmsmailservertesting.jsp?actn=uploadfile&recordid="+recordid+"&file_name="+file_name;
    var link = baseurl+"pages/hrsignin.jsp?actn=uploadfilesignin&recordid="+recordid+"&file_name="+file_name + cloudcode + tokenParam;
    const form = window.document.forms['download-photo-signin-form'];
    
    $.ajax({
        url: link, 
        type: "POST", 
        data: formData,
        processData: false,
        contentType:false,
        mimeType: "multipart/form-data",
        success : function(data) 
        {
            console.log("test----");

        },
        error:function(e)
        {
            console.log("testerr----");
        }
    });
}
function signout_aproved() {
    // // Check if Geolocation is supported
    // if (!navigator.geolocation) {
    //     alert("Geolocation is not supported by your browser.", "false");
    //     return; // Stop execution immediately
    // }

    // // Try to get the user's location before proceeding
    // navigator.geolocation.getCurrentPosition(
    //     function (position) {
    //         console.log("Location access granted.");

    //         // Now proceed with the rest of the function
    //         executeSignout();
    //     },
    //     function (error) {
    //         alert("Location is required for this site. Please enable it in your browser settings.", "false");
    //         return; // Stop execution immediately
    //     },
    //     { timeout: 5000 } // Optional: Set timeout to prevent waiting too long
    // );
    // Check if Geolocation is supported
    if (!navigator.geolocation) {
        alert("Geolocation is not supported by your browser.", "false");
        return; // Stop execution immediately
    }

    // Try to get the user's location before proceeding
    navigator.geolocation.getCurrentPosition(
        function (position) {
            console.log("Location access granted.");

            // Now check for camera access
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(stream => {
                    // Camera is available, close the stream to release the camera
                    stream.getTracks().forEach(track => track.stop());
                    console.log("Camera access granted.");
                    
                    // Proceed with the rest of the function
            executeSignout();
                })
                .catch(error => {
                    // Camera is not available or permission denied
                    if(!window.location.search.includes("token="))
                    {
                        alert("Camera is required for this site. Please enable it in your browser settings.", "false");
                        return; // Stop execution immediately
                    }
                   
                });
        },
        function (error) {
            alert("Location is required for this site. Please enable it in your browser settings.", "false");
            return; // Stop execution immediately
        },
        { timeout: 5000 } // Optional: Set timeout to prevent waiting too long
    );
}
function executeSignout()
{
    var getUrl = window.location;   
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Default_Project_Login_type_DSR@d@Mukund%20Narayan%20Raje@d@
    var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Default_Project_Login_type_DSR@d@${username}@d@${tokenParam}`;
    data = callajax(url);
    data = JSON.parse(data);
    data = JSON.parse(data[0].txt);
    console.log(data);

        let projectVal = $("#project_dropdownlist_out").val();
        let loginTypeVal = $("#inputGroupSelect02_out").val();
        let dsrVal = data[0].dsr;  // Assuming DSR is 0 or 1
        let countVal = data[0].count; // Assuming count represents DSR fill status
        if($("#signin_loc_span").text() == '$location') {
            alert("Location is required for this site. Please enable it in your browser settings.");
            return;
        }
        
        if (data[0].project == "Yes" && data[0].login_type == "Yes" && data[0].dsr == "Yes") {
            if (projectVal == '' && loginTypeVal == '' && countVal == 0) {
                showToast('Please Enter Project Name, Login Type & Fill DSR', "false");
                return;
            } else if (projectVal == '' && loginTypeVal == '') {
                showToast('Please Enter Project Name & Login Type', "false");
                return;
            } else if (projectVal == '' && countVal == 0) {
                showToast('Please Enter Project Name & Fill DSR', "false");
                return;
            } else if (loginTypeVal == '' && countVal == 0) {
                showToast('Please Enter Login Type & Fill DSR', "false");
                return;
            } else if (projectVal == '') {
                showToast('Please Enter Project Name', "false");
                return;
            } else if (loginTypeVal == '') {
                showToast('Please Enter Login Type', "false");
                return;
            } else if (countVal == 0) {
                showToast('Please Fill DSR', "false");
                return;
            }
        } 
        else if (data[0].project == "No" && data[0].login_type == "Yes" && data[0].dsr == "Yes") {
            var input_project_name = data[0].project_name;
            $("#project_dropdownlist_out").val(input_project_name);

            if (loginTypeVal == '') {
                showToast('Please Enter Login Type', "false");
                return;
            }
            if (countVal == 0) {
                showToast('Please Fill DSR', "false");
                return;
            }
        } 
        else if (data[0].project == "Yes" && data[0].login_type == "No" && data[0].dsr == "Yes") {
            var login_type_no = data[0].login_type_no;
            $("#inputGroupSelect02_out").val(login_type_no);

            if (projectVal == '') {
                showToast('Please Enter Project Name', "false");
                return;
            }
            if (countVal == 0) {
                showToast('Please Fill DSR', "false");
                return;
            }
        } 
        else if (data[0].project == "No" && data[0].login_type == "No" && data[0].dsr == "Yes") {
            if (countVal == 0) {
                showToast('Please Fill DSR', "false");
                return;
            }
        } 
        else if (data[0].project == "No" && data[0].login_type == "Yes" && data[0].dsr == "No") {
            if (loginTypeVal == '') {
                showToast('Please Enter Login Type', "false");
                return;
            }
        } 
        else if (data[0].project == "Yes" && data[0].login_type == "No" && data[0].dsr == "No") {
            if (projectVal == '') {
                showToast('Please Enter Project Name', "false");
                return;
            }
        } 
        else if (data[0].project == "No" && data[0].login_type == "No" && data[0].dsr == "No") {
            if (projectVal !== '' || loginTypeVal !== '' || countVal !== 0) {
                showToast('No fields are mandatory, but you have entered some values.', "false");
            } else {
                showToast('All fields are optional, no action needed.', "true");
            }
        }
    
    getLocation($("#signout_loc_span"));
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : "";
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var date = new Date(); //yyyy-mm-dd
    var month = date.getMonth() + 1; // Adding 1 because getMonth() returns zero-based index
    var year = date.getFullYear();
    var day = date.getDate();
    var currentdate = year + "-" + ("0" + month).slice(-2) + "-" + ("0" + day).slice(-2);
    var currenttime = date.getHours() + ":" + date.getMinutes() + ":" + date.getSeconds()
    const formdata = new FormData();
    formdata.append("originaluserid", window.originaluserid);
    formdata.append("originalusername", window.originalusername);
    formdata.append("formid", "1907");
    formdata.append("relationform", "547");
    formdata.append("cloudcode", window.targetcloud);
    formdata.append("username", window.targetuser);
    formdata.append("userid", window.infivereuserid);
    formdata.append("idselected", $("#idselected").val());//recordid
    formdata.append("idhidden", $("#idselected").val());//recordid
    formdata.append("fieldid", $("#idselected").val());//recordid
    formdata.append("field39451", "ESS");
    // formdata.append("field40408", $('#column40408').val()); //"${Remarks} at Location: ${Current Location}"
    // formdata.append("field39452", $("#column8558").val());//emp code
    // formdata.append("field44467", $("#column44467").val());//Location set in user management
    formdata.append("field44832", $('#column44832').val());//Within Radius
    // formdata.append("field38120", $('#project_dropdownlist').siblings('span').children('span').text());//SUb Project
    formdata.append("field31847", $("#column31847").val());//Name of Company1
    formdata.append("field65439", $("#column65439").val());//Grade Name
    formdata.append("field71424", $("#column71424").val());//Branch Name
    formdata.append("field71772", $("#column71772").val());//shift Name
    formdata.append("field65440", $("#column65440").val());//Department Name
    formdata.append("field8563", currentdate);//Date            
    //formdata.append("field38113", $("#column38113").val());//Attendance Type
    formdata.append("field38113", $('#inputGroupSelect02_out').val());//Attendance Type
    formdata.append("field8558", $("#column8558").val());//Employee Code
    formdata.append("field8557", $("#column8557").val());//Employee Name
    formdata.append("field39792", $("#signout_loc_span").text());//Current Location
    // formdata.append("field8559", $("#column8559").val());//In Time
    // formdata.append("field8559", currenttime);//In Time
    // formdata.append("field8559", "00:00:00");//In Time
    formdata.append("field39790", $("#signin_loc_span").text());// Sign In Location
    // formdata.append("field8560", $("#column8560").val());//Out Time
    formdata.append("field8560", currenttime);//Out Time 
    // formdata.append("field39791", $("#signout_loc_span").text());//Sign Out Location
    // formdata.append("field8668", $("#column8668").val());//Remarks
    formdata.append("field36613", $("#column36613").val());//ERP User Login
    formdata.append("field36616", $("#column36616").val());//Responsible Manager
    formdata.append("field72803", $("#column72803").val());//reporting HOD
    formdata.append("field38111", $("#column38111").val());//DSR
    formdata.append("statefield", $("#state").val());//State
    // formdata.append("field38416", $("#column38416").val());//Modify Attendanc
    // formdata.append("field38414", currenttime);//Actual Sign In
    // formdata.append("field38414", $("#column38414").val());//Actual Sign In
    // formdata.append("field38415", $("#column38415").val());//Actual Sign Out 
    // formdata.append("field38415", currenttime);//Actual Sign Out 
    formdata.append("field58076", $("#column58076").val());//System message
    formdata.append("field67066", $('#project_dropdownlist').val());//signin project name
    formdata.append("field67067", $('#project_dropdownlist_out').val());//signout project name
    formdata.append("field66844", $("#canvas_signout").text());//sign out img
    // submit form

    $.ajax({
        url :baseurl+"SaveFormField.do?actn=SaveData&id=1907&globalvar=0&moduleconditions=" + cloudcode + tokenParam,//"pages/includes/comparision/comparative-statement.jsp?action=approved&changedvalues=",
        //url :window.baseurl+"pages/includes/comparision/comparative-statement.jsp?action=approved&changedvalues=",
        data : formdata,
        contentType: false,
        processData: false,
        type: 'POST',
        success : function(data) 
        {
            // stopcamera_signin();
            // stopcamera_signout();
            stopAllCameras();
            signout_aproved2();
        },
        error:function(e)
        {
        }
    });
}

// function signout_aproved() {

// // Array to store error messages
// let errorMessages = [];

// // Validate project name and login type
// // if ($("#project_dropdownlist_out").val() == '' && $("#inputGroupSelect02_out").val() == '') {
// //     // errorMessages.push("Please Enter Project Name & Login Type");
// //     showToast('Please Enter Project Name & Login Type',"false");
// //     return;
// // } 
// // else if ($("#inputGroupSelect02_out").val() == '') {
// //         showToast("Please Enter Login Type","false");
// //         return;
// //     }
// // else if ($("#project_dropdownlist_out").val() == '') {
// //         showToast("Please Enter Project Name","false");
// //         return;
// //     }

//     var getUrl = window.location;   
//     var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
//     baseurl = baseurl.split("pages")[0];
//     var cloudcode =  window.targetcloud;
//     var username =  window.targetuser;
//     // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Default_Project_Login_type_DSR@d@Mukund%20Narayan%20Raje@d@
//     var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Default_Project_Login_type_DSR@d@${username}@d@`;
//     data = callajax(url);
//     data = JSON.parse(data);
//     data = JSON.parse(data[0].txt);
//     console.log(data);

//         let projectVal = $("#project_dropdownlist_out").val();
//         let loginTypeVal = $("#inputGroupSelect02_out").val();
//         let dsrVal = data[0].dsr;  // Assuming DSR is 0 or 1
//         let countVal = data[0].count; // Assuming count represents DSR fill status

//         if (data[0].project == "Yes" && data[0].login_type == "Yes" && data[0].dsr == "Yes") {
//             if (projectVal == '' && loginTypeVal == '' && countVal == 0) {
//                 showToast('Please Enter Project Name, Login Type & Fill DSR', "false");
//                 return;
//             } else if (projectVal == '' && loginTypeVal == '') {
//                 showToast('Please Enter Project Name & Login Type', "false");
//                 return;
//             } else if (projectVal == '' && countVal == 0) {
//                 showToast('Please Enter Project Name & Fill DSR', "false");
//                 return;
//             } else if (loginTypeVal == '' && countVal == 0) {
//                 showToast('Please Enter Login Type & Fill DSR', "false");
//                 return;
//             } else if (projectVal == '') {
//                 showToast('Please Enter Project Name', "false");
//                 return;
//             } else if (loginTypeVal == '') {
//                 showToast('Please Enter Login Type', "false");
//                 return;
//             } else if (countVal == 0) {
//                 showToast('Please Fill DSR', "false");
//                 return;
//             }
//         } 
//         else if (data[0].project == "No" && data[0].login_type == "Yes" && data[0].dsr == "Yes") {
//             var input_project_name = data[0].project_name;
//             $("#project_dropdownlist_out").val(input_project_name);

//             if (loginTypeVal == '') {
//                 showToast('Please Enter Login Type', "false");
//                 return;
//             }
//             if (countVal == 0) {
//                 showToast('Please Fill DSR', "false");
//                 return;
//             }
//         } 
//         else if (data[0].project == "Yes" && data[0].login_type == "No" && data[0].dsr == "Yes") {
//             var login_type_no = data[0].login_type_no;
//             $("#inputGroupSelect02_out").val(login_type_no);

//             if (projectVal == '') {
//                 showToast('Please Enter Project Name', "false");
//                 return;
//             }
//             if (countVal == 0) {
//                 showToast('Please Fill DSR', "false");
//                 return;
//             }
//         } 
//         else if (data[0].project == "No" && data[0].login_type == "No" && data[0].dsr == "Yes") {
//             if (countVal == 0) {
//                 showToast('Please Fill DSR', "false");
//                 return;
//             }
//         } 
//         else if (data[0].project == "No" && data[0].login_type == "Yes" && data[0].dsr == "No") {
//             if (loginTypeVal == '') {
//                 showToast('Please Enter Login Type', "false");
//                 return;
//             }
//         } 
//         else if (data[0].project == "Yes" && data[0].login_type == "No" && data[0].dsr == "No") {
//             if (projectVal == '') {
//                 showToast('Please Enter Project Name', "false");
//                 return;
//             }
//         } 
//         else if (data[0].project == "No" && data[0].login_type == "No" && data[0].dsr == "No") {
//             if (projectVal !== '' || loginTypeVal !== '' || countVal !== 0) {
//                 showToast('No fields are mandatory, but you have entered some values.', "false");
//             } else {
//                 showToast('All fields are optional, no action needed.', "true");
//             }
//         }
//     }

function proceedWithSignOut() {
getLocation($("#signout_loc_span"));
var getUrl = window.location;
var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
baseurl = baseurl.split("pages")[0];
var cloudcode = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : "";
var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

var date = new Date(); // yyyy-mm-dd
var month = date.getMonth() + 1; // Adding 1 because getMonth() returns zero-based index
var year = date.getFullYear();
var day = date.getDate();
var currentdate = year + "-" + ("0" + month).slice(-2) + "-" + ("0" + day).slice(-2);
var currenttime = date.getHours() + ":" + date.getMinutes() + ":" + date.getSeconds();


const formdata = new FormData();
formdata.append("originaluserid", top.document.forms[0]['originaluserid'].value);
formdata.append("originalusername", top.document.forms[0]['originalusername'].value);
formdata.append("formid", "1907");
formdata.append("relationform", "547");
formdata.append("cloudcode", top.document.forms[0]['cloudcode'].value);
formdata.append("username", top.document.forms[0]['username'].value);
formdata.append("userid", top.document.forms[0]['userid'].value);
formdata.append("idselected", $("#idselected").val());
formdata.append("idhidden", $("#idselected").val());
formdata.append("fieldid", $("#idselected").val());
formdata.append("field39451", "ESS");
formdata.append("field44832", $('#column44832').val());
formdata.append("field31847", $("#column31847").val());
formdata.append("field65439", $("#column65439").val());
formdata.append("field71424", $("#column71424").val());
formdata.append("field71772", $("#column71772").val());
formdata.append("field65440", $("#column65440").val());
formdata.append("field8563", currentdate);
formdata.append("field38113", $('#inputGroupSelect02_out').val());
formdata.append("field8558", $("#column8558").val());
formdata.append("field8557", $("#column8557").val());
formdata.append("field39792", $("#signout_loc_span").text());
formdata.append("field39790", $("#signin_loc_span").text());
formdata.append("field8560", currenttime);
formdata.append("field36613", $("#column36613").val());
formdata.append("field36616", $("#column36616").val());
formdata.append("field72803", $("#column72803").val());
formdata.append("field38111", $("#column38111").val());
formdata.append("statefield", $("#state").val());
formdata.append("field58076", $("#column58076").val());
formdata.append("field67066", $('#project_dropdownlist').val());
formdata.append("field67067", $('#project_dropdownlist_out').val());
formdata.append("field66844", $("#canvas_signout").text());


$.ajax({
    url: baseurl + "SaveFormField.do?actn=SaveData&id=1907&globalvar=0&moduleconditions=" + cloudcode + tokenParam,
    data: formdata,
    contentType: false,
    processData: false,
    type: 'POST',
    success: function (data) {
        breck_out();
        setTimeout(() => {
            signout_aproved2();
        }, 2000);
    },
    error: function (e) {
        console.error('Error saving form data:', e);
    }
});
}

function signout_aproved2()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : "";
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var random = parseInt(Math.random() * (999 - 99) + 99);
    const formdata = new FormData();
    // submit form

    $.ajax({
        url :baseurl+"SaveFormField.do?actn=SaveDynamicStatePending&formid=547&editids=state/&selectedids="+$("#idselected").val()+"&jvals=2125@j@" + cloudcode + tokenParam,
        // url :baseurl+"SaveFormField.do?actn=SaveDynamicState&nextState=2125&fromState=2124&formid=1907&id=1907&reportid="+$("#idselected").val()+"&fieldId="+$("#idselected").val()+"&fieldid="+$("#idselected").val()+"&matchingFields=&changednamevalues=&allocationtype=&allocateto=&moduleconditions=&ask=COMMAND_NAME_1&random="+random,//"pages/includes/comparision/comparative-statement.jsp?action=approved&changedvalues=",
        //url :window.baseurl+"pages/includes/comparision/comparative-statement.jsp?action=approved&changedvalues=",
        // data : formdata,
        type: 'POST',
        xhrFields: {
            withCredentials: true   //  ensures cookies/session are included
        },
        success : function(data) 
        {
            if ($("#check_out_implement").css("display") === "inline-block") {
                checkOutBtn();
                $("#checkin_checkout_btn").css("display", "none");
                $("#journey_start_end").css("display", "none");
            }
            showToast('Sign Out Successfull');
            uploadsignoutimg();
            if($("#pills-tab").children("li").find('button.active').attr("id") == "pills-Attendance-tab")
            {
                attendance();                
            }
        },
        error:function(e)
        {
        }
    });
}
function uploadsignoutimg()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : "";
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";  

    var image = $('#download-photo-signout').attr('src');
    var base64ImageContent = image.replace(/^data:image\/(png|jpg);base64,/, "");
    var blob = base64ToBlob(base64ImageContent, 'image/png');                
    var formData = new FormData();
    formData.append('picture', blob);
    var recordid = $("#idselected").val();
    var file_name = 'signout_img';
    // var link = baseurl+"pages/hrmsmailservertesting.jsp?actn=uploadfile&recordid="+recordid+"&file_name="+file_name;
    var link = baseurl+"pages/hrsignin.jsp?actn=uploadfilesignout&recordid="+recordid+"&file_name="+file_name + cloudcode + tokenParam;
    
    const form = window.document.forms['download-photo-signout-form'];

    $.ajax({
        url: link, 
        type: "POST", 
        data: formData,
        processData: false,
        contentType:false,
        mimeType: "multipart/form-data",
        success : function(data) 
        {
            console.log("test----");
        },
        error:function(e)
        {
            console.log("testerr----");
        }
    });
}

// function to start Journey 
function startJourneyWithData(){

    var getUrl = window.location;   
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    let employeeCode = document.getElementById("signin_employee_code").innerText;
    let visitCode = $('#visitcode_dropdownlist').val();

    // Current Date (YYYY-MM-DD)
    let dateObj = new Date();
    let year = dateObj.getFullYear();
    let month = String(dateObj.getMonth() + 1).padStart(2, '0');
    let day = String(dateObj.getDate()).padStart(2, '0');
    let currentDate = `${year}-${month}-${day}`;

    // Current Time (HH:MM:SS)
    let currentTime = dateObj.toLocaleTimeString('en-GB', { hour12: false });
    let journeyStartLocation = $('#journey_start_loc_span').text();
    let journeyStartKilometers = $('#distance').val();;

    if(visitCode === ''){
        showToast('Please Select Visit Code', 'false');
        return;
    }
    if(journeyStartKilometers === ''){
        showToast('Please Enter Kilometers', 'false');
        return;
    }

    // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Employee_Travelling@d@10466@d@VISIT/2025/11/0001@d@2025-11-27@d@10:30:12@d@Ahmedabad@d@5001@d@Start_Travelling@d@
    var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Employee_Travelling@d@${encodeURIComponent(employeeCode)}@d@${encodeURIComponent(visitCode)}@d@${encodeURIComponent(currentDate)}@d@${encodeURIComponent(currentTime)}@d@${encodeURIComponent(journeyStartLocation)}@d@${encodeURIComponent(journeyStartKilometers)}@d@Start_Travelling@d@${tokenParam}`;
    data = callajax(url);
    try{
        data = JSON.parse(data);
        if(data[0].txt === 'txt is null' || !data[0].txt || data[0].txt == [] || data[0] == []){
           showToast('Error in Journey Start', 'false');
        }else{
            data = JSON.parse(data[0].txt);
            if(data[0].status === 'SUCCESSFULL'){
                showToast('Journey Started');
                $('#journeyModal').modal('hide');
            }
        }
    }
    catch(e){
        showToast('Error in Journey Start', 'false');
        console.log("error in start traveling : ", e);
    }
}

// function to end Journey 
function endJourneyWithData(){

    var getUrl = window.location;   
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    let employeeCode = document.getElementById("signin_employee_code").innerText;

    // Current Date (YYYY-MM-DD)
    let dateObj = new Date();
    let year = dateObj.getFullYear();
    let month = String(dateObj.getMonth() + 1).padStart(2, '0');
    let day = String(dateObj.getDate()).padStart(2, '0');
    let currentDate = `${year}-${month}-${day}`;

    // Current Time (HH:MM:SS)
    let currentTime = dateObj.toLocaleTimeString('en-GB', { hour12: false });
    let journeyEndLocation = $('#journey_end_loc_span').text();
    let journeyEndKilometers = $('#distance_end').val();

    if(journeyEndKilometers === ''){
        showToast('Please Enter Kilometers', 'false');
        return;
    }


    // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Employee_Journey@d@14@d@11:30:15@d@350@d@Ahmedabad1@d@@d@End_Travelling@d@
    var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Employee_Journey@d@${encodeURIComponent(journeyId)}@d@${encodeURIComponent(currentTime)}@d@${encodeURIComponent(journeyEndKilometers)}@d@${encodeURIComponent(journeyEndLocation)}@d@@d@End_Travelling@d@${tokenParam}`;
    data = callajax(url);
    try{
        data = JSON.parse(data);
        if(data[0].txt === 'txt is null' || !data[0].txt || data[0].txt == [] || data[0] == []){
           showToast('Error in Journey Ends', 'false');
        }else{
            // data = JSON.parse(data[0].txt);
            if(data[0].txt === 'SUCCESSFULL'){
                showToast('Journey Ends');
            }
        }
    }
    catch(e){
        showToast('Error in Journey Ends', 'false');
        console.log("error in End traveling : ", e);
    }
}

function base64ToBlob(base64, mime) // KHODIDAS
{
    mime = mime || '';
    var sliceSize = 1024;
    var byteChars = window.atob(base64);
    var byteArrays = [];

    for (var offset = 0, len = byteChars.length; offset < len; offset += sliceSize) {
        var slice = byteChars.slice(offset, offset + sliceSize);

        var byteNumbers = new Array(slice.length);
        for (var i = 0; i < slice.length; i++) {
            byteNumbers[i] = slice.charCodeAt(i);
        }

        var byteArray = new Uint8Array(byteNumbers);

        byteArrays.push(byteArray);
    }

    return new Blob(byteArrays, {type: mime});
}
// MY ATTENDANCE
function getleaveandattedancecount()
{
    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
    var monthnumber = month.indexOf($("#months").val().split(" ")[0]);
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#months").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    firstdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    lastdate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    firstdate = encodeURIComponent(firstdate); // window.targetuser
    lastdate = encodeURIComponent(lastdate); // window.targetuser
    var totalDays = lastDay.getDate();
    var fild ="";
    var getUrl = window.location;   
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    
    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=hrms&ids=valuestring/&valuestring=Attedance_Summary_1@d@Mansi%20Rane@d@
    // let url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Attedance_Summary@d@${username}@d@${firstdate}@d@${lastdate}@d@`;
    var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Attedance_Summary_1@d@${username}@d@${firstdate}@d@${lastdate}@d@myattandance@d@${tokenParam}`;
    data = callajax(url);
    data = JSON.parse(data);
    var customcolorarr = ["#27CCAE","#FF5F98","#577FFB","#FF8918","#FF5F98","#27CCAE","#577FFB", "#FF8918"];
    var attd_arr = ["present_click();","weekoff_click();","absent_click();","paidleave_click();","latemarks_click();","halfday_click();","odday_click();","paidday_click();"]
    if("txt is null" == data[0].txt)
    {
        for(var k=1;k<9;k++)
        {
            // $("#circularprogressbar"+k).children(".k-arcgauge-label").addClass("singleatt");
            $("#circularprogressbar"+k).kendoCircularGauge({
                value: '00',
                color: customcolorarr[k-1],
                scale: {
                    min: 0,
                    max: totalDays,
                },
                gaugeArea:{
                    width: 100,
                    height: 100
                },
                centerTemplate: '<span style="color: #: color #; text-align: center;">#= value == 365 ? "<span class=\'k-icon k-i-check\'></span>" : value #</span>'
            });
        }
        return;
    }
    data = JSON.parse(data[0].txt);//JSON.parse(data[0]);
    var customcountarr = [];
    customcountarr.push(data[0].present_count);
    customcountarr.push(data[0].week_off);
    customcountarr.push(data[0].absent_count);
    customcountarr.push(data[0].paid_leave);
    customcountarr.push(data[0].late_count);
    customcountarr.push(data[0].half_day); // Assuming data[0].half_day is not used
    customcountarr.push(data[0].od_count);
    customcountarr.push(data[0].paid_days);
    for(var k=1; k<9; k++)
    {
        $("#circularprogressbar"+k).kendoCircularGauge({
            value: customcountarr[k-1],
            color: customcolorarr[k-1],
            scale: {
                min: 0,
                max: totalDays,
            },
            gaugeArea:{
                width: 100,
                height: 100
            },
            centerTemplate: '<span onclick="'+attd_arr[k-1]+'" style="color: #: color #; cursor: pointer;">#= value == 365 ? "<span class=\'k-icon k-i-check\'></span>" : value #</span>'
        });

        if(customcountarr[k - 1] < 10){
            $("#circularprogressbar" + k).find(".k-arcgauge-label").addClass("singleatt");
        }
        else{
            $("#circularprogressbar" + k).find(".k-arcgauge-label").addClass("doubleatt");
        }
    }
}

// Attempts to fix misencoded UTF-8 strings (commonly seen as garbled text like , , etc.)
// and restore proper Devanagari (Hindi) or other Unicode characters.
function fixUtf8Smart(str) {
  try {
    // Step 1: If string already has Devanagari, return as-is
    if (/[\u0900-\u097F]/.test(str)) return str;

    // Step 2: Attempt single decode
    let decoded = decodeURIComponent(escape(str));

    // Step 3: If still broken, decode again
    if (!/[\u0900-\u097F]/.test(decoded) && /||/.test(decoded)) {
      decoded = decodeURIComponent(escape(decoded));
    }

    // Step 4: Repeat if still broken (max 3 levels to be safe)
    if (!/[\u0900-\u097F]/.test(decoded) && /||/.test(decoded)) {
      decoded = decodeURIComponent(escape(decoded));
    }

    return decoded;
  } catch (e) {
    console.warn("Deep UTF-8 fix failed:", e, str);
    return str;
  }
}

// function attedance_report()
// {
//     var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
//     var monthnumber = month.indexOf($("#months").val().split(" ")[0]);
//     monthnumber = parseInt(monthnumber)+1;
//     monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
//     var date = new Date(monthnumber+"/01/"+$("#months").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
//     var firstDay = new Date(y, m, 1);
//     var lastDay = new Date(y, m + 1, 0);
//     firstdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
//     lastdate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
//     firstdate = encodeURIComponent(firstdate); // window.targetuser
//     lastdate = encodeURIComponent(lastdate); // window.targetuser
//     var fild ="";
//     var getUrl = window.location;   
//     var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
//     baseurl = baseurl.split("pages")[0];
//     var cloudcode =  window.targetcloud;
//     var username =  window.targetuser;
//     var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

//     // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=hrms&ids=valuestring/&valuestring=Attedance_Report@d@ERP%20Admin@d@2000-01-30@d@2024-01-31@d@@d@@d@
//     var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Attedance_Report@d@${username}@d@${firstdate}@d@${lastdate}@d@@d@@d@myattandance@d@${tokenParam}`;
//     data = callajax(url);
//     data = JSON.parse(data);
//     if("txt is null" == data[0].txt)
//     {
//         var header ='<table id="attendance_report_table" class="table" style="height : 100%; margin:0">'+
//         `<colgroup>
//             <col width="8.33%">
//             <col width="8.33%">
//             <col width="8.33%">
//             <col width="8.33%">
//             <col width="5.33%">
//             <col width="8.33%">
//             <col width="22.66%">
//             <col width="8.33%">
//             <col width="5.33%">
//             <col width="8.33%">
//             <col width="8.33%">
//         </colgroup>`+
//         '<thead>'+
//             '<tr>'+
//                 '<th style="font-size:14px;">Date</th>'+
//                 '<th style="font-size:12px;">Employee Name</th>'+
//                 '<th style="font-size:14px;">Login Type</th>'+
//                 '<th style="font-size:14px;">Sign in Location</th>'+
//                 '<th style="font-size:14px;">Sign in Project</th>'+
//                 '<th style="font-size:14px;">Sign in Photo</th>'+
//                 '<th style="text-align: center; font-size:14px;">Attendance</th>'+
//                 '<th style="font-size:14px;">Sign out Location</th>'+
//                 '<th style="font-size:14px;">Sign out Project</th>'+
//                 '<th style="font-size:14px;">Sign out Photo</th>'+
//                 '<th style="font-size:14px;">Attendance Status</th>'+
//             '</tr>'+
//         '</thead>'+ '<tbody><tr style="font-size:20px;text-align:center;font-weight: 500;"><td colspan="11"> <div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></td></tr></tbody>';
//         document.getElementById("attendance_report_table_data").innerHTML = header;
//         return;
//     }
//     data = JSON.parse(data[0].txt);//JSON.parse(data[0]);

//     var header ='<table id="attendance_report_table" class="table">'+
//     `<colgroup>
//         <col width="8.33%">
//             <col width="8.33%">
//             <col width="8.33%">
//             <col width="8.33%">
//             <col width="5.33%">
//             <col width="8.33%">
//             <col width="22.66%">
//             <col width="8.33%">
//             <col width="5.33%">
//             <col width="8.33%">
//             <col width="8.33%">
//     </colgroup>`+
//     '<thead>'+
//         '<tr>'+
//             '<th style="font-size:12px;">Date</th>'+
//             '<th style="font-size:12px;">Employee Name</th>'+
//             '<th style="font-size:12px;">Login Type</th>'+
//             '<th style="font-size:12px;">Sign in Location</th>'+
//             '<th style="font-size:12px;">Sign in Project</th>'+
//             '<th style="font-size:12px;">Sign in Photo</th>'+
//             '<th style="text-align: center; font-size:12px;">Attendance</th>'+
//             '<th style="font-size:12px;">Sign out Location</th>'+
//             '<th style="font-size:12px;">Sign out Project</th>'+
//             '<th style="font-size:12px;">Sign out Photo</th>'+
//             '<th style="font-size:12px;">Attendance Status</th>'+
//         '</tr>'+
//     '</thead>'+
//     '<tbody>';
//     var tablebody ="";
//     for(var i=0;i<data.length;i++)
//     {
//         var index = i + 1;
//         var field = '<tr>';
//         var random = parseInt(Math.random() * (9999999 - 999) + 999);
        
//         if(data[i].attd == "Paid Leave")
//         {        
//             var intime = data[i].intime;
//             intime = intime.split('.')[0];
//             var outtime = data[i].outtime;
//             outtime = outtime.split('.')[0];
//             var signin_loc = fixUtf8Smart(data[i].sign_in_location);
//             signin_loc = signin_loc.substr(0,10);
//             var signout_loc = data[i].sign_out_location;
//             signout_loc = signout_loc.substr(0,10);
//             field +=
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].day+'</td>'+
//             '<td style="font-size:12px;" id="dat'+(i+1)+'">'+data[i].employename+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'"></td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'"></td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'"></td>'+
//             '<td id="img'+(i+1)+'"></td>'+
//             '<td style="font-size:13px;" id="att'+(i+1)+'"><div class="Weekly-off-details"><span class="line"><h2 style="font-size:13px;"><span>'+data[i].attd+'</span></h2></span></div></td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'"></td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'"></td>'+
//             '<td id="img'+(i+1)+'"></td>'+
//             '<td style="font-size:13px; text-align: -webkit-center;" id="attd-status-sta'+(i+1)+'"><div style="border: 1px solid #FF8918;background: #FFF9F3;border-radius: 8px;padding: 5px;color: #FF8918;width: max-content;gap: 4px;display: flex;">Paid Leave</div></td>';
//         }
//         else if(data[i].attd == "Company Holiday")
//         {
//             field +=
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].day+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].employename+'</td>'+
//             '<td style="font-size:13px;" id="loc'+(i+1)+'"></td>'+
//             '<td style="font-size:13px;" id="loc'+(i+1)+'"></td>'+
//             '<td style="font-size:13px;" id="loc'+(i+1)+'"></td>'+
//             '<td style="font-size:13px;" id="sta'+(i+1)+'"></td>'+
//             '<td style="font-size:13px;" id="att'+(i+1)+'"><div class="Weekly-off-details"><span class="line"><h2 style="font-size:13px;"><span>'+data[i].attd+'</span></h2></span></div></td>'+
//             '<td style="font-size:13px;" id="sta'+(i+1)+'"></td>'+
//             '<td style="font-size:13px;" id="sta'+(i+1)+'"></td>'+
//             '<td style="font-size:13px;" id="sta'+(i+1)+'"></td>'+
//             '<td style="font-size:13px; text-align: -webkit-center;" id="attd-status-sta'+(i+1)+'"><div style="border: 1px solid #577FFB;background: #EFF3FF;border-radius: 8px;padding: 5px;color: #577FFB;width: max-content;gap: 4px;display: flex;">Company Holiday</div></td>';
//         }
//         else if(data[i].attd == "Weekly Off")
//         {
//             field +=
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].day+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].employename+'</td>'+
//             '<td style="font-size:13px;" id="loc'+(i+1)+'"></td>'+
//             '<td style="font-size:13px;" id="loc'+(i+1)+'"></td>'+
//             '<td style="font-size:13px;" id="loc'+(i+1)+'"></td>'+
//             '<td style="font-size:13px;" id="sta'+(i+1)+'"></td>'+
//             '<td style="font-size:13px;" id="att'+(i+1)+'"><div class="Weekly-off-details"><span class="line"><h2 style="font-size:13px;"><span>'+data[i].attd+'</span></h2></span></div></td>'+
//             '<td style="font-size:13px;" id="sta'+(i+1)+'"></td>'+
//             '<td style="font-size:13px;" id="sta'+(i+1)+'"></td>'+
//             '<td style="font-size:13px;" id="sta'+(i+1)+'"></td>'+
//             '<td style="font-size:13px; text-align: -webkit-center;" id="week-off-sta'+(i+1)+'"><div style="border: 1px solid #FF498A;background: #FFF3F7;border-radius: 8px;padding: 5px;color: #FF498A;width: max-content;gap: 4px;display: flex;">Weekly Off</div></td>';
//         }
//         else if(data[i].attd == "Present")
//         {
//             var intime = data[i].intime;
//             intime = intime.split('.')[0];
//             var outtime = data[i].outtime;
//             outtime = outtime.split('.')[0];
//             var signin_loc = fixUtf8Smart(data[i].sign_in_location);
//             signin_loc = signin_loc.substr(0,10);
//             var signout_loc = data[i].sign_out_location;
//             signout_loc = signout_loc.substr(0,10);
//             field +=
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].day+'</td>'+
//             '<td style="font-size:12px;" id="dat'+(i+1)+'">'+data[i].employename+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].user_login_type+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'" title="'+fixUtf8Smart(data[i].sign_in_location)+'" >'+signin_loc+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+(data[i].sign_in_project ? data[i].sign_in_project : '')+'</td>'+
//             '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66843_signin_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
//             // '<td style="font-size:13px;" id="loc'+(i+1)+'"><p title="'+data[i].location+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].location+'</p></td>'+
//             // '<td style="font-size:13px;" id="pro'+(i+1)+'"><p title="'+data[i].projectname+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].projectname+'</p></td>'+
//             '<td style="font-size:13px;" id="att'+(i+1)+'"><div class="table-line-bar"><div class="line-bar-item full-day"></div></div><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2"><div class="enter-time"><span>IN</span> '+intime+'</div><div class="icon-pic" data-bs-toggle="modal" data-bs-target="#break_in_out_modal" onclick="break_inout_daily(\''+data[i].dailydate+'\')"><i class="fa fa-clock-o" aria-hidden="true"></i></div><div class="exit-time">'+(outtime=="00:00:00"?'':outtime)+'<span '+(outtime=="00:00:00"?'style="color:red;"':'')+'> OUT</span></div></div></td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'" title="'+data[i].sign_out_location+'">'+signout_loc+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+(data[i].sign_out_project ? data[i].sign_out_project : '')+'</td>'+
//             '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66844_signout_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
//             '<td style="font-size:13px; text-align: -webkit-center;" id="attd-status-sta'+(i+1)+'"><div style="border: 1px solid #10B981;background: #DEFFF6;border-radius: 8px;padding: 5px;color: #10B981;width: max-content;gap: 4px;display: flex;">Present</div></td>';
//         }        
//         else if(data[i].intime == "00:00:00")
//         {
//             var signin_loc = fixUtf8Smart(data[i].sign_in_location);
//             signin_loc = signin_loc.substr(0,10);
//             var signout_loc = data[i].sign_out_location;
//             signout_loc = signout_loc.substr(0,10);
//             field +=
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].day+'</td>'+
//             '<td style="font-size:12px;" id="dat'+(i+1)+'">'+data[i].employename+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].user_login_type+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'" title="'+fixUtf8Smart(data[i].sign_in_location)+'">'+signin_loc+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+(data[i].sign_in_project ? data[i].sign_in_project : '')+'</td>'+
//             '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66843_signin_img.png?random='+random+'" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
//             // '<td style="font-size:13px;" id="loc'+(i+1)+'"><p title="'+data[i].location+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].location+'</p></td>'+
//             // '<td style="font-size:13px;" id="pro'+(i+1)+'"><p title="'+data[i].projectname+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].projectname+'</p></td>'+
//             '<td style="font-size:13px;" id="att'+(i+1)+'"><div class="table-line-bar"><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2" style="justify-content: center !important;"><div class="enter-time" style="display: none;"><span>IN</span></div><div class="icon-pic" data-bs-toggle="modal" data-bs-target="#break_in_out_modal" onclick="break_inout_daily(\''+data[i].dailydate+'\')"><i class="fa-solid fa-display-slash fa-sm" aria-hidden="true"></i></div><div class="exit-time" style="display: none;"><span style="color:red;"></span></div></div></div><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2"></div></td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'" title="'+data[i].sign_out_location+'">'+signout_loc+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+(data[i].sign_out_project ? data[i].sign_out_project : '')+'</td>'+
//             '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66844_signout_img.png?random='+random+'" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
//             '<td style="font-size:13px; text-align: -webkit-center;" id="attd-status-sta'+(i+1)+'"><div style="border: 1px solid #EB4444;background: #FFF4F4;border-radius: 8px;padding: 5px;color: #EB4343;width: max-content;gap: 4px;display: flex;">Absent</div></td>';
//         }
//         else if(data[i].attd == "Paid Leave")
//         {        
//             var intime = data[i].intime;
//             intime = intime.split('.')[0];
//             var outtime = data[i].outtime;
//             outtime = outtime.split('.')[0];
//             var signin_loc = fixUtf8Smart(data[i].sign_in_location);
//             signin_loc = signin_loc.substr(0,10);
//             var signout_loc = data[i].sign_out_location;
//             signout_loc = signout_loc.substr(0,10);
//             field +=
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].day+'</td>'+
//             '<td style="font-size:12px;" id="dat'+(i+1)+'">'+data[i].employename+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].user_login_type+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'" title="'+fixUtf8Smart(data[i].sign_in_location)+'" >'+signin_loc+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+(data[i].sign_in_project ? data[i].sign_in_project : '')+'</td>'+
//             '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66843_signin_img.png?random='+random+'" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
//             // '<td style="font-size:13px;" id="loc'+(i+1)+'"><p title="'+data[i].location+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].location+'</p></td>'+
//             // '<td style="font-size:13px;" id="pro'+(i+1)+'"><p title="'+data[i].projectname+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].projectname+'</p></td>'+
//             '<td style="font-size:13px;" id="att'+(i+1)+'"><div class="table-line-bar"><div class="line-bar-item full-day"></div></div><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2"><div class="enter-time"><span>IN</span> '+intime+'</div><div class="icon-pic" data-bs-toggle="modal" data-bs-target="#break_in_out_modal" onclick="break_inout_daily(\''+data[i].dailydate+'\')"><i class="fa fa-clock-o" aria-hidden="true"></i></div><div class="exit-time">'+(outtime=="00:00:00"?'':outtime)+'<span '+(outtime=="00:00:00"?'style="color:red;"':'')+'> OUT</span></div></div></td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'" title="'+data[i].sign_out_location+'">'+signout_loc+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+(data[i].sign_out_project ? data[i].sign_out_project : '')+'</td>'+
//             '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66844_signout_img.png?random='+random+'" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
//             '<td style="font-size:13px; text-align: -webkit-center;" id="attd-status-sta'+(i+1)+'"><div style="border: 1px solid #10B981;background: #DEFFF6;border-radius: 8px;padding: 5px;color: #10B981;width: max-content;gap: 4px;display: flex;">Paid Leave</div></td>';
//         }
//         else if(data[i].attd == "Absent")
//         {
//             var intime = data[i].intime;
//             intime = intime.split('.')[0];
//             var outtime = data[i].outtime;
//             outtime = outtime.split('.')[0];
//             var signin_loc = fixUtf8Smart(data[i].sign_in_location);
//             signin_loc = signin_loc.substr(0,10);
//             var signout_loc = data[i].sign_out_location;
//             signout_loc = signout_loc.substr(0,10);
//             field +=
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].day+'</td>'+
//             '<td style="font-size:12px;" id="dat'+(i+1)+'">'+data[i].employename+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].user_login_type+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'" title="'+fixUtf8Smart(data[i].sign_in_location)+'">'+signin_loc+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+(data[i].sign_in_project ? data[i].sign_in_project : '')+'</td>'+
//             '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66843_signin_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
//             // '<td style="font-size:13px;" id="loc'+(i+1)+'"><p title="'+data[i].location+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].location+'</p></td>'+
//             // '<td style="font-size:13px;" id="pro'+(i+1)+'"><p title="'+data[i].projectname+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].projectname+'</p></td>'+
//             // '<td style="font-size:13px;" id="att'+(i+1)+'"><div class="table-line-bar"><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2" style="justify-content: center !important;"><div class="enter-time" style="display: none;"><span>IN</span></div><div class="icon-pic"><i class="fa-solid fa-display-slash fa-sm" aria-hidden="true"></i></div><div class="exit-time" style="display: none;"><span style="color:red;"></span></div></div></div><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2"></div></td>'+
//             '<td style="font-size:13px;" id="att'+(i+1)+'"><div class="table-line-bar"><div class="line-bar-item full-day"></div></div><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2"><div class="enter-time"><span>IN</span> '+intime+'</div><div class="icon-pic" data-bs-toggle="modal" data-bs-target="#break_in_out_modal" onclick="break_inout_daily(\''+data[i].dailydate+'\')"><i class="fa fa-clock-o" aria-hidden="true"></i></div><div class="exit-time">'+(outtime=="00:00:00"?'':outtime)+'<span '+(outtime=="00:00:00"?'style="color:red;"':'')+'> OUT</span></div></div></td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'" title="'+data[i].sign_out_location+'">'+signout_loc+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+(data[i].sign_out_project ? data[i].sign_out_project : '')+'</td>'+
//             '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66844_signout_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
//             '<td style="font-size:13px; text-align: -webkit-center;" id="attd-status-sta'+(i+1)+'"><div style="border: 1px solid #EB4444;background: #FFF4F4;border-radius: 8px;padding: 5px;color: #EB4343;width: max-content;gap: 4px;display: flex;">Absent</div></td>';
//         }
//         else if(data[i].attd == "Late")
//         {
//             var intime = data[i].intime;
//             intime = intime.split('.')[0];
//             var outtime = data[i].outtime;
//             outtime = outtime.split('.')[0];
//             var signin_loc = fixUtf8Smart(data[i].sign_in_location);
//             signin_loc = signin_loc.substr(0,10);
//             var signout_loc = data[i].sign_out_location;
//             signout_loc = signout_loc.substr(0,10);
//             field +=
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].day+'</td>'+
//             '<td style="font-size:12px;" id="dat'+(i+1)+'">'+data[i].employename+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].user_login_type+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'" title="'+fixUtf8Smart(data[i].sign_in_location)+'">'+signin_loc+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+(data[i].sign_in_project ? data[i].sign_in_project : '')+'</td>'+
//             '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66843_signin_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
//             // '<td style="font-size:13px;" id="loc'+(i+1)+'"><p title="'+data[i].location+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].location+'</p></td>'+
//             // '<td style="font-size:13px;" id="pro'+(i+1)+'"><p title="'+data[i].projectname+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].projectname+'</p></td>'+
//             // '<td style="font-size:13px;" id="att'+(i+1)+'"><div class="table-line-bar"><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2" style="justify-content: center !important;"><div class="enter-time" style="display: none;"><span>IN</span></div><div class="icon-pic"><i class="fa-solid fa-display-slash fa-sm" aria-hidden="true"></i></div><div class="exit-time" style="display: none;"><span style="color:red;"></span></div></div></div><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2"></div></td>'+
//             '<td style="font-size:13px;" id="att'+(i+1)+'"><div class="table-line-bar"><div class="line-bar-item full-day"></div></div><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2"><div class="enter-time"><span>IN</span> '+intime+'</div><div class="icon-pic" data-bs-toggle="modal" data-bs-target="#break_in_out_modal" onclick="break_inout_daily(\''+data[i].dailydate+'\')"><i class="fa fa-clock-o" aria-hidden="true"></i></div><div class="exit-time">'+(outtime=="00:00:00"?'':outtime)+'<span '+(outtime=="00:00:00"?'style="color:red;"':'')+'> OUT</span></div></div></td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'" title="'+data[i].sign_out_location+'">'+signout_loc+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+(data[i].sign_out_project ? data[i].sign_out_project : '')+'</td>'+
//             '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66844_signout_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
//             '<td style="font-size:13px; text-align: -webkit-center;" id="attd-status-sta'+(i+1)+'"><div style="border: 1px solid #A251E2;background: #F4E7FF;border-radius: 8px;padding: 5px;color: #A251E2;width: max-content;gap: 4px;display: flex;">Late</div></td>';
//         }
//         else if(data[i].attd == "Early")
//         {
//             var intime = data[i].intime;
//             intime = intime.split('.')[0];
//             var outtime = data[i].outtime;
//             outtime = outtime.split('.')[0];
//             var signin_loc = fixUtf8Smart(data[i].sign_in_location);
//             signin_loc = signin_loc.substr(0,10);
//             var signout_loc = data[i].sign_out_location;
//             signout_loc = signout_loc.substr(0,10);
//             field +=
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].day+'</td>'+
//             '<td style="font-size:12px;" id="dat'+(i+1)+'">'+data[i].employename+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].user_login_type+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'" title="'+fixUtf8Smart(data[i].sign_in_location)+'" >'+signin_loc+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+(data[i].sign_in_project ? data[i].sign_in_project : '')+'</td>'+
//             '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66843_signin_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
//             // '<td style="font-size:13px;" id="loc'+(i+1)+'"><p title="'+data[i].location+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].location+'</p></td>'+
//             // '<td style="font-size:13px;" id="pro'+(i+1)+'"><p title="'+data[i].projectname+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].projectname+'</p></td>'+
//             '<td style="font-size:13px;" id="att'+(i+1)+'"><div class="table-line-bar"><div class="line-bar-item full-day"></div></div><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2"><div class="enter-time"><span>IN</span> '+intime+'</div><div class="icon-pic" data-bs-toggle="modal" data-bs-target="#break_in_out_modal" onclick="break_inout_daily(\''+data[i].dailydate+'\')"><i class="fa fa-clock-o" aria-hidden="true"></i></div><div class="exit-time">'+(outtime=="00:00:00"?'':outtime)+'<span '+(outtime=="00:00:00"?'style="color:red;"':'')+'> OUT</span></div></div></td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'" title="'+data[i].sign_out_location+'">'+signout_loc+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+(data[i].sign_out_project ? data[i].sign_out_project : '')+'</td>'+
//             '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66844_signout_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
//             '<td style="font-size:13px; text-align: -webkit-center;" id="attd-status-sta'+(i+1)+'"><div style="border: 1px solid #A4BC0E;background: #FCFFEC;border-radius: 8px;padding: 5px;color: #A4BC0E;width: max-content;gap: 4px;display: flex;">Early</div></td>';
//         }        
//         else if(data[i].attd == "Half Day")
//         {
//             var intime = data[i].intime;
//             intime = intime.split('.')[0];
//             var outtime = data[i].outtime;
//             outtime = outtime.split('.')[0];
//             var signin_loc = fixUtf8Smart(data[i].sign_in_location);
//             signin_loc = signin_loc.substr(0,10);
//             var signout_loc = data[i].sign_out_location;
//             signout_loc = signout_loc.substr(0,10);
//             field +=
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].day+'</td>'+
//             '<td style="font-size:12px;" id="dat'+(i+1)+'">'+data[i].employename+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].user_login_type+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'" title="'+fixUtf8Smart(data[i].sign_in_location)+'">'+signin_loc+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+(data[i].sign_in_project ? data[i].sign_in_project : '')+'</td>'+
//             '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66843_signin_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
//             // '<td style="font-size:13px;" id="loc'+(i+1)+'"><p title="'+data[i].location+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].location+'</p></td>'+
//             // '<td style="font-size:13px;" id="pro'+(i+1)+'"><p title="'+data[i].projectname+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].projectname+'</p></td>'+
//             // '<td style="font-size:13px;" id="att'+(i+1)+'"><div class="table-line-bar"><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2" style="justify-content: center !important;"><div class="enter-time" style="display: none;"><span>IN</span></div><div class="icon-pic"><i class="fa-solid fa-display-slash fa-sm" aria-hidden="true"></i></div><div class="exit-time" style="display: none;"><span style="color:red;"></span></div></div></div><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2"></div></td>'+
//             '<td style="font-size:13px;" id="att'+(i+1)+'"><div class="table-line-bar"><div class="line-bar-item full-day"></div></div><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2"><div class="enter-time"><span>IN</span> '+intime+'</div><div class="icon-pic" data-bs-toggle="modal" data-bs-target="#break_in_out_modal" onclick="break_inout_daily(\''+data[i].dailydate+'\')"><i class="fa fa-clock-o" aria-hidden="true"></i></div><div class="exit-time">'+(outtime=="00:00:00"?'':outtime)+'<span '+(outtime=="00:00:00"?'style="color:red;"':'')+'> OUT</span></div></div></td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'" title="'+data[i].sign_out_location+'">'+signout_loc+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+(data[i].sign_out_project ? data[i].sign_out_project : '')+'</td>'+
//             '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66844_signout_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
//             '<td style="font-size:13px; text-align: -webkit-center;" id="attd-status-sta'+(i+1)+'"><div style="border: 1px solid #797708;background: #f0f3b8;border-radius: 8px;padding: 5px;color: #797708;width: max-content;gap: 4px;display: flex;">Half Day</div></td>';
//         }        
//         else if(data[i].attd == "Mismatch")
//         {
//             var intime = data[i].intime;
//             intime = intime.split('.')[0];
//             var outtime = data[i].outtime;
//             outtime = outtime.split('.')[0];
//             field += 
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].day+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].employename+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].user_login_type+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+fixUtf8Smart(data[i].sign_in_location)+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+(data[i].sign_in_project ? data[i].sign_in_project : '')+'</td>'+
//             '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66843_signin_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
//             '<td style="font-size:13px;" id="att'+(i+1)+'"><div class="table-line-bar"><div class="line-bar-item half-day"></div></div><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2"><div class="enter-time"><span>IN</span> '+intime+'</div><div class="icon-pic" data-bs-toggle="modal" data-bs-target="#break_in_out_modal" onclick="break_inout_daily(\''+data[i].dailydate+'\')"><i class="fa fa-clock-o" aria-hidden="true"></i></div><div class="exit-time">'+(outtime=="00:00:00"?'':outtime)+'<span '+(outtime=="00:00:00"?'style="color:red;"':'')+'> OUT</span></div></div></td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].sign_out_location+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+(data[i].sign_out_project ? data[i].sign_out_project : '')+'</td>'+
//             '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66844_signout_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
//             // '<td style="font-size:13px; text-align: -webkit-center;" id="attd-status-sta'+(i+1)+'"><a href="/../getFormLink.do?actn=EditEnter&formid=4091&reportid=-1&id=4091&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1" target="_blank" style="text-decoration: none;"><div style="border: 1px solid #15C3D9;background: #E0FCFF;border-radius: 8px;padding: 5px;color: #15C3D9;width: max-content;gap: 4px;display: flex;">Mismatch</div></a></td>';
//             '<td style="font-size:13px; text-align: -webkit-center;" id="attd-status-sta'+(i+1)+'"><div style="border: 1px solid #15C3D9; background: #E0FCFF; border-radius: 8px; padding: 5px; color: #15C3D9; width: max-content; gap: 4px; display: flex;">Mismatch</div></td>';
//         }
//         else if(data[i].attd == "LWP")
//         {
//             var intime = data[i].intime;
//             intime = intime.split('.')[0];
//             var outtime = data[i].outtime;
//             outtime = outtime.split('.')[0];
//             field += 
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].day+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].employename+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].user_login_type+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+fixUtf8Smart(data[i].sign_in_location)+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+(data[i].sign_in_project ? data[i].sign_in_project : '')+'</td>'+
//             '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66843_signin_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
//             '<td style="font-size:13px;" id="att'+(i+1)+'"><div class="table-line-bar"><div class="line-bar-item half-day"></div></div><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2"><div class="enter-time"><span>IN</span> '+intime+'</div><div class="icon-pic" data-bs-toggle="modal" data-bs-target="#break_in_out_modal" onclick="break_inout_daily(\''+data[i].dailydate+'\')"><i class="fa fa-clock-o" aria-hidden="true"></i></div><div class="exit-time">'+(outtime=="00:00:00"?'':outtime)+'<span '+(outtime=="00:00:00"?'style="color:red;"':'')+'> OUT</span></div></div></td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+data[i].sign_out_location+'</td>'+
//             '<td style="font-size:13px;" id="dat'+(i+1)+'">'+(data[i].sign_out_project ? data[i].sign_out_project : '')+'</td>'+
//             '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66844_signout_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
//             // '<td style="font-size:13px; text-align: -webkit-center;" id="attd-status-sta'+(i+1)+'"><a href="/../getFormLink.do?actn=EditEnter&formid=4091&reportid=-1&id=4091&retrievejavascript=javascript:void(0);&ask=COMMAND_NAME_1" target="_blank" style="text-decoration: none;"><div style="border: 1px solid #15C3D9;background: #E0FCFF;border-radius: 8px;padding: 5px;color: #15C3D9;width: max-content;gap: 4px;display: flex;">Mismatch</div></a></td>';
//             '<td style="font-size:13px; text-align: -webkit-center;" id="attd-status-sta'+(i+1)+'"><div style="border: 1px solid #27ccae;background: #d4fcf5;border-radius: 8px;padding: 5px;color: #27ccae;width: max-content;gap: 4px;display: flex;cursor: pointer;">LWP</div></td>';
//         }
//         // else if(data[i].attd == "Company Holiday")
//         // {
//         //   field += '<td id="img'+(i+1)+'"><img src="https://www.gravatar.com/avatar/2c7d99fe281ecd3bcd65ab915bac6dd5?s=250" class="table-user-img"/></td>'+
//         //   '<td id="loc'+(i+1)+'">'+data[i].location+'</td>'+
//         //   '<td id="pro'+(i+1)+'">'+data[i].projectname+'</td>'+
//         //   '<td id="dat'+(i+1)+'">'+data[i].day+'</td>'+
//         //   '<td id="att'+(i+1)+'"><div><div class="table-line-bar"><div class="line-bar-item half-day"></div></div><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2"><div class="enter-time"><span>IN</span>'+data[i].intime+'</div><div class="icon-pic"><i class="fa fa-clock-o" aria-hidden="true"></i></div><div class="exit-time">'+data[i].outtime+'<span> OUT</span></div></div></div></td>'+
//         //   '<td id="sta'+(i+1)+'"></td>';
//         // }
//         field += '</tr>';
//         tablebody += field;
//         document.getElementById("attendance_report_table_data").innerHTML = header+tablebody;
//     }
//     check_sandwitch();
//     // option = '<option value="%">All</option>'+option; 
//     //$(".attendance_report_table").append(row); 
// }

function attedance_report() {
  // Get selected month and year
  var selectedMonthYear = $("#months").val().split(" ");
  var monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun","Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
  let monthIndex = monthNames.indexOf(selectedMonthYear[0]);
  var year = parseInt(selectedMonthYear[1]);
  var paddedMonth = (monthIndex + 1) > 9 ? (monthIndex + 1) : "0" + (monthIndex + 1);
  var firstDay = new Date(year, monthIndex, 1);
  var lastDay = new Date(year, monthIndex + 1, 0);
  var firstdate = `${year}-${paddedMonth}-01`;
  var lastdate = `${year}-${paddedMonth}-${lastDay.getDate()}`;

  // Build base URL
  var getUrl = window.location;
  let baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
  baseurl = baseurl.split("pages")[0];

  var cloudcode =  window.targetcloud;
  var username =  window.targetuser;
  var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
//   var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=hrms&ids=valuestring/&valuestring=Attedance_Report@d@Tushar Sahebrao More@d@${firstdate}@d@${lastdate}@d@@d@@d@myattandance@d@${token}`;
  var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Attedance_Report@d@${username}@d@${firstdate}@d@${lastdate}@d@@d@@d@myattandance@d@${tokenParam}`;
  // Clear and show loading
  $("#attendance_report_table_data").html('<p class="text-muted">Loading...</p>');

  try {
    let data = callajax(url);  // sync call
    data = JSON.parse(data);
    $("#attendance_report_table_data").empty();

    if (!data || !Array.isArray(data) || data.length === 0) {
      $("#attendance_report_table_data").html('<p class="text-danger">No attendance data found.</p>');
      return;
    }
    apidata = JSON.parse(data[0].txt);
    var random = parseInt(Math.random() * (9999999 - 999) + 999);
    apidata.forEach(day => { 
        var intime = day.intime ? day.intime.split('.')[0] : "-";
        var outtime = day.outtime ? day.outtime.split('.')[0] : "-";

        var signInType = (day.attd === "Weekly Off" || day.intime === "00:00:00") ? "-" : (day.user_login_type || "-");
        var signOutType = (day.attd === "Weekly Off" || day.outtime === "00:00:00") ? "-" : (day.user_login_type || "-");

      var card = `
      <div class="dailyattendance-card mb-3">
        <div class="attendance-header d-flex justify-content-between">
          <ul class="attendance-info-list">
            <li><strong style="display: flex;align-items: center;gap: 10px;"><i class="fa-regular fa-calendar-star" style="color: #5d51e2;font-size: 20px;"></i>  
                ${(() => {
                    var parts = day.day.trim().split(" ");
                    var dayNum = parts[0];
                    var short = parts[1]?.toUpperCase();
                    var full = short === "MON" ? "Monday" :
                                short === "TUE" ? "Tuesday" :
                                short === "WED" ? "Wednesday" :
                                short === "THU" ? "Thursday" :
                                short === "FRI" ? "Friday" :
                                short === "SAT" ? "Saturday" :
                                short === "SUN" ? "Sunday" : short;
                    return `${dayNum} ${full}`;
                })()}</strong>
            </li>
            <li>Employee Code: <strong>${day.employecode}</strong></li>
            <li>Sign In Login Type: <strong>${signInType}</strong></li>
            <li>Sign Out Login Type: <strong>${signOutType}</strong></li>
          </ul>
          <div class="d-flex align-items-center gap-2">
            <strong style="font-size: 14px; color: gray;font-weight: 500;" class="dailyattd-status">Status:</strong>
            <span class="status-badge" style="${getStatusStyle(day.attd)}">${day.attd || "N/A"}</span>
          </div>
        </div>

        <div class="main-contentdailyattd d-flex">
          <div class="left-section flex-grow-1">
            <!-- Sign In -->
            <div class="row-group border-bottom d-flex">
              <div class="col-section">
                <strong style="font-size: 14px; color: gray;font-weight: 500;">Sign In Location</strong><br>
                <span class="text-truncate-hover" title="${day.sign_in_location || ""}">
                  ${day.sign_in_location || "-"}
                </span>
              </div>
              <div class="col-section">
                <strong style="font-size: 14px; color: gray;font-weight: 500;">Sign In Project</strong><br>
                <span class="text-truncate-hover" title="${day.sign_in_project || ""}">
                  ${day.sign_in_project || "-"}
                </span>
              </div>
              <div class="col-section">
                <strong style="font-size: 14px; color: gray;font-weight: 500;">Sign In Photo</strong><br>
                <img src="../uploads${cloudcode}/Folder547/547_${day.recordid}_66843_signin_img.png?random=${Math.random()}" onclick="openInNewTab(this.src)" onerror="this.src='./images/profile-icon.png'" class="dailyattdphoto">
              </div>
            </div>

            <!-- Sign Out -->
            <div class="row-group d-flex">
              <div class="col-section">
                <strong style="font-size: 14px; color: gray;font-weight: 500;">Sign Out Location</strong><br>
                <span class="text-truncate-hover" title="${day.sign_out_location || ""}">
                  ${day.sign_out_location || "-"}
                </span>
              </div>
              <div class="col-section">
                <strong style="font-size: 14px; color: gray;font-weight: 500;">Sign Out Project</strong><br>
                <span class="text-truncate-hover" title="${day.sign_out_project || ""}">
                  ${day.sign_out_project || "-"}
                </span>
              </div>
              <div class="col-section">
                <strong style="font-size: 14px; color: gray;font-weight: 500;">Sign Out Photo</strong><br>
                <img src="../uploads${cloudcode}/Folder547/547_${day.recordid}_66844_signout_img.png?random=${Math.random()}" onclick="openInNewTab(this.src)" onerror="this.src='./images/profile-icon.png'" class="dailyattdphoto">
              </div>
            </div>
          </div>

          <div class="summary-section ps-3">
            <div style="display: flex;flex-direction: column;justify-content: center;align-items: center;"><strong style="font-size: 14px;font-weight: 500;color: gray;">Work Hrs</strong><span style="font-size: 15px;font-weight: 600;">${day.wkng_hrs ? day.wkng_hrs.split(':').slice(0, 2).join(':') + ' hr' : '-'}</span></div>
            <div class="mt-3"><strong style="display: flex;justify-content: center;align-items: center;font-size: 14px; color: gray;font-weight: 500;">Attendance</strong>
            <div class="timeline-bar" style="${['Weekly Off', 'Company Holiday', 'Absent'].includes(day.attd) ? 'background-color: gray;' : ''}"></div>
                <div class="d-flex justify-content-between text-muted" style="font-size: 12px;font-weight: 600;align-items: center;">
                    <div class="text-center">
                        <div>In</div>
                        <div>${intime || "-"}</div>
                    </div>
                    <div class="text-center;" style="font-size: 20px;">
                        <i class="fa fa-clock-o" data-bs-toggle="modal" data-bs-target="#break_in_out_modal" onclick="break_inout_daily('${day.dailydate}')"aria-hidden="true" style="cursor: pointer;"></i>
                    </div>
                    <div class="text-center">
                        <div>Out</div>
                        <div>${outtime || "-"}</div>
                    </div>
               </div>
            </div>
          </div>
        </div>
      </div>`;
      $("#attendance_report_table_data").append(card);
    });
    check_sandwitch();
  } catch (err) {
    $("#attendance_report_table_data").html('<p class="text-danger">Error loading data.</p>');
    console.error("Attendance fetch error:", err);
  }
}

function getStatusStyle(status) {
  const s = (status || "").toLowerCase();

  if (s.includes("present")) {
    return "background-color: #DEFFF6; color: #10B981; border: 1px solid #10B981;";
  } else if (s.includes("absent")) {
    return "background-color: #FFF4F4; color: #EB4444; border: 1px solid #EB4444;";
  } else if (s.includes("late")) {
    return "background-color: #F4E7FF; color: #A251E2; border: 1px solid #A251E2;";
  } else if (s.includes("paid leave")) {
    return "background-color: #FFF9F3; color: #FF8918; border: 1px solid #FF8918;";
  } else if (s.includes("weekly off")) {
    return "background-color: #FFF3F7; color: #FF498A; border: 1px solid #FF498A;";
  } else if (s.includes("company holiday")) {
    return "background-color: #EFF3FF; color: #577FFB; border: 1px solid #577FFB;";
  } else if (s.includes("mismatch")) {
    return "background-color: #E0FCFF; color: #15C3D9; border: 1px solid #15C3D9;";
  } else if (s.includes("half day")) {
    return "background-color: #f0f3b8; color: #797708; border: 1px solid #797708;";
  } else if (s.includes("early")) {
    return "background-color: #FCFFEC; color: #A4BC0E; border: 1px solid #A4BC0E;";
  } else {
    return "background-color: #f3f4f6; color: #374151; border: 1px solid #d1d5db;";
  }
}

function break_inout_daily(dailydate) 
    {
        // console.log(recid + 'yashhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh');
        var getUrl = window.location;
        var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
        baseurl = baseurl.split("pages")[0];
        var cloudcode =  window.targetcloud;
        var username =  window.targetuser;
        var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

        // var dailydate = dailydate;
        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Break_Journey_Day@d@Palanisamy%20K@d@2025-01-31@d@
        var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Break_Journey_Day@d@${encodeURIComponent(username)}@d@${encodeURIComponent(dailydate)}@d@${tokenParam}`;
        var data = callajax(urltotal);
        data = JSON.parse(data);

        var breakcontainer = document.getElementById("break_journey_container");
        breakcontainer.innerHTML = ""; 

        if (data[0].txt == "txt is null") {
            breakcontainer.innerHTML = "<div>No Data Found</div>";

            document.getElementById("break_sign_in_time").innerText = "--";
            document.getElementById("break_sign_out_time").innerText = "--";
            // document.getElementById("break_hours_till_now").innerText = "--";
            // document.getElementById("break_break_time").innerText = "--";
            // document.getElementById("break_excluding_break").innerText = "--";
            return;
        }

        data = JSON.parse(data[0].txt);

        document.getElementById("break_sign_in_time").innerText = data[0].sign_in_time || '--';
        document.getElementById("break_sign_out_time").innerText = data[0].sign_out_time || '--';
        document.getElementById("break_hours_till_now").innerText = data[0].hours_till_now || '--';
        document.getElementById("break_break_time").innerText = data[0].break_time || '--';
        document.getElementById("break_excluding_break").innerText = data[0].excluding_break || '--';
        // document.getElementById("hours_till_now").innerText = data[0].hours_till_now || '--';
        // document.getElementById("break_time").innerText = data[0].break_time || '--';
        // document.getElementById("excluding_break").innerText = data[0].excluding_break || '--';

        var field = "";
        for (var i = 0; i < data.length; i++) {
                var intimebreak = data[i].break_in;
                if (intimebreak === null || intimebreak === undefined) {
                    continue; // Skip this iteration if break_in is null
                }
                else{
                        var breakInTime = data[i].break_in ? data[i].break_in.split("T")[1].split(".")[0] : "--";
                        var breakOutTime = data[i].break_out_time ? data[i].break_out_time.split("T")[1].split(".")[0] : "--";
                        var breakHr = data[i].break_hr ? data[i].break_hr.split(".")[0] : "--";
                        
                        field += `
                            <div class="row mb-3">
                                <div class="col-md-4">
                                    <div>Break In Time: <span style="font-weight: 600;">${breakInTime || '--'}</span></div>
                                </div>
                                <div class="col-md-4">
                                    <div>Break Out Time: <span style="font-weight: 600;">${breakOutTime || '--'}</span></div>
                                </div>
                                <div class="col-md-4">
                                    <div>Break Time: <span style="font-weight: 600;">${breakHr || '--'}</span></div>
                                </div>
                            </div>
                        `;
                    }
                    breakcontainer.innerHTML = field;
                }
    }

        // function break_journey_tbl_detail() 
        // {
        //     var field = '';
        //     var getUrl = window.location;
        //     var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
        //     baseurl = baseurl.split("pages")[0];
        //     var cloudcode =  window.targetcloud;
        //     var username =  window.targetuser;
            
        //     var selectedMonth = document.getElementById("months").value; // Get selected value from dropdown
        //     var monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
        //     var [monthName, year] = selectedMonth.split(" "); 
        //     var monthIndex = monthNames.indexOf(monthName);  
        //     var startDate = `${year}-${(monthIndex + 1).toString().padStart(2, '0')}-01`;
        //     var lastDay = new Date(year, monthIndex + 1, 0).getDate(); // Get last day of the month
        //     var endDate = `${year}-${(monthIndex + 1).toString().padStart(2, '0')}-${lastDay}`;

        //     //https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Break_Journey_Month@d@Palanisamy%20K@d@2025-01-01@d@2025-01-31@d@
        //     var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Break_Journey_Month@d@${encodeURIComponent(username)}@d@${startDate}@d@${endDate}@d@`;
        //     data = callajax(urltotal);
        //     data = JSON.parse(data);
        //     if (data[0].txt == "txt is null") 
        //     {
        //         field += `<tr>
        //                         <td colspan="11" style="text-align: center;">No Data Found</td>
        //                     </tr>`;
        //         document.getElementById("break_journey_tbody").innerHTML=field;
        //         return;
        //     }
        //     else
        //     {
        //         data = JSON.parse(data[0].txt);
        //         document.getElementById("breakjourney_empname").innerText = data[0].employee_name || '--';
        //         document.getElementById("breakjourney_designation").innerText = data[0].designation || '--';
        //         document.getElementById("breakjourney_empcode").innerText = data[0].employee_code || '--';
        //         document.getElementById("breakjourney_branch").innerText = data[0].branch_name || '--';
        //         document.getElementById("breakjourney_project").innerText = data[0].project || '--';
        //         document.getElementById("breakjourney_reportingmanager").innerText = data[0].reporting_manager || '--'; 
        //         for(var i=0;i<data.length;i++)
        //         var signIntime = item.sign_in_time ? item.sign_in_time.split(":").slice(0, 2).join(":") : "--";
        //         var breakhr = item.break_hr ? item.break_hr.split(":").slice(0, 2).join(":") : "--";
        //         var breakInTime = item.break_in ? item.break_in.split("T")[1].split(".")[0].split(":").slice(0, 2).join(":") : "--";
        //         var breakOutTime = item.break_out_time ? item.break_out_time.split("T")[1].split(".")[0].split(":").slice(0, 2).join(":") : "--";
        //         {
        //             field += `<tr>
        //                         <td>${data[i].date}</td>
        //                         <td>${data[i].sign_in_login_type}</td>
        //                         <td>${sign_intime}</td>
        //                         <td>${data[i].sign_out_time}</td>
        //                         <td>${data[i].workedhrs}</td>
        //                         <td>${breakInTime}</td>
        //                         <td>${data[i].break_in_location}</td>
        //                         <td>${breakOutTime}</td>
        //                         <td>${data[i].break_out_location}</td>
        //                         <td>${breakhr}</td>
        //                         <td>${data[i].break_count}</td>
        //                     </tr>`;
        //         }
        //         document.getElementById("break_journey_tbody").innerHTML=field;
        //     }
        // }

        function break_journey_tbl_detail() {
            var field = '';
            var getUrl = window.location;
            var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
            baseurl = baseurl.split("pages")[0];
            var cloudcode =  window.targetcloud;
            var username =  window.targetuser;
            var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

            var selectedMonth = document.getElementById("months").value; // Get selected value from dropdown
            var monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
            var [monthName, year] = selectedMonth.split(" "); 
            var monthIndex = monthNames.indexOf(monthName);

            if (monthIndex === -1) {
                console.error("Invalid month selected");
                return;
            }

            var startDate = `${year}-${(monthIndex + 1).toString().padStart(2, '0')}-01`;
            var lastDay = new Date(year, monthIndex + 1, 0).getDate(); // Get last day of the month
            var endDate = `${year}-${(monthIndex + 1).toString().padStart(2, '0')}-${lastDay}`;

            var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Break_Journey_Month@d@${encodeURIComponent(username)}@d@${startDate}@d@${endDate}@d@${tokenParam}`;

            var data;
            try {
                data = callajax(urltotal);
                data = JSON.parse(data);
            } 
            catch (error) {
                console.error("Error parsing JSON data:", error);
                return;
            }

            if (!data || !Array.isArray(data) || data.length === 0 || data[0].txt === "txt is null") {
                field += `<tr>
                            <td colspan="11" style="text-align: center;"> 
                                <div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 165px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>    
                            </td>
                        </tr>`;
                document.getElementById("break_journey_tbody").innerHTML = field;
                return;
            }

            try {
                data = JSON.parse(data[0].txt);

                document.getElementById("breakjourney_empname").innerText = data[0]?.employee_name || '--';
                document.getElementById("breakjourney_designation").innerText = data[0]?.designation || '--';
                document.getElementById("breakjourney_empcode").innerText = data[0]?.employee_code || '--';
                document.getElementById("breakjourney_branch").innerText = data[0]?.branch_name || '--';
                document.getElementById("breakjourney_project").innerText = data[0]?.project || '--';
                document.getElementById("breakjourney_reportingmanager").innerText = data[0]?.reporting_manager || '--';

                data.forEach(item => {
                    // Function to extract HH:MM:SS from time strings
                    function formatTime(timeStr) {
                        return timeStr ? timeStr.split(".")[0] : "--";
                    }

                    function formatDateTime(dateTimeStr) {
                        return dateTimeStr ? dateTimeStr.split("T")[1].split(".")[0] : "--";
                    }

                    var signIntime = formatTime(item.sign_in_time);
                    var signOutTime = formatTime(item.sign_out_time);
                    var breakhr = formatTime(item.break_hr);
                    var breakInTime = formatDateTime(item.break_in);
                    var breakOutTime = formatDateTime(item.break_out_time);
                    var workedhr = formatTime(item.workedhrs);

                    field += `<tr>
                                <td>${item.date || '--'}</td>
                                <td>${item.sign_in_login_type || '--'}</td>
                                <td>${signIntime}</td>
                                <td>${signOutTime}</td>
                                <td>${workedhr}</td>
                                <td>${breakInTime}</td>
                                <td>${item.break_in_location || '--'}</td>
                                <td>${breakOutTime}</td>
                                <td>${item.break_out_location || '--'}</td>
                                <td>${breakhr}</td>
                                <td>${item.break_count || '--'}</td>
                            </tr>`;
                });
                
                document.getElementById("break_journey_tbody").innerHTML = field;

            } 
            catch (error) {
                console.error("Error processing data:", error);
            }
        }


function leave()
{
    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
    var monthnumber = month.indexOf($("#months").val().split(" ")[0]);
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#months").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    firstdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    lastdate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    firstdate = encodeURIComponent(firstdate); // window.targetuser
    lastdate = encodeURIComponent(lastdate); // window.targetuser
    var fild ="";
    var getUrl = window.location;   
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=hrms&ids=valuestring/&valuestring=Attedance_Report@d@ERP%20Admin@d@2000-01-30@d@2024-01-31@d@@d@@d@
    var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${cloudcode}&ids=valuestring/&valuestring=leave_count@d@${username}@d@2000-01-01@d@${lastdate}@d@${tokenParam}`;
    data = callajax(url);
    data = JSON.parse(data);
    if("txt is null" == data[0].txt)
    {
        var header ='<div style="display:flex; flex-direction:column; align-items:center; height: 100%;justify-content: center;gap: 10px;"><img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
        document.getElementById("table-leave").innerHTML = header;
        return;
    }
    data = JSON.parse(data[0].txt);
    var header ='<table id="attendance_report_table" class="table">'+
    '<thead>'+
    '  <tr style="background: #E8ECF9;">'+
    '    <th scope="col" style="font-size: 12px; color:black; font-weight: 500;">Used</th>'+
    '    <th scope="col" style="font-size: 12px; color:black; font-weight: 500;">Leave Status '+$("#months").val().split(" ")[1]+'</th>'+
    '    <th scope="col" style="font-size: 12px; color:black; font-weight: 500;">Balance</th>'+
    '  </tr>'+
    '</thead>'+
    '<tbody id="table-leave-tbody"></tbody>';
    document.getElementById("table-leave").innerHTML = header;
    var tablebody ="";
    my_color_hascode_arr = '#B0E0E6,#ffc3a0,#E67451,#1589FF,#728C00,#56A5EC,#E77471,#FF6347,#F87431,#E799A3,#E66C2C,#800080,#F660AB,#E238EC,#7575CF,#800000,#3090C7,#B041FF,#4E9258,#DA8A67,#F8B88B,#468499,#FF7722,#B048B5,#3EA99F,#C24641,#66cdaa,#822EFF,#FF7900,#E5E4E2,#AB784E,#3CB371,#CB6D51,#ADDFFF,#14A3C7,#E0E5E5,#C0C6C7,#93FFE8,#bada55,#FDEEF4,#C6DEFF,#1569C7,#B76734,#5CB3FF,#FFFF33,#EDDA74,#888B90,#5453A6,#00827F,#E4287C,#6C2DC7,#F9B7FF,#F9A7B0,#c39797,#F08080,#16E2F5,#DCD0FF,#E6E6FA,#F9966B,#B93B8F,#E78A61,#966F33,#FFB6C1,#C6AEC7,#6A0DAD,#A70D2A,#F0E9D6,#50EBEC,#C12283,#F4A460,#77BFC7,#C34A2C,#1B8A6B,#CD7F32,#C9AE5D,#F2A2E8,#9B9A96,#E9967A,#faebd7,#E56717,#967BB6,#E8ADAA,#B09FCA,#FFFACD,#B666D2,#F75D59,#F89880,#9E4638,#728fce,#C25A7C,#E0FFFF,#3BB9FF,#D291BC,#12AD2B,#7F38EC,#CC338B,#157DEC,#98AFC7,#FF4500,#EAC117,#FBB917,#FFF9E3,#E3319D,#E9CFEC,#95B9C7,#20b2aa,#737CA1,#BA55D3,#6698FF,#438D80,#728FCE,#EAEEE9,#CA226B,#9D00FF,#38ACEC,#A0D6B4,#8EEBEC,#a0db8e,#F778A1,#FF8674,#2554C7,#C9BE62,#8B008B,#A74AC7,#9E7BFF,#FF77FF,#AF9B60,#306EFF,#C58917,#7FE817,#8A4117,#D16587,#1AA260,#B0CFDE,#FCDFFF,#BDEDFF,#FF69B4,#003366,#C9C0BB,#57FEFF,#FEF0E3,#E38AAE,#A0CFEC,#FFA500,#5539CC,#9932CC,#4CC417,#EE9A4D,#54C571,#F88158,#E75480,#FA8072,#F98B88,#00FF80,#D891EF,#6960EC,#BAB86C,#7E587E,#F67280,#DA1884,#E55451,#b4eeb4,#E0B0FF,#FF8C00,#50C878,#A17188,#40e0d0,#915F6D,#52595D,#665D1E,#CCCCFF,#7C9D8E,#B6B6B6,#16F529,#E56E94,#ffc0cb,#736AFF,#E42217,#B4CFEC,#EB5406,#ff80ed,#93E9BE,#C04000,#2B65EC,#66CDAA,#1974D2,#ffd700,#B87333,#08A04B,#8B8000,#79BAEC,#F5E216,#9F8C76,#A8A9AD,#01F9C6,#F6358A,#C35817,#C5908E,#E6A9EC,#FF6700';
    my_color_hascode_arr = my_color_hascode_arr.split(",");
    for(var z=0;z<data.length;z++)
    {
        var index = z + 1;
        var color_code = my_color_hascode_arr[z];
        // option += '<option value="'+data[i].Project_Name+'">'+data[i].Project_Name+'</option>';
        var field = '<tr>';
        var result = ((isNaN(data[z].used)?0:data[z].used) / (isNaN(data[z].total)?0:data[z].total)) * 100;

        field += '<th scope="row" style="font-size: 12px;text-align: center;">'+data[z].used+'</th>'+
            '<td style="font-size: 12px;"><span style="gap: 5px;"><i class="fa-solid fa-circle fa-2xs" style="color:'+color_code+'; margin-right: 10px;"></i></span><span>'+data[z].typeofleave+'</span>'+
            '<div style="margin-bottom: 5px;background: #ecebeb;border-radius: 50px;">'+
            '<div class="progress-bar bg-primary" role="progressbar" style="width: '+result+'%; max-width: 100%; height: 7px;border-radius: 50px;background-color:'+color_code+' !important;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div></div>'+
            '</td><td style="font-size: 12px;">'+data[z].balance+'</td>';
        field += '</tr>';
        tablebody += field;
    }
    document.getElementById("table-leave-tbody").innerHTML = tablebody;
    // option = '<option value="%">All</option>'+option; 
    // $(".attendance_report_table").append(row); 
}
function user_name(){
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    //https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Employee_code_name@d@Tushar%20Sahebrao%20More@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Employee_code_name@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    if(data[0].txt === "txt is null" || data[0].txt === null || data[0].txt === undefined)
    {
        return;
    }
    data = JSON.parse(data[0].txt);
    // console.log(data,'employee name.......')
    var employee_code = data[0].employee_code;
    var employee_name = data[0].employee_name;

    leave_history(employee_code,employee_name)
    leaveutilisedcount(employee_code,employee_name)
    totalleavecount(employee_code,employee_name)
}
function leave_history(employee_code,employee_name){
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var employee_code = employee_code;
    var employee_name = employee_name;
    var today = new Date();
    var year = today.getFullYear();
    var startYear = (today.getMonth() + 1 >= 4) ? year : year - 1; 
    var endYear = startYear + 1;

    var formattedStartDate = startYear + '-04-01'; 
    var formattedEndDate = endYear + '-03-31';
    //https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_history@d@10281@d@TUSHAR%20SAHEBRAO%20MORE@d@2024-04-01@d@2025-03-31@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_history@d@${encodeURIComponent(employee_code)}@d@${encodeURIComponent(employee_name)}@d@2000-01-01@d@${encodeURIComponent(formattedEndDate)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    var field = '';
    if(data[0].txt == "txt is null" || data[0].txt == null || data[0].txt == undefined) 
    {
        field = `<tr style="font-size:20px;text-align:center;font-weight: 500;"><td colspan="7"><div style="display:flex; flex-direction:column; align-items:center; height: 100%;justify-content: center;gap: 10px;"><img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></td></tr>`;
        document.getElementById("leave_history_customtable").innerHTML = field;
        return;
    }
    data = JSON.parse(data[0].txt);
    for (var i = 0; i < data.length; i++)
    {
        field += 
        `<tr>
            <td>${data[i].created_date ?? ''}</td>
            <td>${data[i].leave_type ?? ''}</td>
            <td>${data[i].no_of_days ?? ''}</td>
            <td>${data[i].leave_start_date ?? ''}</td>
            <td>${data[i].leave_end_date ?? ''}</td>
            <td>${data[i].leave_ap_rj_date ?? ''}</td>
            <td> ${
                data[i].state == "Applied" 
                ? `<div style="border: 1px solid #F59E0B; background: #FFF8E1; border-radius: 8px; padding: 5px; color: #F59E0B; width: max-content; gap: 4px; display: flex; font-size:13px; text-align: -webkit-center;">
                    Applied
                </div>`
                : data[i].state == "Approved"
                ? `<div style="border: 1px solid #10B981; background: #DEFFF6; border-radius: 8px; padding: 5px; color: #10B981; width: max-content; gap: 4px; display: flex; font-size:13px; text-align: -webkit-center;">
                    Approved
                </div>`
                : data[i].state == "Sanctioned"
                ? `<div style="border: 1px solid #F59E0B; background: #FFF8E1; border-radius: 8px; padding: 5px; color: #F59E0B; width: max-content; gap: 4px; display: flex; font-size:13px; text-align: -webkit-center;">
                    Sanctioned
                </div>`
                : data[i].state == "Pending"
                ? `<div style="border: 1px solid #F59E0B; background: #FFF8E1; border-radius: 8px; padding: 5px; color: #F59E0B; width: max-content; gap: 4px; display: flex; font-size:13px; text-align: -webkit-center;">
                    Pending
                </div>`
                : data[i].state == "Rejected"
                ? `<div style="border: 1px solid #EB4444; background: #FFF4F4; border-radius: 8px; padding: 5px; color: #EB4343; width: max-content; gap: 4px; display: flex; font-size:13px; text-align: -webkit-center;">
                    Rejected
                </div>`
                : data[i].state == "Credited"
                ? `<div style="border: 1px solid #F59E0B; background: #FFF8E1; border-radius: 8px; padding: 5px; color: #F59E0B; width: max-content; gap: 4px; display: flex; font-size:13px; text-align: -webkit-center;">
                    Credited
                </div>`
                : data[i].state ?? '' 
            }</td>
        </tr>`
    }
    document.getElementById("leave_history_customtable").innerHTML=field;
}

function leaveutilisedcount(employee_code,employee_name){
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var employee_code = employee_code;
    var employee_name = employee_name;
    
    //https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Total_Leave_taken@d@10281@d@TUSHAR%20SAHEBRAO%20MORE@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Total_Leave_taken@d@${encodeURIComponent(employee_code)}@d@${encodeURIComponent(employee_name)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    var field = '';
    if(data[0].txt == "txt is null" || data[0].txt == null || data[0].txt == undefined) 
    {
        document.getElementById("leaves_utilised_count").innerText = '0';
        return;
    }
    data = JSON.parse(data[0].txt);
    document.getElementById("leaves_utilised_count").innerText = data[0].no_of_days;
    calculateLeaveBalance();
}
function totalleavecount(employee_code,employee_name){
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var employee_code = employee_code;
    var employee_name = employee_name;
    
    //https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Total_Leave_add@d@10281@d@TUSHAR%20SAHEBRAO%20MORE@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Total_Leave_add@d@${encodeURIComponent(employee_code)}@d@${encodeURIComponent(employee_name)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    var field = '';
    if(data[0].txt == "txt is null" || data[0].txt == null || data[0].txt == undefined) 
    {
        document.getElementById("total_leaves_count").innerText = '0';
        return;
    }
    data = JSON.parse(data[0].txt);
    document.getElementById("total_leaves_count").innerText = data[0].no_of_days;
    calculateLeaveBalance();
}
function calculateLeaveBalance() {
    var totalLeaves = parseFloat(document.getElementById("total_leaves_count").innerText) || 0;
    var utilisedLeaves = parseFloat(document.getElementById("leaves_utilised_count").innerText) || 0;
    
    var leaveBalance = totalLeaves - utilisedLeaves;
    
    if (Number.isInteger(leaveBalance)) {
        document.getElementById("leaves_balance_count").innerText = leaveBalance;
    } else {
        document.getElementById("leaves_balance_count").innerText = leaveBalance.toFixed(2);
    }
}


function PendingleaveApproval()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=hrms&ids=valuestring/&valuestring=pending_leave_approval@d@Mansi%20Rane@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${cloudcode}&ids=valuestring/&valuestring=pending_leave_approval@d@${username}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    if("txt is null" == data[0].txt)
    {
        field = `<div style="justify-content: center;display: flex;font-size: 12px;flex-direction: column;align-items: center;height: 100%; gap: 10px;">
                    <img src="./images/data_not_found.svg" alt="" class="no-data-image">
                    <div class="no-data">Data Not Found</div>
                </div>`
        document.getElementById("PendingleaveApproval").innerHTML = field; 
        return;
    }
    data = JSON.parse(data[0].txt);//JSON.parse(data[0]);    
    var field ="";
    for(a=0;a<data.length;a++)
    {
        const startDateParts = data[a].date.split(' ');
        const endDateParts = data[a].end_date.split(' ');

        const startDate = new Date(`${startDateParts[1]} ${startDateParts[0]}, ${startDateParts[2]}`);
        const endDate = new Date(`${endDateParts[1]} ${endDateParts[0]}, ${endDateParts[2]}`);

        const diffTime = Math.abs(endDate - startDate);
        let diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

        if (diffDays === 0) {
            diffDays = 1;
        }

        let dateDifference = '';
        if (diffDays < 7) {
            dateDifference = `${diffDays} day${diffDays > 1 ? 's' : ''}`;
        } else if (diffDays === 7) {
            dateDifference = '1 week'; // Exactly 1 week
        } else {
            const weeks = Math.floor(diffDays / 7);
            const remainingDays = diffDays % 7;
            dateDifference = `${weeks} week${weeks > 1 ? 's' : ''}` + (remainingDays ? ` and ${remainingDays} day${remainingDays > 1 ? 's' : ''}` : '');
        }

        field += `<li class="item">
                    <div>
                        <div style="display: flex;justify-content: space-between;">
                            <div>${data[a].reason}</div>
                            <div><span>${data[a].leave_type}</span> | <span>${data[a].days} Days</span></div>
                        </div>
                    </div>
                        <div style="display: flex;justify-content: space-between;align-items: center;">
                        <div><span>${data[a].date}</span> to <span>${data[a].end_date}</span></div>
                        <div>
                            <div style="border: 1px solid #10B981;background: #DEFFF6;border-radius: 8px;padding: 5px;color: #10B981;width: max-content;gap: 4px;display: flex;font-size: small;">${data[a].status}</div>
                        </div>
                    </div> 
                </li>`                                        
    }
    document.getElementById("PendingleaveApprovallist").innerHTML = field;
}

function Upcoming_Birthday()
{
    var fild  = "";
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Upcoming_Birthday_List@d@Mansi%20Rane@d@
    // let urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${cloudcode}&ids=valuestring/&valuestring=upcoming_birthday@d@${username}@d@`;
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Upcoming_Birthday_List@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    var random = parseInt(Math.random() * (9999999 - 999) + 999);
    if (!data || data.length === 0 || data[0].txt === "txt is null")
    {
        fild = '<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 147px; gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
        document.getElementsByClassName("UpcomingBirthdaydiv")[0].innerHTML = fild;
    }
    else
    {
        data = JSON.parse(data[0].txt);
        for (var i = 0; i < data.length; i++)
        {
            var random = parseInt(Math.random() * (9999999 - 999) + 999);
            // fild +=`<li class="item" onclick="birthdaymailopenPopup(\'birthdaysidenav_new\',\''+data[i].emply_name+'\',\''+data[i].dof_birth+'\',\''+data[i].department+'\',\''+data[i].designation+'\',\''+data[i].email_id+'\')" style="cursor:pointer;">
            fild +=`<li class="item" data-bs-toggle="modal" data-bs-target="#send_wish_popup" style="cursor:pointer;" onclick="open_wishing_modal('Upcoming_Birthday_List_Open','${data[i].id}','${data[i].to_employee_code}','${data[i].from_employee_code}')">
                <div class="d-flex">
                    <div class="itemPicnew">
                        <img src="../uploadshrms/Folder307/${data[i].id}column2965.gif?random=${random}" onerror="this.src=\'./images/userMale.png\'" style="width: 40px; border-radius: 50%; height: 40px;">   
                    </div>      
                    <div class="mr-2" style="display: flex; flex-direction: column; padding-left: 10px;">                
                        <div style="font-size:15px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 120px;" title="${data[i].emply_name}">${data[i].emply_name}</div>        
                        <div style="font-size: 12px;color:grey;">${data[i].designation}</div>       
                    </div> 
                </div>
                <div class="mr-2" style="display: flex;justify-content: flex-end;align-items: center;gap: 10px;">
                    <img src="./images/Cake_Icon.svg" class="n-img" style="width: 20px;">       
                    <div style="font-size: 15px;color: #020188;background: rgb(240 238 255);padding: 7px;border-radius: 10px;width: 75px;justify-content: center;display: flex;">${data[i].dof_birth}</div>      
                </div> 
            </li>`;
        }
        document.getElementById("UpcomingBirthdayslist").innerHTML = fild;
    }
}

function chekin_chek() {
    var getUrl = window.location;
    var baseurl = `${getUrl.protocol}//${getUrl.host}/${getUrl.pathname.split("/")[1]}`;
    baseurl = baseurl.split("pages")[0];

    var cloudcode = window.targetcloud;
    var username = window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Check_In_Enable@d@${encodeURIComponent(username)}@d@`;

    let data = callajax(urltotal);

    try {
        data = JSON.parse(data);

        if (!data || data.length === 0 || data[0].txt === "txt is null" || data[0].txt === "Not Done") {
            chekInFlag = false;
            return;
        }

        // second JSON parse
        let inner = JSON.parse(data[0].txt);

        // Get check enable
        let checkVal = inner[0]?.check_in_enable;
        chekInFlag = checkVal === "yes";

        // Show/Hide bike
        chekInFlag === true
            ? $('.journey-bike').css('display', 'inline-block')
            : $('.journey-bike').css('display', 'none');

        // Build final array with all details
        visitCodes = inner.map(item => ({
            visit_code: item.visit_code,
            project_name: item.project_name,
            customer_name: item.customer_name
        }));


    } catch (err) {
        console.error("Error checking chek in enable", err);
        chekInFlag = false;
    }
}

function sendwish(wishactn,to_emp_code,from_emp_code)
{
    if(wishactn == "Upcoming_Birthday_List_Open")
    {
        wishactn = "Birthday Wish";
    }
    else if(wishactn == "New_Joinee_Detail_Open")
    {
        wishactn = "Welcome Note";
    }
    else if(wishactn == "Award_Detail_Open")
    {
        wishactn = "Congratulations";
    }
    var wishmsg = $("#wish_msg_text_area").val();
    var fild  = "";
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    var cloudcodenew = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : "";

    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Internal_Communication@d@00007@d@10466@d@Birthday Wish@d@Happy Birthday Message@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Internal_Communication@d@${encodeURIComponent(to_emp_code)}@d@${encodeURIComponent(from_emp_code)}@d@${encodeURIComponent(wishactn)}@d@${encodeURIComponent(wishmsg)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    if(data.length == 0 || data[0].txt == "txt is null")
    {
        return;
    }
    data = JSON.parse(data[0].txt);
    if(data[0].status == "SUCCESSFULL")
    {
        showToast('Mail Sent Successfully');
        $.ajax({
            url :baseurl+"SaveFormField.do?actn=SaveDynamicStatePending&formid=4179&editids=state/&selectedids="+data[0].id+"&jvals=4089@j@" + cloudcodenew + tokenParam,
            type: 'POST',
            success : function(data) 
            {
                //showToast('Mail Sent Successfully!!!');
            },
            error:function(e)
            {
            }
        });
        $("#send_wish_popup").modal("hide");
    }
    else
    {
        showToast('Mail Sent UnSuccessfully');
        $("#send_wish_popup").modal("hide");
    }
}
function callingall()
{
    getleaveandattedancecount();
    attedance_report();
    leave();

    document.getElementById("data_count").style.display = "none";
}
function user_holiday()
{
    var fild = "";
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=holiday_calender_list@d@Mukund%20Narayan%20Raje@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=holiday_calender_list@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    if(data[0].txt == "txt is null")
    {
        // document.getElementById("holiday_cal").innerText = "No Holiday Found.";
        return;
    }
    data = JSON.parse(data[0].txt);
    var username_holiday = data[0].holiday_calender_list;
    holiday_cal(username_holiday)

}
function attendanceShiftData()
{
    var fild = "";
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=itaplhr&ids=valuestring/&valuestring=my_attedance@d@employee_shift_detail@d@Dhruv%20Patel@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=my_attedance@d@employee_shift_detail@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    data = JSON.parse(data[0].txt);
    
    document.getElementById('shiftname').innerText = (data[0] && data[0].shift_name) ? data[0].shift_name : '--';
    document.getElementById('shiftbranchname').innerText = (data[0] && data[0].branch) ? data[0].branch : '--';
    document.getElementById('shiftApplicableFromDate').innerText = (data[0] && data[0].shift_applicable_from_date) ? data[0].shift_applicable_from_date : '--';
    document.getElementById('shiftAttendanceCalculation').innerText = (data[0] && data[0].attendance_calc_method) ? data[0].attendance_calc_method : '--';
    document.getElementById('shiftInTime').innerText = (data[0] && data[0].in_time) ? data[0].in_time : '--';
    document.getElementById('shiftOutTime').innerText = (data[0] && data[0].out_time) ? data[0].out_time : '--';
    document.getElementById('shiftMinimumWorkHours').innerText = (data[0] && data[0].minimum_working_hrs) ? data[0].minimum_working_hrs : '--';
    document.getElementById('shiftGraceTimeAllowed').innerText = (data[0] && data[0].grace_time_allowed) ? data[0].grace_time_allowed : '--';
    document.getElementById('shiftLateMarkAllowed').innerText = (data[0] && data[0].late_mark_allowed) ? data[0].late_mark_allowed : '--';
    document.getElementById('shiftHalfDayAllowed').innerText = (data[0] && data[0].half_day_allowed) ? data[0].half_day_allowed : '--';
    document.getElementById('shiftEarlySignOutAllowed').innerText = (data[0] && data[0].early_signout_count) ? data[0].early_signout_count : '--';
    document.getElementById('shiftOvertimeAllowed').innerText = (data[0] && data[0].overtime_allowed) ? data[0].overtime_allowed : '--';
    document.getElementById('shiftWeeklyOffDays').innerText = (data[0] && data[0].weekly_off) ? data[0].weekly_off : '--';

    
}

function holiday_cal(username_holiday)
{                     
    var fild = "";
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    document.getElementById("holiday_name").innerText = username_holiday;

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65752&cloudcode=hrms&ids=valuestring/&valuestring=Company_Holiday_list@d@Mukund%20Narayan%20Raje@d@Maharashtra%20Holiday@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Company_Holiday_list@d@${encodeURIComponent(username)}@d@${encodeURIComponent(username_holiday)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    if(data[0].txt == "txt is null")
    {
        document.getElementById("holiday_cal").innerHTML = '<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 300px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
        return;
    }
    data = JSON.parse(data[0].txt);
    var noticebody = "";
    for (var i = 0; i < data.length; i++)
    {
        var temp_date1 = data[i].date;
        temp_date1 = temp_date1.split("-")[0];
        var temp_date2 = data[i].date;
        temp_date2 = temp_date2.split("-")[1]+", "+temp_date2.split("-")[2].substr(2,);
        var temp_date3 = data[i].day_name;
        var holiday_name = data[i].holiday_name;
        noticebody += 
        `<li class="item">
            <div>
                <div style="position: absolute;">
                    <img src="./images/date.svg" alt="" style="width: 46px;"> 
                </div>
                <div style="position: relative;font-size: 12px;color: #ffffff;padding: 8px 4px;line-height: normal;">
                    <div style="font-size: 14px;font-weight: 600;">${temp_date1}</div>
                    <div>${temp_date2}</div>
                </div>
            </div>
            <div style="display:flex;flex-direction:column;text-align:start;">
                <div>${holiday_name.trim()}</div>
                <div>${temp_date3.trim()}</div>
            </div>
        </li>`;
    }
    document.getElementById("holiday_cal").innerHTML = noticebody;
}
function attendance()
{
    $('.attendance_report_card').css('margin-bottom', '1.5rem');
    $(".user-name").children("h6").html($(".user-name").children("h6").html().replaceAll("Milind Shirin", "<b>" +  window.targetuser + "</b>"));
    $("#data_count").css("display", "none");
    dateselector();
    getleaveandattedancecount();
    attedance_report();
    leave();
    PendingleaveApproval();
    Upcoming_Birthday();
    chekin_chek();
    // holiday_state();
}
function present_click()
{
    $('.attendance_report_card').css('margin-bottom', 'unset');
    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
    var monthnumber = month.indexOf($("#months").val().split(" ")[0]);
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#months").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    firstdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    lastdate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    firstdate = encodeURIComponent(firstdate); // window.targetuser
    lastdate = encodeURIComponent(lastdate); // window.targetuser
    var fild ="";
    var getUrl = window.location;   
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=hrms&ids=valuestring/&valuestring=Attedance_Summary_Present@d@Mansi%20Rane@d@2024-02-01@d@2024-02-29@d@
    var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Attedance_Summary_Present@d@${username}@d@${firstdate}@d@${lastdate}@d@${tokenParam}`;
    data = callajax(url);
    data = JSON.parse(data);
    if("txt is null" == data[0].txt)
    {
        var header ='<table id="attendance_report_table" class="table" style="height : 100%; margin:0">'+
        `<colgroup>
        <col width="8.33%">
            <col width="8.33%">
            <col width="8.33%">
            <col width="5.33%">
            <col width="8.33%">
            <col width="22.66%">
            <col width="8.33%">
            <col width="5.33%">
            <col width="8.33%">
            <col width="8.33%">
        </colgroup>`+
        '<thead>'+
            '<tr>'+
                '<th style="font-size:12px;">Date</th>'+
                '<th style="font-size:12px;">Login Type</th>'+
                '<th style="font-size:12px;">Sign in Location</th>'+
                '<th style="font-size:12px;">Sign in Project</th>'+
                '<th style="font-size:12px;">Sign in Photo</th>'+
                '<th style="text-align: center; font-size:12px;">Attendance</th>'+
                '<th style="font-size:12px;">Sign out Location</th>'+
                '<th style="font-size:12px;">Sign out Project</th>'+
                '<th style="font-size:12px;">Sign out Photo</th>'+
                '<th style="font-size:12px;">Status</th>'+
            '</tr>'+
        '</thead>' + '<tbody><tr style="font-size:12px;text-align:center;font-weight: 500;"><td colspan="9" style="height: 407px;"><div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></td></tr></tbody>';
        document.getElementById("attendance_report_table_data").innerHTML = header;
        counts = '<div style="text-align: center;margin: 10px 0px;font-size:12px;gap: 10px;display: flex;justify-content: center;align-items: center;">Your Present Days<span style="display: inline-flex;align-items: center;justify-content: center;background-color: #FD5A6D;color: white;font-size: 14px;font-weight: 600;border-radius: 50%;min-width: 32px;height: 32px;padding: 0 8px;aspect-ratio: 1 / 1;">0</span></div>';
        document.getElementById("data_count").innerHTML = counts;
        $("#data_count").css("display", "block");
        return;
    }
    data = JSON.parse(data[0].txt);//JSON.parse(data[0]);

    var header ='<table id="attendance_report_table" class="table">'+
        `<col width="8.33%">
            <col width="8.33%">
            <col width="8.33%">
            <col width="5.33%">
            <col width="8.33%">
            <col width="22.66%">
            <col width="8.33%">
            <col width="5.33%">
            <col width="8.33%">
            <col width="8.33%">
        </colgroup>`+
        '<thead>'+
            '<tr>'+
                '<th style="font-size:12px;">Date</th>'+
                '<th style="font-size:12px;">Login Type</th>'+
                '<th style="font-size:12px;">Sign in Location</th>'+
                '<th style="font-size:12px;">Sign in Project</th>'+
                '<th style="font-size:12px;">Sign in Photo</th>'+
                '<th style="text-align: center; font-size:12px;">Attendance</th>'+
                '<th style="font-size:12px;">Sign out Location</th>'+
                '<th style="font-size:12px;">Sign out Project</th>'+
                '<th style="font-size:12px;">Sign out Photo</th>'+
                '<th style="font-size:12px;">Status</th>'+
            '</tr>'+
        '</thead>'+
        '<tbody>';
    var tablebody ="";                        
    for(var i=0;i<data.length;i++)
    {
        var index = i + 1;
        var field = '<tr>';
        var random = parseInt(Math.random() * (9999999 - 999) + 999);
        
        var intime = data[i].intime;
        intime = intime.split('.')[0];
        var outtime = data[i].outtime;
        outtime = outtime.split('.')[0];
        field += 
        '<td style="font-size:12px;" id="dat'+(i+1)+'">'+data[i].day+'</td>'+
        '<td style="font-size:12px;">'+data[i].user_login_type+'</td>'+
        '<td style="font-size:12px;" id="loc'+(i+1)+'"><p title="'+fixUtf8Smart(data[i].sign_in_location)+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+fixUtf8Smart(data[i].sign_in_location)+'</p></td>'+
        '<td style="font-size:12px;" id="pro'+(i+1)+'"><p title="'+data[i].sign_in_project+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].sign_in_project+'</p></td>'+
        '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66843_signin_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
        '<td style="font-size:12px;" id="att'+(i+1)+'"><div class="table-line-bar"><div class="line-bar-item full-day"></div></div><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2"><div class="enter-time"><span>IN</span> '+intime+'</div><div class="icon-pic"><i class="fa fa-clock-o" aria-hidden="true"></i></div><div class="exit-time">'+(outtime=="00:00:00"?'':outtime)+'<span '+(outtime=="00:00:00"?'style="color:red;"':'')+'> OUT</span></div></div></td>'+
        '<td style="font-size:12px;" id="loc'+(i+1)+'"><p title="'+data[i].sign_out_location+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].sign_out_location+'</p></td>'+
        '<td style="font-size:12px;" id="pro'+(i+1)+'"><p title="'+data[i].sign_out_project+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].sign_out_project+'</p></td>'+
        '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66844_signout_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
        '<td style="font-size:12px;" id="sta'+(i+1)+'"><div class="status-details d-flex gap-1 align-items-center"><div class="icon"><i class="fa fa-check-circle-o" aria-hidden="true"></i></div>'+data[i].status+'</div></td>'
        
        field += '</tr>';
        tablebody += field;
        document.getElementById("attendance_report_table_data").innerHTML = header+tablebody;
    }
    var count = data.length;
    counts = '<div style="text-align: center;margin: 10px 0px;font-size:12px;gap: 10px;display: flex;justify-content: center;align-items: center;">Your Present Days <span style="display: inline-flex;align-items: center;justify-content: center;background-color: #FD5A6D;color: white;font-size: 14px;font-weight: 600;border-radius: 50%;min-width: 32px;height: 32px;padding: 0 8px;aspect-ratio: 1 / 1;">'+count+'</span></div>';
    document.getElementById("data_count").innerHTML = counts;
    $("#data_count").css("display", "block");
}
function weekoff_click()
{
    $('.attendance_report_card').css('margin-bottom', 'unset');
    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
    var monthnumber = month.indexOf($("#months").val().split(" ")[0]);
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#months").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    firstdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    lastdate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    firstdate = encodeURIComponent(firstdate); // window.targetuser
    lastdate = encodeURIComponent(lastdate); // window.targetuser
    var fild ="";
    var getUrl = window.location;   
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=hrms&ids=valuestring/&valuestring=Attedance_Summary_Present@d@Mansi%20Rane@d@2024-02-01@d@2024-02-29@d@
    var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Attedance_Summary_Weekoff@d@${username}@d@${firstdate}@d@${lastdate}@d@${tokenParam}`;
    data = callajax(url);
    data = JSON.parse(data);
    if("txt is null" == data[0].txt)
    {
        var header ='<table id="attendance_report_table" class="table" style="height : 100%; margin:0">'+
        `<colgroup>
            <col width="6%"></col>
            <col width="10%"></col>
            <col width="8%"></col>
            <col width="10%"></col>
            <col width="10%"></col>
        </colgroup>`+
        '<thead>'+
            '<tr>'+
                '<th style="text-align: center; font-size:14px;">From Date</th>'+
                '<th style="text-align: center; font-size:14px;">Attendance</th>'+
                '<th style="text-align: center; font-size:14px;">To date</th>'+
                '<th style="font-size:14px;">Approved By Manager</th>'+
                '<th style="font-size:14px;">Approved By Hr</th>'+
            '</tr>'+
        '</thead>'+ '<tbody><tr style="font-size:20px;text-align:center;font-weight: 500;"><td colspan="6"><div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></i></td></tr></tbody>';
        document.getElementById("attendance_report_table_data").innerHTML = header;

        counts = '<div style="text-align: center;margin: 10px 0px;font-size:12px;gap: 10px;display: flex;justify-content: center;align-items: center;">Your Week Off Days<span style="display: inline-flex;align-items: center;justify-content: center;background-color: #FD5A6D;color: white;font-size: 14px;font-weight: 600;border-radius: 50%;min-width: 32px;height: 32px;padding: 0 8px;aspect-ratio: 1 / 1;">0</span></div>';
        document.getElementById("data_count").innerHTML = counts;
        $("#data_count").css("display", "block");
        return;
    }
    data = JSON.parse(data[0].txt);//JSON.parse(data[0]);

    var header ='<table id="attendance_report_table" class="table">'+
    `<colgroup>
        <col width="50%"></col>
        <col width="50%"></col>
    </colgroup>`+
    '<thead>'+
        '<tr>'+
            '<th style="text-align: center; font-size:14px;">Date</th>'+
            '<th style="text-align: center; font-size:14px;">Attendance</th>'+
            // '<th style="text-align: center; font-size:14px;">To date</th>'+
            // '<th style="font-size:14px;">Approved By</th>'+
            // '<th style="font-size:14px;">Approved By Hr</th>'+
        '</tr>'+
    '</thead>'+
    '<tbody>';
    var tablebody ="";
    for(var i=0;i<data.length;i++)
    {
        var index = i + 1;
        // option += '<option value="'+data[i].Project_Name+'">'+data[i].Project_Name+'</option>';
        var field = '<tr>';
        field += 
            '<td style="font-size:12px;" style="text-align: center;" id="dat'+(i+1)+'">'+data[i].day+'</td>'+                            
            '<td style="font-size:12px; display: flex;justify-content: center;align-items: center;gap: 10px;" id="dat'+(i+1)+'"><div style=" height: 1px; width: 30%; background-color: #CECECD;"></div><div>Weekly Off</div><div style=" height: 1px; width: 30%; background-color: #CECECD;"></div></td>';
            // '<td style="font-size:12px;" style="text-align: center;" id="dat'+(i+1)+'">'+data[i].date+'</td>'+                            
            // '<td style="font-size:12px;" id="sta'+(i+1)+'"><div class="status-details d-flex gap-1 align-items-center"><div class="icon"><i class="fa fa-check-circle-o" aria-hidden="true"></i></div>'+data[i].approved_by+'</div></td>'+
            // '<td style="font-size:12px;" id="sta'+(i+1)+'"><div class="status-details d-flex gap-1 align-items-center"><div class="icon"><i class="fa fa-check-circle-o" aria-hidden="true"></i></div>'+data[i].approved_by_hr+'</div></td>';
        
        field += '</tr>';
        tablebody += field;
        document.getElementById("attendance_report_table_data").innerHTML = header+tablebody;
    }
    var count = data.length;
    counts = '<div style="text-align: center;margin: 10px 0px;font-size:12px;gap: 10px;display: flex;justify-content: center;align-items: center;">Your Week off Days <span style="display: inline-flex;align-items: center;justify-content: center;background-color: #FD5A6D;color: white;font-size: 14px;font-weight: 600;border-radius: 50%;min-width: 32px;height: 32px;padding: 0 8px;aspect-ratio: 1 / 1;">'+count+'</span></div>';
    document.getElementById("data_count").innerHTML = counts;
    $("#data_count").css("display", "block");
}
function absent_click()
{
    $('.attendance_report_card').css('margin-bottom', 'unset');
    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
    var monthnumber = month.indexOf($("#months").val().split(" ")[0]);
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#months").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    firstdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    lastdate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    firstdate = encodeURIComponent(firstdate); // window.targetuser
    lastdate = encodeURIComponent(lastdate); // window.targetuser
    var fild ="";
    var getUrl = window.location;   
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=hrms&ids=valuestring/&valuestring=Attedance_Summary_Present@d@Mansi%20Rane@d@2024-02-01@d@2024-02-29@d@
    var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Attedance_Summary_Absent@d@${username}@d@${firstdate}@d@${lastdate}@d@${tokenParam}`;
    data = callajax(url);
    data = JSON.parse(data);
    if("txt is null" == data[0].txt)
    {
        var header ='<table id="attendance_report_table" class="table" style="height : 100%; margin:0">'+
        `<colgroup>
            <col width="50%"></col>
            <col width="50%"></col>
        </colgroup>`+
        '<thead>'+
            '<tr>'+
            '<th>Date</th>'+
            '<th style="text-align: center;">Attendance</th>'+
            '</tr>'+
        '</thead>'+ '<tbody><tr style="font-size:20px;text-align:center;font-weight: 500;"><td colspan="6"><div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></i></td></tr></tbody>';
        document.getElementById("attendance_report_table_data").innerHTML = header;

        counts = '<div style="text-align: center;margin: 10px 0px;font-size:12px;gap: 10px;display: flex;justify-content: center;align-items: center;">Your Absent Days<span style="display: inline-flex;align-items: center;justify-content: center;background-color: #FD5A6D;color: white;font-size: 14px;font-weight: 600;border-radius: 50%;min-width: 32px;height: 32px;padding: 0 8px;aspect-ratio: 1 / 1;">0</span></div>';
        document.getElementById("data_count").innerHTML = counts;
        $("#data_count").css("display", "block");
        return;
    }
    data = JSON.parse(data[0].txt);//JSON.parse(data[0]);

    var header ='<table id="attendance_report_table" class="table">'+
        `<colgroup>
            <col width="50%"></col>
            <col width="50%"></col>
        </colgroup>`+
        '<thead>'+
            '<tr>'+
                '<th>Date</th>'+
                '<th style="text-align: center;">Attendance</th>'+
            '</tr>'+
        '</thead>'+
        '<tbody>';
    var tablebody ="";
    for(var i=0;i<data.length;i++)
    {
        var index = i + 1;
        // option += '<option value="'+data[i].Project_Name+'">'+data[i].Project_Name+'</option>';
        var field = '<tr>';
        var random = parseInt(Math.random() * (9999999 - 999) + 999);
        field += 
            '<td style="font-size:12px;" id="dat'+(i+1)+'">'+data[i].day+'</td>'+
            // '<td style="font-size:12px;" id="att'+(i+1)+'"><div class="table-line-bar"><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2" style="justify-content: center !important;"><div class="enter-time" style="display: none;"><span>IN</span></div><div class="icon-pic"><i class="fa-solid fa-display-slash fa-sm" aria-hidden="true"></i></div><div class="exit-time" style="display: none;"><span style="color:red;"></span></div></div></div><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2"></div></td>';
            '<td style="font-size:12px; display: flex;justify-content: center;align-items: center;gap: 10px;" id="dat'+(i+1)+'"><div style=" height: 1px; width: 30%; background-color: #CECECD;"></div><div>Absent</div><div style=" height: 1px; width: 30%; background-color: #CECECD;"></div></td>';
            field += '</tr>';
        tablebody += field;
        document.getElementById("attendance_report_table_data").innerHTML = header+tablebody;
    }
    var count = data.length;
    counts = '<div style="text-align: center;margin: 10px 0px;font-size:12px;gap: 10px;display: flex;justify-content: center;align-items: center;">Your Absent Days <span style="display: inline-flex;align-items: center;justify-content: center;background-color: #FD5A6D;color: white;font-size: 14px;font-weight: 600;border-radius: 50%;min-width: 32px;height: 32px;padding: 0 8px;aspect-ratio: 1 / 1;">'+count+'</span></div>';
    document.getElementById("data_count").innerHTML = counts;
    $("#data_count").css("display", "block");
}
function paidleave_click()
{
    $('.attendance_report_card').css('margin-bottom', 'unset');
    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
    var monthnumber = month.indexOf($("#months").val().split(" ")[0]);
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#months").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    firstdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    lastdate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    firstdate = encodeURIComponent(firstdate); // window.targetuser
    lastdate = encodeURIComponent(lastdate); // window.targetuser
    var fild ="";
    var getUrl = window.location;   
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=hrms&ids=valuestring/&valuestring=Attedance_Summary_Present@d@Mansi%20Rane@d@2024-02-01@d@2024-02-29@d@                    
    var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Attedance_Summary_Paid_Leave@d@${username}@d@${firstdate}@d@${lastdate}@d@${tokenParam}`;
    data = callajax(url);
    data = JSON.parse(data);
    if("txt is null" == data[0].txt)
    {
        var header ='<table id="attendance_report_table" class="table" style="height : 100%; margin:0">'+
        `<colgroup>
            <col width="12%"></col>
            <col width="10%"></col>
            <col width="10%"></col>
            <col width="10%"></col>
            <col width="10%"></col>
        </colgroup>`+
        '<thead>'+
        '<tr>'+
        '<th style="text-align:center; font-size:14px;">From Date</th>'+
        '<th style="text-align:center; font-size:14px;">Leave days</th>'+
        '<th style="text-align:center; font-size:14px;">To date</th>'+
        '<th style="font-size:14px;">Approved By</th>'+
        '<th style="font-size:14px;">Status</th>'+
        '</tr>'+
        '</thead>'+ '<tbody><tr style="font-size:20px;text-align:center;font-weight: 500;"><td colspan="6" style="font-size:14px;"> <div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></i></td></tr></tbody>';
        document.getElementById("attendance_report_table_data").innerHTML = header;

        counts = '<div style="text-align: center;margin: 10px 0px;font-size:12px;gap: 10px;display: flex;justify-content: center;align-items: center;">Your Paid Leave Days<span style="display: inline-flex;align-items: center;justify-content: center;background-color: #FD5A6D;color: white;font-size: 14px;font-weight: 600;border-radius: 50%;min-width: 32px;height: 32px;padding: 0 8px;aspect-ratio: 1 / 1;">0</span></div>';
        document.getElementById("data_count").innerHTML = counts;
        $("#data_count").css("display", "block");
        return;
    }
    data = JSON.parse(data[0].txt);//JSON.parse(data[0]);

    var header ='<table id="attendance_report_table" class="table">'+
    `<colgroup>
        <col width="12%"></col>
        <col width="10%"></col>
        <col width="10%"></col>
        <col width="10%"></col>
        <col width="10%"></col>
    </colgroup>`+
    '<thead>'+
            '<tr>'+
            '<th style="text-align:center; font-size:14px;">From Date</th>'+
            '<th style="text-align:center; font-size:14px;">Leave days</th>'+
            '<th style="text-align:center; font-size:14px;">To date</th>'+
            '<th style="font-size:14px;">Approved By</th>'+
            '<th style="font-size:14px;">Status</th>'+
            '</tr>'+
    '</thead>'+
    '<tbody>';
    var tablebody ="";
    for(var i=0;i<data.length;i++)
    {
        var index = i + 1;
        var field = '<tr>';
        field += 
            '<td style="font-size:12px; text-align:center;" id="dat'+(i+1)+'">'+data[i].from_date+'</td>'+
            '<td style="font-size:12px;text-align: center;" id="dat'+(i+1)+'"><div style="display: flex;gap: 10px;align-items: center;text-align: center;justify-content: center;"><span style="display: inline-block; height: 1px; width: 30%; background-color: #E38094; vertical-align: middle;"></span><span style="vertical-align: middle;">'+data[i].attdence+'</span><span style="display: inline-block; height: 1px; width: 30%; background-color: #E38094; vertical-align: middle;"></span></div></td>'+
            '<td style="font-size:12px; text-align:center;" id="dat'+(i+1)+'">'+data[i].to_date+'</td>'+
            '<td style="font-size:12px;" id="sta'+(i+1)+'"><div class="status-details d-flex gap-1 align-items-center justify-content-center"><div class="icon"><i class="fa fa-check-circle-o" aria-hidden="true"></i></div>'+data[i].approved_by+'</div></td>'+
            '<td style="font-size:12px;" id="sta'+(i+1)+'"><div class="status-details d-flex gap-1 align-items-center justify-content-center"></div>'+data[i].status+'</div></td>';
        
        field += '</tr>';
        tablebody += field;
        document.getElementById("attendance_report_table_data").innerHTML = header+tablebody;
    }
    var count = data.length;
    counts = '<div style="text-align: center;margin: 10px 0px;font-size:12px;gap: 10px;display: flex;justify-content: center;align-items: center;">Your Paid Leave Days <span style="display: inline-flex;align-items: center;justify-content: center;background-color: #FD5A6D;color: white;font-size: 14px;font-weight: 600;border-radius: 50%;min-width: 32px;height: 32px;padding: 0 8px;aspect-ratio: 1 / 1;">'+count+'</span></div>';
    document.getElementById("data_count").innerHTML = counts;
    $("#data_count").css("display", "block");
}
function latemarks_click()
{
    $('.attendance_report_card').css('margin-bottom', 'unset');
    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
    var monthnumber = month.indexOf($("#months").val().split(" ")[0]);
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#months").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    firstdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    lastdate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    firstdate = encodeURIComponent(firstdate); // window.targetuser
    lastdate = encodeURIComponent(lastdate); // window.targetuser
    var fild ="";
    var getUrl = window.location;   
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=hrms&ids=valuestring/&valuestring=Attedance_Summary_Late_Mark@d@Mansi%20Rane@d@2024-02-01@d@2024-02-29@d@
    var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Attedance_Summary_Late_Mark@d@${username}@d@${firstdate}@d@${lastdate}@d@${tokenParam}`;
    data = callajax(url);
    data = JSON.parse(data);
    if("txt is null" == data[0].txt)
    {
        var header ='<table id="attendance_report_table" class="table" style="height : 100%; margin:0">'+
        `<colgroup>
        <col width="8.33%">
            <col width="8.33%">
            <col width="8.33%">
            <col width="5.33%">
            <col width="8.33%">
            <col width="22.66%">
            <col width="8.33%">
            <col width="5.33%">
            <col width="8.33%">
            <col width="8.33%">
        </colgroup>`+
        '<thead>'+
            '<tr>'+
                '<th style="font-size:12px;">Date</th>'+
                '<th style="font-size:12px;">Login Type</th>'+
                '<th style="font-size:12px;">Sign in Location</th>'+
                '<th style="font-size:12px;">Sign in Project</th>'+
                '<th style="font-size:12px;">Sign in Photo</th>'+
                '<th style="text-align: center; font-size:12px;">Attendance</th>'+
                '<th style="font-size:12px;">Sign out Location</th>'+
                '<th style="font-size:12px;">Sign out Project</th>'+
                '<th style="font-size:12px;">Sign out Photo</th>'+
                '<th style="font-size:12px;">Status</th>'+
            '</tr>'+
        '</thead>'+ '<tbody><tr style="font-size:12px;text-align:center;font-weight: 500;"><td colspan="10" style="height: 407px;"><div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></td></tr></tbody>';
        document.getElementById("attendance_report_table_data").innerHTML = header;

        counts = '<div style="text-align: center;margin: 10px 0px;font-size:12px;gap: 10px;display: flex;justify-content: center;align-items: center;">Your Late Marks <span style="display: inline-flex;align-items: center;justify-content: center;background-color: #FD5A6D;color: white;font-size: 14px;font-weight: 600;border-radius: 50%;min-width: 32px;height: 32px;padding: 0 8px;aspect-ratio: 1 / 1;">0</span></div>';
        document.getElementById("data_count").innerHTML = counts;
        $("#data_count").css("display", "block");
        return;
    }
    data = JSON.parse(data[0].txt);//JSON.parse(data[0]);

    var header ='<table id="attendance_report_table" class="table">'+
    `<colgroup>
        <col width="8.33%">
        <col width="8.33%">
        <col width="8.33%">
        <col width="5.33%">
        <col width="8.33%">
        <col width="22.66%">
        <col width="8.33%">
        <col width="5.33%">
        <col width="8.33%">
        <col width="8.33%">
    </colgroup>`+
    '<thead>'+
        '<tr>'+
            '<th style="font-size:12px;">Date</th>'+
            '<th style="font-size:12px;">Login Type</th>'+
            '<th style="font-size:12px;">Sign in Location</th>'+
            '<th style="font-size:12px;">Sign in Project</th>'+
            '<th style="font-size:12px;">Sign in Photo</th>'+
            '<th style="text-align: center; font-size:12px;">Attendance</th>'+
            '<th style="font-size:12px;">Sign out Location</th>'+
            '<th style="font-size:12px;">Sign out Project</th>'+
            '<th style="font-size:12px;">Sign out Photo</th>'+
            '<th style="font-size:12px;">Status</th>'+
        '</tr>'+
    '</thead>'+
    '<tbody>';
    var tablebody ="";
    for(var i=0;i<data.length;i++)
    {
        var index = i + 1;
        var field = '<tr>';
        var random = parseInt(Math.random() * (9999999 - 999) + 999);
        var intime = data[i].intime;
        intime = intime.split('.')[0];
        var outtime = data[i].outtime;
        outtime = outtime.split('.')[0];
        field += 
        '<td style="font-size:12px;" id="dat'+(i+1)+'">'+data[i].day+'</td>'+
        '<td>'+data[i].user_login_type+'</td>'+
        '<td style="font-size:12px;" id="loc'+(i+1)+'"><p title="'+data[i].loc+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].loc+'</p></td>'+
        '<td style="font-size:12px;" id="pro'+(i+1)+'"><p title="'+data[i].sign_in_project+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].sign_in_project+'</p></td>'+
        // '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder307/'+data[i].recordid+'column2965.gif?random='+random+'" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
        '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66843_signin_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
        '<td style="font-size:12px;" id="att'+(i+1)+'"><div class="table-line-bar"><div class="line-bar-item full-day"></div></div><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2"><div class="enter-time"><span>IN</span> '+intime+'</div><div class="icon-pic"><i class="fa fa-clock-o" aria-hidden="true"></i></div><div class="exit-time">'+(outtime=="00:00:00"?'':outtime)+'<span '+(outtime=="00:00:00"?'style="color:red;"':'')+'> OUT</span></div></div></td>'+
        '<td style="font-size:12px;" id="loc'+(i+1)+'"><p title="'+data[i].sign_out_location+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].sign_out_location+'</p></td>'+
        '<td style="font-size:12px;" id="pro'+(i+1)+'"><p title="'+data[i].sign_out_project+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].sign_out_project+'</p></td>'+
        '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66843_signin_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
        // '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder307/'+data[i].recordid+'column2965.gif?random='+random+'" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
        '<td style="font-size:12px;" id="sta'+(i+1)+'"><div class="status-details d-flex gap-1 align-items-center"><div class="icon"><i class="fa fa-check-circle-o" aria-hidden="true"></i></div>'+data[i].status+'</div></td>'
        
        field += '</tr>';
        tablebody += field;
        document.getElementById("attendance_report_table_data").innerHTML = header+tablebody;
    }
    var count = data.length;
    counts = '<div style="text-align: center;margin: 10px 0px;font-size:12px;gap: 10px;display: flex;justify-content: center;align-items: center;">Your Late Marks <span style="display: inline-flex;align-items: center;justify-content: center;background-color: #FD5A6D;color: white;font-size: 14px;font-weight: 600;border-radius: 50%;min-width: 32px;height: 32px;padding: 0 8px;aspect-ratio: 1 / 1;">'+count+'</span></div>';
    document.getElementById("data_count").innerHTML = counts;
    $("#data_count").css("display", "block");
}
function halfday_click()
{
    $('.attendance_report_card').css('margin-bottom', 'unset');
    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
    var monthnumber = month.indexOf($("#months").val().split(" ")[0]);
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#months").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    firstdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    lastdate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    firstdate = encodeURIComponent(firstdate); // window.targetuser
    lastdate = encodeURIComponent(lastdate); // window.targetuser
    var fild ="";
    var getUrl = window.location;   
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=hrms&ids=valuestring/&valuestring=Attedance_Summary_Half_Day@d@Mansi%20Rane@d@2024-02-01@d@2024-02-29@d@
    let url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Attedance_Summary_Half_Day@d@${username}@d@${firstdate}@d@${lastdate}@d@${tokenParam}`;
    data = callajax(url);
    data = JSON.parse(data);
    if("txt is null" == data[0].txt)
    {
        var header ='<table id="attendance_report_table" class="table" style="height : 100%; margin:0">'+
        `<colgroup>
            <col width="8.33%">
            <col width="8.33%">
            <col width="8.33%">
            <col width="5.33%">
            <col width="8.33%">
            <col width="22.66%">
            <col width="8.33%">
            <col width="5.33%">
            <col width="8.33%">
            <col width="8.33%">
        </colgroup>`+
        '<thead>'+
            '<tr>'+
                '<th style="font-size:12px;">Date</th>'+
                '<th style="font-size:12px;">Login Type</th>'+
                '<th style="font-size:12px;">Sign in Location</th>'+
                '<th style="font-size:12px;">Sign in Project</th>'+
                '<th style="font-size:12px;">Sign in Photo</th>'+
                '<th style="text-align: center; font-size:12px;">Attendance</th>'+
                '<th style="font-size:12px;">Sign out Location</th>'+
                '<th style="font-size:12px;">Sign out Project</th>'+
                '<th style="font-size:12px;">Sign out Photo</th>'+
                '<th style="font-size:12px;">Status</th>'+
            '</tr>'+
        '</thead>'+ '<tbody><tr style="font-size:12px;text-align:center;font-weight: 500;"><td colspan="6" style="height: 407px;"><div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></td></tr></tbody>';
        document.getElementById("attendance_report_table_data").innerHTML = header;

        counts = '<div style="text-align: center;margin: 10px 0px;font-size:12px;gap: 10px;display: flex;justify-content: center;align-items: center;">Your Half Days<span style="display: inline-flex;align-items: center;justify-content: center;background-color: #FD5A6D;color: white;font-size: 14px;font-weight: 600;border-radius: 50%;min-width: 32px;height: 32px;padding: 0 8px;aspect-ratio: 1 / 1;">0</span></div>';
        document.getElementById("data_count").innerHTML = counts;
        $("#data_count").css("display", "block");
        return;
    }
    data = JSON.parse(data[0].txt);//JSON.parse(data[0]);
    var header ='<table id="attendance_report_table" class="table">'+
        `<colgroup>
        <col width="8.33%">
            <col width="8.33%">
            <col width="8.33%">
            <col width="5.33%">
            <col width="8.33%">
            <col width="22.66%">
            <col width="8.33%">
            <col width="5.33%">
            <col width="8.33%">
            <col width="8.33%">
        </colgroup>`+
        '<thead>'+
            '<tr>'+
                '<th style="font-size:12px;">Date</th>'+
                '<th style="font-size:12px;">Login Type</th>'+
                '<th style="font-size:12px;">Sign in Location</th>'+
                '<th style="font-size:12px;">Sign in Project</th>'+
                '<th style="font-size:12px;">Sign in Photo</th>'+
                '<th style="text-align: center; font-size:12px;">Attendance</th>'+
                '<th style="font-size:12px;">Sign out Location</th>'+
                '<th style="font-size:12px;">Sign out Project</th>'+
                '<th style="font-size:12px;">Sign out Photo</th>'+
                '<th style="font-size:12px;">Status</th>'+
            '</tr>'+
        '</thead>'+
        '<tbody>';
    var tablebody ="";
    for(var i=0;i<data.length;i++)
    {
        var index = i + 1;
        // option += '<option value="'+data[i].Project_Name+'">'+data[i].Project_Name+'</option>';
        var field = '<tr>';
            var random = parseInt(Math.random() * (9999999 - 999) + 999);
            
            var intime = data[i].intime;
            intime = intime.split('.')[0];
            var outtime = data[i].outtime;
            outtime = outtime.split('.')[0];
            field += 
            '<td style="font-size:12px;" id="dat'+(i+1)+'">'+data[i].dates+'</td>'+
            '<td style="font-size:12px;">'+data[i].user_login_type+'</td>'+
            '<td style="font-size:12px;" id="loc'+(i+1)+'"><p title="'+fixUtf8Smart(data[i].sign_in_location)+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+fixUtf8Smart(data[i].sign_in_location)+'</p></td>'+
            '<td style="font-size:12px;" id="pro'+(i+1)+'"><p title="'+data[i].sign_in_project+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].sign_in_project+'</p></td>'+
            // '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder307/'+data[i].recordid+'column2965.gif?random='+random+'" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
            '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66843_signin_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
            '<td style="font-size:12px;" id="att'+(i+1)+'"><div class="table-line-bar"><div class="line-bar-item full-day"></div></div><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2"><div class="enter-time"><span>IN</span> '+intime+'</div><div class="icon-pic"><i class="fa fa-clock-o" aria-hidden="true"></i></div><div class="exit-time">'+(outtime=="00:00:00"?'':outtime)+'<span '+(outtime=="00:00:00"?'style="color:red;"':'')+'> OUT</span></div></div></td>'+
            '<td style="font-size:12px;" id="loc'+(i+1)+'"><p title="'+data[i].sign_out_location+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].sign_out_location+'</p></td>'+
            '<td style="font-size:12px;" id="pro'+(i+1)+'"><p title="'+data[i].sign_out_project+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].sign_out_project+'</p></td>'+
            // '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder307/'+data[i].recordid+'column2965.gif?random='+random+'" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
            '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66844_signout_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
            '<td style="font-size:12px;" id="sta'+(i+1)+'"><div class="status-details d-flex gap-1 align-items-center"><div class="icon"><i class="fa fa-check-circle-o" aria-hidden="true"></i></div>Half Day</div></td>';
            
            field += '</tr>';
            tablebody += field;
            document.getElementById("attendance_report_table_data").innerHTML = header+tablebody;
    }
    var count = data.length;
    counts = '<div style="text-align: center;margin: 10px 0px;font-size:12px;gap: 10px;display: flex;justify-content: center;align-items: center;">Half Day Leaves<span style="display: inline-flex;align-items: center;justify-content: center;background-color: #FD5A6D;color: white;font-size: 14px;font-weight: 600;border-radius: 50%;min-width: 32px;height: 32px;padding: 0 8px;aspect-ratio: 1 / 1;">'+count+'</span></div>';
    document.getElementById("data_count").innerHTML = counts;
    $("#data_count").css("display", "block");
}
function odday_click()
{
    $('.attendance_report_card').css('margin-bottom', 'unset');
    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
    var monthnumber = month.indexOf($("#months").val().split(" ")[0]);
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#months").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    firstdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    lastdate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    firstdate = encodeURIComponent(firstdate); // window.targetuser
    lastdate = encodeURIComponent(lastdate); // window.targetuser
    var fild ="";
    var getUrl = window.location;   
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=hrms&ids=valuestring/&valuestring=Attedance_Summary_Present@d@Mansi%20Rane@d@2024-02-01@d@2024-02-29@d@
    var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Attedance_Summary_OD@d@${username}@d@${firstdate}@d@${lastdate}@d@${tokenParam}`;
    data = callajax(url);
    data = JSON.parse(data);
    if("txt is null" == data[0].txt)
    {
        var header ='<table id="attendance_report_table" class="table" style="height : 100%; margin:0">'+
        `<colgroup>
            <col width="25%">
            <col width="25%">
            <col width="25%">
            <col width="25%">
        </colgroup>`+
        '<thead>'+
            '<tr>'+
                '<th style="font-size:14px;">Date</th>'+
                '<th style="font-size:14px;">Leave Type</th>'+
                '<th style="font-size:14px;">Approved By</th>'+
                '<th style="font-size:14px;">Status</th>'+
            '</tr>'+
        '</thead>'+ '<tbody><tr style="font-size:12px;text-align:center;font-weight: 500;"><td colspan="6" style="height: 407px;"><div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></td></tr></tbody>';
        document.getElementById("attendance_report_table_data").innerHTML = header;

        counts = '<div style="text-align: center;margin: 10px 0px;font-size:12px;gap: 10px;display: flex;justify-content: center;align-items: center;">Your OD Days<span style="display: inline-flex;align-items: center;justify-content: center;background-color: #FD5A6D;color: white;font-size: 14px;font-weight: 600;border-radius: 50%;min-width: 32px;height: 32px;padding: 0 8px;aspect-ratio: 1 / 1;">0</span></div>';
        document.getElementById("data_count").innerHTML = counts;
        $("#data_count").css("display", "block");
        return;
    }
    data = JSON.parse(data[0].txt);//JSON.parse(data[0]);

    var header ='<table id="attendance_report_table" class="table">'+
        `<colgroup>
            <col width="25%">
            <col width="25%">
            <col width="25%">
            <col width="25%">
        </colgroup>`+
        '<thead>'+
            '<tr>'+
                '<th style="font-size:14px;">Date</th>'+
                '<th style="font-size:14px;">Leave Type</th>'+
                '<th style="font-size:14px;">Approved By</th>'+
                '<th style="font-size:14px;">Status</th>'+
            '</tr>'+
        '</thead>'+
        '<tbody>';
    var tablebody ="";
    for(var i=0;i<data.length;i++)
    {
        var index = i + 1;
        var field = '<tr>';
        field += 
        '<td style="font-size:12px;" id="dat'+(i+1)+'">'+data[i].fromdates+'</td>'+
        '<td style="font-size:12px;" id="dat'+(i+1)+'">'+data[i].location+'</td>'+
        '<td style="font-size:12px;" id="sta'+(i+1)+'"><div class="status-details d-flex gap-1 align-items-center"><div class="icon"><i class="fa fa-check-circle-o" aria-hidden="true"></i></div>'+data[i].approved_by+'</div></td>';
        '<td style="font-size:12px;" id="dat'+(i+1)+'">'+data[i].status+'</td>';
        //'<td style="font-size:12px; display: flex;justify-content: center;align-items: center;gap: 10px;border: none;" id="dat'+(i+1)+'"><div style=" height: 1px; width: 30%; background-color: #E28194;"></div><div>'+data[i].attendance+'</div><div style=" height: 1px; width: 30%; background-color: #E28194;"></div></td>'+;
        field += '</tr>';
        tablebody += field;
        document.getElementById("attendance_report_table_data").innerHTML = header+tablebody;
    }
    var count = data.length;
    counts = '<div style="text-align: center;margin: 10px 0px;font-size:12px;gap: 10px;display: flex;justify-content: center;align-items: center;">Your OD Days <span style="display: inline-flex;align-items: center;justify-content: center;background-color: #FD5A6D;color: white;font-size: 14px;font-weight: 600;border-radius: 50%;min-width: 32px;height: 32px;padding: 0 8px;aspect-ratio: 1 / 1;">'+count+'</span></div>';
    document.getElementById("data_count").innerHTML = counts;
    $("#data_count").css("display", "block");
}
function paidday_click()
{
    $('.attendance_report_card').css('margin-bottom', 'unset');
    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
    var monthnumber = month.indexOf($("#months").val().split(" ")[0]);
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#months").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    firstdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    lastdate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    firstdate = encodeURIComponent(firstdate); // window.targetuser
    lastdate = encodeURIComponent(lastdate); // window.targetuser
    var fild ="";
    var getUrl = window.location;   
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=itaplhr&ids=valuestring/&valuestring=Attedance_Summary_Paid_Days@d@Dhruv%20Patel@d@2025-03-01@d@2025-03-31@d@
    var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Attedance_Summary_Paid_Days@d@${username}@d@${firstdate}@d@${lastdate}@d@${tokenParam}`;
    data = callajax(url);
    data = JSON.parse(data);
    if("txt is null" == data[0].txt)
    {
        var header ='<table id="attendance_report_table" class="table" style="height : 100%; margin:0">'+
        `<colgroup>
        <col width="8.33%">
            <col width="8.33%">
            <col width="8.33%">
            <col width="5.33%">
            <col width="8.33%">
            <col width="22.66%">
            <col width="8.33%">
            <col width="5.33%">
            <col width="8.33%">
            <col width="8.33%">
        </colgroup>`+
        '<thead>'+
            '<tr>'+
                '<th style="font-size:12px;">Date</th>'+
                '<th style="font-size:12px;">Login Type</th>'+
                '<th style="font-size:12px;">Sign in Location</th>'+
                '<th style="font-size:12px;">Sign in Project</th>'+
                '<th style="font-size:12px;">Sign in Photo</th>'+
                '<th style="text-align: center; font-size:12px;">Attendance</th>'+
                '<th style="font-size:12px;">Sign out Location</th>'+
                '<th style="font-size:12px;">Sign out Project</th>'+
                '<th style="font-size:12px;">Sign out Photo</th>'+
                '<th style="font-size:12px;">Status</th>'+
            '</tr>'+
        '</thead>'+ '<tbody><tr style="font-size:12px;text-align:center;font-weight: 500;"><td colspan="6" style="height: 407px;"><div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></td></tr></tbody>';
        document.getElementById("attendance_report_table_data").innerHTML = header;
        counts = '<div style="text-align: center;margin: 10px 0px;font-size:12px;gap: 10px;display: flex;justify-content: center;align-items: center;">Your Paid Days<span style="display: inline-flex;align-items: center;justify-content: center;background-color: #FD5A6D;color: white;font-size: 14px;font-weight: 600;border-radius: 50%;min-width: 32px;height: 32px;padding: 0 8px;aspect-ratio: 1 / 1;">0</span></div>';
        document.getElementById("data_count").innerHTML = counts;
        $("#data_count").css("display", "block");
        return;
    }
    data = JSON.parse(data[0].txt);
    var header ='<table id="attendance_report_table" class="table">'+
        `<colgroup>
            <col width="8.33%">
            <col width="8.33%">
            <col width="8.33%">
            <col width="5.33%">
            <col width="8.33%">
            <col width="22.66%">
            <col width="8.33%">
            <col width="5.33%">
            <col width="8.33%">
            <col width="8.33%">
        </colgroup>`+
        '<thead>'+
            '<tr>'+
                '<th style="font-size:12px;">Date</th>'+
                '<th style="font-size:12px;">Login Type</th>'+
                '<th style="font-size:12px;">Sign in Location</th>'+
                '<th style="font-size:12px;">Sign in Project</th>'+
                '<th style="font-size:12px;">Sign in Photo</th>'+
                '<th style="text-align: center; font-size:12px;">Attendance</th>'+
                '<th style="font-size:12px;">Sign out Location</th>'+
                '<th style="font-size:12px;">Sign out Project</th>'+
                '<th style="font-size:12px;">Sign out Photo</th>'+
                '<th style="font-size:12px;">Status</th>'+
            '</tr>'+
        '</thead>'+
        '<tbody>';

        var tablebody ="";
        for(var i=0;i<data.length;i++)
        {
            var index = i + 1;
            // option += '<option value="'+data[i].Project_Name+'">'+data[i].Project_Name+'</option>';
            var field = '<tr>';
            var random = parseInt(Math.random() * (9999999 - 999) + 999);
           
            var intime = data[i].intime;
            intime = intime.split('.')[0];
            var outtime = data[i].outtime;
            outtime = outtime.split('.')[0];

            field += 
                '<td style="font-size:12px;" id="dat'+(i+1)+'">'+data[i].day+'</td>'+
                '<td style="font-size:12px;" id="dat'+(i+1)+'">'+data[i].user_login_type+'</td>'+
                '<td style="font-size:12px;" id="loc'+(i+1)+'"><p title="'+data[i].location+'" style="display: block; width: 250px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].location+'</p></td>'+
                '<td style="font-size:12px;" id="pro'+(i+1)+'"><p title="'+data[i].projectname+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].projectname+'</p></td>'+
                // '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder307/'+data[i].recordid+'column2965.gif?random='+random+'" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
                '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66843_signin_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
                '<td style="font-size:12px;" id="att'+(i+1)+'"><div class="table-line-bar"><div class="line-bar-item full-day"></div></div><div class="user-sign-in-details d-flex align-items-center justify-content-between mt-2"><div class="enter-time"><span>IN</span> '+intime+'</div><div class="icon-pic"><i class="fa fa-clock-o" aria-hidden="true"></i></div><div class="exit-time">'+(outtime=="00:00:00"?'':outtime)+'<span '+(outtime=="00:00:00"?'style="color:red;"':'')+'> OUT</span></div></div></td>'+
                '<td style="font-size:12px;" id="loc'+(i+1)+'"><p title="'+data[i].location+'" style="display: block; width: 250px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].location+'</p></td>'+
                '<td style="font-size:12px;" id="pro'+(i+1)+'"><p title="'+data[i].projectname+'" style="display: block; width: 50px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; margin: 0px; cursor: pointer;">'+data[i].projectname+'</p></td>'+
                // '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder307/'+data[i].recordid+'column2965.gif?random='+random+'" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
                '<td id="img'+(i+1)+'"><img src="../uploads'+cloudcode+'/Folder547/547_'+data[i].recordid+'_66844_signout_img.png?random='+random+'" onclick="openInNewTab(this.src)" onerror="this.src=\'./images/profile-icon.png\'" class="table-user-img"/></td>'+
                '<td style="font-size:12px;" id="sta'+(i+1)+'"><div class="status-details d-flex gap-1 align-items-center"><div class="icon"><i class="fa fa-times-circle-o" aria-hidden="true"></i></div>'+data[i].status+'</div></td>';
            field += '</tr>';
            tablebody += field;
            document.getElementById("attendance_report_table_data").innerHTML = header+tablebody;
        }
        var count = data[0].paid_days;
        counts = '<div style="text-align: center;margin: 10px 0px;font-size:12px;gap: 10px;display: flex;justify-content: center;align-items: center;">Your Paid Day <span style="display: inline-flex;align-items: center;justify-content: center;background-color: #FD5A6D;color: white;font-size: 14px;font-weight: 600;border-radius: 50%;min-width: 32px;height: 32px;padding: 0 8px;aspect-ratio: 1 / 1;">'+count+'</span></div>';
        document.getElementById("data_count").innerHTML = counts;
        $("#data_count").css("display", "block");
}
// MY PERFORMANCE
function emplyoeecodeapi()
{
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=my_performance@d@employee_code@d@MUKUND%20NARAYAN%20RAJE@d@Mukund%20Narayan%20Raje
    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=hrms&ids=valuestring/&valuestring=my_attedance@d@employee_details@d@Mukund Narayan Raje@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=my_attedance@d@employee_details@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    if(data[0].txt == 'txt is null')
    {
        return;
    }
    else
    {
        data = JSON.parse(data[0].txt);
    }
    document.getElementById("employeecode").innerText = data[0].employee_code;
}
function createChartapi()
{
    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
    var monthnumber = month.indexOf($("#month_performance").val().split(" ")[0]);
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#month_performance").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    firstdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    lastdate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    var fild ="";
    var getUrl = window.location;   
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=my_performance@d@working_hr@d@Mukund%20Narayan%20Raje@d@2024-08-01@d@2024-08-31@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=my_performance@d@working_hr@d@${encodeURIComponent(username)}@d@${encodeURIComponent(firstdate)}@d@${encodeURIComponent(lastdate)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    if(data[0].txt == "txt is null")
    {  
        // field = '<div style="justify-content: center;align-items: center;display: flex;height: -webkit-fill-available;">Work Hours Not Found</div>';
        field = '<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 147px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
        document.getElementById("workchart").innerHTML = field;
        return;
    }
    data = data[0].txt;
    data = data.replaceAll("value123","value");
    data = JSON.parse(data);//JSON.parse(data[0]);
    var jsondata = data;
    // Get the current date
    var tempyear = firstdate.split("-")[0];
    var tempmonth = firstdate.split("-")[1];
    var daysInselectedMonth=new Date(tempyear, tempmonth, 0).getDate();
    var monarr = ["","Jan", "Feb", "Mar", "Apr", "May", "Jun", "July", "Aug", "Sep", "Oct", "Nov", "Dec"];
    var datearr = [];

    for(var i=1 ; i<=daysInselectedMonth ; i++)
    {   
        var tempdays = monarr[parseInt(tempmonth)] + " " + (i<10?"0"+i:i);
        datearr.push(tempdays);
    }

    var chartContainer = $("#workchart");
    var chartWidth = $(window).width() * 0.95;
    
    chartContainer.kendoChart({
        legend: {
            visible: false
        },
        chartArea: {
            background: "",
            width: chartWidth,
            height: 150,
            margin: {
                top: 2,
                bottom: 20
            },
            padding: {
                top: 0,
                bottom: 10
            }
        },
        seriesDefaults: {
            type: "line",
            style: "smooth"
        },
        series: [{
            data: jsondata,
            color: "#BE63F9" 
            
        }],
        valueAxis: {
            labels: {
                format: "{0}"
            },
            line: {
                visible: false
            },
            axisCrossingValue: -10,
            majorUnit: 5,
            min: 0,
            max: 24,
            majorGridLines: {
                visible: true,
                color: "#CED4E1",
                width: 1,
                dashType: "dash"
            }
        },
        categoryAxis: {
            categories: datearr,
            majorGridLines: {
                visible: false
            },
            labels: {
                rotation: -30
            }
        },
        tooltip: {
        visible: true,
        shared: false, // Tooltip for individual points
        template: `
        <div style="padding: 5px; background-color: white !important; color:black !important">
            <table id="dsrtablechart" style="border-collapse: collapse; width: 100%;">
                <thead>
                    <tr>
                        <td><strong>Date</strong></td>
                        <td><strong>Sign-in Time</strong></td>
                        <td><strong>Sign-out Time</strong></td>
                        <td><strong>Sign-in Type</strong></td>
                        <td><strong>Sign-out Type</strong></td>
                        <td><strong>Worked Hours</strong></td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>#= category #</td>
                        <td>#= dataItem.signintime #</td>
                        <td>#= dataItem.signouttime #</td>
                        <td>#= dataItem.signinlogintype #</td>
                        <td>#= dataItem.signoutlogintype #</td>
                        <td>#= dataItem.workedhrs #</td>
                    </tr>
                </tbody>
            </table>
        </div>`
    }
    });

    // Redraw the chart on window resize
    $(window).resize(function() {
        var newWidth = $(window).width() * 0.9;
        chartContainer.data("kendoChart").setOptions({
            chartArea: {
                width: newWidth
            }
        });
    });
}
function manpowerfunnel() {
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode = encodeURIComponent( window.targetcloud);
    var username = encodeURIComponent( window.targetuser);
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
    var monthnumber = month.indexOf($("#month_performance").val().split(" ")[0]);
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#month_performance").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    firstdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    lastdate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    var productwise = document.getElementById("product_wise").value;
    var dsrworktypw = document.getElementById("dsr_worktype").value;
    //https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=my_performance@d@project_wise_hr@d@Tushar%20Sahebrao%20More@d@2024-10-01@d@2024-10-30@d@@d@@d@
     var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${cloudcode}&ids=valuestring/&valuestring=my_performance@d@project_wise_hr@d@${username}@d@${encodeURIComponent(firstdate)}@d@${encodeURIComponent(lastdate)}@d@${encodeURIComponent(productwise)}@d@${encodeURIComponent(dsrworktypw)}@d@${tokenParam}`;
    // var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${cloudcode}&ids=valuestring/&valuestring=my_performance@d@project_wise_hr@d@${username}@d@2024-10-01@d@2024-10-30@d@${encodeURIComponent(productwise)}@d@${encodeURIComponent(dsrworktypw)}@d@`;
    var data = callajax(urltotal);
    data = JSON.parse(data);

    if (!data || data.length === 0 || data[0].txt === "txt is null" || !data[0].txt) {
        // const field = '<div style="height: 100%;display: flex;justify-content: center;align-items: center;font-size: 14px;">Data Not Found</div>';
        const field = '<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;gap: 10px; height: 100%;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
        document.getElementById("projectwisedsrchart").innerHTML = field;
        document.getElementById("totalHrsSpan").innerText = 0;
        return;
    }
    const manpowerfunnel_chart = JSON.parse(data[0].txt);
    var totalHrs = manpowerfunnel_chart[0]?.sum_of_total_hrs || 0;
    document.getElementById("totalHrsSpan").innerText = ` ${totalHrs} hrs`;

    $('#projectwisedsrchart').kendoChart({
        title: {
            visible: false,
            text: "Projectwise Manpower"
        },
        legend: {
            visible: false,
            position: "top"
        },
        chartArea: {
            height: 280
        },
        series: [{
            type: 'donut',
            data: manpowerfunnel_chart.map(item => ({
                // category: `${item.dsr_project}: ${item.dsr_work_type}: ${item.total_hrs}`,
                category: `${item.dsr_project}: ${item.total_hrs}`,
                value: item.total_hrs,     
            })),
            field: 'value',
            categoryField: 'category',
            labels: {
                visible: true,
                position: 'outsideEnd',
                // template: "#= category #",
                template: "#= category.length > 10 ? category.substring(0, 8) + '...' : category #",
                font: "12px Arial",
            },
            tooltip: {
                visible: true,
                template: function (e) {
                    return `${e.dataItem.category}`;
                }
            }

        }],
        seriesColors: ["#4072DF", "#75DD5C", "#CCFF57", "#4941DA", "#D25656", "#FFD6B6"]
    });
}

function weeklydsroutput()
{
    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
    var monthnumber = month.indexOf($("#month_performance").val().split(" ")[0]);
    var dsr_task_category = "";
    var dsr_project = "";
    try
    {
        dsr_task_category = $("#dsr_task_category").data("kendoComboBox").value();
        dsr_project = $("#dsr_project").data("kendoComboBox").value();
    }
    catch(e)
    {
    }
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#month_performance").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    firstdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    lastdate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    var fild ="";
    var getUrl = window.location;   
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // var username =  window.targetuser;

    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=my_performance@d@weekly_dsr@d@${encodeURIComponent(username)}@d@${encodeURIComponent(firstdate)}@d@${encodeURIComponent(lastdate)}@d@${encodeURIComponent(dsr_task_category)}@d@${encodeURIComponent(dsr_project)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);

    if (data[0].txt == "txt is null")
    {
        // field = '<div style="justify-content: center;align-items: center;display: flex;height: -webkit-fill-available;">Data Not Found</div>';
        field = '<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
        document.getElementById("dsrchart").innerHTML = field;
        return;
    }

    data = data[0].txt;
    var jsondata = JSON.parse(data);
    const categories = jsondata.map(item => item.week_number);

    const series = [
        {
            name: "Total Hours",
            data: jsondata.map(item => ({
                value: item.total_hrs,
                task: item.task // Include task for tooltip
            })),
            color: "#FF8918"
        },
        {
            name: "Attempt Quantity",
            data: jsondata.map(item => ({
                value: item.attempt_qty,
                task: item.task // Include task for tooltip
            })),
            color: "#5D51E2"
        },
        {
            name: "Work Done Quantity",
            data: jsondata.map(item => ({
                value: item.work_done_qty,
                task: item.task // Include task for tooltip
            })),
            color: "#F11E91"
        }
    ];

            // Initialize Kendo Chart with the correct data and tooltip handling
    $("#dsrchart").kendoChart({
        legend: {
            position: "bottom"
        },
        seriesDefaults: {
            type: "line",
            style: "smooth",
            missingValues: "gap",
            stack: false // Ensure the lines are not stacked unless intended
        },
        series: series.map(s => ({
            name: s.name,
            data: s.data, // Pass the full data object (value + task)
            color: s.color
        })),
        valueAxis: {
            line: {
                visible: false
            },
            minorGridLines: {
                visible: true
            }
        },
        categoryAxis: {
            categories: categories,
            majorGridLines: {
                visible: false
            },
            labels: {
                rotation: -30 // Keep labels flat
            }
        },
        tooltip: {
            visible: true,
            template: "#= value #", // Use dataItem.task for the tooltip
        }
    });
}


function dsr_work_analysis_api()
{
    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
    var monthnumber = month.indexOf($("#month_performance").val().split(" ")[0]);
    var dsr_task_category = "";
    var dsr_project = "";
    try
    {
        dsr_task_category = $("#dsr_task_category").data("kendoComboBox").value();
        dsr_project = $("#dsr_project").data("kendoComboBox").value();
    }
    catch(e)
    {
    }
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#month_performance").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    firstdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    lastdate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    var fild ="";
    var getUrl = window.location;   
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    // var username =  window.targetuser;

    var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${cloudcode}&ids=valuestring/&valuestring=my_performance@d@dsr_work_analysis@d@${username}@d@${encodeURIComponent(firstdate)}@d@${encodeURIComponent(lastdate)}@d@${encodeURIComponent(dsr_task_category)}@d@${encodeURIComponent(dsr_project)}@d@${tokenParam}`;
    data = callajax(url);
    data = JSON.parse(data);

    if ("txt is null" == data[0].txt)
    {
        // field = '<div style="justify-content: center;align-items: center;display: flex;height: -webkit-fill-available;font-size: 1rem;">Data Not Found</div>';
        field = '<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
        document.getElementById("dsr_work_analysis_table").innerHTML = field;
        return;
    }

    let jsonData = JSON.parse(data[0].txt);
    let tableData = [];

    jsonData.forEach(row => {
        tableData.push({
            workType: row.dsr_work_type || '--',
            taskName: row.dsr_task_name || '--',
            project: row.dsr_project || '--',
            // dsrproduct: row.dsr_task_category || '--',
            taskCategory: row.dsr_task_category || '--',
            // totalHrs: row.total_hrs || '--',
            totalHrs: row.total_hrs ? parseFloat(row.total_hrs.toFixed(2)) : '--',
            attemptQty: row.attempt_qty || '--',
            workDoneQty: row.work_done_qty || '--',
            workDoneAmt: row.work_done_amount || '--'
        });
    });

    // Helper function to merge rows for multiple columns
    function mergeRows(tableArray, mergeKeys)
    {
        let mergeInfo = mergeKeys.reduce((acc, key) => {
            acc[key] = [];
            return acc;
        }, {});

        mergeKeys.forEach(key => {
            for (let i = 0; i < tableArray.length; i++)
            {
                if (i === 0 || tableArray[i][key] !== tableArray[i - 1][key])
                {
                    mergeInfo[key].push({ startIndex: i, count: 1 });
                }
                else
                {
                    mergeInfo[key][mergeInfo[key].length - 1].count++;
                    tableArray[i][key] = null; // Mark for merging
                }
            }
        });
        return mergeInfo;
    }

    // Merge rows for multiple columns
    let mergeInfo = mergeRows(tableData, ['workType', 'taskName', 'project']);

    // Generate HTML Table
    let html = '<table border="1">';
    html += '<thead><tr><th>DSR Work Type</th><th>Task</th><th>Project</th><th>DSR Product</th><th>Hrs Spend</th><th>Attempt QTY</th><th>Work done QTY</th><th>Work done AMT</th></tr></thead><tbody>';

    tableData.forEach((row, rowIndex) => {
        html += '<tr>';
        // Handle column merging for "DSR Work Type", "Task", and "Project"
        ['workType', 'taskName', 'project'].forEach(key => {
            if (row[key] !== null)
            {
                let rowspan = mergeInfo[key].find(item => item.startIndex === rowIndex)?.count || 1;
                html += `<td rowspan="${rowspan}">${row[key]}</td>`;
            }
        });
        // Non-merged columns
        html += `<td>${row.taskCategory}</td><td>${row.totalHrs}</td><td>${row.attemptQty}</td><td>${row.workDoneQty}</td><td>${row.workDoneAmt}</td>`;
        html += '</tr>';
    });
    html += '</tbody></table>';
    document.getElementById("dsr_work_analysis_table").innerHTML = html;
}
function location_analysis()
{
    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
    var monthnumber = month.indexOf($("#month_performance").val().split(" ")[0]);
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#month_performance").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    firstdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    lastdate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    var fild ="";
    var getUrl = window.location;   
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    // var username =  window.targetuser;

    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=my_performance@d@location_analysis@d@Tushar%20Sahebrao%20More@d@2024-09-01@d@2024-09-30@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=my_performance@d@location_analysis@d@${encodeURIComponent(username)}@d@${encodeURIComponent(firstdate)}@d@${encodeURIComponent(lastdate)}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);

    try
    {
        if ("txt is null" == data[0].txt)
        {
            field = '<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
            document.getElementById("location_analysis_data").innerHTML = field;
            return;
        }
        else
        {
            data = JSON.parse(data[0].txt);//JSON.parse(data[0]);  
            var field =  "";
            document.getElementById("location_analysis_data").innerHTML = `<table id="location_analysis_table">
                                            <thead>
                                                <tr>
                                                    <td>Sr. No.</td>
                                                    <td>Date</td>
                                                    <td>Sign In Location</td>
                                                    <td>Sign Out Location</td>
                                                    <td>Attendance Status</td>
                                                </tr>
                                            </thead>
                                            <tbody id="location_analysis_table_tbody"></tbody>`;
            for(var i=0;i<data.length;i++)
            {   
                if(data[i].attd == 'Late' )
                {
                    field += `<tr>
                                <td>${i+1}</td>
                                <td>${data[i].day}</td>
                                <td>${fixUtf8Smart(data[i].sign_in_location) ? fixUtf8Smart(data[i].sign_in_location) : '--'}</td>
                                <td>${data[i].signout_location ? data[i].signout_location : '--'}</td>
                                <td><div style="border: 1px solid #A251E2;background-color: #F6EBFF;padding: 2px 4px;border-radius: 6px;color: #A251E2;">${data[i].attd}</div></td>
                            </tr>`
                }
                else if(data[i].attd == 'Present' )
                {
                    field += `<tr>
                                <td>${i+1}</td>
                                <td>${data[i].day}</td>
                                <td>${fixUtf8Smart(data[i].sign_in_location) ? fixUtf8Smart(data[i].sign_in_location) : '--'}</td>
                                <td>${data[i].signout_location ? data[i].signout_location : '--'}</td>
                                <td><div style="border: 1px solid #10B981;background-color: #DEFFF6;padding: 2px 4px;border-radius: 6px;color: #10B981;">${data[i].attd}</div></td>
                            </tr>`
                }
                else if(data[i].attd == 'Early' )
                {
                    field += `<tr>
                                <td>${i+1}</td>
                                <td>${data[i].day}</td>
                                <td>${fixUtf8Smart(data[i].sign_in_location) ? fixUtf8Smart(data[i].sign_in_location) : '--'}</td>
                                <td>${data[i].signout_location ? data[i].signout_location : '--'}</td>
                                <td><div style="border: 1px solid #A4BC0E;background-color: #FCFFEC;padding: 2px 4px;border-radius: 6px;color: #A4BC0E;">${data[i].attd}</div></td>
                            </tr>`
                }
                else if(data[i].attd == 'Absent' )
                {
                    field += `<tr>
                                <td>${i+1}</td>
                                <td>${data[i].day}</td>
                                <td>${fixUtf8Smart(data[i].sign_in_location) ? fixUtf8Smart(data[i].sign_in_location) : '--'}</td>
                                <td>${data[i].signout_location ? data[i].signout_location : '--'}</td>
                                <td><div style="border: 1px solid #FF4E4E;background-color: #FCEBEB;padding: 2px 4px;border-radius: 6px;color: #FF4E4E;">${data[i].attd}</div></td>
                            </tr>`
                }
                else if(data[i].attd == 'Weekly Off' )
                {
                    field += `<tr>
                                <td>${i+1}</td>
                                <td>${data[i].day}</td>
                                <td>${fixUtf8Smart(data[i].sign_in_location) ? fixUtf8Smart(data[i].sign_in_location) : '--'}</td>
                                <td>${data[i].signout_location ? data[i].signout_location : '--'}</td>
                                <td><div style="border: 1px solid #FF5F98;background-color: #F8EAEF;padding: 2px 4px;border-radius: 6px;color: #FF5F98;">${data[i].attd}</div></td>
                            </tr>`
                }
                else if(data[i].attd == 'Paid Leave' )
                {
                    field += `<tr>
                                <td>${i+1}</td>
                                <td>${data[i].day}</td>
                                <td>${fixUtf8Smart(data[i].sign_in_location) ? fixUtf8Smart(data[i].sign_in_location) : '--'}</td>
                                <td>${data[i].signout_location ? data[i].signout_location : '--'}</td>
                                <td><div style="border: 1px solid #FF8918;background-color: #FFF9F3;padding: 2px 4px;border-radius: 6px;color: #FF8918;">${data[i].attd}</div></td>
                            </tr>`
                }
                else if(data[i].attd == 'Company Holiday' )
                {
                    field += `<tr>
                                <td>${i+1}</td>
                                <td>${data[i].day}</td>
                                <td>${fixUtf8Smart(data[i].sign_in_location) ? fixUtf8Smart(data[i].sign_in_location) : '--'}</td>
                                <td>${data[i].signout_location ? data[i].signout_location : '--'}</td>
                                <td><div style="border: 1px solid #577FFB;background-color: #EFF3FF;padding: 2px 4px;border-radius: 6px;color: #577FFB;">${data[i].attd}</div></td>
                            </tr>`
                }
                else if(data[i].attd == 'Half Day' )
                {
                    field += `<tr>
                                <td>${i+1}</td>
                                <td>${data[i].day}</td>
                                <td>${fixUtf8Smart(data[i].sign_in_location) ? fixUtf8Smart(data[i].sign_in_location) : '--'}</td>
                                <td>${data[i].signout_location ? data[i].signout_location : '--'}</td>
                                <td><div style="border: 1px solid #797708;background-color: #f0f3b8;padding: 2px 4px;border-radius: 6px;color: #797708;">${data[i].attd}</div></td>
                            </tr>`
                }
                else if(data[i].attd == 'Mismatch' )
                {
                    field += `<tr>
                                <td>${i+1}</td>
                                <td>${data[i].day}</td>
                                <td>${fixUtf8Smart(data[i].sign_in_location) ? fixUtf8Smart(data[i].sign_in_location) : '--'}</td>
                                <td>${data[i].signout_location ? data[i].signout_location : '--'}</td>
                                <td><div style="border: 1px solid #15C3D9;background-color: #E0FCFF;padding: 2px 4px;border-radius: 6px;color: #15C3D9;">${data[i].attd}</div></td>
                            </tr>`
                }
            }
            $("#location_analysis_table_tbody").html(field);      
        }
    }
    catch(e)
    {
    }
}
function dsr_task_category()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode = encodeURIComponent( window.targetcloud);
    var username = encodeURIComponent( window.targetuser);
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65751&cloudcode=hrms&ids=valuestring/&valuestring=Project_List@d@Badrinath%20Avchitrao%20Jadhav@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65751&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Project_List@d@${username}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    if(data[0].txt == 'txt is null')
    {
        data = [];
    }
    else
    {
        data = JSON.parse(data[0].txt);
    }
    $("#dsr_task_category").parent().find(".k-clear-value").remove();
    var company_autoComp = $("#dsr_task_category").data("kendoComboBox");
    if (company_autoComp)
    {
        company_autoComp.destroy(); // Destroy the existing widget
    }
    $("#dsr_task_category").kendoComboBox({
        dataTextField: "project_name",
        dataValueField: "project_name",
        dataSource: data,
        filter: "contains",
        suggest: true,
        placeholder: "Please select Project Name...",
        noDataTemplate: $("#noDataTemplate").html(),
        change: function () {
            var dsr_task_cate = this.value();
            dsr_work_analysis_api(dsr_task_cate, "");
            weeklydsroutput(dsr_task_cate, "");
        }
    });
    $("#dsr_project").kendoComboBox({
        dataTextField: "dsr_task_category",
        dataValueField: "dsr_task_category",
        dataSource: [],
        filter: "contains",
        suggest: true,
        placeholder: "Please select Task Category...",
        noDataTemplate: $("#noDataTemplate").html(),
        change: function () {
            dsr_work_analysis_api()
            weeklydsroutput()
        }
    });
}
// function dsr_project_category() {
//     var getUrl = window.location;
//     var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
//     baseurl = baseurl.split("pages")[0];
//     var cloudcode = encodeURIComponent( window.targetcloud);
//     var username = encodeURIComponent( window.targetuser);

//     var urltotal = `${baseurl}SaveFormField.do?actn=retrieveDComboList&extension=_1&jcodelist=@j@@jj@&jidlist=68948@@68948/;&filtervalue=&ask=COMMAND_NAME_1&random=242&AjaxRequestUniqueId=174719836795310`;
    
//     var response = callajax(urltotal); // raw JSON string
//     var parsed = JSON.parse(response); // now an array with .txt field
//     var rawText = parsed[0].txt; // string like "AutonomousERP;;ERP testing;;..."

//     // Split the string into an array of objects
//     var items = rawText.split(";;")
//         .filter(item => item.trim() !== "") // remove blanks
//         .map(item => ({ dsr_task_category: item.trim() })); // convert to object

//     // Clean up previous combobox instance
//     $("#dsr_project").parent().find(".k-clear-value").remove();
//     var company_autoComp = $("#dsr_project").data("kendoComboBox");
//     if (company_autoComp) {
//         company_autoComp.destroy();
//     }

//     // Initialize new ComboBox
//     $("#dsr_project").kendoComboBox({
//         dataTextField: "dsr_task_category",
//         dataValueField: "dsr_task_category",
//         dataSource: items,
//         filter: "contains",
//         suggest: true,
//         placeholder: "Please select Project Name...",
//         noDataTemplate: $("#noDataTemplate").html(),
//         change: function () {
//             var dsr_project = this.value();
//             dsr_work_analysis_api("", dsr_project);
//             weeklydsroutput("", dsr_project);
//         }
//     });
// }

    function dsr_project_category()
    {
            var getUrl = window.location;
            var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
            baseurl = baseurl.split("pages")[0];
            var cloudcode = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : "";
            var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

            //https://hrms.autonomouserp.com/SaveFormField.do?actn=retrieveDComboList&extension=_1&jcodelist=@j@@jj@&jidlist=68948@@68948/;&filtervalue=&ask=COMMAND_NAME_1&random=242&AjaxRequestUniqueId=174719836795310
            let urltotal = `${baseurl}SaveFormField.do?actn=retrieveDComboList&extension=_1&jcodelist=@j@@jj@&jidlist=68948@@68948/;&filtervalue=&ask=COMMAND_NAME_1&random=242&AjaxRequestUniqueId=174719836795310${cloudcode}${tokenParam}`;
            fetch(urltotal)
            .then((res) => {
                return res.text();
            })
            .then((data) => {
                let dep = data.split(";;");
                dep.pop();

                $("#dsr_project").parent().find(".k-clear-value").remove();
                var department_autoComp = $("#dsr_project").data("kendoComboBox");
                if (department_autoComp) {
                    department_autoComp.destroy(); // Destroy the existing widget
                    }
                
                $("#dsr_project").kendoComboBox({
                    dataSource: dep,
                    filter: "contains",
                    suggest: true,
                    placeholder: "Please select Product name...",
                    noDataTemplate: $("#noDataTemplate").html(),
                    change: function () {
                        var dsr_project = this.value();
                        dsr_work_analysis_api("", dsr_project);
                        weeklydsroutput("", dsr_project);
                    }
                    // tagMode: "multiple"
            });
        });
    }
    dsr_project_category();

function product_wise_list()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : "";
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";  

    //https://hrms.infiverse.ai/SaveFormField.do?actn=retrieveDComboList&extension=_1&jcodelist=@j@@jj@&jidlist=68948@@68948/;&filtervalue=&ask=COMMAND_NAME_1&random=17&AjaxRequestUniqueId=17358155968708
    let urltotal = `${baseurl}SaveFormField.do?actn=retrieveDComboList&extension=_1&jcodelist=@j@@jj@&jidlist=68948@@68948/;&filtervalue=&ask=COMMAND_NAME_1&random=17&AjaxRequestUniqueId=17358155968708${cloudcode}${tokenParam}`;
    fetch(urltotal)
    .then((res) => {
        return res.text();
    })
    .then((data) => {
        let dep = data.split(";;");
        dep.pop();

        $("#product_wise").parent().find(".k-clear-value").remove();
        var department_autoComp = $("#product_wise").data("kendoComboBox");
        if (department_autoComp) {
            department_autoComp.destroy(); // Destroy the existing widget
            }
        
        $("#product_wise").kendoComboBox({
            dataSource: dep,
            filter: "contains",
            suggest: true,
            placeholder: "Product Name",
            noDataTemplate: $("#noDataTemplate").html(),
    });
});
}
function dsr_worktype_list() {
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : "";
    var username = encodeURIComponent( window.targetuser);
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    let urltotal = `${baseurl}SaveFormField.do?actn=retrieveDComboList&extension=_1&jcodelist=@j@${username}@j@@jj@&jidlist=66702@@66702/66696/;&filtervalue=&ask=COMMAND_NAME_1&random=1052&AjaxRequestUniqueId=17430678141106${cloudcode}${tokenParam}`;

    var data = callajax(urltotal); // Ensure callajax() returns a string
    if (!data || typeof data !== "string") {
        data = ""; // Ensure it's a valid string
    }

    let dep = data.split(";;").filter(Boolean).map(item => ({ dsr_work_type: item.trim() })); // Convert to object array

    $("#dsr_worktype").parent().find(".k-clear-value").remove();
    var company_autoComp = $("#dsr_worktype").data("kendoComboBox");

    if (company_autoComp) {
        company_autoComp.destroy(); // Destroy existing widget
    }

    $("#dsr_worktype").kendoComboBox({
        dataTextField: "dsr_work_type",
        dataValueField: "dsr_work_type",
        dataSource: dep,
        filter: "contains",
        suggest: true,
        placeholder: "DSR Project",
        noDataTemplate: $("#noDataTemplate").html(),
    });
}

function my_performance()
{
    $("#empname_performance").text( window.targetuser);
    dateselector();
    emplyoeecodeapi();
    createChartapi();
    // projectwisedsrcreateChartapi();
    manpowerfunnel();
    weeklydsroutput();
    dsr_work_analysis_api();
    location_analysis();
    dsr_task_category();
    product_wise_list();
    dsr_worktype_list();
    dsr_project_category();
}
function myperformancemonthchange()
{
    createChartapi();
    // projectwisedsrcreateChartapi();
    weeklydsroutput();
    dsr_work_analysis_api();
    location_analysis();
    manpowerfunnel();
}
function modalfilter(slideId, headerText)
{
    document.getElementById('modal_header1').innerText = headerText;
    document.querySelectorAll('#myModal_myperfo1 .modal_contant > div').forEach(slide => {
        slide.style.display = 'none';
    });
    const selectedSlide = document.getElementById(slideId);
    if (selectedSlide)
    {
        selectedSlide.style.display = 'block';
    }
}
function project_wise_hours_spend_tbody()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
    var monthnumber = month.indexOf($("#month_performance").val().split(" ")[0]);
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#month_performance").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    startdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    enddate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    startdate = encodeURIComponent(startdate); // window.targetuser
    enddate = encodeURIComponent(enddate); // window.targetuser

    //https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=my_performance@d@project_wise_hr_list@d@Dhruv%20Patel@d@2020-08-01@d@2026-08-31@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=my_performance@d@project_wise_hr_list@d@${encodeURIComponent(username)}@d@${startdate}@d@${enddate}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    if (data[0].txt == "txt is null")
    {
        fild = '<tr style="font-size: 14px;text-align:center;font-weight: 500;"><td colspan="7" style="text-align:center"><div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 500px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></td></tr>';
        document.getElementById("project_wise_hours_body").innerHTML = fild;
    }
    else
    {
        data = JSON.parse(data[0].txt);
        var fild = ''
        for (var i = 0; i < data.length; i++)
        {
            fild += '<tr style = "border-bottom: 1px solid #ddd;">'+
                '<td>'+(i + 1)+'</td>'+
                '<td>'+ (data[i].date ? data[i].date : '' ) +'</td>'+
                '<td>'+ (data[i].sign_in_project ? data[i].sign_in_project : '') +'</td>'+
                '<td>'+ (data[i].sign_out_project ? data[i].sign_out_project : '') +'</td>'+
                '<td>'+ (data[i].hrs ? (data[i].hrs.toString().includes('.') ? data[i].hrs.toString().split('.')[0] : data[i].hrs) : '') +'</td>'+
                
                
            '</tr>';
        }
        document.getElementById("project_wise_hours_body").innerHTML = fild;
    }
}
function weekly_dsr_output_analysis_tbody()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
    var monthnumber = month.indexOf($("#month_performance").val().split(" ")[0]);
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#month_performance").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    startdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    enddate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    startdate = encodeURIComponent(startdate); // window.targetuser
    enddate = encodeURIComponent(enddate); // window.targetuser

    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=my_performance@d@weekly_dsr_list@d@Palanisamy%20K@d@2022-08-01@d@2024-08-31@d@@d@@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=my_performance@d@weekly_dsr_list@d@${encodeURIComponent(username)}@d@${startdate}@d@${enddate}@d@@d@@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);

    if (data[0].txt == "txt is null")
    {
        fild = '<tr style="font-size: 14px;text-align:center;font-weight: 500;"><td colspan="10" style="text-align:center"><div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 500px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></td></tr>';
        document.getElementById("weekly_dsr_body").innerHTML = fild;
    }
    else
    {
        data = JSON.parse(data[0].txt);
        var fild = '';
        let totalhoure = 0;
        let totalattemptqty = 0;
        let totalworkdoneqty = 0;
        for (var i = 0; i < data.length; i++)
        {
            totalhoure += parseInt(data[i].total_hrs);
            totalattemptqty += parseInt(data[i].attempt_qty);
            totalworkdoneqty += parseInt(data[i].work_done_qty);

            var match = data[i].week_number.match(/^(\d{4})\s+W(\d{1,2})$/);  // <--- notice the change here
            if (match) {
                var year = match[1];           // "2025"
                var weekNumber = match[2];     // "26" as a string
            }
            
            fild += '<tr style="border-bottom: 1px solid #ddd;" onclick="weekly_dsr_output_expandRow(\'' + weekNumber + '\', \'' + year + '\', \'' + data[i].dsr_project + '\', \'' + data[i].dsr_task_category + '\', ' + i + ')" id="pf-row-' + i + '" data-expanded="false">'+
                //  '<tr style="border-bottom: 1px solid #ddd;" onclick="" data-expanded="false">' +
                '<td>' +
                    '<button class="btn-default">' +
                        '<span><i class="fa-light fa-circle-plus"></i></span>' +
                    '</button>' +
                '</td>' +
                '<td>'+(i + 1)+'</td>'+
                '<td>'+ (data[i].week_number ? data[i].week_number : '' ) +'</td>'+
                '<td>'+ (data[i].task ? data[i].task : '') +'</td>'+
                '<td>'+ (data[i].dsr_project ? data[i].dsr_project : '') +'</td>'+
                '<td>'+ (data[i].dsr_task_category ? data[i].dsr_task_category : '') +'</td>'+
                '<td>'+ (data[i].dsr_work_type ? data[i].dsr_work_type : '') +'</td>'+
                '<td>'+ (data[i].total_hrs ? (data[i].total_hrs.toString().includes('.') ? data[i].total_hrs.toString().split('.')[0] : data[i].total_hrs) : '') +'</td>'+
                '<td>'+ (data[i].attempt_qty ? data[i].attempt_qty : '') +'</td>'+
                '<td>'+ (data[i].work_done_qty ? data[i].work_done_qty : '') +'</td>'+
            '</tr>';
        }
        fild += '<tr style="font-size: 12px; font-weight: bold;">';
        fild += '<td colspan="6"></td>';
        fild += '<td>Grand Total</td>';
        fild += '<td>' + totalhoure + '</td>';
        fild += '<td>' + totalattemptqty + '</td>';
        fild += '<td>' + totalworkdoneqty + '</td>';
        fild += '</tr>';
        document.getElementById("weekly_dsr_body").innerHTML = fild;
    }
}

function weekly_dsr_output_expandRow(weekno, year, dsrproject , dsrproduct, rowId) 
{
    const row = document.getElementById(`pf-row-${rowId}`);
    const expandedRowId = `pf-expanded-row-${rowId}`;
    let expandedRow = document.getElementById(expandedRowId);
    const iconButton = row.querySelector('button .fa-circle-plus, button .fa-circle-minus');

    if (row.dataset.expanded === "true") {
        expandedRow.style.display = "none";
        row.dataset.expanded = "false";
        iconButton.classList.remove('fa-circle-minus');
        iconButton.classList.add('fa-circle-plus');
    } else {
        var getUrl = window.location;
        var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
        baseurl = baseurl.split("pages")[0];
        var cloudcode = window.targetcloud;
        var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
        var username = window.targetuser;
        //https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=my_performance@d@weekly_dsr_list_details@d@Dhruv%20Patel@d@23@d@2025@d@ITA%20ERP%20Development@d@Infiverse%20-%20HRMS@d@
        let urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=my_performance@d@weekly_dsr_list_details@d@${encodeURIComponent(username)}@d@${encodeURIComponent(weekno)}@d@${encodeURIComponent(year)}@d@${encodeURIComponent(dsrproject)}@d@${encodeURIComponent(dsrproduct)}@d@${tokenParam}`;
        let data = callajax(urltotal);
        data = JSON.parse(data);
        if (data.length > 0 && data[0].txt) {
        data = JSON.parse(data[0].txt);
        } else {
            return; // prevent crash
        }

        if (data.length > 0) {
            let expandedContent = `
                <tr id="${expandedRowId}" style="background: #f9f9f9;">
                    <td colspan="10">
                        <table style="width: 100%;border-spacing: 0 15px;border-collapse: separate;">
                            <thead style="font-weight:600;">
                                <th style="text-align: center;color: black;">Sr. No.</th>
                                <th style="text-align: center;color: black;">Date</th>
                                <th style="text-align: center;color: black;">DSR Project</th>
                                <th style="text-align: center;color: black;">DSR Task Category</th>
                                <th style="text-align: center;color: black;">DSR Work Description</th>
                                <th style="text-align: center;color: black;">Hrs</th>
                            </thead>`;

            // Loop through all data records and add them to the expanded table
            data.forEach((rowData, index) => {
                expandedContent += `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${rowData.date !== undefined ? rowData.date : '--'}</td>
                        <td>${rowData.dsr_project !== undefined ? rowData.dsr_project : '--'}</td>
                        <td>${rowData.dsr_task_category !== undefined ? rowData.dsr_task_category : '--'}</td>
                        <td>${rowData.dsr_work_desc !== undefined ? rowData.dsr_work_desc : '--'}</td>
                        <td>${rowData.total_hrs !== undefined ? rowData.total_hrs : '--'}</td>
                    </tr>`;
            });

            expandedContent += `</table></td></tr>`;

            // Create expanded row if not exists
            if (!expandedRow) {
                row.insertAdjacentHTML("afterend", expandedContent);
                expandedRow = document.getElementById(expandedRowId);
            } else {
                // Update content if exists
                expandedRow.innerHTML = expandedContent;
            }

            expandedRow.style.display = "table-row";
            row.dataset.expanded = "true";
            iconButton.classList.remove('fa-circle-plus');
            iconButton.classList.add('fa-circle-minus');
        } else {
            alert("No data available for expansion");
        }
    }
}

function dsr_work_analysis_tbody()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
    var monthnumber = month.indexOf($("#month_performance").val().split(" ")[0]);
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#month_performance").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    startdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    enddate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    startdate = encodeURIComponent(startdate); // window.targetuser
    enddate = encodeURIComponent(enddate); // window.targetuser

    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=my_performance@d@dsr_work_analysis@d@Tushar%20Sahebrao%20More@d@2024-09-01@d@2024-09-30@d@@d@@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=my_performance@d@dsr_work_analysis@d@${encodeURIComponent(username)}@d@${startdate}@d@${enddate}@d@@d@@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);

    if (data[0].txt == "txt is null")
    {
        fild = '<tr style="font-size: 14px;text-align:center;font-weight: 500;"><td colspan="9" style="text-align:center"><div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 500px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></td></tr>';
        document.getElementById("dsr_work_analysis_body").innerHTML = fild;
    }
    else
    {
        data = JSON.parse(data[0].txt);
        var fild = '';
        let totalhoure = 0;
        let totalattemptqty = 0;
        let totalworkdoneqty = 0;
        let totalworkdoneamt = 0;
        for (var i = 0; i < data.length; i++)
        {
            totalhoure += parseInt(data[i].total_hrs);
            totalattemptqty += parseInt(data[i].attempt_qty);
            totalworkdoneqty += parseInt(data[i].work_done_qty);
            totalworkdoneamt += parseInt(data[i].work_done_amount);
            fild += '<tr style = "border-bottom: 1px solid #ddd;">'+
                '<td>'+(i + 1)+'</td>'+
                '<td>'+ (data[i].dsr_work_type ? data[i].dsr_work_type : '' ) +'</td>'+
                '<td>'+ (data[i].dsr_task_name ? data[i].dsr_task_name : '') +'</td>'+
                '<td>'+ (data[i].dsr_project ? data[i].dsr_project : '') +'</td>'+
                '<td>'+ (data[i].dsr_task_category ? data[i].dsr_task_category : '') +'</td>'+
                '<td>'+ (data[i].total_hrs ? (data[i].total_hrs.toString().includes('.') ? data[i].total_hrs.toString().split('.')[0] : data[i].total_hrs) : '') +'</td>'+
                '<td>'+ (data[i].attempt_qty ? data[i].attempt_qty : '') +'</td>'+
                '<td>'+ (data[i].work_done_qty ? data[i].work_done_qty : '') +'</td>'+
                '<td>'+ (data[i].work_done_amount ? data[i].work_done_amount : '') +'</td>'+
            '</tr>';
        }
        fild += '<tr style="font-size: 12px; font-weight: bold;">';
        fild += '<td colspan="4"></td>';
        fild += '<td>Grand Total</td>';
        fild += '<td>' + totalhoure + '</td>';
        fild += '<td>' + totalattemptqty + '</td>';
        fild += '<td>' + totalworkdoneqty + '</td>';
        fild += '<td>' + totalworkdoneamt + '</td>';
        fild += '</tr>';
        document.getElementById("dsr_work_analysis_body").innerHTML = fild;
    }
}
function location_analysis_tbody()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
    var monthnumber = month.indexOf($("#month_performance").val().split(" ")[0]);
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#month_performance").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    startdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    enddate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    startdate = encodeURIComponent(startdate); // window.targetuser
    enddate = encodeURIComponent(enddate); // window.targetuser

    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=my_performance@d@location_analysis@d@Tushar%20Sahebrao%20More@d@2024-09-01@d@2024-09-30@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=my_performance@d@location_analysis@d@${encodeURIComponent(username)}@d@${startdate}@d@${enddate}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    if (data[0].txt == "txt is null")
    {
        fild = '<tr style="font-size: 14px;text-align:center;font-weight: 500;"><td colspan="7" style="text-align:center"><div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 500px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></td></tr>';
        document.getElementById("location_analysis_body").innerHTML = fild;
    }
    else
    {
        data = JSON.parse(data[0].txt);
        var fild = ''
        for (var i = 0; i < data.length; i++)
        {
            if(data[i].attd == 'Late' )
            {
                fild += '<tr style = "border-bottom: 1px solid #ddd;">'+
                    '<td>'+(i + 1)+'</td>'+
                    '<td>'+ (data[i].day ? data[i].day : '' ) +'</td>'+
                    '<td>'+ (fixUtf8Smart(data[i].sign_in_location) ? fixUtf8Smart(data[i].sign_in_location) : '') +'</td>'+
                    '<td>'+ (data[i].intime ? (data[i].intime.toString().includes('.') ? data[i].intime.toString().split('.')[0] : data[i].intime) : '') +'</td>'+
                    '<td>'+ (data[i].signout_location ? data[i].signout_location : '') +'</td>'+
                    '<td>'+ (data[i].outtime ? (data[i].outtime.toString().includes('.') ? data[i].outtime.toString().split('.')[0] : data[i].outtime) : '') +'</td>'+
                    '<td style="display: flex;justify-content: center;"><div style="border: 1px solid #A251E2;background-color: #F6EBFF;padding: 2px 4px;border-radius: 6px;color: #A251E2;justify-content: center;display: flex;width: max-content;padding: 2px 10px;">'+ (data[i].attd ? data[i].attd : '') +'</div></td>'+
                '</tr>';
            }
            else if(data[i].attd == 'Present' )
            {
                fild += '<tr style = "border-bottom: 1px solid #ddd;">'+
                '<td>'+(i + 1)+'</td>'+
                '<td>'+ (data[i].day ? data[i].day : '' ) +'</td>'+
                '<td>'+ (fixUtf8Smart(data[i].sign_in_location) ? fixUtf8Smart(data[i].sign_in_location) : '') +'</td>'+
                '<td>'+ (data[i].intime ? (data[i].intime.toString().includes('.') ? data[i].intime.toString().split('.')[0] : data[i].intime) : '') +'</td>'+
                '<td>'+ (data[i].signout_location ? data[i].signout_location : '') +'</td>'+
                '<td>'+ (data[i].outtime ? (data[i].outtime.toString().includes('.') ? data[i].outtime.toString().split('.')[0] : data[i].outtime) : '') +'</td>'+
                '<td style="display: flex;justify-content: center;"><div style="border: 1px solid #10B981;background-color: #DEFFF6;padding: 2px 4px;border-radius: 6px;color: #10B981;justify-content: center;display: flex;width: max-content;padding: 2px 10px;">'+ (data[i].attd ? data[i].attd : '') +'</div></td>'+
                '</tr>';
            }
            else if(data[i].attd == 'Absent' )
            {
                fild += '<tr style = "border-bottom: 1px solid #ddd;">'+
                '<td>'+(i + 1)+'</td>'+
                '<td>'+ (data[i].day ? data[i].day : '' ) +'</td>'+
                '<td>'+ (fixUtf8Smart(data[i].sign_in_location) ? fixUtf8Smart(data[i].sign_in_location) : '') +'</td>'+
                '<td>'+ (data[i].intime ? (data[i].intime.toString().includes('.') ? data[i].intime.toString().split('.')[0] : data[i].intime) : '') +'</td>'+
                '<td>'+ (data[i].signout_location ? data[i].signout_location : '') +'</td>'+
                '<td>'+ (data[i].outtime ? (data[i].outtime.toString().includes('.') ? data[i].outtime.toString().split('.')[0] : data[i].outtime) : '') +'</td>'+
                '<td style="display: flex;justify-content: center;"><div style="border: 1px solid #FF4E4E;background-color: #FCEBEB;padding: 2px 4px;border-radius: 6px;color: #FF4E4E;justify-content: center;display: flex;width: max-content;padding: 2px 10px;">'+ (data[i].attd ? data[i].attd : '') +'</div></td>'+
                '</tr>';
            }
            else if(data[i].attd == 'Weekly Off' )
            {
                fild += '<tr style = "border-bottom: 1px solid #ddd;">'+
                '<td>'+(i + 1)+'</td>'+
                '<td>'+ (data[i].day ? data[i].day : '' ) +'</td>'+
                '<td>'+ (fixUtf8Smart(data[i].sign_in_location) ? fixUtf8Smart(data[i].sign_in_location) : '') +'</td>'+
                '<td>'+ (data[i].intime ? (data[i].intime.toString().includes('.') ? data[i].intime.toString().split('.')[0] : data[i].intime) : '') +'</td>'+
                '<td>'+ (data[i].signout_location ? data[i].signout_location : '') +'</td>'+
                '<td>'+ (data[i].outtime ? (data[i].outtime.toString().includes('.') ? data[i].outtime.toString().split('.')[0] : data[i].outtime) : '') +'</td>'+
                '<td style="display: flex;justify-content: center;"><div style="border: 1px solid #FF5F98;background-color: #F8EAEF;padding: 2px 4px;border-radius: 6px;color: #FF5F98;justify-content: center;display: flex;width: max-content;padding: 2px 10px;">'+ (data[i].attd ? data[i].attd : '') +'</div></td>'+
                '</tr>';
            }
            else if(data[i].attd == 'Mismatch' )
            {
                fild += '<tr style = "border-bottom: 1px solid #ddd;">'+
                '<td>'+(i + 1)+'</td>'+
                '<td>'+ (data[i].day ? data[i].day : '' ) +'</td>'+
                '<td>'+ (fixUtf8Smart(data[i].sign_in_location) ? fixUtf8Smart(data[i].sign_in_location) : '') +'</td>'+
                '<td>'+ (data[i].intime ? (data[i].intime.toString().includes('.') ? data[i].intime.toString().split('.')[0] : data[i].intime) : '') +'</td>'+
                '<td>'+ (data[i].signout_location ? data[i].signout_location : '') +'</td>'+
                '<td>'+ (data[i].outtime ? (data[i].outtime.toString().includes('.') ? data[i].outtime.toString().split('.')[0] : data[i].outtime) : '') +'</td>'+
                '<td style="display: flex;justify-content: center;"><div style="border: 1px solid #15C3D9;background-color:#E0FCFF;padding: 2px 4px;border-radius: 6px;color: #15C3D9;justify-content: center;display: flex;width: max-content;padding: 2px 10px;">'+ (data[i].attd ? data[i].attd : '') +'</div></td>'+
                '</tr>';
            }
            else if(data[i].attd == 'Half Day' )
            {
                fild += '<tr style = "border-bottom: 1px solid #ddd;">'+
                '<td>'+(i + 1)+'</td>'+
                '<td>'+ (data[i].day ? data[i].day : '' ) +'</td>'+
                '<td>'+ (fixUtf8Smart(data[i].sign_in_location) ? fixUtf8Smart(data[i].sign_in_location) : '') +'</td>'+
                '<td>'+ (data[i].intime ? (data[i].intime.toString().includes('.') ? data[i].intime.toString().split('.')[0] : data[i].intime) : '') +'</td>'+
                '<td>'+ (data[i].signout_location ? data[i].signout_location : '') +'</td>'+
                '<td>'+ (data[i].outtime ? (data[i].outtime.toString().includes('.') ? data[i].outtime.toString().split('.')[0] : data[i].outtime) : '') +'</td>'+
                '<td style="display: flex;justify-content: center;"><div style="border: 1px solid #797708;background-color:#f0f3b8;padding: 2px 4px;border-radius: 6px;color: #797708;justify-content: center;display: flex;width: max-content;padding: 2px 10px;">'+ (data[i].attd ? data[i].attd : '') +'</div></td>'+
                '</tr>';
            }
            else if(data[i].attd == 'Paid Leave' )
            {
                fild += '<tr style = "border-bottom: 1px solid #ddd;">'+
                '<td>'+(i + 1)+'</td>'+
                '<td>'+ (data[i].day ? data[i].day : '' ) +'</td>'+
                '<td>'+ (fixUtf8Smart(data[i].sign_in_location) ? fixUtf8Smart(data[i].sign_in_location) : '') +'</td>'+
                '<td>'+ (data[i].intime ? (data[i].intime.toString().includes('.') ? data[i].intime.toString().split('.')[0] : data[i].intime) : '') +'</td>'+
                '<td>'+ (data[i].signout_location ? data[i].signout_location : '') +'</td>'+
                '<td>'+ (data[i].outtime ? (data[i].outtime.toString().includes('.') ? data[i].outtime.toString().split('.')[0] : data[i].outtime) : '') +'</td>'+
                '<td style="display: flex;justify-content: center;"><div style="border: 1px solid #FF8918;background-color:#FFF9F3;padding: 2px 4px;border-radius: 6px;color: #FF8918;justify-content: center;display: flex;width: max-content;padding: 2px 10px;">'+ (data[i].attd ? data[i].attd : '') +'</div></td>'+
                '</tr>';
            }
            else if(data[i].attd == 'Company Holiday' )
            {
                fild += '<tr style = "border-bottom: 1px solid #ddd;">'+
                '<td>'+(i + 1)+'</td>'+
                '<td>'+ (data[i].day ? data[i].day : '' ) +'</td>'+
                '<td>'+ (fixUtf8Smart(data[i].sign_in_location) ? fixUtf8Smart(data[i].sign_in_location) : '') +'</td>'+
                '<td>'+ (data[i].intime ? (data[i].intime.toString().includes('.') ? data[i].intime.toString().split('.')[0] : data[i].intime) : '') +'</td>'+
                '<td>'+ (data[i].signout_location ? data[i].signout_location : '') +'</td>'+
                '<td>'+ (data[i].outtime ? (data[i].outtime.toString().includes('.') ? data[i].outtime.toString().split('.')[0] : data[i].outtime) : '') +'</td>'+
                '<td style="display: flex;justify-content: center;"><div style="border: 1px solid #577FFB;background-color:#EFF3FF;padding: 2px 4px;border-radius: 6px;color: #577FFB;justify-content: center;display: flex;width: max-content;padding: 2px 10px;">'+ (data[i].attd ? data[i].attd : '') +'</div></td>'+
                '</tr>';
            }
            else if(data[i].attd == 'Early' )
            {
                fild += '<tr style = "border-bottom: 1px solid #ddd;">'+
                '<td>'+(i + 1)+'</td>'+
                '<td>'+ (data[i].day ? data[i].day : '' ) +'</td>'+
                '<td>'+ (fixUtf8Smart(data[i].sign_in_location) ? fixUtf8Smart(data[i].sign_in_location) : '') +'</td>'+
                '<td>'+ (data[i].intime ? (data[i].intime.toString().includes('.') ? data[i].intime.toString().split('.')[0] : data[i].intime) : '') +'</td>'+
                '<td>'+ (data[i].signout_location ? data[i].signout_location : '') +'</td>'+
                '<td>'+ (data[i].outtime ? (data[i].outtime.toString().includes('.') ? data[i].outtime.toString().split('.')[0] : data[i].outtime) : '') +'</td>'+
                '<td style="display: flex;justify-content: center;"><div style="border: 1px solid #A4BC0E;background-color:#FCFFEC;padding: 2px 4px;border-radius: 6px;color: #A4BC0E;justify-content: center;display: flex;width: max-content;padding: 2px 10px;">'+ (data[i].attd ? data[i].attd : '') +'</div></td>'+
                '</tr>';
            }
        }
        document.getElementById("location_analysis_body").innerHTML = fild;
    }
}
// MY TEAM
function dsr_approve_table()
{
    var fild = "";
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=my_team@d@DSR_Approval@d@ERP%20Admin@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=my_team@d@DSR_Approval@d@${encodeURIComponent(username)}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);
    
    if (data[0].txt == "txt is null")
    {
        fild = `<tr style="font-size: 14px;text-align:center;font-weight: 500;"><td colspan="4" style="text-align:center">
            <div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 400px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>
            </td></tr>`;
        document.getElementById("dsr_approval_tblbody").innerHTML = fild;
        document.getElementById("dsr_total").innerText = 0;
        return;
    }
    data = JSON.parse(data[0].txt)
    let dataLength = data.length;
    var itemlist = '';
    data.forEach(function(item, index) {
        let icon = item.state === "Approved" ? '<i class="fa-sharp fa-solid fa-circle-check"></i>' : '';

        itemlist += 
        `<tr style="border-bottom: 1px solid lightslategray;">
            <td style="width: 33.33%;">${item.employee_name}</td>
            <td style="width: 33.33%;">${item.dsr_date}</td>
            <td style="width: 33.33%;">${item.state}</td>
            <td><button id="dsr_approv_btn" type="button" class="btn" style="width: 110px; border: 1px solid #33C5AE; color:#33C5AE;" onclick="openform_dsr('${item.id}','4265','dsr_forms')">Approve<span> <i class="fa-sharp fa-solid fa-circle-check"></i></span></button></td>     
        </tr>`
    });

    const reimbursement = document.getElementById("dsr_approval_tblbody");
    reimbursement.innerHTML=''
    reimbursement.innerHTML=itemlist;

    document.getElementById("dsr_total").innerHTML = dataLength;
}
// function dsr_app(recordid)
// {
//     var getUrl = window.location;
//     var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
//     baseurl = baseurl.split("pages")[0];
//     // 'https://hrms.autonomouserp.com/SaveFormField.do?actn=SaveDynamicStatePending&formid=4072&editids=state/&selectedids=""&jvals=3967@j@';
//     var urltotal = `${baseurl}SaveFormField.do?actn=SaveDynamicStatePending&formid=4072&editids=state/&selectedids=${recordid}&jvals=3967@j@`
//     fetch(urltotal)
//     .then((res) => {
//         showToast('Successfully Approved');
//         dsr_approve_table();
//         return res
//     })
//     .then(data => {
 
//     })
// }
function teamiouaptable() {
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

        var date = new Date();
        var month = date.getMonth() + 1; // Adding 1 because getMonth() returns zero-based index
        var year = date.getFullYear();
        // Construct the start date string with the first day of the current month in "yyyy-mm-dd" format
        var startdate = year + "-" + ("0" + month).slice(-2) + "-01";
        // Get the last day of the current month
        var lastDay = new Date(year, month, 0).getDate();
        // Construct the end date string with the last day of the current month in "yyyy-mm-dd" format
        var enddate = year + "-" + ("0" + month).slice(-2) + "-" + lastDay;
    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=IOS_pending_Apprval@d@Rahul%20Tyagi%20Test@d@;
    let urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=IOS_pending_Apprval@d@${encodeURIComponent(username)}@d@2000-01-01@d@${encodeURIComponent(enddate)}@d@${tokenParam}`
    fetch(urltotal)
        .then((res) => {
            return res.json();
        })
        .then((data) => {
            data = JSON.parse(data[0].txt)
            var itemlist = '';
            data.forEach(function(item, index) {
                itemlist += 
                `<tr style="border-bottom: 1px solid lightslategray;">
                    <td style="text-align: center;"><label class="container"><input id="ioutabcheckbox${index}" type="checkbox" class="selectbox"><span class="checkmark"></span></label></td>
                    <td>${item.employeename}</td>
                    <td>${item.iou_date}</td>
                    <td>${item.iou_amount}</td>
                    <td>${item.iou_particular}</td>
                    <td>${item.status}</td>
                    <td><button type="button" class="btn" style="width: 110px; border: 1px solid #33C5AE; color:#33C5AE;" onclick="openform('${item.id}','1169')" >Approve<span> <i class="fa-sharp fa-solid fa-circle-check"></i></span></button></td>
                    <td><button type="button" class="btn" style="width: 92px; border: 1px solid #F6566E; color:#F6566E;" onclick="openform('${item.id}','1169')">Reject<span> <i class="fa-solid fa-circle-xmark"></i></span></button></td>
                </tr>`
            });

            const iouTable = document.getElementById("teamiouapproval");
            iouTable.innerHTML=''
            iouTable.innerHTML=itemlist;
            
        });
    }
function openform_dsr(recordid,formid,modalDivId="")
{  
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    var cloudcode = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : "";
    var username = window.targetuser ? `&username=${encodeURIComponent(window.targetuser)}` : "";
    var infiverseid = window.infivereuserid ? `&useridInfiverse=${encodeURIComponent(window.infivereuserid)}` : "";

// https://hrms.autonomouserp.com/getFormLink.do?actn=EditEnter&formid=4090&reportid=1&id=4090&retrievejavascript=javascript:void%280%29;&ask=COMMAND_NAME_1
var form_url="https://hrms.infiverse.ai/getFormLink.do?actn=EditEnter&formid="+formid+"&reportid="+recordid+"&id="+formid+"&retrievejavascript=javascript:void%280%29;&ask=COMMAND_NAME_1"+tokenParam+cloudcode+username+infiverseid;
$("#dsr_form_iframe").attr("src",form_url);
checkJsp(form_url,modalDivId);
if($("#dsr_forms").hasClass("show"))
{
    $("#dsr_forms").modal("hide");
}
else{
    $("#dsr_forms").modal("show");
}
if(formid == "4090")
{
    teamAttendancePendingApproval();
    team_approval_pending() ;
}
else{
    dsr_approve_table();
}
}

// function approve_reject(formid,recordid,state,actionname)
// {
//     var getUrl = window.location;
//     var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
//     baseurl = baseurl.split("pages")[0];
//     // 'https://hrms.autonomouserp.com/SaveFormField.do?actn=SaveDynamicStatePending&formid=4072&editids=state/&selectedids=""&jvals=3967@j@';
//     var urltotal = `${baseurl}SaveFormField.do?actn=SaveDynamicStatePending&formid=${formid}&editids=state/&selectedids=${recordid}&jvals=${state}@j@`
//     fetch(urltotal)
//     .then((res) => {
//         if(actionname == "approve")
//         {
//             showToast('Successfully Approved');
//             team_approval_pending();
//         }
//         else if(actionname == "reject")
//         {
//             showToast('Successfully Rejected');
//             team_approval_pending();
//         }
//         if(formid == "4090")
//         {
//             teamAttendancePendingApproval();
//             team_approval_pending() ;
//         }
//         return res
//     })
//     .then(data => {
 
//     })
// }
function team_approval_pending() 
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var date = new Date();
    var month = date.getMonth() + 1; // Adding 1 because getMonth() returns zero-based index
    var year = date.getFullYear();
    // Construct the start date string with the first day of the current month in "yyyy-mm-dd" format
    var startdate = year + "-" + ("0" + month).slice(-2) + "-01";
    // Get the last day of the current month
    var lastDay = new Date(year, month, 0).getDate();
    // Construct the end date string with the last day of the current month in "yyyy-mm-dd" format
    var enddate = year + "-" + ("0" + month).slice(-2) + "-" + lastDay;
    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=pending_Apprval_count@d@ERP%20Admin@d@2024-04-01@d@2024-04-30@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=pending_Apprval_count@d@${encodeURIComponent(username)}@d@2000-01-01@d@${encodeURIComponent(enddate)}@d@${tokenParam}`
    // let urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=pending_Apprval_count@d@${encodeURIComponent(username)}@d@`
    data = callajax(urltotal);
    data = JSON.parse(data);
    try
    {
        data = JSON.parse(data[0].txt);
        var totalcount = parseInt(data[0].approval_count)+parseInt(data[0].pending_approval)+parseInt(data[0].futurecount)+parseInt(data[0].ios_approval)+parseInt(data[0].reimbursement_count)
        var field =
            '<button class="btn dropdown-toggle" type="button" style="font-weight: 500;gap: 17px;font-size: 13px;display: flex;justify-content: space-between;align-items: center;color: #5D51E2;border: 1px solid #5D51E2;border-radius: 6px;padding: 4px 7px;" id="myteam_main_dropdown" data-bs-toggle="dropdown" aria-expanded="false">' +
            'Team Approval Pending <span style="border-radius: 6px;border: 1px solid #D6DDF8;padding: 3px 8px;color: #5D51E2;background-color: #D6DDF8;position: relative;font-size: 12px;">'+totalcount+'</span>' +
            '</button>' +
            '<ul class="dropdown-menu" aria-labelledby="myteam_main_dropdown" style="font-size: 14px;">' +
            '<li class="myteam_approval_select"><a class="dropdown-item" href="#" style="display: flex;justify-content:space-between; font-size:14px" onclick="showScreen(this,\'team_leave_approval\')">Team Leave Pending for Approval <span style="border: 1px solid; border-radius: 3px; background-color: #FE8802;color: white; min-width: 25px;text-align: center;">' + data[0].pending_approval + '</span></a></li>' +
            '<li class="myteam_approval_select"><a class="dropdown-item" href="#" style="display: flex;justify-content:space-between; font-size:14px" onclick="showScreen(this,\'attendanceapproval\')">Team Attendance Pending for Approval <span style="border: 1px solid; border-radius: 3px; background-color: #059D46;color: white; min-width: 25px;text-align: center;">' + data[0].approval_count + '</span></a></li>' +
            '<li class="myteam_approval_select"><a class="dropdown-item" href="#" style="display: flex;justify-content:space-between; font-size:14px" onclick="showScreen(this,\'calendarformyteam\', \'myteam_header_filter\')">Team Leave Calendar - Future leaves <span style="border: 1px solid; border-radius: 3px; background-color: #18469E;color: white; min-width: 25px;text-align: center;"> ' + data[0].futurecount + '</span></a></li>' +
            '<li class="myteam_approval_select"><a class="dropdown-item" href="#" style="display: flex;justify-content:space-between; font-size:14px" onclick="showScreen(this,\'iouapproval\')">Team IOU Approval <span style="border: 1px solid; border-radius: 3px; background-color: #23BC8D;color: white; min-width: 25px;text-align: center;">' + data[0].ios_approval + '</span></a></li>' +
            '<li class="myteam_approval_select"><a class="dropdown-item" href="#" style="display: flex;justify-content:space-between; font-size:14px" onclick="showScreen(this,\'myteamreimbursement\')">Team Reimbursement Approval <span style="border: 1px solid; border-radius: 3px; background-color: #CF2E95;color: white; min-width: 25px;text-align: center;">' + data[0].reimbursement_count + '</span></a></li>' +
            '</ul>';
        // $("#rightsidelist").html(field);
        document.getElementById('rightsidelist').innerHTML = field;
        
        $(".myteam_approval_select").click(function(){
            $(".myteam_approval_select").removeClass("active");
            $(this).addClass("active");   
        });
    }
    catch (e)
    {
    }
}
function Progressbarcircularr(onchangeflag="")
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    //var cloudcode = encodeURIComponent( window.targetcloud);
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var tempdate = $("#calendar").val();
    tempdate = tempdate.replace(",","");
    tempdate = tempdate.split(" ");
    var month_arr = ["", "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
    var month_num_arr = ["", "01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12"];
    // var month_arr = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "July", "Aug", "Sep", "Oct", "Nov", "Dec"];
    // var month_num_arr = ["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12"];
    currentDate = tempdate[2] + '-' + month_num_arr[month_arr.indexOf(tempdate[1])] + '-' + tempdate[0];
    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=My_Team@d@Mansi%20Rane@d@2024-04-01@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=My_Team@d@${encodeURIComponent(username)}@d@${encodeURIComponent(currentDate)}@d@${tokenParam}`;  
    data = callajax(urltotal);
    data = JSON.parse(data);
    var colorarr = ["#089E47","#FF2334","#FD8800","#CA4153","#AC1BFE","#A4CA41","#4079CA"];
    if(data[0].txt == "txt is null")
    {
        for(var k=0;k<=7;k++)
        {
            $("#myteamgauge"+k).kendoCircularGauge({
            value: 0,
            color: colorarr[(k+1)-1],
            scale: {
                min: 0,
                max: 365,
            },
            gaugeArea:{
                width: 80,
                height: 80
            },
            centerTemplate: '<span style="color: #: color #; text-align: center;">#= value == 365 ? "<span class=\'k-icon k-i-check\'></span>" : value #</span>'
            });
        }
        var teamcount ='<div style="font-size: 40px; color: rgb(22, 22, 170);width: 50%; text-align: center;display: flex">0</div>';// : '<div style="font-size: 40px; color: rgb(22, 22, 170);margin-left: 6%;">' + data[0].team + '</div>';
        document.getElementById('team_size').innerHTML = teamcount;
        return;
    }
    data = JSON.parse(data[0].txt);//JSON.parse(data[0]);
    var customcountar = [];
    customcountar.push(data[0].present_count);
    customcountar.push(data[0].absent_count);
    // customcountar.push(data[0].onleave || 0);
    customcountar.push(data[0].leave || 0);
    customcountar.push(data[0].week_off);
    customcountar.push(data[0].late_count);
    customcountar.push(data[0].od_count);
    customcountar.push(data[0].half_day);

    for(var k=0;k<=7;k++)
    {
        
        $("#myteamgauge"+k).kendoCircularGauge({
            value: customcountar[(k+1)-1],
            color: colorarr[(k+1)-1],
            scale: {
                min: 0,
                max: 365,
            },
            gaugeArea:{
                width: 80,
                height: 80
            },
            centerTemplate: '<span style="color: #: color #;">#= value == 365 ? "<span class=\'k-icon k-i-check\'></span>" : value #</span>'
        });
        if(customcountar[(k+1)-1] < 10)
        {
            $("#myteamgauge"+k).children(".k-arcgauge-label").addClass("singledigit");
        }
    }
    var teamcount = '<div style="font-size: 40px; color: rgb(22, 22, 170);width: 50%; text-align: center;display:flex;">'+data[0].team+'</div>';
    document.getElementById('team_size').innerHTML = teamcount;
}
function team_attendance()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];

    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=hrms&ids=valuestring/&valuestring=team_member@d@Mansi%20Rane@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=team_member@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    try
    {
        if (data[0].txt == 'txt is null')
        {
            document.getElementById("profile_name").innerHTML = `<td style="text-align:center;font-weight: 600;background-color: white; font-size: 14px;">
                <div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>
                </td>`;
        }

        data = JSON.parse(data[0].txt);

        // Sorting data array by empname in ascending order
        data.sort((a, b) => {
            if (a.empname < b.empname) return -1;
            if (a.empname > b.empname) return 1;
            return 0;
        });

        var field = "";
        var random = parseInt(Math.random() * (9999999 - 999) + 999);
        var daysInCurrentMonth=new Date(new Date().getFullYear(), new Date().getMonth() + 1, 0).getDate();

        var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
        var monthnumbers = month.indexOf($("#monthDropdown").val().split(" ")[0]);
        monthnumbers = parseInt(monthnumbers)+1;
        monthnumbers = (monthnumbers > 9 ? monthnumbers : "0"+monthnumbers);
        var date = new Date(monthnumbers+"/01/"+$("#monthDropdown").val().split(" ")[1]);
        y = date.getFullYear();
        m = date.getMonth()+1;
        daysInCurrentMonth=new Date(y, m, 0).getDate();
        var final_tbody_days = "";
        for (var i = 0; i < data.length; i++)
        {
            field += '<tr>' +
                '<td class="proftable"><span class="imgspan"><img src="../uploadshrms/Folder307/' + data[i].id + 'column2965.gif?random=' + random + '" alt="" onerror="this.src=\'./images/profile-icon.png\'"></span> &nbsp;' + data[i].empname + '</td>' +
                '</tr>';
            var tbody_days = '<tr id="attd_data_'+i+'" class="calendar_tr" style="text-align: center;">';
            for(var j=1 ; j<=daysInCurrentMonth ; j++)
            {
                temp_id = data[i].empname;
                temp_id = temp_id.trim().toLowerCase();
                temp_id = temp_id.replaceAll(" ","_")+"_"+j;
                tbody_days += '<td id="'+temp_id+'" class="present datetd"></td>';
            }
            tbody_days += '</tr>';
            final_tbody_days += tbody_days;
        }
        $("#profile_name").html(field);
        $("#table_two_tbody").html(final_tbody_days);
        // if(calledfromonchange != "")
        // {
        //     emp_attedance_record(calledfromonchange);
        // }
    }
    catch (e)
    {   
    }
}
function emp_attedance_record()
{
    var daysInCurrentMonth=new Date(new Date().getFullYear(), new Date().getMonth() + 1, 0).getDate();

    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
    var monthnumbers = month.indexOf($("#monthDropdown").val().split(" ")[0]);
    monthnumbers = parseInt(monthnumbers)+1;
    monthnumbers = (monthnumbers > 9 ? monthnumbers : "0"+monthnumbers);
    var date = new Date(monthnumbers+"/01/"+$("#monthDropdown").val().split(" ")[1]);
    y = date.getFullYear();
    m = date.getMonth()+1;
    daysInCurrentMonth=new Date(y, m, 0).getDate();

    var thead_days = '<tr class="calendar_tr" style="font-weight: 600;top: 0px;position: sticky;background: #E8ECF9; font-size: 15px;">';
    for(var i=1 ; i<=daysInCurrentMonth ; i++)
    {
        var tempdays = (i<10?"0"+i:i);
        thead_days += '<td class="datetd">'+tempdays+'</td>';
    }
    thead_days += '</tr>';
    $("#table_two_thead").html(thead_days);
    $("tr[id^='attd_data_'").each(function(){
        $(this).children("td").children("i").remove();
    })
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];

    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var date = new Date(monthnumbers+"/01/"+$("#monthDropdown").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    firstdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    lastdate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    startdate = firstdate;
    enddate = lastdate;

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Employee_Attedance_Monthly@d@Mansi%20Rane@d@2024-03-01@d@2024-03-30@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Employee_Attedance_Monthly@d@${encodeURIComponent(username)}@d@${encodeURIComponent(startdate)}@d@${encodeURIComponent(enddate)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    try
    {
        if (data[0].txt == 'txt is null')
        {
            document.getElementById("attd_data").innerHTML = `<td colspan="${daysInCurrentMonth}" style="text-align:center;font-weight: 600;background-color: white; font-size: 14px;">
                <div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 130px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>
                </td>`;
        }
        data = JSON.parse(data[0].txt);//JSON.parse(data[0]);
        var field =  "";
        for(var i=0;i<data.length;i++)
        {
            var emp_name = data[i].employename;
            emp_name = emp_name.trim().toLowerCase();
            emp_name = emp_name.replaceAll(" ","_");

            var emp_day = data[i].day;
            emp_day = emp_day.split(" ")[0];
            emp_day = (emp_day.indexOf("0") == 0 ? emp_day.replace("0","") : emp_day);

            var emp_attd = data[i].attd;
            var emp_id = data[i].id;
            var temp_emp_id = emp_name+"_"+emp_day;

            // below line add for tooltip, it will showing project name.....
            var project = data[i]["signinprojectname"] || "";
            // var signinLocation = data[i]["sign_in_location"] || "-";
            var signinLocation = fixUtf8Smart(data[i]["sign_in_location"] || "-");
            var signoutLocation = data[i]["sign_out_location"] || "-";
            var signin = data[i]["intime"] || "-";
            var signout = data[i]["outtime"] || "-";
            
            var tooltip = `Project : ${project}\nSign In : ${signin}\nSign In Location : ${signinLocation}\nSign Out : ${signout}\nSign Out Location : ${signoutLocation}`;
            $("#" + temp_emp_id).attr("title", tooltip);
            
            $("#"+temp_emp_id).removeClass();
            $("#"+temp_emp_id).addClass('datetd');
            if(emp_attd == "Absent")
            {
                $("#"+temp_emp_id).html('<i class="fa-sharp fa-solid fa-xmark"></i>');
                $("#"+temp_emp_id).addClass('absent');
            }
            else if(emp_attd == "Present")
            {
                $("#"+temp_emp_id).html('<i class="fa-sharp fa-solid fa-check"></i>');
                $("#"+temp_emp_id).addClass('present');
            }
            else if(emp_attd == "Weekly Off")
            {
                $("#"+temp_emp_id).html('<i class="fa-solid fa-circle"></i>');
                $("#"+temp_emp_id).addClass('weekoff');
            }
            else if(emp_attd == "Early")
            {
                $("#"+temp_emp_id).html('<i class="fa-solid fa-right-from-bracket"></i>');
                $("#"+temp_emp_id).addClass('Early');
            }
            else if(emp_attd == "Leave" || emp_attd == "Paid Leave")
            {
                $("#"+temp_emp_id).html('<i class="fa-solid fa-circle"></i>');
                $("#"+temp_emp_id).addClass('onleave');
            }
            else if(emp_attd == "Late")
            {
                $("#"+temp_emp_id).html('<i class="fa-solid fa-circle"></i>');
                $("#"+temp_emp_id).addClass('late');
            }
            else if(emp_attd == "Half Day")
            {
                $("#"+temp_emp_id).html('<i class="fa-regular fa-circle-half-stroke"></i>');
                $("#"+temp_emp_id).addClass('half_day');
            }
            else if(emp_attd == "OD Days")
            {
                $("#"+temp_emp_id).html('<i class="fa-solid fa-circle"></i>');
                $("#"+temp_emp_id).addClass('on_od');
            }
            else if(emp_attd == "Mismatch")
            {
                $("#"+temp_emp_id).html('<i class="fa-regular fa-circle-x"></i>');
                $("#"+temp_emp_id).addClass('on_mismatch');
            }
            else if(emp_attd == "Company Holiday")
            {
                $("#"+temp_emp_id).html('<i class="fa-solid fa-circle-h"></i>');
                $("#"+temp_emp_id).addClass('company_holiday');
            }
        }
    }
    catch(e)
    {
    }
}
function createChart() 
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
    var monthnumber = month.indexOf($("#myteam_months").val().split(" ")[0]);
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#myteam_months").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    firstdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    lastdate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
    
    var chart = $("#chartbarcolumn").data("kendoChart");
    if (chart)
    {
        $("#chartbarcolumn").empty();
    }

    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=EmployeevsProject@d@${encodeURIComponent(username)}@d@${firstdate}@d@${lastdate}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    if (data[0].txt == "txt is null")
    {
        // fild ='<div style="height:350px;display: flex;justify-content: center;align-items: center;font-size: 17px;">Data Not Found</div>';
        fild = '<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
        document.getElementById("chart-kendo-bar").innerHTML = fild;
        return;
    }   
        
    data = JSON.parse(data[0].txt);

//     data = [
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Web App Development", "project_name_count": 30},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Mobile App Design", "project_name_count": 2},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Backend API Integration", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Database Optimization", "project_name_count": 2},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Frontend Enhancement", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Security Patching", "project_name_count": 3},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Bug Fixing", "project_name_count": 2},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Code Review", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Performance Testing", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Automation Scripting", "project_name_count": 20},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "System Deployment", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "UI/UX Improvements", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Feature Enhancement", "project_name_count": 2},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "API Documentation", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Unit Testing", "project_name_count": 2},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Database Migration", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Server Maintenance", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Cloud Integration", "project_name_count": 2},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Load Balancing", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "CI/CD Pipeline", "project_name_count": 2},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Email System Upgrade", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Third-Party API Integration", "project_name_count": 2},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "SEO Optimization", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "CMS Development", "project_name_count": 100},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Chatbot Development", "project_name_count": 2},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "AI Model Training", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "E-commerce Feature", "project_name_count": 2},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Social Media Integration", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Data Visualization", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Payment Gateway Update", "project_name_count": 2},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "IoT Device Connectivity", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Digital Marketing Automation", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Enterprise Security Audit", "project_name_count": 150},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Performance Testing", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Automation Scripting", "project_name_count": 2},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "System Deployment", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "UI/UX Improvements", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Feature Enhancement", "project_name_count": 2},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "API Documentation", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Unit Testing", "project_name_count": 2},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Database Migration", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Server Maintenance", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Cloud Integration", "project_name_count": 2},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Load Balancing", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "CI/CD Pipeline", "project_name_count": 2},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Email System Upgrade", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Third-Party API Integration", "project_name_count": 2},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "SEO Optimization", "project_name_count": 100},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "CMS Development", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Chatbot Development", "project_name_count": 2},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "AI Model Training", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "E-commerce Feature", "project_name_count": 2},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Social Media Integration", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Data Visualization", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Payment Gateway Update", "project_name_count": 50},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "IoT Device Connectivity", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Digital Marketing Automation", "project_name_count": 1},
//   {"employeename": "Yash Gami", "username": "Yash Gami", "project_name": "Enterprise Security Audit", "project_name_count": 2}
// ]




var categoriess = data.map(function(item) {
    return item.employeename;
});
var count = data.map(function(item) {
    return item.project_name_count;
});
var projectname = data.map(function(item) {
    return item.project_name;
});

var colors = ['#69DDDC', '#FFB14C', '#FF2234', '#A4CA41', '#1E90FF', '#FFD700', '#FF6347', '#32CD32', '#8A2BE2', '#FF69B4'];

// Dynamically calculate chart height based on data
var totalCategories = categoriess.length;
var barHeight = 30; 
var gapBetweenBars = 10;
var chartHeight = (barHeight + gapBetweenBars) * totalCategories;

// Use the maximum of (100% parent height OR calculated height)
chartHeight = Math.max(chartHeight, 400);

$("#chart-kendo-bar").kendoChart({
    title: {
        color: 'Black',
        //text: "Employee Vs Project Timelines (Days)"
    },
    legend: {
        visible: false
    },
    seriesDefaults: {
        type: "bar",
        gap: 2,  // Reduced gap to prevent bars merging
        spacing: 0.5, // Adds some spacing between series
        colorField: "color"
    },
    series: [{
        name: projectname,
        data: count.map((value, index) => ({
            value: value,
            projectName: projectname[index],
            employeeName: categoriess[index],
            color: colors[index % colors.length]
        })),
        labels: {
            visible: true,
            align: "end",
            template: "#= value #"
        },
        tooltip: {
            visible: true,
            template: function(e) {
                return e.dataItem.projectName;
            }
        },
    }],
    valueAxis: {
        visible: false,
        line: {
            visible: false
        },
        majorGridLines: {
            visible: false
        },
        labels: {
            format: "{0}" // Format to make numbers readable
        }
    },
    categoryAxis: {
        categories: categoriess,
        majorGridLines: {
            visible: false
        },
        labels: {
            rotation: -45, // Rotate to prevent overlapping
            padding: { left: 5 }
        },
        line: {
                visible: false
            },
        autoFit: true, 
        gap: 1  // Controls space between categories
    },
    chartArea: {
        height: chartHeight,  // Dynamically calculated height
    },
    transitions: true,
    seriesClick: function(e) {
        console.log(e.dataItem.projectName);
        projectvstaskgraph(e.dataItem.projectName, e.dataItem.employeeName);
    }
});



    // var categoriess = data.map(function(item) {
    //     return item.employeename;
    // });
    // var count = data.map(function(item) {
    //     return item.project_name_count;
    // });
    // var projectname = data.map(function(item) {
    //     return item.project_name;
    // });

    // var colors = ['#69DDDC', '#FFB14C', '#FF2234', '#A4CA41', '#1E90FF', '#FFD700', '#FF6347', '#32CD32', '#8A2BE2', '#FF69B4'];

    // $("#charthorizontalbar").kendoChart({
        
    //     title: {
    //         // text: "Employee Vs Project Timelines (Days)",
    //         color: 'Black'
    //     },
    //     legend: {
    //         visible: false
    //     },
    //     seriesDefaults: {
    //         type: "bar",
    //         gap: 4,
    //         colorField: "color"

    //     },
    //     series: [{
    //         name: projectname,
    //         // data: count,
    //         data: count.map((value, index) => ({
    //         value: value,
    //         projectName: projectname[index],
    //         employeeName: categoriess[index],
    //         color: colors[index % colors.length]
    //         })),
    //         labels: {
    //             visible: true,
    //             align: "end",
    //             template: "#= value #"
    //         },
    //         tooltip: {
    //         visible: true,
    //         // template: "#= series.name #"
    //         template: function(e) {
    //             return e.dataItem.projectName;
    //         }
    //         },
    //     }],
    //     valueAxis: {
    //         // max: 80,
    //         visible: false,
    //         line: {
    //             visible: false
    //         },
    //         majorGridLines: {
    //             visible: false
    //         },
    //         labels: {
    //             rotation: "auto"
    //         }
    //     },
    //     categoryAxis: {
    //         categories: categoriess,
    //         majorGridLines: {
    //             visible: false
    //         },
    //         line: {
    //             visible: false
    //         },
    //     },
    //     tooltip: {
    //         visible: true,
    //         // template: "#= series.name #: #= value #"
    //     },
    //     seriesClick: function(e) {
    //         console.log(e);
    //         console.log(e.dataItem);
    //         console.log(e.dataItem.projectName);
    //         projectvstaskgraph(e.dataItem.projectName, e.dataItem.employeeName);
    //     }
    // });
    jQuery(window).on("resize", function(event) {
        var chartDiv = jQuery("#chart-kendo-bar");
        var chart = chartDiv.data("kendoChart");
        chartDiv.css({ display:"none" });
        chartDiv.css({ width:chartDiv.parent().innerWidth(), display:"block" });
        chart.redraw();  
    });
}
function projectvstaskgraph(projectname , Empname)
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // var date = new Date();
    // var month = date.getMonth() + 1; 
    // var year = date.getFullYear();
    // var startdate = year + "-" + ("0" + month).slice(-2) + "-01";
    // var lastDay = new Date(year, month, 0).getDate();
    // var enddate = year + "-" + ("0" + month).slice(-2) + "-" + lastDay;

    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
    var monthnumber = month.indexOf($("#myteam_months").val().split(" ")[0]);
    monthnumber = parseInt(monthnumber)+1;
    monthnumber = (monthnumber > 9 ? monthnumber : "0"+monthnumber);
    var date = new Date(monthnumber+"/01/"+$("#myteam_months").val().split(" ")[1]), y = date.getFullYear(), m = date.getMonth();
    var firstDay = new Date(y, m, 1);
    var lastDay = new Date(y, m + 1, 0);
    startdate = firstDay.getFullYear()+"-"+((firstDay.getMonth()+1) > 9 ? (firstDay.getMonth()+1) : "0"+(firstDay.getMonth()+1))+"-01";
    enddate = lastDay.getFullYear()+"-"+((lastDay.getMonth()+1) > 9 ? (lastDay.getMonth()+1) : "0"+(lastDay.getMonth()+1))+"-"+lastDay.getDate();
   
    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=ProjectvsTask@d@Hardik%20Kushte@d@2000-03-01@d@2024-03-29@d@A01@d@
    // let urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=ProjectvsTask@d@${encodeURIComponent(username)}@d@${encodeURIComponent(startdate)}@d@${encodeURIComponent(enddate)}@d@${projectname[0]}@d@`;
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=ProjectvsTask@d@${encodeURIComponent(Empname)}@d@${encodeURIComponent(startdate)}@d@${encodeURIComponent(enddate)}@d@${encodeURIComponent(projectname)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    if (data[0].txt == "txt is null")
    {
        fild ='<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
        document.getElementById("chartbarcolumn").innerHTML = fild;
        return;
    }

    data = JSON.parse(data[0].txt)

    var categoriescolumn = data.map(function(item) {
        var itemlist = item.task_name.split(";;").filter(Boolean);
        return itemlist;
    });
    var hours = data.map(function(item) {
        return item.hrs;
    });

    $("#chartbarcolumn").kendoChart({
    chartArea: {
        height: 350
    },
    title: {
        text: "Project Vs Task",
        color: 'Black',
    },
    valueAxis: {
        title: {
            text: "Projects"
        },
        // max: 25,
        visible: true,
        line: {
            visible: false
        },
        majorGridLines: {
            visible: false
        },
    },
    categoryAxis: {
        categories: categoriescolumn.flat(),
        majorGridLines: {
            visible: false
        },
        line: {
            visible: false
        },
        labels: {
            rotation: -45, // Rotate labels by 45 degrees
            template: function(e) {
                var text = e.value;
                return text.length > 5 ? text.substring(0, 5) + "..." : text;
            }
        }
    },
    seriesDefaults: {
        type: "column",
        gap: 5,
    },
    series: [
        { data: hours },
    ],
    seriesColors: [
        "#A486F6",
    ],
    tooltip: {
        visible: true,
        template: function(e) {
            var categoryValue = e.category;  // X-axis value (Task)
            var dataItem = e.series.dataItems ? e.series.dataItems[e.dataIndex] : null; // Get the correct data item
            
            // Ensure dataItem exists
            if (!dataItem) return `<strong>Task :</strong> ${categoryValue} <br><strong>Hours:</strong> ${e.value}`;

            return `
                <strong>Task :</strong> ${categoryValue} <br>
                <strong>Project :</strong> ${dataItem.project_name || "N/A"} <br> 
                <strong>Hours :</strong> ${e.value} <br>
            `;
        }
    }
});

// Apply tooltip to category labels after chart renders
setTimeout(function() {
    $("#chartbarcolumn .k-chart-category-label").kendoTooltip({
        content: function(e) {
            return $(e.target).text().includes("...") ? $(e.target).attr("data-full-text") : "";
        },
        position: "top"
    });

    // Store full text in a data attribute for labels that were truncated
    $("#chartbarcolumn .k-chart-category-label").each(function() {
        var index = $(this).index();
        var fullText = categoriescolumn.flat()[index]; // Get the original text
        if (fullText.length > 5) {
            $(this).attr("data-full-text", fullText);
        }
    });
}, 500);

}
function total_meeting_table()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

     // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Upcoming_Meeting_list@d@ERP%20Admin@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Upcoming_Meeting_list@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    try
    {
        let rec = "";
        if (data == '' || data.length == 0 || data[0].txt == 'txt is null')
        {
            rec += '<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
            $("#upcoming_meetings_list1").html(rec);
            return;
        }
        data = JSON.parse(data[0].txt);
        var field = "";
        for (var i = 0; i < data.length; i++)
        {
            let meetingSchedule = data[i].schedule;
            let [startPart, endPart] = meetingSchedule.split(' - ');
            
            // Parse start time
            let startDateTime = new Date(startPart);
            
            // Parse end time
            let [endTime, endPeriod] = endPart.split(' ');
            let [endHour, endMinute] = endTime.split(':');
            
            if (endPeriod === "PM" && endHour !== "12")
            {
                endHour = parseInt(endHour) + 12;
            }
            else if (endPeriod === "AM" && endHour === "12")
            {
                endHour = 0;
            }
            
            let endDateTime = new Date(startPart);
            endDateTime.setHours(endHour, endMinute);
            // Check if current time is within the meeting's time range
            let showNowButton = (currentDate >= startDateTime && currentDate <= endDateTime);
            // Add 'show-now' class if the "Now" button is visible
            let itemClass = showNowButton ? 'item show-now' : 'item';            
            field += 
                `<li class="${itemClass}" data-bs-target="#exampleModalToggle3" data-bs-toggle="modal" data-bs-dismiss="modal" onclick="upcomming_meeting_popup('${data[i].id}')">
                    <div class="d-flex">
                        <img src="./images/meeting_icon.svg" alt="">
                        <div>    
                            <div class="mr-2" style="display: flex; flex-direction: column; padding-left: 10px;">                
                                <div style="font-size:15px;">${data[i].agenda}</div>        
                                <div style="font-size: 12px;color:#585D68;">${data[i].schedule}</div>       
                            </div>
                        </div>
                    </div>
                    <div class="mr-2">
                        <button class="now_btn" style="display: ${showNowButton ? 'block' : 'none'};">Now</button>
                    </div>
                </li>`;
    }
    $("#upcoming_meetings_list1").html(field);
    }
    catch (e)
    {
    }
}

function upcomming_meeting_popup(id)
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode = top.document.forms[0]["cloudcode"].value;
    var username = top.document.forms[0]["username"].value;
    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Upcoming_Meetings@d@Header@d@ERP%20Admin@d@
    let urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Upcoming_Meetings@d@Header@d@${encodeURIComponent(username)}@d@${id}@d@`
    fetch(urltotal)
    .then((res) => {
        return res.json();
    })
    .then((data) => {
        try
        {
            if(data == '' || data.length == 0 || data == 'txt is null')
            {
                // var field = '<div>No meetings found</div>';
                // $("#meeting_list_tbl").html(field);
                // return;
            }
            data = JSON.parse(data[0].txt);//JSON.parse(data[0]);
                
            var field =  "";
            var random = parseInt(Math.random() * (9999999 - 999) + 999);
            for(var i=0;i<data.length;i++) 
            {
                 field += '<img style=" border-radius: 50%;width: 25px;height: 25px;" src="../uploadshrms/Folder307/' + data[i].id + 'column2965.gif?random=' + random + '" alt="" onerror="this.src=\'./images/profile-icon.png\'"><span style="font-weight: 600;font-size: 14px;"> '+ data[i].participant+'</span>'+
                '<div id="meetingdetails" style="padding-top: 10px;padding-left: 10px;font-size: 13px;">'+
                '<div>Branch <span style="padding-left:65px;"> : '+data[i].branch+'</span></div>'+
                '<div>Designation <span style="padding-left:37px;"> : '+data[i].designation+'</span></div>'+
                '<div>Project Name <span style="padding-left: 27px;"> : '+data[i].pro+'</span></div>'+
                '<div>Meeting Synopsis <span style="padding-left:4px;"> : '+data[i].agenda+'</span></div>'+
                // '<div>Meeting Synopsis <span style="padding-left:4px;"> : '+data[i].meeting_synopsis+'</span></div>'+
                '<div style="padding-top:5px;   border: 1px solid #5d51e2;color: white; background-color: #5d51e2; margin-top: 10px;border-radius: 7px;padding: 5px;display: flex;justify-content: space-around;align-items: center;">'+
                '<div style="font-size:16px;"><i class="fa-regular fa-user"></i></div>'+
                '<div>'+data[i].agenda+'<br>'+data[i].dates+' <span>'+data[i].starttime+'</span> - <span>'+data[i].endtime+'</span></div>'+
                '</div>'+
                // '<div style="display: flex; padding-top: 10px; justify-content: center;gap: 30px;">'+
                //     '<a style="width: 100px;" class="btn btn-outline-primary" href="#" role="button">Join</a>'+
                //     '<a style="width: 100px;" class="btn btn-outline-primary" href="#" role="button">Notify Me</a>'+
                // '</div>'+
                '</div>';
            }
            $("#upcommingmeetingdetailpoup").html(field);      
            // $("#upcommingmeetingdetail").html(field);      
                                
        }
        catch(e)
        {
            
        }
    });
}

function myteam()
{
    //var newContent = "<div id='myteam_username' style='margin-left: 10px; font-size: 14px;' onclick='myteamhomescreen()'>" + $("#myteam_username").html().replace(/Prabhas Raju's/g, "<b>" +  window.targetuser + "</b>,") + "</div>";
    $("#right_dropdown_screen").css("display","none");
    // const homeScreen = document.getElementById("teammaincontent");
    // const mainScreen = document.getElementById("right_dropdown_screen");
    // mainScreen.style.display = "none";
    // homeScreen.style.display = "block";
    $("#myteam_username").children("span").html($("#myteam_username").children("span").html().replaceAll("Prabhas Raju's", "<b>" +  window.targetuser + "'s</b>"));
    var teammaincontent = document.getElementById("teammaincontent");
    teammaincontent.style.display = 'block';
    var dsrapp = document.getElementById("dsr_approval");
    dsrapp.style.display = 'none';
    dateselector();
    flatpickr('#calendar', {
        dateFormat: 'd, M Y',
        defaultDate: 'today',
        onChange: function(selectedDates, dateStr, instance) {
            Progressbarcircularr('onchange');
        }
    });
    dsr_approve_table();
    team_approval_pending(); //reght menu function
    Progressbarcircularr();
    team_attendance();
    emp_attedance_record();
    createChart();
    total_meeting_table();
    // myteamhomescreen();
    // companynameinputdrop();
    // maindropcontent(); //this finction for only for drop down heading show
}
function showDsrApproval(content, divid)
{
    const showdiv = document.getElementById(divid);
    const mainScreen = document.getElementById("right_dropdown_screen");
    var x = document.getElementById("teammaincontent");
    var a = document.getElementById("team_leave_approval")
    var c = document.getElementById("attendanceapproval");
    var d = document.getElementById("calendarformyteam");
    var b = document.getElementById("iouapproval");
    var y = document.getElementById("myteamreimbursement");
    var dsrapp = document.getElementById("dsr_approval");
    if (showdiv.style.display == "block")
    {
        x.style.display = "block";
        mainScreen.style.display = "none";
        showdiv.style.display = "none";
        return
    }
    x.style.display = "none";
    a.style.display = "none";
    y.style.display = "none";
    c.style.display = "none";
    b.style.display = "none"; 
    d.style.display = "none";
    dsrapp.style.display = "none";
    // document.getElementById('myteam_main_dropdown').innerHTML = content.innerHTML;
    mainScreen.style.display = "block";
    showdiv.style.display = "block";
    if(!divid)
    {
        // for future 
    }
    else if(divid=='dsr_approval')
    {
        dsr_approve_table();
    }
}
function showScreen(content, divid, option)
{
    const showdiv = document.getElementById(divid);
    const mainScreen = document.getElementById("right_dropdown_screen");
    const filter = document.getElementById("myteam_header_filter");
    
    var x = document.getElementById("teammaincontent");
    var a = document.getElementById("team_leave_approval")
    var c = document.getElementById("attendanceapproval");
    var d = document.getElementById("calendarformyteam");
    var b = document.getElementById("iouapproval");
    var y = document.getElementById("myteamreimbursement");
    var dsrapp = document.getElementById("dsr_approval");
    if (showdiv.style.display == "block")
    {
        x.style.display = "block";
        mainScreen.style.display = "none";
        showdiv.style.display = "none";
        team_approval_pending();
        return
    }
    x.style.display = "none";
    a.style.display = "none";
    y.style.display = "none";
    c.style.display = "none";
    b.style.display = "none"; 
    d.style.display = "none";
    dsrapp.style.display = "none";
    option ? filter.style.display = "none" : filter.style.display = "block";
    document.getElementById('myteam_main_dropdown').innerHTML = content.innerHTML;
    mainScreen.style.display = "block";
    showdiv.style.display = "block";
    if(!divid)
    {
        // for future 
    }
    else if(divid=='team_leave_approval')
    {
        team_leaveapprove_pend();
    }
    else if(divid=='attendanceapproval')
    {
        teamAttendancePendingApproval();
    }
    else if(divid=='calendarformyteam')
    {
        myteamcompanyname();
        myteamreportingmanager();
        myteamemleavestatus();
        myteameleavetype();
        showCalender();
    }
    else if(divid=='iouapproval')
    {
        teamiouaptable();
    }
    else if(divid=='myteamreimbursement')
    {
        teamreimbursementtable();
    }
}
function parseDate(dateStr)
{
    let parts = dateStr.split("-");
    return new Date(parts[2], parts[1] - 1, parts[0]); // year, month (0-based), day
}
function team_leaveapprove_pend(flag="")
{
    //onchangeselectedIndex = document.getElementById("monthDropdownteam").selectedIndex;
    var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",];
    var monthnumbers = month.indexOf($("#monthDropdownteam").val().split(" ")[0]);
    monthnumbers = parseInt(monthnumbers)+1;
    monthnumbers = (monthnumbers > 9 ? monthnumbers : "0"+monthnumbers);
    var date = new Date(monthnumbers+"/01/"+$("#monthDropdownteam").val().split(" ")[1]);
    y = date.getFullYear();
    m = date.getMonth();
    var firstDays = new Date(y, m, 1); 
    var lastDays = new Date(y, m + 1, 0);
    startdate = firstDays.getFullYear()+"-"+((firstDays.getMonth()+1) > 9 ? (firstDays.getMonth()+1) : "0"+(firstDays.getMonth()+1))+"-01";
    enddate = lastDays.getFullYear()+"-"+((lastDays.getMonth()+1) > 9 ? (lastDays.getMonth()+1) : "0"+(lastDays.getMonth()+1))+"-"+lastDays.getDate();
    var check_startdate = startdate;
    var check_enddate = enddate;
    check_startdate = check_startdate.split("-").reverse().join("-");
    check_enddate = check_enddate.split("-").reverse().join("-");
    var tempyear = startdate.split("-")[0];
    var tempmonth = startdate.split("-")[1];
    var daysInselectedMonth=new Date(tempyear, tempmonth, 0).getDate();
    var thead_days = '<tr class="calendar_tr" style="font-weight: 600;top: 0px;position: sticky;background: #E8ECF9; font-size: 15px;">';
    for(var i=1 ; i<=daysInselectedMonth ; i++)
    {
        var tempdays = (i<10?"0"+i:i);
        thead_days += '<td class="datetd">'+tempdays+'</td>';
    }
    thead_days += '</tr>';
    $("#table_two_thead_myteam").html(thead_days);

    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    if(flag == "")
    {
        enddate = "";
    }
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Team_Leave_Pending_Approval@d@${encodeURIComponent(username)}@d@${encodeURIComponent(startdate)}@d@${encodeURIComponent(enddate)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    try
    {
        if (data == '' || data.length == 0 || data[0].txt == 'txt is null')
        {
            var temp_final_tbody_days = ` <tr id="attd_data" class="calendar_tr" style="text-align: center;">
                <td colspan="30" style="text-align:center;font-weight: 600;background-color: white; font-size: 12px;">
                    <div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 130px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>
                    </td>  
            </tr>`;
            $("#table_two_tbody_myteam").html(temp_final_tbody_days);
            temp_final_tbody_days = `<tr>
                <td colspan="10" style="text-align:center;font-weight: 600;background-color: white; font-size: 12px; padding: 12px;">
                    <div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>    
                </td>
            </tr>`;
            $("#profile_name_teamleaveapproval").html(temp_final_tbody_days);
            return;
        }
        data = JSON.parse(data[0].txt);//JSON.parse(data[0]);
        var field =  "";
        var table_one_teamapproval_table = "";
        var final_tbody_days = "";
        var daysInCurrentMonth=new Date(tempyear, tempmonth, 0).getDate();
        // var daysInCurrentMonth=new Date(new Date().getFullYear(), new Date().getMonth() + 1, 0).getDate()
        for(var i=0;i<data.length;i++)
        {
            if(table_one_teamapproval_table.indexOf(data[i].employeename) > -1)
            {

            }
            else
            {
                var emp_name = data[i].employeename;
                var emp_name_safe = emp_name.trim().toLowerCase().replace(/[^\w]+/g, "_");
                table_one_teamapproval_table +=`<tr><td class="proftableleave"><span class="imgspan"><img src="../uploadshrms/Folder307/${data[i].emp_id}column2965.gif?random=5867242" alt=""></span> ${emp_name}</td></tr>`;
                // var tbody_days = '<tr id="leave_data" class="calendar_tr" style="text-align: center;">';
                var tbody_days = '<tr id="leave_row_' + emp_name_safe + '" class="calendar_tr" style="text-align: center;">';
                for(var j=1 ; j<=daysInCurrentMonth ; j++)
                {
                    // temp_id = emp_name_safe;
                    // temp_id = temp_id.trim().toLowerCase();
                    // temp_id = temp_id.replaceAll(" ","_")+"_"+j;
                    // temp_id = "leave_data_"+temp_id
                    // tbody_days += '<td id="'+temp_id+'" class="present datetd"></td>';
                    var temp_id = "leave_data_" + emp_name_safe + "_" + j;
    tbody_days += '<td id="' + temp_id + '" class="present datetd"></td>';

                }
                tbody_days += '</tr>';
                final_tbody_days += tbody_days;
                
            }
        }
        //table_one_teamapproval_table +='</tbody></table>';
        $("#profile_name_teamleaveapproval").html(table_one_teamapproval_table);
        $("#table_two_tbody_myteam").html(final_tbody_days);

        for(var i=0;i<data.length;i++)
        {
            var emp_name_raw = data[i].employeename || "";
            var emp_name = emp_name_raw.trim().toLowerCase().replace(/[^\w]+/g, "_");
            // var emp_name = data[i].employeename;
            // emp_name = emp_name.trim().toLowerCase();
            // emp_name = emp_name.replaceAll(" ","_");

            var from_date = data[i].from_date;
            from_date = from_date.split("-")[0];
            from_date = (from_date.indexOf("0") == 0 ? from_date.replace("0","") : from_date);
            
            var to_date = data[i].to_date;
            to_date = to_date.split("-")[0];
            to_date = (to_date.indexOf("0") == 0 ? to_date.replace("0","") : to_date);
            
            // var temp_emp_id = "leave_data_" + emp_name + "_" + from_date;

            var emp_attd = data[i].type;
            var emp_id = data[i].emp_id;

            var emp_code = data[i].code;
            var emp_recid = data[i].count;

            let monthstartDateObj = parseDate(check_startdate);
            let monthendDateObj = parseDate(check_enddate);
            let leavefromDateObj = parseDate(data[i].from_date);
            let leavetoDateObj = parseDate(data[i].to_date);

            if (leavefromDateObj >= monthstartDateObj && leavefromDateObj <= monthendDateObj && leavetoDateObj >= monthstartDateObj && leavetoDateObj <= monthendDateObj)
            {
                console.log("within the range of startdate and enddate");
                if(from_date == to_date)
                {
                    var temp_emp_id = "leave_data_"+emp_name+"_"+from_date;
                    // $("#"+temp_emp_id).removeClass();
                    // $("#"+temp_emp_id).addClass('datetd');
                   
                    // if(emp_attd == "PAID LEAVE")
                    // {
                    //     $("#"+temp_emp_id).html('<i class="fa-solid fa-circle"></i>');
                    //     $("#"+temp_emp_id).removeClass('present');
                    //     $("#" + temp_emp_id).addClass('paidleave').click(function () {
                    //         $('#exampleModalToggle6').modal('show');
                    //         var id = $(this).attr('data-id');
                    //         team_leaveapprove_popup(id);
                    //     }).attr('data-id', data[i].count);
                    // }
                    if (emp_attd == "PAID LEAVE") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('paidleave')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@PAID%20LEAVE@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    else if (emp_attd == "UNPAID LEAVE") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('unpaidleave')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@UNPAID%20LEAVE@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    else if (emp_attd == "SICK LEAVE") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('sickleave')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@SICK%20LEAVE@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    // else if(emp_attd == "PREVILAGE LEAVE")PRIVILEGE LEAVE
                    else if (emp_attd == "PRIVILEGE LEAVE") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('previlageleave')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@PRIVILEGE%20LEAVE@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    else if (emp_attd == "CASUAL LEAVE") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('casualleave')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@CASUAL%20LEAVE@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    else if (emp_attd == "OD") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('od')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@OD@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    else if (emp_attd == "LWP") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('lwp')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@LWP@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    else if (emp_attd == "COMP OFF") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('compoff')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@COMP%20OFF@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                }
                else
                {
                    from_date = parseInt(from_date);
                    to_date = parseInt(to_date);
                    for(var r=from_date; r<=to_date; r++)
                    {
                        var temp_emp_id = "leave_data_"+emp_name+"_"+r;
                        if (emp_attd == "PAID LEAVE") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('paidleave')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@PAID%20LEAVE@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    else if (emp_attd == "UNPAID LEAVE") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('unpaidleave')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@UNPAID%20LEAVE@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    else if (emp_attd == "SICK LEAVE") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('sickleave')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@SICK%20LEAVE@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    // else if(emp_attd == "PREVILAGE LEAVE")PRIVILEGE LEAVE
                    else if (emp_attd == "PRIVILEGE LEAVE") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('previlageleave')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@PRIVILEGE%20LEAVE@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    else if (emp_attd == "CASUAL LEAVE") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('casualleave')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@CASUAL%20LEAVE@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    else if (emp_attd == "OD") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('od')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@OD@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    else if (emp_attd == "LWP") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('lwp')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@LWP@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    else if (emp_attd == "COMP OFF") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('compoff')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@COMP%20OFF@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    }
                    
                }
            }
            else if (leavefromDateObj >= monthstartDateObj && leavefromDateObj >= monthendDateObj)
            {
                
            }
            else
            {
                console.log("outside the range of startdate and enddate");
                from_date = parseInt(from_date);
                to_date = parseInt(lastDays.getDate());
                for(var r=from_date; r<=to_date; r++)
                {
                    var temp_emp_id = "leave_data_"+emp_name+"_"+r;
                    if (emp_attd == "PAID LEAVE") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('paidleave')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@PAID%20LEAVE@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    else if (emp_attd == "UNPAID LEAVE") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('unpaidleave')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@UNPAID%20LEAVE@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    else if (emp_attd == "SICK LEAVE") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('sickleave')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@SICK%20LEAVE@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    // else if(emp_attd == "PREVILAGE LEAVE")PRIVILEGE LEAVE
                    else if (emp_attd == "PRIVILEGE LEAVE") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('previlageleave')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@PRIVILEGE%20LEAVE@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    else if (emp_attd == "CASUAL LEAVE") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('casualleave')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@CASUAL%20LEAVE@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    else if (emp_attd == "OD") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('od')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@OD@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    else if (emp_attd == "LWP") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('lwp')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@LWP@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                    else if (emp_attd == "COMP OFF") 
                    {
                        $("#" + temp_emp_id)
                            .html('<i class="fa-solid fa-circle"></i>')
                            .removeClass('present')
                            .addClass('compoff')
                            .attr('data-emp-code', emp_code) // Store emp_code in a data attribute
                            .attr('data-emp-recid', emp_recid) // Store emp_recid in a data attribute
                            .click(function () {
                            var clickedEmpCode = $(this).attr('data-emp-code');
                            var clickedEmpRecid = $(this).attr('data-emp-recid');
                        // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Leave_Approval_Validation@d@20388@d@SICK%20LEAVE@d@280@d@;
                        var apiUrl = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Leave_Approval_Validation@d@${clickedEmpCode}@d@COMP%20OFF@d@${clickedEmpRecid}@d@${tokenParam}`;
                            // fetch(apiUrl)
                            data = callajax(apiUrl);
                            data = JSON.parse(data);
                                        data = JSON.parse(data[0].txt);
                                        if (!data[0].count) {
                                            // Show error message if count is false
                                            showToast('Leave Days should be less than or equal to Leave Type Balance','false');
                                        } else {
                                            // Open modal and execute the function
                                            $('#exampleModalToggle6').modal('show');
                                            var id = $(this).attr('data-id');
                                            team_leaveapprove_popup(id);
                                        }
                            })
                            .attr('data-id', data[i].count);
                    }
                }
            }
        }
    }
    catch(e)
    {
    }
}
function team_leaveapprove_popup(id_team)
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Team_Leave_Pending_Approval_hover@d@85@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Team_Leave_Pending_Approval_hover@d@${id_team}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);

    try
    {
        data = JSON.parse(data[0].txt);//JSON.parse(data[0]);
            
        var field =  "";
        var random = parseInt(Math.random() * (9999999 - 999) + 999);
        for(var i=0;i<data.length;i++) 
        {
            field +=
                '<div style="display: flex; justify-content: space-between;">' +
                    '<div>' +
                        '<div style="font-size: 19px;font-weight: 600;text-align: start;">Leave Reason</div>' +
                        '<div style="font-size: 16px; font-weight: 500; color: #949494;display: flex;">' + data[i].reason + '</div>' +
                    '</div>' +
                    '<div>' +
                        '<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>' +
                    '</div>' +
                '</div>' +
                '<div style="display: flex; margin-top: 40px; gap: 10px; align-items: center;">' +
                    '<div>' +
                        '<img src="../uploadshrms/Folder307/' + data[i].ids + 'column2965.gif?random=' + random + '" alt="" onerror="this.src=\'./images/profile-icon.png\'" style="width: 100%; height: 50px; width: 50px; border: 6px solid white; position: relative; padding: 0; border-radius: 50%;">' +
                    '</div>' +
                    '<div>' +
                        '<div style="font-size: 15px;font-weight: 500;text-align: left;">Leave Requester by</div>' +
                        '<div style="font-size: 15px;font-weight: 500;color: #949494;text-align: left;">' + (data[i].requester_name ? data[i].requester_name : '') + '</div>' +
                    '</div>' +
                '</div>' +
                '<div style="display: flex; margin-top: 10px; gap: 10px; align-items: center;">' +
                    '<div>' +
                        '<img src="../uploadshrms/Folder307/' + data[i].approval_by_ids + 'column2965.gif?random=' + random + '" alt="" onerror="this.src=\'./images/profile-icon.png\'" style="width: 100%; height: 50px; width: 50px; border: 6px solid white; position: relative; padding: 0; border-radius: 50%;">' +
                    '</div>' +
                    '<div>' +
                        '<div style="font-size: 17px; font-weight: 500;text-align: left;">Leave Approved by</div>' +
                        '<div style="font-size: 15px;font-weight: 500;color: #949494;text-align: left;">' + (data[i].approval_by ? data[i].approval_by : '') + '</div>' +
                    '</div>' +
                '</div>' +
                '<div style="display: flex; padding-top: 20px; justify-content: end; gap: 10px;">' +
                    '<a style="width: max-content; font-size: 13px;" class="btn btn-outline-success" role="button" data-bs-toggle="modal" data-bs-dismiss="modal" aria-label="Close" data-bs-target="#myModalprofile" ' +
                    'onclick="openformprofile(\'iframewithout_team_leave_pending\', \'1911\','+ data[i].id +', \'myModalprofile\')">Approve</a>' +
                    '<a style="width: max-content; font-size: 13px;" class="btn btn-outline-danger" role="button" data-bs-toggle="modal" data-bs-dismiss="modal" aria-label="Close" data-bs-target="#myModalprofile" ' +
                    'onclick="openformprofile(\'iframewithout_team_leave_pending\', \'1911\','+ data[i].id +', \'myModalprofile\')">Reject</a>'
                '</div>';
;
        }
        $("#teamleave_approv_popup").html(field);
    }
    catch(e)
    {
        
    }
}
function teamAttendancePendingApproval() 
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var date = new Date();
    var month = date.getMonth() + 1; // Adding 1 because getMonth() returns zero-based index
    var year = date.getFullYear();
    // Construct the start date string with the first day of the current month in "yyyy-mm-dd" format
    var startdate = year + "-" + ("0" + month).slice(-2) + "-01";
    // Get the last day of the current month
    var lastDay = new Date(year, month, 0).getDate();
    // Construct the end date string with the last day of the current month in "yyyy-mm-dd" format
    var enddate = year + "-" + ("0" + month).slice(-2) + "-" + lastDay;
    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Attedance_Approval@d@2024-09-01@d@2024-09-30@d@Tushar%20Sahebrao%20More@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Attedance_Approval@d@2000-01-01@d@${encodeURIComponent(enddate)}@d@${encodeURIComponent(username)}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);
    if(data[0].txt == 'txt is null')
    {
        return;
    }
    else
    {
        data = JSON.parse(data[0].txt)
    }
    var itemlist = '';
    data.forEach(function(item, index) {
        itemlist += 
        `<tr style="border: 1px solid lightgray;">
            <td style="border: 1px solid lightgray;text-align: center;">${item.name}</td>
            <td style="border: 1px solid lightgray;text-align: center;">${item.date}</td>
            <td style="border: 1px solid lightgray;text-align: center;">${item.signin}</td>
            <td style="border: 1px solid lightgray;text-align: center;">${item.signout}</td>
            <td style="border: 1px solid lightgray;text-align: center;">${item.remark}</td>
            <td style="border: 1px solid lightgray;text-align: center;">${item.attd_pending_reason}</td>
            <td style="border: 1px solid lightgray;text-align: center;">${item.correction_date}</td>
            <td style="border: 1px solid lightgray;text-align: center;">${item.status}</td>
            <td style="border: 1px solid lightgray;text-align: center;">
                <button type="button" class="btn approve-reject-btn" style="width: 110px; border: 1px solid #33C5AE; color:#33C5AE;" onclick="openform_dsr('${item.id}','4090','dsr_forms')">Approve<span> <i class="fa-sharp fa-solid fa-circle-check"></i></span></button>
            </td>
            <td style="border: 1px solid lightgray;text-align: center;">
                <button type="button" class="btn approve-reject-btn" style="width: 92px; border: 1px solid #F6566E; color:#F6566E;" role="button" onclick="openform_dsr('${item.id}','4090','dsr_forms')">Reject<span> <i class="fa-solid fa-circle-xmark"></i></span></button>
            </td>
        </tr>`
    });

    const attendanceTable = document.getElementById("table_attendance_approval");
    attendanceTable.innerHTML=''
    attendanceTable.innerHTML=itemlist;
}
function teamreimbursementtable()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var date = new Date();
    var month = date.getMonth() + 1; // Adding 1 because getMonth() returns zero-based index
    var year = date.getFullYear();
    // Construct the start date string with the first day of the current month in "yyyy-mm-dd" format
    var startdate = year + "-" + ("0" + month).slice(-2) + "-01";
    // Get the last day of the current month
    var lastDay = new Date(year, month, 0).getDate();
    // Construct the end date string with the last day of the current month in "yyyy-mm-dd" format
    var enddate = year + "-" + ("0" + month).slice(-2) + "-" + lastDay;
    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=my_team@d@Reimbursement_Approval@d@2024-09-01@d@2024-09-30@d@@d@@d@@d@Tushar%20Sahebrao%20More@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=my_team@d@Reimbursement_Approval@d@2000-01-01@d@${encodeURIComponent(enddate)}@d@@d@@d@@d@${encodeURIComponent(username)}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);
    
    data = JSON.parse(data[0].txt)
    var itemlist = '';
    data.forEach(function(item, index) {
        itemlist += 
        `<tr style="border-bottom: 1px solid lightslategray;">
            <td style="border: 1px solid lightgray;text-align: center;">${item.employeename}</td>
            <td style="border: 1px solid lightgray;text-align: center;">${item.date}</td>
            <td style="border: 1px solid lightgray;text-align: center;">${item.assigned_by}</td>
            <td style="border: 1px solid lightgray;text-align: center;">${item.reason}</td>
            <td style="border: 1px solid lightgray;text-align: center;">${item.status}</td>
            <td style="border: 1px solid lightgray;text-align: center;"><button type="button" class="btn approve-reject-btn" style="width: 110px; border: 1px solid #33C5AE; color:#33C5AE;" data-bs-toggle="modal" data-bs-target="#myModalprofile" data-bs-dismiss="modal" aria-label="Close" role="button" onclick="openformprofile('iframewithout_formid_recordid','4046','${item.id}', 'myModalprofile')">Approve<span> <i class="fa-sharp fa-solid fa-circle-check"></i></span></button></td>
            <td style="border: 1px solid lightgray;text-align: center;"><button type="button" class="btn approve-reject-btn" style="width: 92px; border: 1px solid #F6566E; color:#F6566E;" data-bs-toggle="modal" data-bs-target="#myModalprofile" role="button" onclick="openformprofile('iframewithout_formid_recordid','4046','${item.id}', 'myModalprofile')">Reject<span> <i class="fa-solid fa-circle-xmark"></i></span></button></td>
        </tr>`
    });

    const reimbursement = document.getElementById("teamreimbursementapprov");
    reimbursement.innerHTML=''
    reimbursement.innerHTML=itemlist;
}
function myteamcompanyname()
{
    try
    {
        var getUrl = window.location;
        var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
        baseurl = baseurl.split("pages")[0];
        var cloudcode =  window.targetcloud;
        const companyname_input = document.getElementById("combobox1");
        var cloudcode =  window.targetcloud;
        var username =  window.targetuser;
        var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

        //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=7097&cloudcode=hrms&ids=7097/&valuestring=@j@
        var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=7097&cloudcode=${encodeURIComponent(cloudcode)}&ids=7097/&valuestring=@j@${tokenParam}`;
        data = callajax(urltotal);
        data = JSON.parse(data);

        // data = JSON.parse(data[0].txt)
        $("#combobox1").parent().find(".k-clear-value").remove();
        var company_autoComp = $("#combobox1").data("kendoComboBox");
        if (company_autoComp)
        {
            company_autoComp.destroy(); // Destroy the existing widget
        }
        $("#combobox1").kendoComboBox({
            // dataTextField: "sportName",
            // dataValueField: "Id",
            dataTextField: "Name_of_Company",
            dataValueField: "Name_of_Company",
            dataSource: data,
            filter: "contains",
            suggest: true,
            placeholder: "Please select company name...",
            noDataTemplate: $("#noDataTemplate").html(),
            change: function(e){
                myteamprojectname()
                myteamememployeename()
                myteamshifttype()
            }
        })
        $("#combobox2").kendoComboBox({
            dataTextField: "project_name",
            dataValueField: "project_name",
            dataSource: [],
            filter: "contains",
            suggest: true,
            placeholder: "Please select project name...",
            noDataTemplate: $("#noDataTemplate").html(),
            change: function(e){
                myteamemdepartment()
                myteamememployeename()
            }
        })
        $("#combobox3").kendoComboBox({
            dataTextField: "department",
            dataValueField: "department",
            dataSource: [],
            filter: "contains",
            suggest: true,
            placeholder: "Please select department name...",
            noDataTemplate: $("#noDataTemplate").html()
        })
        $("#combobox4").kendoComboBox({
            dataTextField: "employee_name",
            dataValueField: "employee_name",
            dataSource: [],
            filter: "contains",
            suggest: true,
            placeholder: "Please select employee name...",
            noDataTemplate: $("#noDataTemplate").html()
        })
        $("#combobox7").kendoComboBox({
            dataTextField: "Shift_Type",
            dataValueField: "Shift_Type",
            dataSource: [],
            filter: "contains",
            suggest: true,
            placeholder: "Please select shift...",
            noDataTemplate: $("#noDataTemplate").html()
        })
    }
    catch (error)
    {
        console.error('Error fetching data:', error);
    }
}
function myteamprojectname()
{
    try
    {
        var getUrl = window.location;
        var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
        baseurl = baseurl.split("pages")[0];
        var cloudcode =  window.targetcloud;
        const companyname_input = document.getElementById("combobox1")
        const companyname = companyname_input.value;
        var cloudcode =  window.targetcloud;
        var username =  window.targetuser;
        var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

        //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=7108&cloudcode=hrms&ids=7108/7097/&valuestring=@j@rani%20construction%20pvt%20ltd@j@
        //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Project_Name@d@@d@
        var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Project_Name@d@${encodeURIComponent(companyname)}@d@${tokenParam}`;
        data = callajax(urltotal);
        data = JSON.parse(data);
        data = data[0].txt;
        data = JSON.parse(data);
        $("#combobox2").parent().find(".k-clear-value").remove();
        var project_autoComp = $("#combobox2").data("kendoComboBox");
        if (project_autoComp)
        {
            project_autoComp.destroy(); // Destroy the existing widget
        }
        $("#combobox2").kendoComboBox({
            dataTextField: "project_name",
            dataValueField: "project_name",
            dataSource: data,
            filter: "contains",
            suggest: true,
            placeholder: "Please select project name...",
            noDataTemplate: $("#noDataTemplate").html(),
            change: function(e){
                myteamemdepartment()
                myteamememployeename()
            }   
        })
        const div_wrapper = companyname_input.closest('.inputwrap');
        div_wrapper.classList.add('active');
    }
    catch (error)
    {
        console.error('Error fetching data:', error);
    }
}
function myteamemdepartment()
{
    try
    {
        var getUrl = window.location;
        var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
        baseurl = baseurl.split("pages")[0];
        var cloudcode =  window.targetcloud;
        const companyname_input = document.getElementById("combobox1")
        const companyname = companyname_input.value;
        const projectname = document.getElementById("combobox2").value;
        var cloudcode =  window.targetcloud;
        var username =  window.targetuser;
        var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

        //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Department@d@rani%20construction%20pvt%20ltd@d@Rs%20mall@d@
        var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Department@d@${encodeURIComponent(companyname)}@d@${encodeURIComponent(projectname)}@d@${tokenParam}`;
        data = callajax(urltotal);
        data = JSON.parse(data);

        data = JSON.parse(data[0].txt)
        $("#combobox3").parent().find(".k-clear-value").remove();
        var department_autoComp = $("#combobox3").data("kendoComboBox");
        if (department_autoComp)
        {
            department_autoComp.destroy(); // Destroy the existing widget
        }
        $("#combobox3").kendoComboBox({
            dataTextField: "department",
            dataValueField: "department",
            dataSource: data,
            filter: "contains",
            suggest: true,
            placeholder: "Please select department name...",
            noDataTemplate: $("#noDataTemplate").html()
        })
    }
    catch (error)
    {
        console.error('Error fetching data:', error);
    }
}
function myteamememployeename()
{
    try
    {
        var getUrl = window.location;
        var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
        baseurl = baseurl.split("pages")[0];
        var cloudcode =  window.targetcloud;
        const companyname_input = document.getElementById("combobox1")
        const companyname = companyname_input.value;
        const projectname = document.getElementById("combobox2").value;
        var cloudcode =  window.targetcloud;
        var username =  window.targetuser;
        var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

        //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=employee_name@d@rani%20construction%20pvt%20ltd@d@Rs%20mall@d@
        var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=employee_name@d@${encodeURIComponent(companyname)}@d@${encodeURIComponent(projectname)}@d@${tokenParam}`;
        data = callajax(urltotal);
        data = JSON.parse(data);

        data = JSON.parse(data[0].txt)
        $("#combobox4").parent().find(".k-clear-value").remove();
        var employee_autoComp = $("#combobox4").data("kendoComboBox");
        if (employee_autoComp)
        {
            employee_autoComp.destroy(); // Destroy the existing widget
        }
        $("#combobox4").kendoComboBox({
            dataTextField: "employee_name",
            dataValueField: "employee_name",
            dataSource: data,
            filter: "contains",
            suggest: true,
            placeholder: "Please select employee name...",
            noDataTemplate: $("#noDataTemplate").html()
        })
    }
    catch (error)
    {
        console.error('Error fetching data:', error);
    }
}
function myteamreportingmanager()
{
    try
    {
        var getUrl = window.location;
        var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
        baseurl = baseurl.split("pages")[0];
        var cloudcode =  window.targetcloud;
        const companyname_input = document.getElementById("combobox1")
        const companyname = companyname_input.value;
        const projectname = document.getElementById("combobox2").value;
        const employeename = document.getElementById("combobox4").value;
        var cloudcode =  window.targetcloud;
        var username =  window.targetuser;
        var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

        //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=reporting_manager@d@Mansi%20rane,Meet%20Gami,Yash%20Gami@d@
        var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=reporting_manager@d@${encodeURIComponent(employeename)}@d@${tokenParam}`;
        data = callajax(urltotal);
        data = JSON.parse(data);

        data = JSON.parse(data[0].txt)
        $("#combobox8").parent().find(".k-clear-value").remove();
        var employee_autoComp = $("#combobox8").data("kendoComboBox");
        if (employee_autoComp)
        {
            employee_autoComp.destroy(); // Destroy the existing widget
        }
        $("#combobox8").kendoComboBox({
            dataTextField: "reporting_manager",
            dataValueField: "reporting_manager",
            dataSource: data,
            filter: "contains",
            suggest: true,
            placeholder: "Please select Reporting Manager...",
            noDataTemplate: $("#noDataTemplate").html()
        })

    }
    catch (error)
    {
        console.error('Error fetching data:', error);
    }
}
function myteamemleavestatus()
{
    try
    {
        var getUrl = window.location;
        var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
        baseurl = baseurl.split("pages")[0];
        const companyname_input = document.getElementById("combobox1")
        const companyname = companyname_input.value;
        // API URL
        var username =  window.targetuser;
        var cloudcode = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : "";
        var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

        var apiUrl = `${baseurl}SaveFormField.do?&actn=retrievestates&formid=38&ask=COMMAND_NAME_1&random=524&AjaxRequestUniqueId=1712399990429186${cloudcode}${tokenParam}`;
        data = callajax(apiUrl);
        //data = JSON.parse(data);
        let leaveStatusNames = data.match(/:(\w+)/g).map(status => status.slice(1));

        // Integrate with Kendo ComboBox
        $("#combobox5").parent().find(".k-clear-value").remove();
        var employee_autoComp = $("#combobox5").data("kendoComboBox");
        if (employee_autoComp)
        {
            employee_autoComp.destroy(); // Destroy the existing widget
        }
        $("#combobox5").kendoComboBox({
            dataSource: leaveStatusNames,
            filter: "contains",
            suggest: true,
            placeholder: "Please select leave status...",
            noDataTemplate: $("#noDataTemplate").html()
        });
    }
    catch (error)
    {
        console.error('Error fetching data:', error);
    }
}
function myteameleavetype()
{
    try
    {
        var getUrl = window.location;
        var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
        baseurl = baseurl.split("pages")[0];
        var cloudcode =  window.targetcloud;
        var username =  window.targetuser;
        var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

        //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=combo&fieldid=7190&ids=/&valuestring=@j@&cloudcode=hrms
        var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=combo&fieldid=7190&ids=/&valuestring=@j@&cloudcode=${encodeURIComponent(cloudcode)}${tokenParam}`;
        data = callajax(urltotal);
        data = JSON.parse(data);

        data.shift();
        // data = JSON.parse(data[0].txt)
        $("#combobox6").parent().find(".k-clear-value").remove();
        var employee_autoComp = $("#combobox6").data("kendoComboBox");
        if (employee_autoComp)
        {
            employee_autoComp.destroy(); // Destroy the existing widget
        }
        $("#combobox6").kendoComboBox({
            dataTextField: "value",
            dataValueField: "value",
            dataSource: data,
            filter: "contains",
            suggest: true,
            placeholder: "Please select leave type...",
            noDataTemplate: $("#noDataTemplate").html()
        })
    }
    catch (error)
    {
        console.error('Error fetching data:', error);
    }
}
function myteamshifttype()
{
    try
    {
        var getUrl = window.location;
        var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
        baseurl = baseurl.split("pages")[0];
        var cloudcode =  window.targetcloud;
        var username =  window.targetuser;
        var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

        const companyname_input = document.getElementById("combobox1")
        const companyname = companyname_input.value;
        //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=38852&cloudcode=hrms&ids=7097/&valuestring=rani%20construction%20pvt%20ltd@j@
        var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=38852&cloudcode=${encodeURIComponent(cloudcode)}&ids=7097/&valuestring=${encodeURIComponent(companyname)}@j@${tokenParam}`;
        data = callajax(urltotal);
        data = JSON.parse(data);

        $("#combobox7").parent().find(".k-clear-value").remove();
        var employee_autoComp = $("#combobox7").data("kendoComboBox");
        if (employee_autoComp)
        {
            employee_autoComp.destroy(); // Destroy the existing widget
        }
        $("#combobox7").kendoComboBox({
            dataTextField: "Shift_Type",
            dataValueField: "Shift_Type",
            dataSource: data,
            filter: "contains",
            suggest: true,
            placeholder: "Please select shift...",
            noDataTemplate: $("#noDataTemplate").html()
        })
    }
    catch (error)
    {
        console.error('Error fetching data:', error);
    }
}
function showCalender()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    const companyname= document.getElementById("combobox1").value;
    const projectname = document.getElementById("combobox2").value;
    const department = document.getElementById("combobox3").value;
    const employeename = document.getElementById("combobox4").value;
    const reportingmanager = document.getElementById("combobox8").value;
    const leavestatus = document.getElementById("combobox5").value;
    const leavetype = document.getElementById("combobox6").value;
    const shift = document.getElementById("combobox7").value;
    // Get current date
    const currentDate = new Date();
    const currentYear = currentDate.getFullYear();
    const currentMonth = currentDate.getMonth() + 1; // January is 0, so add 1
    const lastDayOfMonth = new Date(currentYear, currentMonth, 0).getDate();
    const startDate = `${currentYear}-01-01`;
    const endDate = `${currentYear}-${currentMonth < 10 ? '0' + currentMonth : currentMonth}-${lastDayOfMonth}`;
    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=hrms&ids=valuestring/&valuestring=Future_Leaves_Approval@d@Mansi%20Rane@d@2024-01-01@d@2024-04-30@d@@d@@d@@d@@d@@d@@d@@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Future_Leaves_Approval@d@${encodeURIComponent(username)}@d@${encodeURIComponent(startDate)}@d@${encodeURIComponent(endDate)}@d@${encodeURIComponent(companyname)}@d@${encodeURIComponent(projectname)}@d@${encodeURIComponent(department)}@d@${encodeURIComponent(employeename)}@d@${encodeURIComponent(reportingmanager)}@d@${encodeURIComponent(leavestatus)}@d@${encodeURIComponent(leavetype)}@d@${encodeURIComponent(shift)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    if(data[0].txt == "txt is null")
    {
        $("#scheduler").html(`<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 400px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>`);
        return;
    }
    data = JSON.parse(data[0].txt);
    var schedulerElement = $("#scheduler");
    var scheduler = schedulerElement.data("kendoScheduler");
    if (scheduler)
    {
        schedulerElement.empty(); // Clear scheduler element
        scheduler.destroy(); // Destroy scheduler instance
    }
    var record = [];
    for(var i = 0; i < data.length; i++)
    {
        var color;
        if (data[i].state == 'Approved') 
        {
            color = '#9900CC'; 
        }
        else if (data[i].state == 'Applied') 
        {
            color = '#F69739'; 
        }
        else if (data[i].state == 'Sanctioned') 
        {
            color = '#76F687';
        }
        else 
        {
            color = '#6D8BE1'; 
        }
        fromdate = data[i].from_date
        const parts = fromdate.split("-");
        const fdate = parts[2] + "-" + parts[1] + "-" + parts[0];
        todate = data[i].to_date
        const partss = todate.split("-");
        const edate = partss[2] + "-" + partss[1] + "-" + partss[0];
        record.push({
            name: data[i].employee + ' - ' + data[i].leavetype,
            start: fdate,
            end: edate,
            background:color
        });
    }

    $(function () {
        $("#scheduler").kendoScheduler({
            // date: new Date("2022/6/13"),
            height: 500,
            views: [
                "day",
                "week",
                { type: "month", selected: true },
            ],
            dataSource: {
                data:record,
                schema: {
                    model: {
                        id: "taskId",
                        fields: {
                            taskId: { type: "number" },
                            name: { defaultValue: "No title", validation: { required: true }},
                            start: { type: "date",
                            format: "YYYY-MM-DD"
                                },
                            end: { 
                                type: "date",
                                format: "YYYY-MM-DD",
                                parse: function(value) {
                                    // Set the time to end of the day
                                    var endOfDay = new Date(value);
                                    endOfDay.setHours(23, 59, 59);
                                    return endOfDay;
                                }    
                            },
                            description: { defaultValue: "" },
                            ownerId: { defaultValue: 1 },
                            isAllDay: { type: "boolean" },
                            background: { type: "string" }
                        }
                    }
                }
            },
            editable : false,
            eventTemplate: '<div style="background-color: #: background #; width: 100%;">#= name #</div>'
        });
    });
}
function callingyear()
{
    team_attendance();
    emp_attedance_record();
}
function download_excel_report()
{
    if($("#modal_header1").text() == "Project Wise Hrs Spend Report")
    {
        downloadTableAsXLSX('project_wise_hours_popup');
    }
    else if($("#modal_header1").text() == "Weekly DSR Output Report")
    {
        downloadTableAsXLSX('weekly_dsr_popup');
    }
    else if($("#modal_header1").text() == "DSR Work Analysis")
    {
        downloadTableAsXLSX('dsr_work_analysis_popup');
    }
    else if($("#modal_header1").text() == "Location Analysis")
    {
        downloadTableAsXLSX('location_analysis_popup');
    }
    // showToast('Excel File Downloaded Successfully');
}
function download_filter_report()
{
    if($("#modal_header1").text() == "Project Wise Hrs Spend Report")
    {
        printDiv('project_wise_hours_popup');
    }
    else if($("#modal_header1").text() == "Weekly DSR Output Report")
    {
        printDiv('weekly_dsr_popup');
    }
    else if($("#modal_header1").text() == "DSR Work Analysis")
    {
        printDiv('dsr_work_analysis_popup');
    }
    else if($("#modal_header1").text() == "Location Analysis")
    {
        printDiv('location_analysis_popup');
    }
}
function downloadTableAsXLSX(formId)
{
    // Find the table element
    var table = document.getElementById(formId);
    if(table.children[0].children[1].children[0].children.length == 1) 
    {
        showToast("No Data Found");
        return;
    }


    // Convert HTML Table to a worksheet
    var wb = XLSX.utils.table_to_book(table, { sheet: "Sheet 1" });

    // Export the workbook as .xlsx file
    XLSX.writeFile(wb, "table_data.xlsx");
}
function printDiv(formId)
{
    var divToPrint = document.getElementById(formId);
    if(divToPrint.children[0].children[1].children[0].children.length == 1) 
    {
        showToast("No Data Found");
        return;
    }
    var popupWin = window.open('', '_blank', 'width=1000,height=500');
    popupWin.document.open();
    popupWin.document.write(`
        <html>
            <head>
                <style type="text/css">
                    table, th, td {
                        border: 1px solid #000; 
                        border-collapse: collapse;
                    }
                    th, td {
                        padding: 8px; /* Optional: adds some padding for better readability */
                    }
                    body {
                        margin: 0; /* Optional: removes default margin for full page width */
                    }
                </style>
            </head>
            <body onload="window.print(); window.close();">
                ${divToPrint.innerHTML}
            </body>
        </html>
    `);
    popupWin.document.close();
}

// function generatepdf() 
// {
//         const { jsPDF } = window.jspdf;
//         const pdf = new jsPDF();

//         // Get the content from the div
//         const content = document.getElementById('income_tax_report').innerText;

//         // Add content to PDF
//         const lineHeight = 10; // Customize line height as needed
//         let yPosition = 10; // Starting y position

//         content.split("\n").forEach((line, index) => {
//             pdf.text(line, 10, yPosition + (index * lineHeight));
//         });

//         // Save the PDF
//         pdf.save('download.pdf');
//     }

// function generatepdf() {
//     const { jsPDF } = window.jspdf;
//     const pdf = new jsPDF();

//     // const empName = document.getElementById('incometax_emp_name').innerText;
//     // const panNo = document.getElementById('incometax_pan').innerText;

//     //         // Add Name and PAN to the PDF
//     //         pdf.setFontSize(12);
//     //         pdf.text('Name: ' + empName, 10, 20);
//     //         pdf.text('Pan No: ' + panNo, 10, 30);

//     // Get the content from the div
//     const content = document.getElementById('income_tax_report');
    
//     // Extract table data for autoTable
//     const taxcalTable = document.getElementById('taxcal');
//     const taxdecTable = document.getElementById('taxdec');

//     // Define table data for tax calculation
//     let taxcalData = [];
//     let taxcalColumns = ['Description', 'Old Tax Regime', 'New Tax Regime'];

//     // Get table rows for 'taxcal'
//     Array.from(taxcalTable.querySelectorAll('tr')).forEach(row => {
//         const cells = row.querySelectorAll('td');
//         if (cells.length) {
//             taxcalData.push([cells[0].innerText, cells[1].innerText, cells[2].innerText]);
//         }
//     });

//     // Define table data for tax deduction
//     let taxdecData = [];
//     let taxdecColumns = ['Description', 'Old Tax Regime', 'New Tax Regime'];

//     // Get table rows for 'taxdec'
//     Array.from(taxdecTable.querySelectorAll('tr')).forEach(row => {
//         const cells = row.querySelectorAll('td');
//         if (cells.length) {
//             taxdecData.push([cells[0].innerText, cells[1].innerText, cells[2].innerText]);
//         }
//     });

//     // Add Title for Tax Calculation Section
//     pdf.setFontSize(14);
//     pdf.text('Tax Calculation AY 2024-25', 10, 20);
//     pdf.setFontSize(12);
    
//     // Use autoTable to add the taxcal table with borders
//     pdf.autoTable({
//         head: [taxcalColumns],
//         body: taxcalData,
//         startY: 30,  // Starting y-position for the table
//         theme: 'grid',  // This creates a table with borders
//         margin: { top: 10, left: 10, right: 10, bottom: 10 },
//     });

//     // Add Title for Tax Deduction Section
//     pdf.addPage(); // Add new page for the next section (if needed)
//     pdf.setFontSize(14);
//     pdf.text('Tax Deduction AY 2024-25', 10, 20);
//     pdf.setFontSize(12);
    
//     // Use autoTable to add the taxdec table with borders
//     pdf.autoTable({
//         head: [taxdecColumns],
//         body: taxdecData,
//         startY: 30,  // Starting y-position for the table
//         theme: 'grid',  // This creates a table with borders
//         margin: { top: 10, left: 10, right: 10, bottom: 10 },
//     });

//     // Save the generated PDF
//     pdf.save('Income_Tax_Report.pdf');
// }
function generatepdf() {
    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF();

    // Extract Name and PAN from the DOM
    const empName = document.getElementById('incometax_emp_name').innerText;
    const panNo = document.getElementById('incometax_pan').innerText;

    // Set font size for Name and PAN
    pdf.setFontSize(12);
    
    // Add Name and PAN to the PDF
    pdf.text('Name: ' + empName, 10, 20);  // Place Name at y=20
    pdf.text('Pan No: ' + panNo, 10, 30);  // Place PAN at y=30

    // Adjust starting Y position for tables
    let currentY = 40;

    // Add Title for Tax Calculation Section
    pdf.setFontSize(14);
    pdf.text('Tax Calculation AY 2024-25', 10, currentY);  // Title for Tax Calculation
    pdf.setFontSize(12);

    // Adjust currentY for table space
    currentY += 10;

    // Get table data for 'taxcal' (Tax Calculation)
    const taxcalTable = document.getElementById('taxcal');
    let taxcalData = [];
    let taxcalColumns = ['Description', 'Old Tax Regime', 'New Tax Regime'];

    Array.from(taxcalTable.querySelectorAll('tr')).forEach(row => {
        const cells = row.querySelectorAll('td');
        if (cells.length) {
            taxcalData.push([cells[0].innerText, cells[1].innerText, cells[2].innerText]);
        }
    });

    // Use autoTable to add the taxcal table with borders
    pdf.autoTable({
        head: [taxcalColumns],
        body: taxcalData,
        startY: currentY,  // Starting y-position for the table
        theme: 'grid',  // This creates a table with borders
        margin: { top: 10, left: 10, right: 10, bottom: 10 },
        didDrawPage: function (data) {
            currentY = data.cursorY; // Update currentY after the table
        }
    });

    // Add Title for Tax Deduction Section (on a new page if necessary)
    pdf.addPage(); // Add new page for the next section (if needed)
    pdf.setFontSize(14);
    pdf.text('Tax Deduction AY 2024-25', 10, 20);  // Title for Tax Deduction
    pdf.setFontSize(12);

    // Adjust currentY for tax deduction table
    currentY = 30;

    // Get table data for 'taxdec' (Tax Deduction)
    const taxdecTable = document.getElementById('taxdec');
    let taxdecData = [];
    let taxdecColumns = ['Description', 'Old Tax Regime', 'New Tax Regime'];

    Array.from(taxdecTable.querySelectorAll('tr')).forEach(row => {
        const cells = row.querySelectorAll('td');
        if (cells.length) {
            taxdecData.push([cells[0].innerText, cells[1].innerText, cells[2].innerText]);
        }
    });

    // Use autoTable to add the taxdec table with borders
    pdf.autoTable({
        head: [taxdecColumns],
        body: taxdecData,
        startY: currentY,  // Starting y-position for the table
        theme: 'grid',  // This creates a table with borders
        margin: { top: 10, left: 10, right: 10, bottom: 10 },
        didDrawPage: function (data) {
            currentY = data.cursorY; // Update currentY after the table
        }
    });

    // Save the generated PDF
    pdf.save('Income_Tax_Report.pdf');
}

//SALARY BENEFITS

function Tax_calculator_Table() 
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode = encodeURIComponent( window.targetcloud);
    var username = encodeURIComponent( window.targetuser);
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=hrms&ids=valuestring/&valuestring=Tax_calculator@d@Page_2@d@Tushar%20Sahebrao%20More@d@
    var url = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=${cloudcode}&ids=valuestring/&valuestring=Tax_calculator@d@Page_2@d@${username}@d@${tokenParam}`;
    var data = callajax(url);
    data = JSON.parse(data);
    var apiData = JSON.parse(data[0].txt);

    if (apiData.length > 0) {
        var taxData = apiData[0];
        const taxRegime = taxData.tax_regime?.trim(); 
        const isNewRegime = taxRegime == "New";
        const isBlankRegime = !taxRegime;

        // Update table fields based on IDs
        document.getElementById("old_totalincome").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isNewRegime ? 0 : taxData.total_income}`;
        document.getElementById("new_totalincome").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isBlankRegime ? 0 : taxData.total_income}`;

        document.getElementById("standardded_old").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isNewRegime ? 0 : taxData.standard_deduction}`;
        document.getElementById("standardded_new").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isBlankRegime ? 0 : taxData.standard_deduction}`;

        document.getElementById("rental_old").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isNewRegime ? 0 : taxData.rental_deduction}`;
        document.getElementById("rental_new").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isBlankRegime ? 0 : taxData.rental_deduction}`;

        document.getElementById("chapter_old").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isNewRegime ? 0 : taxData.chapter_deduction}`;
        document.getElementById("chapter_new").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isBlankRegime ? 0 : taxData.chapter_deduction}`;

        document.getElementById("income_old").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isNewRegime ? 0 : taxData.income_tax ?? 0}`;
        document.getElementById("income_new").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isBlankRegime ? 0 : taxData.income_tax ?? 0}`;

        document.getElementById("rebate_old").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isNewRegime ? 0 : taxData.rebate}`;
        document.getElementById("rebate_new").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isBlankRegime ? 0 : taxData.rebate}`;

        document.getElementById("surcharge_old").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isNewRegime ? 0 : taxData.surcharge ?? 0}`;
        document.getElementById("surcharge_new").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isBlankRegime ? 0 : taxData.surcharge ?? 0}`;

        document.getElementById("health_old").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isNewRegime ? 0 : taxData.educatio_cess}`;
        document.getElementById("health_new").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isBlankRegime ? 0 : taxData.educatio_cess}`;

        document.getElementById("deduction_old").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isNewRegime ? 0 : taxData.total_dedeuction}`;
        document.getElementById("deduction_new").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isBlankRegime ? 0 : taxData.total_dedeuction}`;

        document.getElementById("tds_salaryold").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isNewRegime ? 0 : taxData.tds_from_salary}`;
        document.getElementById("tds_salarynew").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isBlankRegime ? 0 : taxData.tds_from_salary}`;

        document.getElementById("tds_incentiveold").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isNewRegime ? 0 : taxData.tds_from_incentive}`;
        document.getElementById("tds_incentivenew").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isBlankRegime ? 0 : taxData.tds_from_incentive}`;

        document.getElementById("tds_otherold").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isNewRegime ? 0 : taxData.other_tds}`;
        document.getElementById("tds_othernew").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isBlankRegime ? 0 : taxData.other_tds}`;

        document.getElementById("tds_paidold").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isNewRegime ? 0 : taxData.tds_paid}`;
        document.getElementById("tds_paidnew").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isBlankRegime ? 0 : taxData.tds_paid}`;

        document.getElementById("tds_payableold").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isNewRegime ? 0 : taxData.tds_payable}`;
        document.getElementById("tds_payablenew").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isBlankRegime ? 0 : taxData.tds_payable}`;

        document.getElementById("approx_old").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isNewRegime ? 0 : taxData.approx_tds}`;
        document.getElementById("approx_new").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${isBlankRegime ? 0 : taxData.approx_tds}`;

        // Calculate total for old and new
        var totalTaxableOld = isNewRegime ? 0 : (taxData.total_income + taxData.standard_deduction + taxData.rental_deduction);
        var totalTaxableNew = isBlankRegime ? 0 : (taxData.total_income + taxData.standard_deduction + taxData.rental_deduction);
        // Update total_taxableold and total_taxablnew elements
        document.getElementById("total_taxableold").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${totalTaxableOld}`;
        document.getElementById("total_taxablnew").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${totalTaxableNew}`;

        var totaltaxOld = isNewRegime ? 0 : (taxData.income_tax + taxData.rebate + taxData.surcharge + taxData.educatio_cess);
        var totaltaxNew = isBlankRegime ? 0 : (taxData.income_tax + taxData.rebate + taxData.surcharge + taxData.educatio_cess);
        document.getElementById("totaltax_old").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${totaltaxOld}`;
        document.getElementById("totaltax_new").innerHTML = `<i class='fa-regular fa-indian-rupee-sign'></i> ${totaltaxNew}`;

    }
}

function Loan_Repaid() 
{
    var selectedYear = document.getElementById("fy_year").value.split(" - ");
    var selectedStartYear = parseInt(selectedYear[0]);
    var selectedEndYear = parseInt(selectedYear[1]);

    // Calculate first day of selected fiscal year
    var firstDay = new Date(selectedStartYear, 0, 1);
    var firstday = firstDay.getFullYear() + "-" + "04" + "-01";
    var lastfirstdate1 = firstDay.getFullYear()-1 + "-" + "04" + "-01";

    // Calculate last day of selected fiscal year
    var lastDay = new Date(selectedEndYear, 0, 0);
    var lastday = lastDay.getFullYear()+1 + "-" + "03" + "-31";
    var lastlastdate1 = lastDay.getFullYear() + "-" + "03" + "-31";

    // Encode firstdate and lastdate
    firstdate1 = encodeURIComponent(firstday);
    lastdate1 = encodeURIComponent(lastday);

    lastfdate1 = encodeURIComponent(lastfirstdate1);
    lastldate1 = encodeURIComponent(lastlastdate1);

    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=hrms&ids=valuestring/&valuestring=Loan_Repaid@d@Jonathan%20Maskanalli@d@2024-04-01@d@2025-03-31@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Loan_Repaid@d@${encodeURIComponent(username)}@d@${firstdate1}@d@${lastdate1}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);
    data = JSON.parse(data[0].txt);

    if(data[0] == 'txt is null' || data[0].adv_loan_ded == null)
    {
        document.getElementById("loanrepaid").innerText = 0;
    }
    else
    {
        document.getElementById("loanrepaid").innerText = data[0].adv_loan_ded.toLocaleString('en-IN');
    }
}
function Loan_Balance() 
{
    var selectedYear = document.getElementById("fy_year").value.split(" - ");
    var selectedStartYear = parseInt(selectedYear[0]);
    var selectedEndYear = parseInt(selectedYear[1]);

    // Calculate first day of selected fiscal year
    var firstDay = new Date(selectedStartYear, 0, 1);
    var firstday = firstDay.getFullYear() + "-" + "04" + "-01";
    var lastfirstdate1 = firstDay.getFullYear()-1 + "-" + "04" + "-01";

    // Calculate last day of selected fiscal year
    var lastDay = new Date(selectedEndYear, 0, 0);
    var lastday = lastDay.getFullYear()+1 + "-" + "03" + "-31";
    var lastlastdate1 = lastDay.getFullYear() + "-" + "03" + "-31";

    // Encode firstdate and lastdate
    firstdate1 = encodeURIComponent(firstday);
    lastdate1 = encodeURIComponent(lastday);

    lastfdate1 = encodeURIComponent(lastfirstdate1);
    lastldate1 = encodeURIComponent(lastlastdate1);

    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=hrms&ids=valuestring/&valuestring=Loan_Balance@d@Jonathan%20Maskanalli@d@2024-04-01@d@2025-03-31@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Loan_Balance@d@${encodeURIComponent(username)}@d@${firstdate1}@d@${lastdate1}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);
    data = JSON.parse(data[0].txt);

    if(data[0] == "txt is null" || data[0].bal_loan_adv == null)
    {
        document.getElementById("loanbalance").innerText = 0;
    }
    else
    {
        document.getElementById("loanbalance").innerText = data[0].bal_loan_adv.toLocaleString('en-IN');
    }
}
function IOU_Balance() 
{
    var selectedYear = document.getElementById("fy_year").value.split(" - ");
    var selectedStartYear = parseInt(selectedYear[0]);
    var selectedEndYear = parseInt(selectedYear[1]);

    // Calculate first day of selected fiscal year
    var firstDay = new Date(selectedStartYear, 0, 1);
    var firstday = firstDay.getFullYear() + "-" + "04" + "-01";
    var lastfirstdate1 = firstDay.getFullYear()-1 + "-" + "04" + "-01";

    // Calculate last day of selected fiscal year
    var lastDay = new Date(selectedEndYear, 0, 0);
    var lastday = lastDay.getFullYear()+1 + "-" + "03" + "-31";
    var lastlastdate1 = lastDay.getFullYear() + "-" + "03" + "-31";

    // Encode firstdate and lastdate
    firstdate1 = encodeURIComponent(firstday);
    lastdate1 = encodeURIComponent(lastday);

    lastfdate1 = encodeURIComponent(lastfirstdate1);
    lastldate1 = encodeURIComponent(lastlastdate1);

    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=hrms&ids=valuestring/&valuestring=IOU_Balance@d@Vivek%20Chaudhari@d@2024-04-01@d@2025-03-31@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=IOU_Balance@d@${encodeURIComponent(username)}@d@${firstdate1}@d@${lastdate1}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);
    data = JSON.parse(data[0].txt);

    if(data[0] == "txt is null" || data[0].iou_amount == null)
    {
        document.getElementById("ioubalance").innerText = 0;
    }
    else
    {
        document.getElementById("ioubalance").innerText = data[0].iou_amount.toLocaleString('en-IN');
    }
}
function Claim_Balance() 
{
    var selectedYear = document.getElementById("fy_year").value.split(" - ");
    var selectedStartYear = parseInt(selectedYear[0]);
    var selectedEndYear = parseInt(selectedYear[1]);

    // Calculate first day of selected fiscal year
    var firstDay = new Date(selectedStartYear, 0, 1);
    var firstday = firstDay.getFullYear() + "-" + "04" + "-01";
    var lastfirstdate1 = firstDay.getFullYear()-1 + "-" + "04" + "-01";

    // Calculate last day of selected fiscal year
    var lastDay = new Date(selectedEndYear, 0, 0);
    var lastday = lastDay.getFullYear()+1 + "-" + "03" + "-31";
    var lastlastdate1 = lastDay.getFullYear() + "-" + "03" + "-31";

    // Encode firstdate and lastdate
    firstdate1 = encodeURIComponent(firstday);
    lastdate1 = encodeURIComponent(lastday);

    lastfdate1 = encodeURIComponent(lastfirstdate1);
    lastldate1 = encodeURIComponent(lastlastdate1);

    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=hrms&ids=valuestring/&valuestring=Claim_Balance@d@ERP%20Admin@d@2024-04-01@d@2025-03-31@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Claim_Balance@d@${encodeURIComponent(username)}@d@${firstdate1}@d@${lastdate1}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);
    data = JSON.parse(data[0].txt);

    if(data[0] == "txt is null" || data[0].claim_amount == null)
    {
        document.getElementById("claimbalance").innerText = 0;
    }
    else
    {
        document.getElementById("claimbalance").innerText = data[0].claim_amount.toLocaleString('en-IN');
    }
}
function incentive_balance() 
{
    var selectedYear = document.getElementById("fy_year").value.split(" - ");
    var selectedStartYear = parseInt(selectedYear[0]);
    var selectedEndYear = parseInt(selectedYear[1]);

    // Calculate first day of selected fiscal year
    var firstDay = new Date(selectedStartYear, 0, 1);
    var firstday = firstDay.getFullYear() + "-" + "04" + "-01";
    var lastfirstdate1 = firstDay.getFullYear()-1 + "-" + "04" + "-01";

    // Calculate last day of selected fiscal year
    var lastDay = new Date(selectedEndYear, 0, 0);
    var lastday = lastDay.getFullYear()+1 + "-" + "03" + "-31";
    var lastlastdate1 = lastDay.getFullYear() + "-" + "03" + "-31";

    // Encode firstdate and lastdate
    firstdate1 = encodeURIComponent(firstday);
    lastdate1 = encodeURIComponent(lastday);

    lastfdate1 = encodeURIComponent(lastfirstdate1);
    lastldate1 = encodeURIComponent(lastlastdate1);

    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=hrms&ids=valuestring/&valuestring=Incentive_Balance@d@ERP%20Admin@d@2024-04-01@d@2025-03-31@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Incentive_Balance@d@${encodeURIComponent(username)}@d@${firstdate1}@d@${lastdate1}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);
    data = JSON.parse(data[0].txt);

    if(data[0] == "txt is null" || data[0].incentive_amt   == null)
    {
        document.getElementById("incentivebalance").innerText = 0;
    }
    else
    {
        document.getElementById("incentivebalance").innerText = data[0].incentive_amt.toLocaleString('en-IN');
    }
}
function TDS_Paid() 
{
    var selectedYear = document.getElementById("fy_year").value.split(" - ");
    var selectedStartYear = parseInt(selectedYear[0]);
    var selectedEndYear = parseInt(selectedYear[1]);

    // Calculate first day of selected fiscal year
    var firstDay = new Date(selectedStartYear, 0, 1);
    var firstday = firstDay.getFullYear() + "-" + "04" + "-01";
    var lastfirstdate1 = firstDay.getFullYear()-1 + "-" + "04" + "-01";

    // Calculate last day of selected fiscal year
    var lastDay = new Date(selectedEndYear, 0, 0);
    var lastday = lastDay.getFullYear()+1 + "-" + "03" + "-31";
    var lastlastdate1 = lastDay.getFullYear() + "-" + "03" + "-31";

    // Encode firstdate and lastdate
    firstdate1 = encodeURIComponent(firstday);
    lastdate1 = encodeURIComponent(lastday);

    lastfdate1 = encodeURIComponent(lastfirstdate1);
    lastldate1 = encodeURIComponent(lastlastdate1);

    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=hrms&ids=valuestring/&valuestring=TDS_Paid@d@Atul%20Dangi@d@2024-04-01@d@2025-03-31@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=TDS_Paid@d@${encodeURIComponent(username)}@d@${firstdate1}@d@${lastdate1}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);
    data = JSON.parse(data[0].txt);

    if(data[0] == "txt is null" || data[0].tds_paid == null)
    {
        document.getElementById("tdspaid").innerText = 0;
    }
    else
    {
        document.getElementById("tdspaid").innerText = data[0].tds_paid.toLocaleString('en-IN');
    }
}
function PF_Deduction() 
{
    var selectedYear = document.getElementById("fy_year").value.split(" - ");
    var selectedStartYear = parseInt(selectedYear[0]);
    var selectedEndYear = parseInt(selectedYear[1]);

    // Calculate first day of selected fiscal year
    var firstDay = new Date(selectedStartYear, 0, 1);
    var firstday = firstDay.getFullYear() + "-" + "04" + "-01";
    var lastfirstdate1 = firstDay.getFullYear()-1 + "-" + "04" + "-01";

    // Calculate last day of selected fiscal year
    var lastDay = new Date(selectedEndYear, 0, 0);
    var lastday = lastDay.getFullYear()+1 + "-" + "03" + "-31";
    var lastlastdate1 = lastDay.getFullYear() + "-" + "03" + "-31";

    // Encode firstdate and lastdate
    firstdate1 = encodeURIComponent(firstday);
    lastdate1 = encodeURIComponent(lastday);

    lastfdate1 = encodeURIComponent(lastfirstdate1);
    lastldate1 = encodeURIComponent(lastlastdate1);
    
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=hrms&ids=valuestring/&valuestring=PF_Deduction@d@Atul%20Dangi@d@2024-04-01@d@2025-03-31@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=PF_Deduction@d@${encodeURIComponent(username)}@d@${firstdate1}@d@${lastdate1}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);
    data = JSON.parse(data[0].txt);

    if(data[0] == "txt is null" || data[0].pt_deduction == null)
    {
        document.getElementById("pfdeduction").innerText = 0;
    }
    else
    {
        document.getElementById("pfdeduction").innerText = data[0].pt_deduction.toLocaleString('en-IN');
    }
}
function Salary_Info() {
    var selectedYear = document.getElementById("fy_year").value.split(" - ");
    var selectedStartYear = parseInt(selectedYear[0]);
    var selectedEndYear = parseInt(selectedYear[1]);

    // Calculate first day of selected fiscal year
    var firstDay = new Date(selectedStartYear, 0, 1);
    var firstday = firstDay.getFullYear() + "-04-01";
    var lastfirstdate1 = firstDay.getFullYear() - 1 + "-04-01";

    // Calculate last day of selected fiscal year
    var lastDay = new Date(selectedEndYear, 0, 0);
    var lastday = lastDay.getFullYear() + 1 + "-03-31";
    var lastlastdate1 = lastDay.getFullYear() + "-03-31";

    // Encode firstdate and lastdate
    var firstdate1 = encodeURIComponent(firstday);
    var lastdate1 = encodeURIComponent(lastday);
    var lastfdate1 = encodeURIComponent(lastfirstdate1);
    var lastldate1 = encodeURIComponent(lastlastdate1);

    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var cloudcodenew = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : "";
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Salary_Info@d@${encodeURIComponent(username)}@d@${firstdate1}@d@${lastdate1}@d@${tokenParam}`;

    var data = callajax(urltotal);
    data = JSON.parse(data);

    var monarr = ["", "Apr", "May", "Jun", "July", "Aug", "Sep", "Oct", "Nov", "Dec", "Jan", "Feb", "Mar"];
    var field = "";

    // Initialize totals for each column
    var totalPaidDays = 0;
    var totalEarnedBasic = 0;
    var totalEarnedHra = 0;
    var totalEarnedGross = 0;
    var totalPFDeduction = 0;
    var totalESICDeduction = 0;
    var totalPTDeduction = 0;
    var totalTDSDeduction = 0;
    var totalOtherDeduction = 0;
    var totalNetSalary = 0;

    // Check if data exists and if not, populate with empty rows
    if (!data || data.length === 0 || data[0].txt === "txt is null") {
        // If no data, populate with empty rows (no need to change individual values)
        for (var i = 1; i <= 12; i++) {
            field += `<tr>
                <td>${monarr[i]}</td>
                <td id="paid_days_${i}"></td>
                <td id="earned_basic_${i}"></td>
                <td id="earned_hra_${i}"></td>
                <td id="earned_gross_${i}"></td>
                <td id="pf_deduction_${i}"></td>
                <td id="esic_deduction_${i}"></td>
                <td id="pt_deduction_${i}"></td>
                <td id="tds_deduction_${i}"></td>
                <td id="other_deduction_${i}"></td>
                <td id="net_salary_${i}"></td>
                <td id="salary_transfer_date_${i}"></td>
                <td id="salary_slip_link_${i}"></td>
            </tr>`;
        }
        document.getElementById('salarybody').innerHTML = field;

        // Update totals in the footer to 0
        document.getElementById('paid_days_total').textContent = "0";
        document.getElementById('earned_basic_total').textContent = "0";
        document.getElementById('earned_hra_total').textContent = "0";
        document.getElementById('earned_gross_total').textContent = "0";
        document.getElementById('pf_deduction_total').textContent = "0";
        document.getElementById('esic_deduction_total').textContent = "0";
        document.getElementById('pt_deduction_total').textContent = "0";
        document.getElementById('tds_deduction_total').textContent = "0";
        document.getElementById('other_deduction_total').textContent = "0";
        document.getElementById('net_salary_total').textContent = "0";

        return; // Exit the function as no data is available
    }

    // If data exists, parse it
    data = JSON.parse(data[0].txt);

    // Loop through the months and create the rows
    for (var i = 1; i <= 12; i++) {
        field += `<tr>
            <td>${monarr[i]}</td>
            <td id="paid_days_${i}"></td>
            <td id="earned_basic_${i}"></td>
            <td id="earned_hra_${i}"></td>
            <td id="earned_gross_${i}"></td>
            <td id="pf_deduction_${i}"></td>
            <td id="esic_deduction_${i}"></td>
            <td id="pt_deduction_${i}"></td>
            <td id="tds_deduction_${i}"></td>
            <td id="other_deduction_${i}"></td>
            <td id="net_salary_${i}"></td>
            <td id="salary_transfer_date_${i}"></td>
            <td id="salary_slip_link_${i}"></td>
        </tr>`;
    }
    document.getElementById('salarybody').innerHTML = field;

    // Loop through data and populate the rows
    for (var j = 0; j < data.length; j++) {
        var monthdata = parseInt(data[j].salary_transfer_date.split("-")[1], 10);

        if (monthdata >= 4) {
            monthdata -= 3;
        } else {
            monthdata += 9;
        }

        

        $("#paid_days_" + monthdata).text(data[j].paid_days || 0);
        // $("#earned_basic_" + monthdata).text(data[j].earned_basic ? parseFloat(data[j].earned_basic).toFixed(2) : 0);
        $("#earned_basic_" + monthdata).text(Math.trunc(data[j].earned_basic).toLocaleString('en-IN') || 0); // Math.trunc(data[j].earned_basic).toLocaleString('en-IN')
        // $("#earned_hra_" + monthdata).text(data[j].earned_hra ? parseFloat(data[j].earned_hra).toFixed(2) : 0);
        $("#earned_hra_" + monthdata).text(Math.trunc(data[j].earned_hra).toLocaleString('en-IN') || 0);
        $("#earned_gross_" + monthdata).text(data[j].earned_gross.toLocaleString('en-IN') || 0);
        $("#pf_deduction_" + monthdata).text(data[j].pf_deduction.toLocaleString('en-IN') || 0);
        $("#esic_deduction_" + monthdata).text(data[j].esic_deduction !== undefined && data[j].esic_deduction !== null ? data[j].esic_deduction.toLocaleString('en-IN') : 0);
        $("#pt_deduction_" + monthdata).text(data[j].pt_deduction.toLocaleString('en-IN') || 0);
        $("#tds_deduction_" + monthdata).text(data[j].tds_deduction.toLocaleString('en-IN') || 0);
        $("#other_deduction_" + monthdata).text(data[j].other_deduction !== undefined && data[j].other_deduction !== null ? data[j].other_deduction.toLocaleString('en-IN') : 0);
        $("#net_salary_" + monthdata).text(data[j].net_salary.toLocaleString('en-IN') || 0);
        $("#salary_transfer_date_" + monthdata).text(data[j].salary_transfer_date || "");

        if (data[j].id) {
            $("#salary_slip_link_" + monthdata).html(`<a href="/../sendMailReport.do?actn=PrintData&matchkey=yes&idlist=@&fieldid=2855&fieldId=2855&fieldValue=&formid=545&matchingFields=&reportid=${data[j].id}&moduleconditions=&reportname=5269${cloudcodenew}${tokenParam}" target="_blank">
                <i class="fa-regular fa-arrow-down-to-bracket" style="cursor: pointer; color:#5D51E2; font-weight:600;"></i>
            </a>`);
        } else {
            $("#salary_slip_link_" + monthdata).html("");
        }

        // Update the total calculations
        totalPaidDays += data[j].paid_days || 0;
        // totalEarnedBasic += data[j].earned_basic ? parseFloat(data[j].earned_basic) : 0;
        // totalEarnedHra += data[j].earned_hra ? parseFloat(data[j].earned_hra) : 0;
        totalEarnedBasic += (Math.trunc(data[j].earned_basic)) || 0;
        totalEarnedHra += (Math.trunc(data[j].earned_hra)) || 0;
        totalEarnedGross += data[j].earned_gross || 0;
        totalPFDeduction += data[j].pf_deduction || 0;
        totalESICDeduction += data[j].esic_deduction !== undefined && data[j].esic_deduction !== null ? data[j].esic_deduction : 0;
        totalPTDeduction += data[j].pt_deduction || 0;
        totalTDSDeduction += data[j].tds_deduction || 0;
        totalOtherDeduction += data[j].other_deduction !== undefined && data[j].other_deduction !== null ? data[j].other_deduction : 0;
        totalNetSalary += data[j].net_salary || 0;
    }

    // Update the total values in the footer
    document.getElementById('paid_days_total').textContent = totalPaidDays.toLocaleString('en-IN') || "0";
    // document.getElementById('earned_basic_total').textContent = totalEarnedBasic.toFixed(2) || "0";
    document.getElementById('earned_basic_total').textContent = totalEarnedBasic.toLocaleString('en-IN') || "0";
    // document.getElementById('earned_hra_total').textContent = totalEarnedHra.toFixed(2) || "0";
    document.getElementById('earned_hra_total').textContent = totalEarnedHra.toLocaleString('en-IN') || "0";
    document.getElementById('earned_gross_total').textContent = Number(totalEarnedGross.toFixed(2)).toLocaleString('en-IN', { minimumFractionDigits: 2 }) || "0"; //Number(totalEarnedGross.toFixed(2)).toLocaleString('en-IN', { minimumFractionDigits: 2 })
    document.getElementById('pf_deduction_total').textContent = Number(totalPFDeduction.toFixed(2)).toLocaleString('en-IN', { minimumFractionDigits: 2 }) || "0"; 
    document.getElementById('esic_deduction_total').textContent = Number(totalESICDeduction.toFixed(2)).toLocaleString('en-IN', { minimumFractionDigits: 2 }) || "0";  
    document.getElementById('pt_deduction_total').textContent = Number(totalPTDeduction.toFixed(2)).toLocaleString('en-IN', { minimumFractionDigits: 2 }) || "0";  
    document.getElementById('tds_deduction_total').textContent = Number(totalTDSDeduction.toFixed(2)).toLocaleString('en-IN', { minimumFractionDigits: 2 }) || "0";  
    document.getElementById('other_deduction_total').textContent =  Number(totalOtherDeduction.toFixed(2)).toLocaleString('en-IN', { minimumFractionDigits: 2 }) || "0"; 
    document.getElementById('net_salary_total').textContent = Number(totalNetSalary.toFixed(2)).toLocaleString('en-IN', { minimumFractionDigits: 2 }) || "0";  
}

function Loans_Summery()
{
    var selectedYear = document.getElementById("fy_year").value.split(" - ");
    var selectedStartYear = parseInt(selectedYear[0]);
    var selectedEndYear = parseInt(selectedYear[1]);

    // Calculate first day of selected fiscal year
    var firstDay = new Date(selectedStartYear, 0, 1);
    var firstday = firstDay.getFullYear() + "-" + "04" + "-01";
    var lastfirstdate1 = firstDay.getFullYear()-1 + "-" + "04" + "-01";

    // Calculate last day of selected fiscal year
    var lastDay = new Date(selectedEndYear, 0, 0);
    var lastday = lastDay.getFullYear()+1 + "-" + "03" + "-31";
    var lastlastdate1 = lastDay.getFullYear() + "-" + "03" + "-31";

    // Encode firstdate and lastdate
    firstdate1 = encodeURIComponent(firstday);
    lastdate1 = encodeURIComponent(lastday);

    lastfdate1 = encodeURIComponent(lastfirstdate1);
    lastldate1 = encodeURIComponent(lastlastdate1);
    
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=hrms&ids=valuestring/&valuestring=Loans_Advances_Summery@d@Jonathan%20Maskanalli@d@2024-04-01@d@2025-03-31@d@2023-04-01@d@2024-03-31@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Loans_Advances_Summery@d@${encodeURIComponent(username)}@d@${firstdate1}@d@${lastdate1}@d@${lastfirstdate1}@d@${lastlastdate1}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);

    data = JSON.parse(data[0].txt);

    field =`<tbody>
                <tr>
                    <td>Opening Balance as on 1st April</td>
                    <td>${data[0].opeaning_balance}</td>
                </tr>
                <tr style="font-weight: 600; color: #5D51E2; cursor: pointer;" onclick="openSlider1('loanreceived');Loan_Advance_Received()">
                    <td>Loan / Advance Received</td>
                    <td>${data[0].loan_advance_received}</td>
                </tr>
                <tr style="font-weight: 600; color: #5D51E2; cursor: pointer;" onclick="openSlider1('loanadrepaid');Loan_Advance_Repaid()">
                    <td>Loan / Advance Repaid</td>
                    <td>${data[0].loan_advance_repaid}</td>
                </tr>
                <tr>
                    <td>Loan / Advance Balance</td>
                    <td>${data[0].loan_advance_balance}</td>
                </tr>
            </tbody>`
    document.getElementById('sftableloan').innerHTML = field;
}
function Claims_Summery()
{
    var selectedYear = document.getElementById("fy_year").value.split(" - ");
    var selectedStartYear = parseInt(selectedYear[0]);
    var selectedEndYear = parseInt(selectedYear[1]);

    // Calculate first day of selected fiscal year
    var firstDay = new Date(selectedStartYear, 0, 1);
    var firstday = firstDay.getFullYear() + "-" + "04" + "-01";
    var lastfirstdate1 = firstDay.getFullYear()-1 + "-" + "04" + "-01";

    // Calculate last day of selected fiscal year
    var lastDay = new Date(selectedEndYear, 0, 0);
    var lastday = lastDay.getFullYear()+1 + "-" + "03" + "-31";
    var lastlastdate1 = lastDay.getFullYear() + "-" + "03" + "-31";

    // Encode firstdate and lastdate
    firstdate1 = encodeURIComponent(firstday);
    lastdate1 = encodeURIComponent(lastday);

    lastfdate1 = encodeURIComponent(lastfirstdate1);
    lastldate1 = encodeURIComponent(lastlastdate1);

    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=hrms&ids=valuestring/&valuestring=Claims_Reimbursement_Summery@d@ERP Admin@d@2024-04-01@d@2025-03-31@d@2023-04-01@d@2024-03-31@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Claims_Reimbursement_Summery@d@${encodeURIComponent(username)}@d@${firstdate1}@d@${lastdate1}@d@${lastfdate1}@d@${lastldate1}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);

    if(data[0].txt == "txt is null")
    {
        field =`<tbody>
                    <tr>
                        <td>Opening Claims as on 1st April</td>
                        <td>0</td>
                    </tr>
                    <tr style="font-weight: 600; color: #5D51E2;" onclick="openSlider1('reimclaimsubmit'); Reimbursement_Claim_Submitted();">
                        <td>Reimbursement Claim Submitted</td>
                        <td>0</td>
                    </tr>
                    <tr style="font-weight: 600; color: #5D51E2;" onclick="openSlider1('reimclaimsettled'); Reimbursement_Claim_Settled();">
                        <td>Reimbursement Claim Settled</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>Reimbursement Claim Pending</td>
                        <td>0</td>
                    </tr>
                </tbody>`;
        document.getElementById('sftableclaim').innerHTML = field; 
    }
    else
    {
        data = JSON.parse(data[0].txt);
        field =`<tbody>
                    <tr>
                        <td>Opening Claims as on 1st April</td>
                        <td>${data[0].opening_claims}</td>
                    </tr>
                    <tr style="font-weight: 600; color: #5D51E2;" onclick="openSlider1('reimclaimsubmit'); Reimbursement_Claim_Submitted();">
                        <td>Reimbursement Claim Submitted</td>
                        <td>${data[0].claim_submitted}</td>
                    </tr>
                    <tr style="font-weight: 600; color: #5D51E2;" onclick="openSlider1('reimclaimsettled'); Reimbursement_Claim_Settled();">
                        <td>Reimbursement Claim Settled</td>
                        <td>${data[0].claim_settled}</td>
                    </tr>
                    <tr>
                        <td>Reimbursement Claim Pending</td>
                        <td>${data[0].claim_pending}</td>
                    </tr>
                </tbody>`
        document.getElementById('sftableclaim').innerHTML = field; 
    }
}
function iou_summery()
{
    var selectedYear = document.getElementById("fy_year").value.split(" - ");
    var selectedStartYear = parseInt(selectedYear[0]);
    var selectedEndYear = parseInt(selectedYear[1]);

    // Calculate first day of selected fiscal year
    var firstDay = new Date(selectedStartYear, 0, 1);
    var firstday = firstDay.getFullYear() + "-" + "04" + "-01";
    var lastfirstdate1 = firstDay.getFullYear()-1 + "-" + "04" + "-01";

    // Calculate last day of selected fiscal year
    var lastDay = new Date(selectedEndYear, 0, 0);
    var lastday = lastDay.getFullYear()+1 + "-" + "03" + "-31";
    var lastlastdate1 = lastDay.getFullYear() + "-" + "03" + "-31";

    // Encode firstdate and lastdate
    firstdate1 = encodeURIComponent(firstday);
    lastdate1 = encodeURIComponent(lastday);

    lastfdate1 = encodeURIComponent(lastfirstdate1);
    lastldate1 = encodeURIComponent(lastlastdate1);
    
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=hrms&ids=valuestring/&valuestring=IOU_Summery@d@Vivek%20Chaudhari@d@2024-04-01@d@2025-03-31@d@2023-04-01@d@2024-03-31@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=IOU_Summery@d@${encodeURIComponent(username)}@d@${firstdate1}@d@${lastdate1}@d@${lastfirstdate1}@d@${lastlastdate1}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);

    if(data[0].txt == "txt is null")
    {
        field =`<tbody>
            <tr>
                <td>Opening IOU pending as on 1st April</td>
                <td>0</td>
            </tr>
            <tr style="font-weight: 600; color: #5D51E2;" onclick="openSlider1('ioupaid'); IOU_Paid();">
                <td>IOU Paid</td>
                <td>0</td>
            </tr>
            <tr style="font-weight: 600; color: #5D51E2;" onclick="openSlider1('ioubillsettled'); IOU_Bill_Settled();">
                <td>IOU Bill Settled</td>
                <td>0</td>
            </tr>
            <tr>
                <td>IOU Balance Pending</td>
                <td>0</td>
            </tr>
            </tbody>` 
                                
        document.getElementById('sftableiou').innerHTML = field; 
    }
    else
    {
        data = JSON.parse(data[0].txt);
        field =`<tbody>
                <tr>
                    <td>Opening IOU pending as on 1st April</td>
                    <td>${data[0].opening_iou_pending}</td>
                </tr>
                <tr style="font-weight: 600; color: #5D51E2;" onclick="openSlider1('ioupaid'); IOU_Paid();">
                    <td>IOU Paid</td>
                    <td>${data[0].iou_paid}</td>
                </tr>
                <tr style="font-weight: 600; color: #5D51E2;" onclick="openSlider1('ioubillsettled'); IOU_Bill_Settled();">
                    <td>IOU Bill Settled</td>
                    <td>${data[0].iou_bill_settled}</td>
                </tr>
                <tr>
                    <td>IOU Balance Pending</td>
                    <td>${data[0].iou_pending}</td>
                </tr>
            </tbody>` 
        document.getElementById('sftableiou').innerHTML = field; 
    }
}
function Salary_Benefits()
{
    $(".salary_benefits_user-name").children("h6").html(function(_, html) {return html.replaceAll("bilind Shirin", "<b>" +  window.targetuser + "</b>");});
    // var currentDate = new Date();
    // var currentYear = currentDate.getFullYear();
    // var fiscalYearStart = currentYear;
    // var fiscalYearEnd = currentYear + 1;
    // var fiscalYearOptions = [];
    // // Generate fiscal year options
    // for (var i = 0; i < 3; i++)
    // {
    //     fiscalYearOptions.push(`<option>${fiscalYearStart} - ${fiscalYearEnd}</option>`);
    //     fiscalYearStart--;
    //     fiscalYearEnd--;
    // }
    // // Set fiscal year options in the select element
    // document.getElementById("fy_year").innerHTML = fiscalYearOptions.join("");
    // document.getElementById("fy_year").selectedIndex = 0;

    var currentDate = new Date();
    var currentYear = currentDate.getFullYear();
    var fiscalYearStart;
    if (currentDate.getMonth() + 1 < 4) {  
        fiscalYearStart = currentYear - 1; // Previous fiscal year if before April
    } else {
        fiscalYearStart = currentYear; // Current fiscal year if April or later
    }
    var fiscalYearEnd = fiscalYearStart + 1;
    var fiscalYearOptions = [];
    for (var i = 0; i < 3; i++) {
        fiscalYearOptions.push(`<option>${fiscalYearStart} - ${fiscalYearEnd}</option>`);
        fiscalYearStart--;
        fiscalYearEnd--;
    }
    document.getElementById("fy_year").innerHTML = fiscalYearOptions.join("");
    document.getElementById("fy_year").selectedIndex = 0;

    Loan_Repaid();
    Loan_Balance();
    IOU_Balance();
    Claim_Balance();
    TDS_Paid();
    PF_Deduction();
    Loans_Summery();
    Claims_Summery();
    iou_summery();
    Salary_Info();
    incentive_balance();
}
function changeyear()
{
    Loan_Repaid();
    Loan_Balance();
    IOU_Balance();
    Claim_Balance();
    TDS_Paid();
    PF_Deduction();
    Loans_Summery();
    Claims_Summery();
    iou_summery();
    Salary_Info();
    incentive_balance();
}
function show_tax()
{
    if ($('#tax_calculator').css('display') == 'block')
    {
        $('#tax_calculator').hide();
        $('#income_tax').show();
    }
}
function goback()
{
    if($('#income_tax').css('display') == 'block')
    {
        $('#income_tax').hide();
        $('#tax_calculator').show();
    }
}
function taxdeduction()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=hrms&ids=valuestring/&valuestring=Tax_Deduction@d@Page_2@d@Ramesh@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Tax_Deduction@d@Page_2@d@${encodeURIComponent(username)}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);
    if(data[0].txt == "txt is null")
    {
        document.getElementById('tax_name').innerText = "";
        document.getElementById('tax_pan').innerText = "";
        document.getElementById('tax_year').innerText = "";
        document.getElementById('tax_age').innerText = "";
        
        document.getElementById('tax_salary').innerText = "";
        document.getElementById('tax_income').innerText = "";
        document.getElementById('tax_incentive').innerText = "";
        document.getElementById('tax_otherincome').innerText = "";
        document.getElementById('tax_totalincome').innerText = "";
        
        document.getElementById('tax_deduction').innerText = "";
        document.getElementById('tax_medical').innerText = "";
        document.getElementById('tax_intrest').innerText = "";
        document.getElementById('tax_donation').innerText = "";
        document.getElementById('tax_housing').innerText = "";
        document.getElementById('tax_exumptions').innerText = "";
        document.getElementById('total_exumptions').innerText = "";
    }
    else
    {
        data = JSON.parse(data[0].txt);
        document.getElementById('tax_name').innerText = data[0].name;
        document.getElementById('tax_pan').innerText = data[0].pan;
        document.getElementById('tax_year').innerText = data[0].financial_year;
        document.getElementById('tax_age').innerText = data[0].age;
        
        document.getElementById('tax_salary').innerText = data[0].income_from_salary;
        document.getElementById('tax_income').innerText = data[0].income_from_interest;
        document.getElementById('tax_incentive').innerText = data[0].incentive_income;
        document.getElementById('tax_otherincome').innerText = data[0].other_income;
        document.getElementById('tax_totalincome').innerText = data[0].total_income;
        
        document.getElementById('tax_deduction').innerText = data[0].dedeuction_80c;
        document.getElementById('tax_medical').innerText = data[0].medical_80d;
        document.getElementById('tax_intrest').innerText = data[0].interest_on_edu_loan80e;
        document.getElementById('tax_donation').innerText = data[0].donation_charity;
        document.getElementById('tax_housing').innerText = data[0].intrest_housing80eea;
        document.getElementById('tax_exumptions').innerText = data[0].other_exumptions;
        document.getElementById('total_exumptions').innerText = data[0].total_exemption;
    }
}
function incometax_namedetails()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=hrms&ids=valuestring/&valuestring=Tax_Deduction@d@Page_2@d@Ramesh@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Tax_Deduction@d@Page_2@d@${encodeURIComponent(username)}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);
    if(data[0].txt == "txt is null")
    {
        document.getElementById('incometax_emp_name').innerText = "";
        document.getElementById('incometax_pan').innerText = "";
    }
    else
    {
        data = JSON.parse(data[0].txt);
        document.getElementById('incometax_emp_name').innerText = data[0].name;
        document.getElementById('incometax_pan').innerText = data[0].pan;
    }
}
function Loan_Advance_Received()
{
    var getUrl = window.location; 
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var year_period = $("#fy_year").val()
    var fin_start_date = year_period.split(" - ")[0]+"-04-01";
    var fin_end_date = year_period.split(" - ")[1]+"-03-31";
    //2024-04-01@d@2025-03-31
    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=hrms&ids=valuestring/&valuestring=Loan_Advance_Received@d@Page_2@d@Sushila%20Nanasaheb%20Mote@d@2024-04-01@d@2025-03-31@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Loan_Advance_Received@d@Page_2@d@${encodeURIComponent(username)}@d@${encodeURIComponent(fin_start_date)}@d@${encodeURIComponent(fin_end_date)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);

    data = data[0].txt;

    if (data === "txt is null")
    {
        $("#loanreceivedtbody").html(`<tr><td colspan="5" style="text-align:center"><div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 200px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></td></tr>`);
        $("#total_load_adv").text("0");
    } 
    else
    {
        data = JSON.parse(data);
        var field = "<tr>";
        var loan_advance_received_total = 0
        for(var i=0; i<data.length; i++)
        {
            loan_advance_received_total += parseFloat(data[i].loan_advance_received);
            field +=
                "<td>"+data[i].loan_advance_date+"</td>"+
                "<td>"+data[i].loan_advance_received+"</td>"+
                "<td>"+data[i].sanctioned_by+"</td>"+
                "<td>"+data[i].sanctioned_date+"</td>"+
                "<td>"+data[i].remarks+"</td>";
            field += "/<tr>";
        }
        field += "/<tr>";
        $("#total_load_adv").text(loan_advance_received_total);
        $("#loanreceivedtbody").html(field);
    }
}
function Loan_Advance_Repaid()
{
    var getUrl = window.location; 
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var year_period = $("#fy_year").val()
    var fin_start_date = year_period.split(" - ")[0]+"-04-01";
    var fin_end_date = year_period.split(" - ")[1]+"-03-31";
    //2024-04-01@d@2025-03-31
    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=hrms&ids=valuestring/&valuestring=Loan_Advance_Received@d@Page_2@d@Sushila%20Nanasaheb%20Mote@d@2024-04-01@d@2025-03-31@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Loan_Advance_Repaid@d@Page_2@d@${encodeURIComponent(username)}@d@${encodeURIComponent(fin_start_date)}@d@${encodeURIComponent(fin_end_date)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);

    data = data[0].txt;

    if (data === "txt is null")
    {
        $("#loanrepaidtbody").html(`<tr><td colspan="5" style="text-align:center"><div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 200px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></td></tr>`);
        $("#total_load_repaid").text("0");
    } 
    else
    {
        data = JSON.parse(data);
        var field = "<tr>";
        var loan_advance_repaid_total = 0
        for(var i=0; i<data.length; i++)
        {
            loan_advance_repaid_total += parseFloat(data[i].loan_advance_repaid);
            field +=
                "<td>"+data[i].loan_advance_date+"</td>"+
                "<td>"+data[i].loan_advance_repaid+"</td>"+
                "<td>"+data[i].salary_day+"</td>";
            field += "/<tr>";
        }
        field += "/<tr>";
        $("#total_load_repaid").text(loan_advance_repaid_total);
        $("#loanrepaidtbody").html(field);
    }
}
function Reimbursement_Claim_Submitted()
{
    var getUrl = window.location; 
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var year_period = $("#fy_year").val()
    var fin_start_date = year_period.split(" - ")[0]+"-04-01";
    var fin_end_date = year_period.split(" - ")[1]+"-03-31";
    //2024-04-01@d@2025-03-31
    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=hrms&ids=valuestring/&valuestring=Loan_Advance_Received@d@Page_2@d@Sushila%20Nanasaheb%20Mote@d@2024-04-01@d@2025-03-31@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Reimbursement_Claim_Submitted@d@Page_2@d@${encodeURIComponent(username)}@d@${encodeURIComponent(fin_start_date)}@d@${encodeURIComponent(fin_end_date)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);

    data = data[0].txt;

    if (data === "txt is null")
    {
        $("#Reimbursementclaimtbody").html(`<tr><td colspan="5" style="text-align:center"><div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 200px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></td></tr>`);
        $("#totalreimbursementcalimamt").text("0");
    } 
    else
    {
        data = JSON.parse(data);
        var field = "<tr>";
        var reimbursement_calim_amt_total = 0
        for(var i=0; i<data.length; i++)
        {
            reimbursement_calim_amt_total += parseFloat(data[i].claim_amt);
            field +=
                "<td>"+data[i].date+"</td>"+
                "<td>"+data[i].claim_amt+"</td>"+
                "<td>"+data[i].expenses_category+"</td>"+
                "<td>"+data[i].claim_particular+"</td>"+
                "<td>"+data[i].status+"</td>";
            field += "/<tr>";
        }
        field += "/<tr>";
        $("#totalreimbursementcalimamt").text(reimbursement_calim_amt_total);
        $("#Reimbursementclaimtbody").html(field);
    }
}
function Reimbursement_Claim_Settled()
{
    var getUrl = window.location; 
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var year_period = $("#fy_year").val()
    var fin_start_date = year_period.split(" - ")[0]+"-04-01";
    var fin_end_date = year_period.split(" - ")[1]+"-03-31";
    //2024-04-01@d@2025-03-31
    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=hrms&ids=valuestring/&valuestring=Loan_Advance_Received@d@Page_2@d@Sushila%20Nanasaheb%20Mote@d@2024-04-01@d@2025-03-31@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Reimbursement_Claim_Settled@d@Page_2@d@${encodeURIComponent(username)}@d@${encodeURIComponent(fin_start_date)}@d@${encodeURIComponent(fin_end_date)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);

    data = data[0].txt;

    if (data === "txt is null")
    {
        $("#reimbursementsettledtbody").html(`<tr><td colspan="8" style="text-align:center"><div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 200px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></td></tr>`);
        $("#claimamt").text("0");
        $("#settledamt").text("0");
    } 
    else
    {
        data = JSON.parse(data);
        var field = "<tr>";
        var calim_amt_total = 0
        var settle_amt_total = 0
        for(var i=0; i<data.length; i++)
        {
            calim_amt_total += parseFloat(data[i].reimbursement_claim_amt);
            settle_amt_total += parseFloat(data[i].settled_amount);;
            field +=
                "<td>"+data[i].claim_date+"</td>"+
                "<td>"+data[i].reimbursement_claim_amt+"</td>"+
                "<td>"+data[i].expenses_category+"</td>"+
                "<td>"+data[i].sanctioned+"</td>"+
                "<td>"+data[i].approval_authority_remark+"</td>"+
                "<td>"+data[i].approval_date+"</td>"+
                "<td>"+data[i].settled_amount+"</td>"+
                "<td>"+data[i].paid_date+"</td>";
            field += "/<tr>";
        }
        field += "/<tr>";
        $("#claimamt").text(calim_amt_total);
        $("#settledamt").text(settle_amt_total);
        $("#reimbursementsettledtbody").html(field);
    }
}
function IOU_Paid()
{
    var getUrl = window.location; 
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var year_period = $("#fy_year").val()
    var fin_start_date = year_period.split(" - ")[0]+"-04-01";
    var fin_end_date = year_period.split(" - ")[1]+"-03-31";
    //2024-04-01@d@2025-03-31
    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=hrms&ids=valuestring/&valuestring=Loan_Advance_Received@d@Page_2@d@Sushila%20Nanasaheb%20Mote@d@2024-04-01@d@2025-03-31@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=IOU_Paid@d@Page_2@d@${encodeURIComponent(username)}@d@${encodeURIComponent(fin_start_date)}@d@${encodeURIComponent(fin_end_date)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);

    data = data[0].txt;

    if (data === "txt is null")
    {
        $("#ioupaidtbody").html(`<tr><td colspan="8" style="text-align:center"><div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 200px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></td></tr>`);
        $("#ioupaidamt").text("0");
    }
    else
    {
        data = JSON.parse(data);
        var field = "<tr>";
        var iou_paid_amt_total = 0
        for(var i=0; i<data.length; i++)
        {
            iou_paid_amt_total += parseFloat(data[i].iou_paid);
            field +=
                "<td>"+data[i].iou_date+"</td>"+
                "<td>"+data[i].iou_paid+"</td>"+
                "<td>"+data[i].expenses_category+"</td>"+
                "<td>"+data[i].iou_particular+"</td>"+
                "<td>"+data[i].status+"</td>";
            field += "/<tr>";
        }
        field += "/<tr>";
        $("#ioupaidamt").text(iou_paid_amt_total);
        $("#ioupaidtbody").html(field);
    }
}
function IOU_Bill_Settled()
{
    var getUrl = window.location; 
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var year_period = $("#fy_year").val()
    var fin_start_date = year_period.split(" - ")[0]+"-04-01";
    var fin_end_date = year_period.split(" - ")[1]+"-03-31";
    //2024-04-01@d@2025-03-31
    //https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=hrms&ids=valuestring/&valuestring=Loan_Advance_Received@d@Page_2@d@Sushila%20Nanasaheb%20Mote@d@2024-04-01@d@2025-03-31@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66246&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=IOU_Bill_Settled@d@Page_2@d@${encodeURIComponent(username)}@d@${encodeURIComponent(fin_start_date)}@d@${encodeURIComponent(fin_end_date)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);

    data = data[0].txt;

    if (data === "txt is null")
    {
        $("#iousettledtbody").html(`<tr><td colspan="9" style="text-align:center"><div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 200px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></td></tr>`);
        $("#iousettledamt").text("0");
        $("#iousettledbillamt").text("0");
    }
    else
    {
        data = JSON.parse(data);
        var field = "<tr>";
        var iousettledamt = 0
        var iousettledbillamt = 0
        for(var i=0; i<data.length; i++)
        {
            iousettledamt += parseFloat(data[i].iou);
            iousettledbillamt += parseFloat(data[i].bills);
            field +=
                "<td>"+data[i].iou_paid_date+"</td>"+
                "<td>"+data[i].iou+"</td>"+
                "<td>"+data[i].expenses_category+"</td>"+
                "<td>"+data[i].bills+"</td>"+
                "<td>"+data[i].settled_date+"</td>"+
                "<td>"+data[i].iou_particular+"</td>"+
                "<td>"+data[i].balance_paid+"</td>"+
                "<td>"+data[i].aprroved_date+"</td>"+
                "<td>"+data[i].approval_authority_remark+"</td>";
            field += "/<tr>";
        }
        field += "/<tr>";
        $("#iousettledamt").text(iousettledamt);
        $("#iousettledbillamt").text(iousettledbillamt);
        $("#iousettledtbody").html(field);
    }
}
function openSlider1(slideId) 
{
    // Hide all slides
    document.querySelectorAll('.sfsidenav1 > div').forEach(slide => {
        slide.style.display = 'none';
    });
    // Show the selected slide
    const selectedSlide = document.getElementById(slideId);
    if (selectedSlide) {
        selectedSlide.style.display = 'block';
    }
    // Show the slider
    const slider = document.getElementById('slidercontent1');
    slider.style.display = 'block';
    slider.children[0].style.width = '85%';
}
function closeSlider1()
{
    const slider = document.getElementById('slidercontent1');
    slider.style.display = 'none';
}
//EMPLOYEE GROWTH HISTORY
function employeegrowthheader()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66245&cloudcode=hrms&ids=valuestring/&valuestring=Employee_Growth_statement_Header@d@Mansi%20Rane
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66245&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Employee_Growth_statement_Header@d@${encodeURIComponent(username)}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);

    if(data.length == 0 || data[0].txt == "txt is null" || data[0].txt == null || data[0].txt == undefined || data == '')
    {
        document.getElementById("egheader").innerText ='No Data Found';
        return;
    }
    data = JSON.parse(data[0].txt);
    var temp_data = data[0].result;
    temp_data = temp_data.replace("is completed","has completed");
    document.getElementById("egheader").innerText = temp_data;
}
function numberofyear() 
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66245&cloudcode=hrms&ids=valuestring/&valuestring=No_of_years@d@Mansi Rane@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66245&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=No_of_years@d@${encodeURIComponent(username)}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);

    if (data[0].txt === "txt is null")
    {
        document.getElementById("yearnumber").innerText = '0';
    }
    else if (data[0].no_of_year === null)
    {
        data = JSON.parse(data[0].txt);           
        document.getElementById("yearnumber").innerText = '0';
    }
    else
    {
        data = JSON.parse(data[0].txt);           
        document.getElementById("yearnumber").innerText = data[0].no_of_year;
    }
}
function numberofpromotions() 
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66245&cloudcode=hrms&ids=valuestring/&valuestring=No_of_promotion@d@Ramesh@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66245&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=No_of_promotion@d@${encodeURIComponent(username)}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);
    data = JSON.parse(data[0].txt);
    if (data[0].txt === "txt is null" || data[0].no_of_promotion === null)
    {
        document.getElementById("promotionsnumber").innerText = '0';
    }
    else
    {
        document.getElementById("promotionsnumber").innerText = data[0].no_of_promotion;
    }
}
function numberofincreaments() 
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66245&cloudcode=hrms&ids=valuestring/&valuestring=No_of_increments@d@Mansi Rane@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66245&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=No_of_increments@d@${encodeURIComponent(username)}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);

    data = JSON.parse(data[0].txt);
    if (data[0].txt === "txt is null" || data[0].no_of_increments === null)
    {
        document.getElementById("increamentsnumber").innerText = '0';
    }
    else
    {
        document.getElementById("increamentsnumber").innerText = data[0].no_of_increments;
    }
}
function createHourChart() {
    var fild = "";
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66245&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=designation_location@d@${encodeURIComponent(username)}@d@${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);
    
    if (data[0].txt === "txt is null") {
        fild = '<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
        document.getElementById("column-chart").innerHTML = fild;
    } else {
        data = JSON.parse(data[0].txt);
        var seriesData = data.map(function (item) {
            return { category: item.designation, value: item.count, total: item.years_with_company, location: item.location };
        });

        var colorArray = [
            '#00A5E3', '#8DD7BF', '#FF96C5', '#FF5768', '#FFBF65', '#FC6238', '#FFD872', '#F2D4CC',
            '#E77577', '#6C88C4', '#C05780', '#FF828B', '#E7C582', '#00B0BA', '#0065A2', '#00CDAC',
            '#FF6F68', '#FFDACC', '#FF60A8', '#CFF800', '#FF5C77', '#4DD091', '#FFEC59', '#FFA23A',
            '#74737A', '#B0E0E6', '#ffc3a0', '#E67451', '#1589FF', '#FF6700', '#E6A9EC', '#C5908E',
            '#C35817', '#F6358A', '#E799A3', '#01F9C6', '#800080', '#F660AB', '#E238EC', '#7575CF',
            '#800000', '#3090C7', '#B041FF', '#4E9258', '#DA8A67', '#F8B88B', '#468499', '#FF7722',
            '#B048B5', '#3EA99F', '#C24641', '#66cdaa', '#822EFF', '#FF7900', '#E5E4E2', '#AB784E',
            '#3CB371', '#CB6D51', '#ADDFFF', '#14A3C7', '#E0E5E5', '#C0C6C7', '#93FFE8', '#bada55',
            '#FDEEF4', '#C6DEFF', '#1569C7', '#B76734', '#5CB3FF', '#FFFF33', '#EDDA74', '#888B90'
        ];

        // Map to store unique location-to-color mapping
        var locationColorMap = {};
        var colorIndex = 0;

        var chartContainer = $("#column-chart");
        var chartWidth = $(window).width() * 0.36;

        $("#column-chart").kendoChart({
            dataSource: {
                data: seriesData
            },
            chartArea: {
                width: chartWidth,
            },
            legend: {
                visible: true,
                position: "bottom"
            },
            seriesDefaults: {
                type: "column"
            },
            series: [{
                field: "value",
                name: "Designation",
                color: function (point) {
                    var location = point.dataItem.location;
                    if (!locationColorMap[location]) {
                        locationColorMap[location] = colorArray[colorIndex % colorArray.length];
                        colorIndex++;
                    }
                    return locationColorMap[location];
                }
            }, {
                type: "line",
                field: "value",
                categoryField: "category", 
                name: "Tenure",
                color: "red"
            }],
            categoryAxis: {
                field: "category",
                labels: {
                    template: function(e) {
                        var category = e.value;
                        return category.length > 5 ? category.substring(0, 5) + "..." : category; // Shorten to 5 characters
                    },
                    rotation: -45, // Optional: rotate if needed
                    // visual: function(e) {
                    //     var label = e.createVisual();
                    //     $(label.domElement).attr("title", e.dataItem.category); // Add full name as tooltip
                    //     return label;
                    // }
                },
                majorGridLines: {
                    visible: false
                }
            },
            valueAxis: {
                title: {
                    text: "Year"
                },
                line: {
                    visible: false
                },
                majorGridLines: {
                    visible: false
                }
            },
            tooltip: {
            visible: true,
            template: function (e) {
                var categoryValue = e.category;      // Get the x-axis (category) value
                var designation = e.dataItem.designation; // Assuming 'designation' is in your data
                var tenure = e.dataItem.tenure;      // Assuming 'tenure' is in your data
                var count = e.dataItem.total;        // Using 'total' for the count field (as per your series configuration)
                var year = e.value; 
               
                if (e.series.name === "Designation") {
                    // return `Category: ${categoryValue}<br>Designation: ${designation}<br>Location: ${e.dataItem.location}`;
                    return `Designation: ${categoryValue}<br>Year: ${year}<br>Location: ${e.dataItem.location}`;
                 } 
                
            }
        }

        });
    }
}



function createCharteg()
{
    try
    {
        var fild = "";
        var getUrl = window.location;
        var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
        baseurl = baseurl.split("pages")[0];
        var cloudcode =  window.targetcloud;
        var username =  window.targetuser;
        var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

        var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66245&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Salary_Increments@d@${encodeURIComponent(username)}@d@${tokenParam}`;
        data = callajax(urltotal);
        data = JSON.parse(data);

        if (data[0].txt === "txt is null")
        {
            fild ='<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
            document.getElementById("chartDesignation").innerHTML = fild;
            return;
        }
        data = JSON.parse(data[0].txt);
        if(data[0].year === null | data[0].highest_salary === null || data[0].lowest_salary === null)
        {
            fild ='<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 100%;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
            document.getElementById("chartDesignation").innerHTML = fild;
        }
        else
        {
            dataarray= []
            xaxis = []
            for(var i=0;i<data.length;i++)
            {
                tempdataarray = []
                tempdataarray.push(data[i].lowest_salary)
                tempdataarray.push(data[i].highest_salary)
                dataarray.push(tempdataarray)
                if(!xaxis.includes(data[i].year))
                {
                    xaxis.push(data[i].year);
                }
            }
            var chartContainer = $("#chartDesignation");
            var chartWidth = $(window).width() * 0.36;
            $("#chartDesignation").kendoChart({
                series: [{
                    type: "rangeArea",
                    data: dataarray,
                    markers: { visible: true } //  Shows dots at min & max salary points
                }],
                seriesDefaults: {
                    labels: {
                        visible: false, // Hide default labels
                        position: "center",
                        from: {
                            template: "#= value.from # k",
                        },
                        to: {
                            template: "#= value.to # k",
                        }
                    }
                },
                chartArea: {
                    width: chartWidth,
                },
                categoryAxis: {
                    categories: xaxis,
                    labels: {
                        rotation: "auto"
                    }
                },
                tooltip: {
                    visible: true,
                    background: "#ffffff", //  White background
                    color: "#333", //  Text color
                    border: { width: 1, color: "#ccc" }, //  Border for tooltip
                    padding: { left: 10, right: 10, top: 5, bottom: 5 }, //  Custom padding (Requires CSS workaround)
                    template: `<div style="padding: 8px; font-size: 14px;">
                                    <strong>Avg Min Sal:</strong> #= value.from #<br>
                                    <strong>Avg Max Sal:</strong> #= value.to #</div>`
                }
            });

        }
    }
    catch (error)
    {
        console.error('Error in employeenameinputdrop function :', error);
    }
}
function growthstatement()
{
    var fild = "";
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var cloudcodenew = window.targetcloud ? `&cloudcode=${encodeURIComponent(window.targetcloud)}` : "";
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66245&cloudcode=hrms&ids=valuestring/&valuestring=Growth_statement@d@Mansi Rane@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66245&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Growth_statement@d@${encodeURIComponent(username)}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);

    data = data[0].txt;
    fild = '<table>' +
        '<thead>' +
        '<tr>' +
        '<td>Date</td>' +
        '<td>Steps</td>' +
        '<td>Location</td>' +
        '<td>Designation</td>' +
        '<td>Grade</td>' +
        '<td></td>' +
        '</tr>' +
        '</thead>';
    var tablebody = "";

    if (data === "txt is null")
    {
        tablebody = `<tr><td colspan="6" style="text-align:center"> <div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 300px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></td></tr>`;
        // tablebody += '</table>';
        // document.getElementById("gsbody").innerHTML = fild + tablebody;

        fild += "<tbody>" + tablebody + "</tbody></table>";
        document.getElementById("gsbody").innerHTML = fild;
    }
    else
    {
        data = JSON.parse(data);
        for (var i = 0; i < data.length; i++)
        {
            tablebody += '<tr>' +
                '<td>' + (data[i].date ? data[i].date : '') + '</td>' +
                '<td>' + (data[i].promotion ? data[i].promotion : '') + '</td>' +
                '<td>' + (data[i].location ? data[i].location : '') + '</td>' +
                '<td>' + (data[i].designation ? data[i].designation : '') + '</td>' +
                '<td>' + (data[i].grade ? data[i].grade : '') + '</td>';
            // Check if promotion is 'joining'
            if (data[i].promotion.toLowerCase() == "joining")
            {
                tablebody += '<td></td>';
            }
            else
            {
                tablebody += '<td><a href="/../sendMailReport.do?actn=PrintData&idlist=@&fieldid=' + data[i].id + '&fieldId=' + data[i].id + '&fieldValue=&formid=2181&matchingFields=&reportid=' + data[i].id + '&moduleconditions=&reportname=Increment%20Letter%20Type%201 '+ cloudcodenew + tokenParam +'" target="_blank"><img src="./images/direct_download.svg" alt="Download"></a></td>';
            }
            tablebody += '</tr>';
        }
        tablebody += '</table>';
        document.getElementById("gsbody").innerHTML = fild + tablebody;
    }
}

function employeelifecycle()
{
    var fild = "";
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66245&cloudcode=hrms&ids=valuestring/&valuestring=Growth_statement_cycle@d@Mansi%20Rane@d@
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66245&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Growth_statement_cycle@d@${encodeURIComponent(username)}@d@${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);

    if (data[0].txt === "txt is null")
    {
        fild ='<div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 300px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div>';
        document.getElementById("timelinelifecycle").innerHTML = fild;
        return;
    }
    data = JSON.parse(data[0].txt);
    $("#timelinelifecycle").html('');    

    var timeline = $("#timelinelifecycle").data("kendoTimeline");
    if (timeline) {
        timeline.destroy();
        $("#timelinelifecycle").empty(); // Clear previous content
    }

    var events = [];
    for (var i = 0; i < data.length; i++)
    {
        events.push({
            title: data[i].designation,
            description: data[i].location,
            date: new Date(data[i].date)
        });
    }

    $("#timelinelifecycle").kendoTimeline({
        dataSource: {
            data: events,
            schema: {
                model: {
                    fields: {
                        date: {
                        type: "date",
                        format: "YYYY-MM-DD"
                        },
                    }
                }
            }
        },
        orientation: "horizontal",
        eventTemplate: kendo.template($("#eventTemplatetimeline").html()),
    });
}
employeelifecycle()
function achievements_awards()
{
    var fild = "";
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    // https://hrms.autonomouserp.com/getFunction.do?actn=getsqljsondata&sqlfieldid=66245&cloudcode=hrms&ids=valuestring/&valuestring=Achievements@d@ERP%20Admin
    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66245&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Achievements@d@${encodeURIComponent(username)}${tokenParam}`
    data = callajax(urltotal);
    data = JSON.parse(data);
    data = data[0].txt;
    var tablebody = '';
    if (data === "txt is null")
    {
        tablebody = `<tr><td colspan="3" style="text-align:center"> <div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 185px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></td></tr>`;
        document.getElementById("achievetabletbody").innerHTML = tablebody;
    }
    else
    {
        data = JSON.parse(data);
        for (var i = 0; i < data.length; i++)
        {
            tablebody +=
                '<tr>'+
                    '<td>'+(i+1)+'</td>'+
                    '<td>'+data[i].achievements+'</td>'+
                    '<td>'+data[i].award_dates+'</td>'+
                '</tr>';
        }
        document.getElementById("achievetabletbody").innerHTML = tablebody;
    }
}
function employeegrowth_achievements()
{
    var fild = "";
    var getUrl = window.location; 
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

    var urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=66245&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Achievements_vs_Awards@d@${encodeURIComponent(username)}${tokenParam}`;
    data = callajax(urltotal);
    data = JSON.parse(data);

    data = data[0].txt;

    if (data === "txt is null")
    {
        const fild = 
            `<table style="border-radius: 10px;">
                <thead style="background-color: #E8ECF9; color: #101010;">
                    <tr>
                        <td>Achievements</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                </thead>
                <tbody>
                    <tr><td colspan="9" style="text-align:center"> <div style="display: flex;justify-content: center;align-items: center;flex-direction: column;height: 185px;gap: 10px;"> <img src="./images/data_not_found.svg" alt="" class="no-data-image"><div class="no-data">Data Not Found</div></div></td></tr>
                </tbody>
            </table>`;
        document.getElementById("achiev").innerHTML = fild;
    } 
    else
    {
        data = JSON.parse(data);
        var yeararray = [];
        const uniqueYears = [...new Set(data.map(item => item.years))];
        let fild = `<table style="border-radius: 10px;">
                            <thead style="background-color: #E8ECF9; color: #101010;">
                                <tr>
                                    <td>Achievements</td>`;
        uniqueYears.forEach(year => {
            yeararray.push(year);
            fild += `<td>${year}</td>`;
        });
        fild += `</tr>
                    </thead>
                    <tbody>`;
        for(var i=0; i<data.length; i++)
        {
            var tempyear = data[i].years;
            fild += "<tr>";
            fild += "<td>"+data[i].achievements+"</td>";
            for(var j=0; j<yeararray.length; j++)
            {
                if(yeararray[j]==tempyear)
                {
                    fild += "<td>"+data[i].award_dates+"</td>";
                }
                else
                {
                    fild += "<td>-</td>";
                }
            }
            fild += "</tr>";
        }
        fild += `</tbody></table>`;
        document.getElementById("achiev").innerHTML = fild;
    }
}
function employeegrowth()
{
    employeegrowthheader();
    numberofyear();
    numberofpromotions();
    numberofincreaments();
    createHourChart();
    createCharteg();
    growthstatement();
    employeelifecycle();
    achievements_awards();
    employeegrowth_achievements();
    hello();
}
function hello(){
    setTimeout(() =>{
        employeelifecycle()
    }, 500);
}


// location
function initAttendaceMap()
{
    var id = "field39792";
    navigator.geolocation.getCurrentPosition
        (function (position) 
        {
            Latitude = position.coords.latitude;
            Longitude = position.coords.longitude;
            if(document.getElementById(id+'mapdiv'))
            {
                searchmap = new google.maps.Map(document.getElementById(id+'mapdiv'), {
                center: {lat: Latitude, lng: Longitude},
                zoom: 13,
                mapTypeId: 'roadmap'
                });
            }

            searchmap.setCenter({lat: Latitude, lng: Longitude});
            userMarker = new google.maps.Marker({
                    position: new google.maps.LatLng(Latitude,Longitude),
                    map: searchmap,
                    title: ''
        });

                markerPosition = new google.maps.LatLng(  parseFloat(Latitude) , parseFloat(Longitude) );
    }, 
    onMapError, { enableHighAccuracy: true });
}

function check_location_updates(){
   var googleApikey = window.googleapikey
    // $("head").append("<script id='location_search_script' language=javascript src='https://maps.googleapis.com/maps/api/js?key="+top.$("[name='GoogleApiKey']").val()+"&libraries=places&callback=initAttendaceMap'><//script>");
    $("head").append("<script id='location_search_script' language=javascript src='https://maps.googleapis.com/maps/api/js?key="+ googleApikey +"&libraries=places&callback=initAttendaceMap'><//script>");
    initAttendaceMap();
}
check_location_updates();

function onMapError(error) {
				    console.log('code: ' + error.code + '\n' +
				        'message: ' + error.message + '\n');
						$("#field39792mapdiv").html('<div style="margin-top: 10%;margin-left: auto;margin-right: auto;color: rgb(239 18 104 / 75%);width: 450px;text-align: center;">Location API not configured or configured wrongly. Please visit:<a target="_blank" href="https://strategicerp.com/knowledge-base-article.php?article=How%20to%20Create%20Google%20API%20Key&amp;vid=79" style="display: inline-block;float: none;color: #117cef;">click here</a></div>');
$("#field39792mapdiv").css({"border": "2px dashed rgb(239 18 104 / 50%)","border-radius":"7px"});
				}

function getLocation(idd, flag)
{
    // idd = $("#signin_loc_span")
    if( navigator.geolocation) {   
    // top.disable_form_add();
        navigator.geolocation.getCurrentPosition(function(position) {
        
        var lant=""; lant= position.coords.latitude ;
        var lang =""; lang= position.coords.longitude;

        Latitude = position.coords.latitude;
        Longitude = position.coords.longitude;
        var GoogleApiKey = window.googleapikey;
        

            $.ajax({
            url:"https://maps.googleapis.com/maps/api/geocode/json?latlng="+lant+","+lang+"&key="+GoogleApiKey,
            dataType:"json",
            // beforeSend:top.disable_form_add(),
            success:function(res){

                
                if(res.results.length>0 && typeof res.results[0].formatted_address !=undefined)
                    {
                idd.text(res.results[0].formatted_address);
                !flag && isWithinRadius(lant,lang);
                // window.lctn=res.results[0].formatted_address;
                    }

            },
            error:function(x,t)
            {
            //    window.lctn=""; set_location();

            },complete:function(){ 
                // top.disable_form_hide();
            }
            });

    }, function onError(error) {

        switch(error.code )
        {
            case 1:  console.log("User do not allow the app to retrieve position information"); break;
            case 2:  console.log("The device is not connected to a network or can't get a satellite fix"); break;
            case 3:  console.log("The device is unable to retrieve a position "); break;
            default: console.log("Oops! Something went wrong while retrieving location");  
        }
        /* top.alertc('code: '    + error.code    + '\n' +
                'message: ' + error.message + '\n');*/
        // top.disable_form_hide();
        // window.lctn=""; set_location();

    },{ timeout: 120000, enableHighAccuracy: true,maximumAge:60000 }
    );
        }
        else
        {
    //    window.lctn=""; set_location();
        }
}
async function isWithinRadius(lat1, lon1) {
    const R = 6371000; // Earth's radius in meters
    const toRadians = (degrees) => degrees * (Math.PI / 180);

        const getUrl = window.location;
        const baseurl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split("/")[1];
        const baseAPIUrl = baseurl.split("pages")[0];

        // Get the cloud code dynamically from the form
        const cloudcode =  window.targetcloud;
        var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";

        const urltotal = `${baseAPIUrl}getFunction.do?actn=getsqljsondata&sqlfieldid=65925&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=signin_location_radius@d@${encodeURIComponent(employeeidradius)}${tokenParam}`;


        // Fetch data from the API
        const response = await fetch(urltotal);
        if (!response.ok) {
            throw new Error("Failed to fetch API data");
        }
        const rawData = await response.json();
        const parsedData = JSON.parse(rawData[0].txt);

        if(parsedData[0].late_long == '' || parsedData[0].late_long == '@#@')
        {
            return;
        }

        // Extract radius and coordinates
        const radius = parsedData[0].radius;
        const latlong = parsedData[0].late_long;
        const coordinatesPart = latlong.split("@#@")[1];
        const coordinatePairs = coordinatesPart.split("@j@");

        // Loop through coordinates and check the distance
        for (let i = 0; i < coordinatePairs.length; i++) {
            const [lat2, lon2] = coordinatePairs[i].split(",").map(Number);

            const 1 = toRadians(lat1);
            const 2 = toRadians(lat2);
            const  = toRadians(lat2 - lat1);
            const  = toRadians(lon2 - lon1);

            const a =
                Math.sin( / 2) ** 2 +
                Math.cos(1) * Math.cos(2) * Math.sin( / 2) ** 2;
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));

            const distance = R * c;

            if (distance <= radius) {
                // showToast("You are within the radius!", "true");
                return;
            }
        }

        // If no coordinates match, show failure toast
        showToast("You Are Out Side The Radius", "false");
        document.getElementById("click_photo_signin").disabled = true;
        document.getElementById("click_photo_signout").disabled = true;
        return;
}
function check_sandwitch()
{
    var getUrl = window.location;
    var baseurl = getUrl.protocol + "//" + getUrl.host + "/"+getUrl.pathname.split("/")[1];
    baseurl = baseurl.split("pages")[0];
    var cloudcode =  window.targetcloud;
    var username =  window.targetuser;
    var tokenParam = window.token ? `&token=${encodeURIComponent(window.token)}` : "";
    var firstdate = $("#calendar").val();
    var lastdate = $("#calendar").val();
    // https://hrms.infiverse.ai/getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=hrms&ids=valuestring/&valuestring=Sandwich_Applicable@d@Atul%20Dangi@d@
    let urltotal = `${baseurl}getFunction.do?actn=getsqljsondata&sqlfieldid=65592&cloudcode=${encodeURIComponent(cloudcode)}&ids=valuestring/&valuestring=Sandwich_Applicable@d@${encodeURIComponent(username)}@d@${tokenParam}`;

    data = callajax(urltotal);
    data = JSON.parse(data);
    if(data == '' || data == [] || data[0].txt == "txt is null" || data[0].txt == null || data[0].txt == undefined ||  data.length == 0)
    {
        return 0;
    }
    data = JSON.parse(data[0].txt);
    var total_week_off = parseInt($("#circularprogressbar2").children("div:eq(1)").children("span").text());
    var new_absent = 0;
    if(data[0].column62805 == "true" || data[0].column62805)
    {
        $("td[id^='week-off-sta']").each(function(){
            var perv_id = "#attd-status-sta"+(parseInt($(this).attr("id").split("-")[2].replace("sta",""))-1);
            var curr_id = "#"+$(this).attr("id");
            var next_id = "#attd-status-sta"+(parseInt($(this).attr("id").split("-")[2].replace("sta",""))+1);
            console.log(perv_id+"===="+curr_id+"===="+next_id)
            console.log($(perv_id).text()+"=="+$(curr_id).text()+"=="+$(next_id).text())
            if($(perv_id).text()=="Absent" && $(next_id).text()=="Absent")
            {
                total_week_off--;
                new_absent++;
                $(curr_id).html(`<div style="border: 1px solid #EB4444;background: #FFF4F4;border-radius: 8px;padding: 5px;color: #EB4343;width: max-content;gap: 4px;display: flex;">Absent</div>`)
            }
        })
        $("#circularprogressbar2").kendoCircularGauge({
            value: total_week_off,
            color: "#FF5F98",
            scale: {
                min: 0,
                max: 31,
            },
            gaugeArea:{
                width: 100,
                height: 100
            },
            centerTemplate: '<span onclick="weekoff_click();" style="color: #: color #; cursor: pointer;">#= value == 365 ? "<span class=\'k-icon k-i-check\'></span>" : value #</span>'
        });
        var current_abesent = $("#circularprogressbar3").children("div:eq(1)").children("span").text();
        new_absent = new_absent + parseInt(current_abesent);
        $("#circularprogressbar3").kendoCircularGauge({
            value: new_absent,
            color: "#577FFB",
            scale: {
                min: 0,
                max: 31,
            },
            gaugeArea:{
                width: 100,
                height: 100
            },
            centerTemplate: '<span onclick="absent_click();" style="color: #: color #; cursor: pointer;">#= value == 365 ? "<span class=\'k-icon k-i-check\'></span>" : value #</span>'
        });
    }
}
</script>
<script id="eventTemplatetimeline" type="text/x-kendo-template">
    <div class="k-card-inner">
        <div class="k-card-header">
            <h5 class="k-card-title">#= data.title #</h5>
        </div>
        <div class="k-card-body">
            <div class="k-card-description">
                <p>#= data.description #</p>
                
            </div>
        </div>
    </div>
</script>
<script>
    // last visited tab auto selected function
    function openInNewTab(url) {
        window.open(url, '_blank');
    }

    document.addEventListener("DOMContentLoaded", function () {
    // Retrieve the last active tab ID from localStorage
    // let activeTabId = localStorage.getItem("activeTab");
    let activeTabId = null;
    try {
        activeTabId = localStorage.getItem("activeTab");
    } catch (e) {
        console.error("Error accessing localStorage for activeTab:", e);
    }

    if (activeTabId) {
        let activeTabButton = document.getElementById(activeTabId);
        if (activeTabButton) {
            // Activate the tab using Bootstrap
            let tab = new bootstrap.Tab(activeTabButton);
            tab.show();

            // Extract function name from onclick attribute and execute it
            let functionName = activeTabButton.getAttribute("onclick");
            if (functionName) {
                let funcMatch = functionName.match(/(\w+)\(\)/); // Extract function name
                if (funcMatch && typeof window[funcMatch[1]] === "function") {
                    setTimeout(() => window[funcMatch[1]](), 100); // Call function with slight delay
                }
            }
        }
    } else {
        // No active tab, select the "my profile" tab by default
        let profileTabButton = document.getElementById("pills-Profile-tab"); // Assuming the profile tab has this ID
        if (profileTabButton) {
            let tab = new bootstrap.Tab(profileTabButton);
            tab.show();
        }
    }

    // Store the active tab ID in localStorage when clicked
    document.querySelectorAll(".navdata").forEach(button => {
        button.addEventListener("click", function () {
            localStorage.setItem("activeTab", this.id);
        });
        });
    });

    document.querySelector(".calendar-icon").addEventListener("click", function() {
    document.getElementById("calendar").focus(); // Triggers the input field
    });
    // Check camera permission when iframe loads
    navigator.permissions.query({ name: 'camera' }).then(function (permissionStatus) {
        console.log('Camera permission state:', permissionStatus.state); // 'granted', 'prompt', or 'denied'
    });
    
    window.addEventListener("message", async function (event) {
    if (event.origin !== "https://4.strategicerpcloud.com") return;

    if (event.data.type === 'OPEN_IFRAME_CAMERA') {
      try {
        // stream_signout = await navigator.mediaDevices.getUserMedia({ video: true, audio: false });
        // video_signout.srcObject = stream_signout;
        console.log("Camera started from parent trigger");
      } catch (err) {
        console.error("Camera access failed in iframe:", err);
      }
    }
  });

</script>
</body>
</html>
